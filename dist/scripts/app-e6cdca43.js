!function(){"use strict";
/**
   * @license AngularJS v1.8.0
   * (c) 2010-2020 Google, Inc. http://angularjs.org
   * License: MIT
   */!function(t){var e={objectMaxDepth:5,urlErrorParamsEnabled:!0};function n(t){if(!B(t))return e;U(t.objectMaxDepth)&&(e.objectMaxDepth=r(t.objectMaxDepth)?t.objectMaxDepth:NaN),U(t.urlErrorParamsEnabled)&&Z(t.urlErrorParamsEnabled)&&(e.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function r(t){return H(t)&&t>0}function i(t,n){n=n||Error;var r="https://errors.angularjs.org/1.8.0/",i=r.replace(".","\\.")+"[\\s\\S]*",a=new RegExp(i,"g");return function(){var i,o,s=arguments[0],l=arguments[1],u="["+(t?t+":":"")+s+"] ",c=ht(arguments,2).map((function(t){return Wt(t,e.objectMaxDepth)}));if(u+=l.replace(/\{\d+\}/g,(function(t){var e=+t.slice(1,-1);return e<c.length?c[e].replace(a,""):t})),u+="\n"+r+(t?t+"/":"")+s,e.urlErrorParamsEnabled)for(o=0,i="?";o<c.length;o++,i="&")u+=i+"p"+o+"="+encodeURIComponent(c[o]);return new n(u)}}var a,o,s,l,u=/^\/(.+)\/([a-z]*)$/,c="validity",d=Object.prototype.hasOwnProperty,h=function(t){return j(t)?t.toLowerCase():t},f=function(t){return j(t)?t.toUpperCase():t},p=[].slice,g=[].splice,m=[].push,v=Object.prototype.toString,y=Object.getPrototypeOf,b=i("ng"),S=t.angular||(t.angular={}),w=0;function T(t){if(null==t||K(t))return!1;if(z(t)||j(t)||o&&t instanceof o)return!0;var e="length"in Object(t)&&t.length;return H(e)&&(e>=0&&e-1 in t||"function"==typeof t.item)}function x(t,e,n){var r,i;if(t)if(Y(t))for(r in t)"prototype"!==r&&"length"!==r&&"name"!==r&&t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else if(z(t)||T(t)){var a="object"!=typeof t;for(r=0,i=t.length;r<i;r++)(a||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==x)t.forEach(e,n,t);else if(V(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)d.call(t,r)&&e.call(n,t[r],r,t);return t}function _(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function k(t){return function(e,n){t(n,e)}}function E(){return++w}function $(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function A(t,e,n){for(var r=t.$$hashKey,i=0,a=e.length;i<a;++i){var o=e[i];if(B(o)||Y(o))for(var s=Object.keys(o),l=0,u=s.length;l<u;l++){var c=s[l],d=o[c];n&&B(d)?W(d)?t[c]=new Date(d.valueOf()):q(d)?t[c]=new RegExp(d):d.nodeName?t[c]=d.cloneNode(!0):nt(d)?t[c]=d.clone():"__proto__"!==c&&(B(t[c])||(t[c]=z(d)?[]:{}),A(t[c],[d],!0)):t[c]=d}}return $(t,r),t}function C(t){return A(t,p.call(arguments,1),!1)}function D(t){return A(t,p.call(arguments,1),!0)}function M(t){return parseInt(t,10)}a=t.document.documentMode;var R=Number.isNaN||function(t){return t!=t};function O(t,e){return C(Object.create(t),e)}function I(){}function L(t){return t}function P(t){return function(){return t}}function F(t){return Y(t.toString)&&t.toString!==v}function N(t){return void 0===t}function U(t){return void 0!==t}function B(t){return null!==t&&"object"==typeof t}function V(t){return null!==t&&"object"==typeof t&&!y(t)}function j(t){return"string"==typeof t}function H(t){return"number"==typeof t}function W(t){return"[object Date]"===v.call(t)}function z(t){return Array.isArray(t)||t instanceof Array}function G(t){switch(v.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function Y(t){return"function"==typeof t}function q(t){return"[object RegExp]"===v.call(t)}function K(t){return t&&t.window===t}function X(t){return t&&t.$evalAsync&&t.$watch}function Z(t){return"boolean"==typeof t}function J(t){return t&&Y(t.then)}I.$inject=[],L.$inject=[];var Q=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var tt=function(t){return j(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function nt(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function rt(t){return h(t.nodeName||t[0]&&t[0].nodeName)}function it(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function at(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function ot(t,e,n){var i,a,o=[],s=[];if(n=r(n)?n:NaN,e){if((a=e)&&H(a.length)&&Q.test(v.call(a))||(i=e,"[object ArrayBuffer]"===v.call(i)))throw b("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw b("cpi","Can't copy! Source and destination are identical.");return z(e)?e.length=0:x(e,(function(t,n){"$$hashKey"!==n&&delete e[n]})),o.push(t),s.push(e),l(t,e,n)}return u(t,n);function l(t,e,n){if(--n<0)return"...";var r,i=e.$$hashKey;if(z(t))for(var a=0,o=t.length;a<o;a++)e.push(u(t[a],n));else if(V(t))for(r in t)e[r]=u(t[r],n);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=u(t[r],n));else for(r in t)d.call(t,r)&&(e[r]=u(t[r],n));return $(e,i),e}function u(t,e){if(!B(t))return t;var n=o.indexOf(t);if(-1!==n)return s[n];if(K(t)||X(t))throw b("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=function(t){switch(v.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(u(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(Y(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===i&&(i=z(t)?[]:Object.create(y(t)),r=!0),o.push(t),s.push(i),r?l(t,i,e):i}}function st(t,e){return t===e||t!=t&&e!=e}function lt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,a=typeof t;if(a===typeof e&&"object"===a){if(!z(t)){if(W(t))return!!W(e)&&st(t.getTime(),e.getTime());if(q(t))return!!q(e)&&t.toString()===e.toString();if(X(t)||X(e)||K(t)||K(e)||z(e)||W(e)||q(e))return!1;for(r in i=Bt(),t)if("$"!==r.charAt(0)&&!Y(t[r])){if(!lt(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!(r in i)&&"$"!==r.charAt(0)&&U(e[r])&&!Y(e[r]))return!1;return!0}if(!z(e))return!1;if((n=t.length)===e.length){for(r=0;r<n;r++)if(!lt(t[r],e[r]))return!1;return!0}}return!1}var ut=function(){if(!U(ut.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ut.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ut.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ut.rules},ct=function(){if(U(ct.name_))return ct.name_;var e,n,r,i,a=Et.length;for(n=0;n<a;++n)if(r=Et[n],e=t.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return ct.name_=i};function dt(t,e,n){return t.concat(p.call(e,n))}function ht(t,e){return p.call(t,e||0)}function ft(t,e){var n=arguments.length>2?ht(arguments,2):[];return!Y(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,dt(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function pt(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:K(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":X(n)&&(r="$SCOPE"),r}function gt(t,e){if(!N(t))return H(e)||(e=e?2:null),JSON.stringify(t,pt,e)}function mt(t){return j(t)?JSON.parse(t):t}var vt=/:/g;function yt(t,e){t=t.replace(vt,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return R(n)?e:n}function bt(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function St(t,e,n){n=n?-1:1;var r=t.getTimezoneOffset();return bt(t,n*(yt(e,r)-r))}function wt(t){t=o(t).clone().empty();var e=o("<div></div>").append(t).html();try{return t[0].nodeType===jt?h(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,(function(t,e){return"<"+h(e)}))}catch(t){return h(e)}}function Tt(t){try{return decodeURIComponent(t)}catch(t){}}function xt(t){var e={};return x((t||"").split("&"),(function(t){var n,r,i;t&&(r=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(r=t.substring(0,n),i=t.substring(n+1)),U(r=Tt(r))&&(i=!U(i)||Tt(i),d.call(e,r)?z(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i))})),e}function _t(t){return kt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function kt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var Et=["ng-","data-ng-","ng:","x-ng-"];var $t=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every((function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(t.document);function At(e,n){var r,i,a={};if(x(Et,(function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,i=e.getAttribute(n))})),x(Et,(function(t){var n,a=t+"app";!r&&(n=e.querySelector("["+a.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(a))})),r){if(!$t)return void t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");a.strictDi=null!==function(t,e){var n,r,i=Et.length;for(r=0;r<i;++r)if(n=Et[r]+e,j(n=t.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,i?[i]:[],a)}}function Ct(e,n,r){B(r)||(r={});r=C({strictDi:!1},r);var i=function(){if((e=o(e)).injector()){var i=e[0]===t.document?"document":wt(e);throw b("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var a=Je(n,r.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply((function(){e.data("$injector",r),n(e)(t)}))}]),a},a=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(t&&a.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(a,"")),t&&!s.test(t.name))return i();t.name=t.name.replace(s,""),S.resumeBootstrap=function(t){return x(t,(function(t){n.push(t)})),i()},Y(S.resumeDeferredBootstrap)&&S.resumeDeferredBootstrap()}function Dt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function Mt(t){var e=S.element(t).injector();if(!e)throw b("test","no injector found for element argument to getTestability");return e.get("$$testability")}var Rt=/[A-Z]/g;function Ot(t,e){return e=e||"_",t.replace(Rt,(function(t,n){return(n?e:"")+t.toLowerCase()}))}var It=!1;function Lt(){fe.legacyXHTMLReplacement=!0}function Pt(t,e,n){if(!t)throw b("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function Ft(t,e,n){return n&&z(t)&&(t=t[t.length-1]),Pt(Y(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Nt(t,e){if("hasOwnProperty"===t)throw b("badname","hasOwnProperty is not a valid {0} name",e)}function Ut(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=o(p.call(t,0,i))),e.push(n));return e||t}function Bt(){return Object.create(null)}function Vt(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!F(t)||z(t)||W(t)?gt(t):t.toString()}return t}var jt=3;function Ht(t,e){if(z(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(B(t))for(var i in e=e||{},t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i]);return e||t}function Wt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):N(t)?"undefined":"string"!=typeof t?function(t,e){var n=[];return r(e)&&(t=S.copy(t,null,e)),JSON.stringify(t,(function(t,e){if(B(e=pt(t,e))){if(n.indexOf(e)>=0)return"...";n.push(e)}return e}))}(t,e):t}var zt={full:"1.8.0",major:1,minor:8,dot:0,codeName:"nested-vaccination"};fe.expando="ng339";var Gt=fe.cache={},Yt=1;fe._data=function(t){return this.cache[t[this.expando]]||{}};var qt=/-([a-z])/g,Kt=/^-ms-/,Xt={mouseleave:"mouseout",mouseenter:"mouseover"},Zt=i("jqLite");function Jt(t,e){return e.toUpperCase()}function Qt(t){return t.replace(qt,Jt)}var te=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ee=/<|&#?\w+;/,ne=/<([\w:-]+)/,re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ie={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};ie.tbody=ie.tfoot=ie.colgroup=ie.caption=ie.thead,ie.th=ie.td;var ae={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(var oe in ie){var se=ie[oe],le=se.slice().reverse();ae[oe]=[le.length,"<"+le.join("><")+">","</"+se.join("></")+">"]}function ue(t){return!ee.test(t)}function ce(t){var e=t.nodeType;return 1===e||!e||9===e}function de(e,n){var r,i,o,s,l,u=n.createDocumentFragment(),c=[];if(ue(e))c.push(n.createTextNode(e));else{if(r=u.appendChild(n.createElement("div")),i=(ne.exec(e)||["",""])[1].toLowerCase(),s=fe.legacyXHTMLReplacement?e.replace(re,"<$1></$2>"):e,a<10)for(o=ae[i]||ae._default,r.innerHTML=o[1]+s+o[2],l=o[0];l--;)r=r.firstChild;else{for(l=(o=ie[i]||[]).length;--l>-1;)r.appendChild(t.document.createElement(o[l])),r=r.firstChild;r.innerHTML=s}c=dt(c,r.childNodes),(r=u.firstChild).textContent=""}return u.textContent="",u.innerHTML="",x(c,(function(t){u.appendChild(t)})),u}ae.optgroup=ae.option;var he=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function fe(e){if(e instanceof fe)return e;var n,r,i,a;if(j(e)&&(e=tt(e),n=!0),!(this instanceof fe)){if(n&&"<"!==e.charAt(0))throw Zt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new fe(e)}n?ke(this,(r=e,i=i||t.document,(a=te.exec(r))?[i.createElement(a[1])]:(a=de(r,i))?a.childNodes:[])):Y(e)?De(e):ke(this,e)}function pe(t){return t.cloneNode(!0)}function ge(t,e){!e&&ce(t)&&o.cleanData([t]),t.querySelectorAll&&o.cleanData(t.querySelectorAll("*"))}function me(t){var e;for(e in t)return!1;return!0}function ve(t){var e=t.ng339,n=e&&Gt[e],r=n&&n.events,i=n&&n.data;i&&!me(i)||r&&!me(r)||(delete Gt[e],t.ng339=void 0)}function ye(t,e,n,r){if(U(r))throw Zt("offargs","jqLite#off() does not support the `selector` argument");var i=Se(t),a=i&&i.events,o=i&&i.handle;if(o){if(e){var s=function(e){var r=a[e];U(n)&&at(r||[],n),U(n)&&r&&r.length>0||(t.removeEventListener(e,o),delete a[e])};x(e.split(" "),(function(t){s(t),Xt[t]&&s(Xt[t])}))}else for(e in a)"$destroy"!==e&&t.removeEventListener(e,o),delete a[e];ve(t)}}function be(t,e){var n=t.ng339,r=n&&Gt[n];r&&(e?delete r.data[e]:r.data={},ve(t))}function Se(t,e){var n=t.ng339,r=n&&Gt[n];return e&&!r&&(t.ng339=n=++Yt,r=Gt[n]={events:{},data:{},handle:void 0}),r}function we(t,e,n){if(ce(t)){var r,i=U(n),a=!i&&e&&!B(e),o=!e,s=Se(t,!a),l=s&&s.data;if(i)l[Qt(e)]=n;else{if(o)return l;if(a)return l&&l[Qt(e)];for(r in e)l[Qt(r)]=e[r]}}}function Te(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function xe(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;x(e.split(" "),(function(t){t=tt(t),r=r.replace(" "+t+" "," ")})),r!==n&&t.setAttribute("class",tt(r))}}function _e(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;x(e.split(" "),(function(t){t=tt(t),-1===r.indexOf(" "+t+" ")&&(r+=t+" ")})),r!==n&&t.setAttribute("class",tt(r))}}function ke(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function Ee(t,e){return $e(t,"$"+(e||"ngController")+"Controller")}function $e(t,e,n){9===t.nodeType&&(t=t.documentElement);for(var r=z(e)?e:[e];t;){for(var i=0,a=r.length;i<a;i++)if(U(n=o.data(t,r[i])))return n;t=t.parentNode||11===t.nodeType&&t.host}}function Ae(t){for(ge(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Ce(t,e){e||ge(t);var n=t.parentNode;n&&n.removeChild(t)}function De(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var Me=fe.prototype={ready:De,toString:function(){var t=[];return x(this,(function(e){t.push(""+e)})),"["+t.join(", ")+"]"},eq:function(t){return o(t>=0?this[t]:this[this.length+t])},length:0,push:m,sort:[].sort,splice:[].splice},Re={};x("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(t){Re[h(t)]=t}));var Oe={};x("input,select,option,textarea,button,form,details".split(","),(function(t){Oe[t]=!0}));var Ie={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Le(t,e){var n=Re[e.toLowerCase()];return n&&Oe[rt(t)]&&n}function Pe(t,e,n){n.call(t,e)}function Fe(t,e,n){var r=e.relatedTarget;r&&(r===t||he.call(t,r))||n.call(t,e)}function Ne(){this.$get=function(){return C(fe,{hasClass:function(t,e){return t.attr&&(t=t[0]),Te(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),_e(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),xe(t,e)}})}}function Ue(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"===r||"object"===r&&null!==t?t.$$hashKey=r+":"+(e||E)():r+":"+t}x({data:we,removeData:be,hasData:function(t){for(var e in Gt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)be(t[e]),ye(t[e])}},(function(t,e){fe[e]=t})),x({data:we,inheritedData:$e,scope:function(t){return o.data(t,"$scope")||$e(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return o.data(t,"$isolateScope")||o.data(t,"$isolateScopeNoTemplate")},controller:Ee,injector:function(t){return $e(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:Te,css:function(t,e,n){if(e=function(t){return Qt(t.replace(Kt,"ms-"))}(e),!U(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var r,i=t.nodeType;if(i!==jt&&2!==i&&8!==i&&t.getAttribute){var a=h(e),o=Re[a];if(!U(n))return r=t.getAttribute(e),o&&null!==r&&(r=a),null===r?void 0:r;null===n||!1===n&&o?t.removeAttribute(e):t.setAttribute(e,o?a:n)}},prop:function(t,e,n){if(!U(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(N(e)){var n=t.nodeType;return 1===n||n===jt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(N(e)){if(t.multiple&&"select"===rt(t)){var n=[];return x(t.options,(function(t){t.selected&&n.push(t.value||t.text)})),n}return t.value}t.value=e},html:function(t,e){if(N(e))return t.innerHTML;ge(t,!0),t.innerHTML=e},empty:Ae},(function(t,e){fe.prototype[e]=function(e,n){var r,i,a=this.length;if(t!==Ae&&N(2===t.length&&t!==Te&&t!==Ee?e:n)){if(B(e)){for(r=0;r<a;r++)if(t===we)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(var o=t.$dv,s=N(o)?Math.min(a,1):a,l=0;l<s;l++){var u=t(this[l],e,n);o=o?o+u:u}return o}for(r=0;r<a;r++)t(this[r],e,n);return this}})),x({removeData:be,on:function(t,e,n,r){if(U(r))throw Zt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ce(t)){var i=Se(t,!0),a=i.events,o=i.handle;o||(o=i.handle=function(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],a=i?i.length:0;if(a){if(N(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||Pe;a>1&&(i=Ht(i));for(var l=0;l<a;l++)n.isImmediatePropagationStopped()||s(t,n,i[l])}};return n.elem=t,n}(t,a));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],l=s.length,u=function(e,r,i){var s=a[e];s||((s=a[e]=[]).specialHandlerWrapper=r,"$destroy"===e||i||t.addEventListener(e,o)),s.push(n)};l--;)e=s[l],Xt[e]?(u(Xt[e],Fe),u(e,void 0,!0)):u(e)}},off:ye,one:function(t,e,n){(t=o(t)).on(e,(function r(){t.off(e,n),t.off(e,r)})),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;ge(t),x(new fe(e),(function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e}))},children:function(t){var e=[];return x(t.childNodes,(function(t){1===t.nodeType&&e.push(t)})),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(1===n||11===n)for(var r=0,i=(e=new fe(e)).length;r<i;r++){var a=e[r];t.appendChild(a)}},prepend:function(t,e){if(1===t.nodeType){var n=t.firstChild;x(new fe(e),(function(e){t.insertBefore(e,n)}))}},wrap:function(t,e){var n,r,i;n=t,r=o(e).eq(0).clone()[0],(i=n.parentNode)&&i.replaceChild(r,n),r.appendChild(n)},remove:Ce,detach:function(t){Ce(t,!0)},after:function(t,e){var n=t,r=t.parentNode;if(r)for(var i=0,a=(e=new fe(e)).length;i<a;i++){var o=e[i];r.insertBefore(o,n.nextSibling),n=o}},addClass:_e,removeClass:xe,toggleClass:function(t,e,n){e&&x(e.split(" "),(function(e){var r=n;N(r)&&(r=!Te(t,e)),(r?_e:xe)(t,e)}))},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:pe,triggerHandler:function(t,e,n){var r,i,a,o=e.type||e,s=Se(t),l=s&&s.events,u=l&&l[o];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:I,type:o,target:t},e.type&&(r=C(r,e)),i=Ht(u),a=n?[r].concat(n):[r],x(i,(function(e){r.isImmediatePropagationStopped()||e.apply(t,a)})))}},(function(t,e){fe.prototype[e]=function(e,n,r){for(var i,a=0,s=this.length;a<s;a++)N(i)?U(i=t(this[a],e,n,r))&&(i=o(i)):ke(i,t(this[a],e,n,r));return U(i)?i:this}})),fe.prototype.bind=fe.prototype.on,fe.prototype.unbind=fe.prototype.off;var Be=Object.create(null);function Ve(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Ve.prototype={_idx:function(t){return t!==this._lastKey&&(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return R(t)?Be:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},has:function(t){return t=this._transformKey(t),-1!==this._idx(t)},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var je=Ve,He=[function(){this.$get=[function(){return je}]}],We=/^([^(]+?)=>/,ze=/^[^(]*\(\s*([^)]*)\)/m,Ge=/,/,Ye=/^\s*(_?)(\S+?)\1\s*$/,qe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ke=i("$injector");function Xe(t){return Function.prototype.toString.call(t)}function Ze(t){var e=Xe(t).replace(qe,"");return e.match(We)||e.match(ze)}function Je(t,e){e=!0===e;var n={},r="Provider",i=[],o=new je,s={$provide:{provider:p(g),factory:p(v),service:p((function(t,e){return v(t,["$injector",function(t){return t.instantiate(e)}])})),value:p((function(t,e){return v(t,P(e),!1)})),constant:p((function(t,e){Nt(t,"constant"),s[t]=e,c[t]=e})),decorator:function(t,e){var n=u.get(t+r),i=n.$get;n.$get=function(){var t=h.invoke(i,n);return h.invoke(e,null,{$delegate:t})}}}},u=s.$injector=b(s,(function(t,e){throw S.isString(e)&&i.push(e),Ke("unpr","Unknown provider: {0}",i.join(" <- "))})),c={},d=b(c,(function(t,e){var n=u.get(t+r,e);return h.invoke(n.$get,n,void 0,t)})),h=d;s.$injectorProvider={$get:P(d)},h.modules=u.modules=Bt();var f=y(t);return(h=d.get("$injector")).strictDi=e,x(f,(function(t){t&&h.invoke(t)})),h.loadNewModules=function(t){x(y(t),(function(t){t&&h.invoke(t)}))},h;function p(t){return function(e,n){if(!B(e))return t(e,n);x(e,k(t))}}function g(t,e){if(Nt(t,"service"),(Y(e)||z(e))&&(e=u.instantiate(e)),!e.$get)throw Ke("pget","Provider '{0}' must define $get factory method.",t);return s[t+r]=e}function m(t,e){return function(){var n=h.invoke(e,this);if(N(n))throw Ke("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function v(t,e,n){return g(t,{$get:!1!==n?m(t,e):e})}function y(t){Pt(N(t)||z(t),"modulesToLoad","not an array");var e,n=[];return x(t,(function(t){if(!o.get(t)){o.set(t,!0);try{j(t)?(e=l(t),h.modules[t]=e,n=n.concat(y(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):Y(t)||z(t)?n.push(u.invoke(t)):Ft(t,"module")}catch(e){throw z(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ke("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=u.get(r[0]);i[r[1]].apply(i,r[2])}}})),n}function b(t,o){function l(e,r){if(t.hasOwnProperty(e)){if(t[e]===n)throw Ke("cdep","Circular dependency found: {0}",e+" <- "+i.join(" <- "));return t[e]}try{return i.unshift(e),t[e]=n,t[e]=o(e,r),t[e]}catch(r){throw t[e]===n&&delete t[e],r}finally{i.shift()}}function u(t,n,r){for(var i=[],a=Je.$$annotate(t,e,r),o=0,s=a.length;o<s;o++){var u=a[o];if("string"!=typeof u)throw Ke("itkn","Incorrect injection token! Expected service name as string, got {0}",u);i.push(n&&n.hasOwnProperty(u)?n[u]:l(u,r))}return i}return{invoke:function(t,e,n,r){"string"==typeof n&&(r=n,n=null);var i=u(t,n,r);return z(t)&&(t=t[t.length-1]),function(t){if(a||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return Z(e)||(e=t.$$ngIsClass=/^class\b/.test(Xe(t))),e}(t)?(i.unshift(null),new(Function.prototype.bind.apply(t,i))):t.apply(e,i)},instantiate:function(t,e,n){var r=z(t)?t[t.length-1]:t,i=u(t,e,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:l,annotate:Je.$$annotate,has:function(e){return s.hasOwnProperty(e+r)||t.hasOwnProperty(e)}}}}function Qe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var a=n.document;function s(t){if(t){t.scrollIntoView();var e=function(){var t=l.yOffset;if(Y(t))t=t();else if(nt(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else H(t)||(t=0);return t}();if(e){var r=t.getBoundingClientRect().top;n.scrollBy(0,r-e)}}else n.scrollTo(0,0)}function l(t){var e,n,i;(t=j(t)?t:H(t)?t.toString():r.hash())?(e=a.getElementById(t))?s(e):(n=a.getElementsByName(t),i=null,Array.prototype.some.call(n,(function(t){if("a"===rt(t))return i=t,!0})),(e=i)?s(e):"top"===t&&s(null)):s(null)}return e&&i.$watch((function(){return r.hash()}),(function(e,n){var r,a;e===n&&""===e||(r=function(){i.$evalAsync(l)},"complete"===(a=a||t).document.readyState?a.setTimeout(r):o(a).on("load",r))})),l}]}Je.$$annotate=function(t,e,n){var r,i;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw j(n)&&n||(n=t.name||function(t){var e=Ze(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Ke("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);x(Ze(t)[1].split(Ge),(function(t){t.replace(Ye,(function(t,e,n){r.push(n)}))}))}t.$inject=r}}else z(t)?(Ft(t[i=t.length-1],"fn"),r=t.slice(0,i)):Ft(t,"fn",!0);return r};var tn=i("$animate"),en="ng-animate";function nn(t,e){return t||e?t?e?(z(t)&&(t=t.join(" ")),z(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function rn(t){return B(t)?t:{}}var an=function(){this.$get=I},on=function(){var t=new je,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:I,on:I,off:I,pin:I,push:function(o,s,l,u){u&&u(),(l=l||{}).from&&o.css(l.from),l.to&&o.css(l.to),(l.addClass||l.removeClass)&&function(n,o,s){var l=t.get(n)||{},u=i(l,o,!0),c=i(l,s,!1);(u||c)&&(t.set(n,l),e.push(n),1===e.length&&r.$$postDigest(a))}(o,l.addClass,l.removeClass);var c=new n;return c.complete(),c}};function i(t,e,n){var r=!1;return e&&x(e=j(e)?e.split(" "):z(e)?e:[],(function(e){e&&(r=!0,t[e]=n)})),r}function a(){x(e,(function(e){var n=t.get(e);if(n){var r=function(t){j(t)&&(t=t.split(" "));var e=Bt();return x(t,(function(t){t.length&&(e[t]=!0)})),e}(e.attr("class")),i="",a="";x(n,(function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:a+=(a.length?" ":"")+e)})),x(e,(function(t){i&&_e(t,i),a&&xe(t,a)})),t.delete(e)}})),e.length=0}}]},sn=["$provide",function(t){var e=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw tn("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.customFilter=function(t){return 1===arguments.length&&(r=Y(t)?t:null),r},this.classNameFilter=function(t){if(1===arguments.length&&(n=t instanceof RegExp?t:null)){var e=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(e.test(n.toString()))throw n=null,tn("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',en)}return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(1===n.nodeType)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(n,r,i,a){return r=r&&o(r),i=i&&o(i),e(n,r=r||i.parent(),i),t.push(n,"enter",rn(a))},move:function(n,r,i,a){return r=r&&o(r),i=i&&o(i),e(n,r=r||i.parent(),i),t.push(n,"move",rn(a))},leave:function(e,n){return t.push(e,"leave",rn(n),(function(){e.remove()}))},addClass:function(e,n,r){return(r=rn(r)).addClass=nn(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return(r=rn(r)).removeClass=nn(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return(i=rn(i)).addClass=nn(i.addClass,n),i.removeClass=nn(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,a){return(a=rn(a)).from=a.from?C(a.from,n):n,a.to=a.to?C(a.to,r):r,i=i||"ng-inline-animate",a.tempClasses=nn(a.tempClasses,i),t.push(e,"animate",a)}}}]}],ln=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t((function(){for(var t=0;t<e.length;t++)e[t]();e=[]}))}return function(){var t=!1;return n((function(){t=!0})),function(e){t?e():n(e)}}}]},un=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function a(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){r()?function(t){i(t,0,!1)}(t):e(t)},this._state=0}return a.chain=function(t,e){var n=0;!function r(){if(n===t.length)return void e(!0);t[n]((function(t){!1!==t?(n++,r()):e(!1)}))}()},a.all=function(t,e){var n=0,r=!0;function i(i){r=r&&i,++n===t.length&&e(r)}x(t,(function(t){t.done(i)}))},a.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:I,getPromise:function(){if(!this.promise){var e=this;this.promise=t((function(t,n){e.done((function(e){!1===e?n():t()}))}))}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick((function(){e._resolve(t)})))},_resolve:function(t){2!==this._state&&(x(this._doneCallbacks,(function(e){e(t)})),this._doneCallbacks.length=0,this._state=2)}},a}]},cn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){var i=r||{};i.$$prepared||(i=ot(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(e.css(i.from),i.from=null);var a,o=new n;return{start:s,end:s};function s(){return t((function(){!function(){i.addClass&&(e.addClass(i.addClass),i.addClass=null);i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null);i.to&&(e.css(i.to),i.to=null)}(),a||o.complete(),a=!0})),o}}}]};function dn(t,e,n,r,i){var a=this,s=t.location,l=t.history,u=t.setTimeout,c=t.clearTimeout,d={},h=i(n);a.isMock=!1,a.$$completeOutstandingRequest=h.completeTask,a.$$incOutstandingRequestCount=h.incTaskCount,a.notifyWhenNoOutstandingRequests=h.notifyWhenNoPendingTasks;var f,p,g=s.href,m=e.find("base"),v=null,y=r.history?function(){try{return l.state}catch(t){}}:I;_(),a.url=function(e,n,i){if(N(i)&&(i=null),s!==t.location&&(s=t.location),l!==t.history&&(l=t.history),e){var o=p===i;if(e=di(e).href,g===e&&(!r.history||o))return a;var u=g&&cr(g)===cr(e);return g=e,p=i,!r.history||u&&o?(u||(v=e),n?s.replace(e):u?s.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):s.href=e,s.href!==e&&(v=e)):(l[n?"replaceState":"pushState"](i,"",e),_()),v&&(v=e),a}return function(t){return t.replace(/#$/,"")}(v||s.href)},a.state=function(){return f};var b=[],S=!1;function w(){v=null,k()}var T=null;function _(){lt(f=N(f=y())?null:f,T)&&(f=T),T=f,p=f}function k(){var t=p;_(),g===a.url()&&t===f||(g=a.url(),p=f,x(b,(function(t){t(a.url(),f)})))}a.onUrlChange=function(e){return S||(r.history&&o(t).on("popstate",w),o(t).on("hashchange",w),S=!0),b.push(e),e},a.$$applicationDestroyed=function(){o(t).off("hashchange popstate",w)},a.$$checkUrlChange=k,a.baseHref=function(){var t=m.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},a.defer=function(t,e,n){var r;return e=e||0,n=n||h.DEFAULT_TASK_TYPE,h.incTaskCount(n),r=u((function(){delete d[r],h.completeTask(t,n)}),e),d[r]=n,r},a.defer.cancel=function(t){if(d.hasOwnProperty(t)){var e=d[t];return delete d[t],c(t),h.completeTask(I,e),!0}return!1}}function hn(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(t,e,n,r,i){return new dn(t,r,e,n,i)}]}function fn(){this.$get=function(){var t={};function e(e,n){if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var r=0,a=C({},n,{id:e}),o=Bt(),s=n&&n.capacity||Number.MAX_VALUE,l=Bt(),u=null,c=null;return t[e]={put:function(t,e){if(!N(e)){if(s<Number.MAX_VALUE)d(l[t]||(l[t]={key:t}));return t in o||r++,o[t]=e,r>s&&this.remove(c.key),e}},get:function(t){if(s<Number.MAX_VALUE){var e=l[t];if(!e)return;d(e)}return o[t]},remove:function(t){if(s<Number.MAX_VALUE){var e=l[t];if(!e)return;e===u&&(u=e.p),e===c&&(c=e.n),h(e.n,e.p),delete l[t]}t in o&&(delete o[t],r--)},removeAll:function(){o=Bt(),r=0,l=Bt(),u=c=null},destroy:function(){o=null,a=null,l=null,delete t[e]},info:function(){return C({},a,{size:r})}};function d(t){t!==u&&(c?c===t&&(c=t.n):c=t,h(t.n,t.p),h(t,u),(u=t).n=null)}function h(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return x(t,(function(t,n){e[n]=t.info()})),e},e.get=function(e){return t[e]},e}}function pn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var gn=i("$compile");var mn=new function(){};function vn(e,n){var r={},i="Directive",s=/^\s*directive:\s*([\w-]+)\s+(.*)$/,l=/(([\w-]+)(?::([^;]+))?;?)/,u=function(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),c=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,f=/^(on[a-z]+|formaction)$/,p=Bt();function g(t,e,n){var r=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,i=Bt();return x(t,(function(t,a){if((t=t.trim())in p)i[a]=p[t];else{var o=t.match(r);if(!o)throw gn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,a,t,n?"controller bindings definition":"isolate scope definition");i[a]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||a},o[4]&&(p[t]=i[a])}})),i}function m(t,e){var n={isolateScope:null,bindToController:null};if(B(t.scope)&&(!0===t.bindToController?(n.bindToController=g(t.scope,e,!0),n.isolateScope={}):n.isolateScope=g(t.scope,e,!1)),B(t.bindToController)&&(n.bindToController=g(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw gn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,a){return Pt(n,"name"),Nt(n,"directive"),j(n)?(!function(t){var e=t.charAt(0);if(!e||e!==h(e))throw gn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw gn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),Pt(a,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],e.factory(n+i,["$injector","$exceptionHandler",function(t,e){var i=[];return x(r[n],(function(r,a){try{var o=t.invoke(r);Y(o)?o={compile:P(o)}:!o.compile&&o.link&&(o.compile=P(o.link)),o.priority=o.priority||0,o.index=a,o.name=o.name||n,o.require=function(t){var e=t.require||t.controller&&t.name;return!z(e)&&B(e)&&x(e,(function(t,n){var r=t.match(c);t.substring(r[0].length)||(e[n]=r[0]+n)})),e}(o),o.restrict=function(t,e){if(t&&(!j(t)||!/[EACM]/.test(t)))throw gn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(o.restrict,n),o.$$moduleName=r.$$moduleName,i.push(o)}catch(t){e(t)}})),i}])),r[n].push(a)):x(n,k(t)),this},this.component=function t(e,n){if(!j(e))return x(e,k(ft(this,t))),this;var r=n.controller||function(){};function i(t){function e(e){return Y(e)||z(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var i=n.template||n.templateUrl?n.template:"",a={controller:r,controllerAs:En(n.controller)||n.controllerAs||"$ctrl",template:e(i),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return x(n,(function(t,e){"$"===e.charAt(0)&&(a[e]=t)})),a}return x(n,(function(t,e){"$"===e.charAt(0)&&(i[e]=t,Y(r)&&(r[e]=t))})),i.$inject=["$injector"],this.directive(e,i)},this.aHrefSanitizationWhitelist=function(t){return U(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return U(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(t){return U(t)?(y=t,this):y};var b=!1;this.strictComponentBindingsEnabled=function(t){return U(t)?(b=t,this):b};var S=10;this.onChangesTtl=function(t){return arguments.length?(S=t,this):S};var w=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(w=t,this):w};var T=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(T=t,this):T};var _=Bt();this.addPropertySecurityContext=function(t,e,n){var r=t.toLowerCase()+"|"+e.toLowerCase();if(r in _&&_[r]!==n)throw gn("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",t,e,_[r],n);return _[r]=n,this},function(){function t(t,e){x(e,(function(e){_[e.toLowerCase()]=t}))}t(Yr.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),t(Yr.CSS,["*|style"]),t(Yr.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),t(Yr.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),t(Yr.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,n,p,g,k,E,$,A,D){var M,R=/^\w/,P=t.document.createElement("div"),F=w,U=T,V=S;function H(){try{if(!--V)throw M=void 0,gn("infchng","{0} $onChanges() iterations reached. Aborting!\n",S);$.$apply((function(){for(var t=0,e=M.length;t<e;++t)try{M[t]()}catch(t){p(t)}M=void 0}))}finally{V++}}function W(t,e){if(!t)return t;if(!j(t))throw gn("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',e,t.toString());for(var n="",r=tt(t),i=/\s/.test(r)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,a=r.split(i),o=Math.floor(a.length/2),s=0;s<o;s++){var l=2*s;n+=A.getTrustedMediaUrl(tt(a[l])),n+=" "+tt(a[l+1])}var u=tt(a[2*s]).split(/\s/);return n+=A.getTrustedMediaUrl(tt(u[0])),2===u.length&&(n+=" "+tt(u[1])),n}function q(t,e){if(e){var n,r,i,a=Object.keys(e);for(n=0,r=a.length;n<r;n++)this[i=a[n]]=e[i]}else this.$attr={};this.$$element=t}function K(t,e){try{t.addClass(e)}catch(t){}}q.prototype={$normalize:wn,$addClass:function(t){t&&t.length>0&&D.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&D.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=Tn(t,e);n&&n.length&&D.addClass(this.$$element,n);var r=Tn(e,t);r&&r.length&&D.removeClass(this.$$element,r)},$set:function(t,e,n,r){var i=Le(this.$$element[0],t),a=function(t){return Ie[t]}(t),o=t;i?(this.$$element.prop(t,e),r=i):a&&(this[a]=e,o=a),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=Ot(t,"-")),"img"===rt(this.$$element)&&"srcset"===t&&(this[t]=e=W(e,"$set('srcset', value)")),!1!==n&&(null===e||N(e)?this.$$element.removeAttr(r):R.test(r)?i&&!1===e?this.$$element.removeAttr(r):this.$$element.attr(r,e):function(t,e,n){P.innerHTML="<span "+e+">";var r=P.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,t.attributes.setNamedItem(i)}(this.$$element[0],r,e));var s=this.$$observers;s&&x(s[o],(function(t){try{t(e)}catch(t){p(t)}}))},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=Bt()),i=r[t]||(r[t]=[]);return i.push(e),$.$evalAsync((function(){i.$$inter||!n.hasOwnProperty(t)||N(n[t])||e(n[t])})),function(){at(i,e)}}};var J=n.startSymbol(),Q=n.endSymbol(),et="{{"===J&&"}}"===Q?L:function(t){return t.replace(/\{\{/g,J).replace(/}}/g,Q)},nt=/^ng(Attr|Prop|On)([A-Z].*)$/,it=/^(.+)Start$/;return ot.$$addBindingInfo=y?function(t,e){var n=t.data("$binding")||[];z(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:I,ot.$$addBindingClass=y?function(t){K(t,"ng-binding")}:I,ot.$$addScopeInfo=y?function(t,e,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:I,ot.$$addScopeClass=y?function(t,e){K(t,e?"ng-isolate-scope":"ng-scope")}:I,ot.$$createComment=function(e,n){var r="";return y&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},ot;function ot(t,e,n,r,i){t instanceof o||(t=o(t));var a=ut(t,e,t,n,r,i);ot.$$addScopeClass(t);var s=null;return function(e,n,r){if(!t)throw gn("multilink","This element has already been linked.");Pt(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new());var l,u,c,d=(r=r||{}).parentBoundTranscludeFn,h=r.transcludeControllers,f=r.futureParentElement;if(d&&d.$$boundTransclude&&(d=d.$$boundTransclude),s||(u=(l=f)&&l[0],s=u&&"foreignobject"!==rt(u)&&v.call(u).match(/SVG/)?"svg":"html"),c="html"!==s?o(At(s,o("<div></div>").append(t).html())):n?Me.clone.call(t):t,h)for(var p in h)c.data("$"+p+"Controller",h[p].instance);return ot.$$addScopeInfo(c,e),n&&n(c,e),a&&a(e,c,c,d),n||(t=a=null),c}}function ut(t,e,n,r,i,s){for(var l,u,c,d,h,f,p,g=[],m=z(t)||t instanceof o,v=0;v<t.length;v++)l=new q,11===a&&ct(t,v,m),(c=(u=pt(t[v],[],l,0===v?r:void 0,i)).length?yt(u,t[v],l,e,n,null,[],[],s):null)&&c.scope&&ot.$$addScopeClass(l.$$element),h=c&&c.terminal||!(d=t[v].childNodes)||!d.length?null:ut(d,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:e),(c||h)&&(g.push(v,c,h),f=!0,p=p||c),s=null;return f?function(t,n,r,i){var a,s,l,u,c,d,h,f,m;if(p){var v=n.length;for(m=new Array(v),c=0;c<g.length;c+=3)h=g[c],m[h]=n[h]}else m=n;for(c=0,d=g.length;c<d;)l=m[g[c++]],a=g[c++],s=g[c++],a?(a.scope?(u=t.$new(),ot.$$addScopeInfo(o(l),u)):u=t,f=a.transcludeOnThisElement?dt(t,a.transclude,i):!a.templateOnThisElement&&i?i:!i&&e?dt(t,e):null,a(s,u,l,r,f)):s&&s(t,l.childNodes,void 0,i)}:null}function ct(t,e,n){var r,i=t[e],a=i.parentNode;if(i.nodeType===jt)for(;(r=a?i.nextSibling:t[e+1])&&r.nodeType===jt;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===t[e+1]&&t.splice(e+1,1)}function dt(t,e,n){function r(r,i,a,o,s){return r||((r=t.$new(!1,s)).$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})}var i=r.$$slots=Bt();for(var a in e.$$slots)e.$$slots[a]?i[a]=dt(t,e.$$slots[a],n):i[a]=null;return r}function pt(t,e,r,i,a){var o,u,c,d=t.nodeType,h=r.$attr;switch(d){case 1:Tt(e,wn(u=rt(t)),"E",i,a);for(var f,p,g,m,v,y=t.attributes,b=0,S=y&&y.length;b<S;b++){var w,T=!1,x=!1,_=!1,k=!1,E=!1;p=(f=y[b]).name,m=f.value,(v=(g=wn(p.toLowerCase())).match(nt))?(_="Attr"===v[1],k="Prop"===v[1],E="On"===v[1],p=p.replace(bn,"").toLowerCase().substr(4+v[1].length).replace(/_(.)/g,(function(t,e){return e.toUpperCase()}))):(w=g.match(it))&&xt(w[1])&&(T=p,x=p.substr(0,p.length-5)+"end",p=p.substr(0,p.length-6)),k||E?(r[g]=m,h[g]=f.name,k?Dt(t,e,g,p):Mt(e,g,p)):(h[g=wn(p.toLowerCase())]=p,!_&&r.hasOwnProperty(g)||(r[g]=m,Le(t,g)&&(r[g]=!0)),Rt(t,e,m,g,_),Tt(e,g,"A",i,a,T,x))}if("input"===u&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!U)break;if(B(c=t.className)&&(c=c.animVal),j(c)&&""!==c)for(;o=l.exec(c);)Tt(e,g=wn(o[2]),"C",i,a)&&(r[g]=tt(o[3])),c=c.substr(o.index+o[0].length);break;case jt:!function(t,e){var r=n(e,!0);r&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&ot.$$addBindingClass(e),function(t,e){var i=e.parent();n||ot.$$addBindingClass(i),ot.$$addBindingInfo(i,r.expressions),t.$watch(r,(function(t){e[0].nodeValue=t}))}}})}(e,t.nodeValue);break;case 8:if(!F)break;!function(t,e,n,r,i){try{var a=s.exec(t.nodeValue);if(a){var o=wn(a[1]);Tt(e,o,"M",r,i)&&(n[o]=tt(a[2]))}}catch(t){}}(t,e,r,i,a)}return e.sort(Et),e}function gt(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw gn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);1===t.nodeType&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0);else r.push(t);return o(r)}function mt(t,e,n){return function(r,i,a,o,s){return i=gt(i[0],e,n),t(r,i,a,o,s)}}function vt(t,e,n,r,i,a){var o;return t?ot(e,n,r,i,a):function(){return o||(o=ot(e,n,r,i,a),e=n=a=null),o.apply(this,arguments)}}function yt(e,n,r,i,a,s,l,u,c){c=c||{};for(var d,h,f,g,m,v=-Number.MAX_VALUE,y=c.newScopeDirective,b=c.controllerDirectives,S=c.newIsolateScopeDirective,w=c.templateDirective,T=c.nonTlbTranscludeDirective,_=!1,k=!1,$=c.hasElementTranscludeDirective,A=r.$$element=o(n),D=s,M=i,R=!1,O=!1,I=0,L=e.length;I<L;I++){var P=(d=e[I]).$$start,F=d.$$end;if(P&&(A=gt(n,P,F)),f=void 0,v>d.priority)break;if((m=d.scope)&&(d.templateUrl||(B(m)?($t("new/isolated scope",S||y,d,A),S=d):$t("new/isolated scope",S,d,A)),y=y||d),h=d.name,!R&&(d.replace&&(d.templateUrl||d.template)||d.transclude&&!d.$$tlb)){for(var U,V=I+1;U=e[V++];)if(U.transclude&&!U.$$tlb||U.replace&&(U.templateUrl||U.template)){O=!0;break}R=!0}if(!d.templateUrl&&d.controller&&(b=b||Bt(),$t("'"+h+"' controller",b[h],d,A),b[h]=d),m=d.transclude)if(_=!0,d.$$tlb||($t("transclusion",T,d,A),T=d),"element"===m)$=!0,v=d.priority,f=A,A=r.$$element=o(ot.$$createComment(h,r[h])),n=A[0],It(a,ht(f),n),M=vt(O,f,i,v,D&&D.name,{nonTlbTranscludeDirective:T});else{var j=Bt();if(B(m)){f=t.document.createDocumentFragment();var H=Bt(),W=Bt();for(var G in x(m,(function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,H[t]=e,j[e]=null,W[e]=n})),x(A.contents(),(function(e){var n=H[wn(rt(e))];n?(W[n]=!0,j[n]=j[n]||t.document.createDocumentFragment(),j[n].appendChild(e)):f.appendChild(e)})),x(W,(function(t,e){if(!t)throw gn("reqslot","Required transclusion slot `{0}` was not filled.",e)})),j)if(j[G]){var K=o(j[G].childNodes);j[G]=vt(O,K,i)}f=o(f.childNodes)}else f=o(pe(n)).contents();A.empty(),(M=vt(O,f,i,void 0,void 0,{needsNewScope:d.$$isolateScope||d.$$newScope})).$$slots=j}if(d.template)if(k=!0,$t("template",w,d,A),w=d,m=Y(d.template)?d.template(A,r):d.template,m=et(m),d.replace){if(D=d,f=ue(m)?[]:xn(At(d.templateNamespace,tt(m))),n=f[0],1!==f.length||1!==n.nodeType)throw gn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",h,"");It(a,A,n);var Z={$attr:{}},J=pt(n,[],Z),Q=e.splice(I+1,e.length-(I+1));(S||y)&&St(J,S,y),e=e.concat(J).concat(Q),_t(r,Z),L=e.length}else A.html(m);if(d.templateUrl)k=!0,$t("template",w,d,A),w=d,d.replace&&(D=d),at=kt(e.splice(I,e.length-I),A,r,a,_&&M,l,u,{controllerDirectives:b,newScopeDirective:y!==d&&y,newIsolateScopeDirective:S,templateDirective:w,nonTlbTranscludeDirective:T}),L=e.length;else if(d.compile)try{g=d.compile(A,r,M);var nt=d.$$originalDirective||d;Y(g)?it(null,ft(nt,g),P,F):g&&it(ft(nt,g.pre),ft(nt,g.post),P,F)}catch(t){p(t,wt(A))}d.terminal&&(at.terminal=!0,v=Math.max(v,d.priority))}return at.scope=y&&!0===y.scope,at.transcludeOnThisElement=_,at.templateOnThisElement=k,at.transclude=M,c.hasElementTranscludeDirective=$,at;function it(t,e,n,r){t&&(n&&(t=mt(t,n,r)),t.require=d.require,t.directiveName=h,(S===d||d.$$isolateScope)&&(t=Lt(t,{isolateScope:!0})),l.push(t)),e&&(n&&(e=mt(e,n,r)),e.require=d.require,e.directiveName=h,(S===d||d.$$isolateScope)&&(e=Lt(e,{isolateScope:!0})),u.push(e))}function at(t,e,i,a,s){var c,d,h,f,g,m,v,T,_,k;for(var A in n===i?(_=r,T=r.$$element):_=new q(T=o(i),r),g=e,S?f=e.$new(!0):y&&(g=e.$parent),s&&((v=function(t,e,n,r){var i;X(t)||(r=n,n=e,e=t,t=void 0);$&&(i=m);n||(n=$?T.parent():T);if(!r)return s(t,e,i,n,O);var a=s.$$slots[r];if(a)return a(t,e,i,n,O);if(N(a))throw gn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,wt(T))}).$$boundTransclude=s,v.isSlotFilled=function(t){return!!s.$$slots[t]}),b&&(m=function(t,e,n,r,i,a,o){var s=Bt();for(var l in r){var u=r[l],c={$scope:u===o||u.$$isolateScope?i:a,$element:t,$attrs:e,$transclude:n},d=u.controller;"@"===d&&(d=e[u.name]);var h=E(d,c,!0,u.controllerAs);s[u.name]=h,t.data("$"+u.name+"Controller",h.instance)}return s}(T,_,v,b,f,e,S)),S&&(ot.$$addScopeInfo(T,f,!0,!(w&&(w===S||w===S.$$originalDirective))),ot.$$addScopeClass(T,!0),f.$$isolateBindings=S.$$isolateBindings,(k=Ut(e,_,f,f.$$isolateBindings,S)).removeWatches&&f.$on("$destroy",k.removeWatches)),m){var D=b[A],M=m[A],R=D.$$bindings.bindToController;M.instance=M(),T.data("$"+D.name+"Controller",M.instance),M.bindingInfo=Ut(g,_,M.instance,R,D)}for(x(b,(function(t,e){var n=t.require;t.bindToController&&!z(n)&&B(n)&&C(m[e].instance,bt(e,n,T,m))})),x(m,(function(t){var e=t.instance;if(Y(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){p(t)}if(Y(e.$onInit))try{e.$onInit()}catch(t){p(t)}Y(e.$doCheck)&&(g.$watch((function(){e.$doCheck()})),e.$doCheck()),Y(e.$onDestroy)&&g.$on("$destroy",(function(){e.$onDestroy()}))})),c=0,d=l.length;c<d;c++)Ft(h=l[c],h.isolateScope?f:e,T,_,h.require&&bt(h.directiveName,h.require,T,m),v);var O=e;for(S&&(S.template||null===S.templateUrl)&&(O=f),t&&t(O,i.childNodes,void 0,s),c=u.length-1;c>=0;c--)Ft(h=u[c],h.isolateScope?f:e,T,_,h.require&&bt(h.directiveName,h.require,T,m),v);x(m,(function(t){var e=t.instance;Y(e.$postLink)&&e.$postLink()}))}}function bt(t,e,n,r){var i;if(j(e)){var a=e.match(c),o=e.substring(a[0].length),s=a[1]||a[3],l="?"===a[2];if("^^"===s?n=n.parent():i=(i=r&&r[o])&&i.instance,!i){var u="$"+o+"Controller";i="^^"===s&&n[0]&&9===n[0].nodeType?null:s?n.inheritedData(u):n.data(u)}if(!i&&!l)throw gn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,t)}else if(z(e)){i=[];for(var d=0,h=e.length;d<h;d++)i[d]=bt(t,e[d],n,r)}else B(e)&&(i={},x(e,(function(e,a){i[a]=bt(t,e,n,r)})));return i||null}function St(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=O(t[r],{$$isolateScope:e,$$newScope:n})}function Tt(t,n,a,o,s,l,u){if(n===s)return null;var c=null;if(r.hasOwnProperty(n))for(var d,h=e.get(n+i),f=0,p=h.length;f<p;f++)if(d=h[f],(N(o)||o>d.priority)&&-1!==d.restrict.indexOf(a)){if(l&&(d=O(d,{$$start:l,$$end:u})),!d.$$bindings){var g=d.$$bindings=m(d,d.name);B(g.isolateScope)&&(d.$$isolateBindings=g.isolateScope)}t.push(d),c=d}return c}function xt(t){if(r.hasOwnProperty(t))for(var n=e.get(t+i),a=0,o=n.length;a<o;a++)if(n[a].multiElement)return!0;return!1}function _t(t,e){var n=e.$attr,r=t.$attr;x(t,(function(r,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==r&&(r.length?r+=("style"===i?";":" ")+e[i]:r=e[i]),t.$set(i,r,!0,n[i]))})),x(e,(function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))}))}function kt(t,e,n,r,i,a,s,l){var u,c,d=[],h=e[0],f=t.shift(),m=O(f,{templateUrl:null,transclude:null,replace:null,$$originalDirective:f}),v=Y(f.templateUrl)?f.templateUrl(e,n):f.templateUrl,y=f.templateNamespace;return e.empty(),g(v).then((function(p){var g,b,S,w;if(p=et(p),f.replace){if(S=ue(p)?[]:xn(At(y,tt(p))),g=S[0],1!==S.length||1!==g.nodeType)throw gn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f.name,v);b={$attr:{}},It(r,e,g);var T=pt(g,[],b);B(f.scope)&&St(T,!0),t=T.concat(t),_t(n,b)}else g=h,e.html(p);for(t.unshift(m),u=yt(t,g,n,i,e,f,a,s,l),x(r,(function(t,n){t===g&&(r[n]=e[0])})),c=ut(e[0].childNodes,i);d.length;){var _=d.shift(),k=d.shift(),E=d.shift(),$=d.shift(),A=e[0];if(!_.$$destroyed){if(k!==h){var C=k.className;l.hasElementTranscludeDirective&&f.replace||(A=pe(g)),It(E,o(k),A),K(o(A),C)}w=u.transcludeOnThisElement?dt(_,u.transclude,$):$,u(c,_,A,r,w)}}d=null})).catch((function(t){G(t)&&p(t)})),function(t,e,n,r,i){var a=i;e.$$destroyed||(d?d.push(e,n,r,a):(u.transcludeOnThisElement&&(a=dt(e,u.transclude,i)),u(c,e,n,r,a)))}}function Et(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function $t(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw gn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,wt(r))}function At(e,n){switch(e=h(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function Ct(t){return W(A.valueOf(t),"ng-prop-srcset")}function Dt(t,e,n,r){if(f.test(r))throw gn("nodomevents","Property bindings for HTML DOM event properties are disallowed");var i=rt(t),a=function(t,e){var n=e.toLowerCase();return _[t+"|"+n]||_["*|"+n]}(i,r),o=L;"srcset"!==r||"img"!==i&&"source"!==i?a&&(o=A.getTrusted.bind(A,a)):o=Ct,e.push({priority:100,compile:function(t,e){var i=k(e[n]),a=k(e[n],(function(t){return A.valueOf(t)}));return{pre:function(t,e){function n(){var n=i(t);e[0][r]=o(n)}n(),t.$watch(a,n)}}}})}function Mt(t,e,n){t.push(Pa(k,$,p,e,n,!1))}function Rt(t,e,r,i,a){var o=rt(t),s=function(t,e){return"srcdoc"===e?A.HTML:"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(t)?A.RESOURCE_URL:A.MEDIA_URL:"xlinkHref"===e?"image"===t?A.MEDIA_URL:"a"===t?A.URL:A.RESOURCE_URL:"form"===t&&"action"===e||"base"===t&&"href"===e||"link"===t&&"href"===e?A.RESOURCE_URL:"a"!==t||"href"!==e&&"ngHref"!==e?void 0:A.URL}(o,i),l=!a,c=u[i]||a,d=n(r,l,s,c);if(d){if("multiple"===i&&"select"===o)throw gn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",wt(t));if(f.test(i))throw gn("nodomevents","Interpolations for HTML DOM event attributes are disallowed");e.push({priority:100,compile:function(){return{pre:function(t,e,a){var o=a.$$observers||(a.$$observers=Bt()),l=a[i];l!==r&&(d=l&&n(l,!0,s,c),r=l),d&&(a[i]=d(t),(o[i]||(o[i]=[])).$$inter=!0,(a.$$observers&&a.$$observers[i].$$scope||t).$watch(d,(function(t,e){"class"===i&&t!==e?a.$updateClass(t,e):a.$set(i,t)})))}}}})}}function It(e,n,r){var i,a,s=n[0],l=n.length,u=s.parentNode;if(e)for(i=0,a=e.length;i<a;i++)if(e[i]===s){e[i++]=r;for(var c=i,d=c+l-1,h=e.length;c<h;c++,d++)d<h?e[c]=e[d]:delete e[c];e.length-=l-1,e.context===s&&(e.context=r);break}u&&u.replaceChild(r,s);var f=t.document.createDocumentFragment();for(i=0;i<l;i++)f.appendChild(n[i]);for(o.hasData(s)&&(o.data(r,o.data(s)),o(s).off("$destroy")),o.cleanData(f.querySelectorAll("*")),i=1;i<l;i++)delete n[i];n[0]=r,n.length=1}function Lt(t,e){return C((function(){return t.apply(null,arguments)}),t,e)}function Ft(t,e,n,r,i,a){try{t(e,n,r,i,a)}catch(t){p(t,wt(n))}}function Nt(t,e){if(b)throw gn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Ut(t,e,r,i,a){var o,s=[],l={};function u(e,n,i){Y(r.$onChanges)&&!st(n,i)&&(M||(t.$$postDigest(H),M=[]),o||(o={},M.push(c)),o[e]&&(i=o[e].previousValue),o[e]=new yn(i,n))}function c(){r.$onChanges(o),o=void 0}return x(i,(function(i,o){var c,h,f,p,g,m=i.attrName,v=i.optional;switch(i.mode){case"@":v||d.call(e,m)||(Nt(m,a.name),r[o]=e[m]=void 0),g=e.$observe(m,(function(t){if(j(t)||Z(t)){var e=r[o];u(o,t,e),r[o]=t}})),e.$$observers[m].$$scope=t,j(c=e[m])?r[o]=n(c)(t):Z(c)&&(r[o]=c),l[o]=new yn(mn,r[o]),s.push(g);break;case"=":if(!d.call(e,m)){if(v)break;Nt(m,a.name),e[m]=void 0}if(v&&!e[m])break;h=k(e[m]),p=h.literal?lt:st,f=h.assign||function(){throw c=r[o]=h(t),gn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[m],m,a.name)},c=r[o]=h(t);var y=function(e){return p(e,r[o])||(p(e,c)?f(t,e=r[o]):r[o]=e),c=e};y.$stateful=!0,g=i.collection?t.$watchCollection(e[m],y):t.$watch(k(e[m],y),null,h.literal),s.push(g);break;case"<":if(!d.call(e,m)){if(v)break;Nt(m,a.name),e[m]=void 0}if(v&&!e[m])break;var b=(h=k(e[m])).literal,S=r[o]=h(t);l[o]=new yn(mn,r[o]),g=t[i.collection?"$watchCollection":"$watch"](h,(function(t,e){if(e===t){if(e===S||b&&lt(e,S))return;e=S}u(o,t,e),r[o]=t})),s.push(g);break;case"&":if(v||d.call(e,m)||Nt(m,a.name),(h=e.hasOwnProperty(m)?k(e[m]):I)===I&&v)break;r[o]=function(e){return h(t,e)}}})),{initialChanges:l,removeWatches:s.length&&function(){for(var t=0,e=s.length;t<e;++t)s[t]()}}}}]}function yn(t,e){this.previousValue=t,this.currentValue=e}vn.$inject=["$provide","$$sanitizeUriProvider"],yn.prototype.isFirstChange=function(){return this.previousValue===mn};var bn=/^((?:x|data)[:\-_])/i,Sn=/[:\-_]+(.)/g;function wn(t){return t.replace(bn,"").replace(Sn,(function(t,e,n){return n?e.toUpperCase():e}))}function Tn(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var a=0;a<r.length;a++){for(var o=r[a],s=0;s<i.length;s++)if(o===i[s])continue t;n+=(n.length>0?" ":"")+o}return n}function xn(t){var e=(t=o(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(8===n.nodeType||n.nodeType===jt&&""===n.nodeValue.trim())&&g.call(t,e,1)}return t}var _n=i("$controller"),kn=/^(\S+)(\s+as\s+([\w$]+))?$/;function En(t,e){if(e&&j(e))return e;if(j(t)){var n=kn.exec(t);if(n)return n[3]}}function $n(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Nt(e,"controller"),B(e)?C(t,e):t[e]=n},this.$get=["$injector",function(e){return function(r,i,a,o){var s,l,u,c;if(a=!0===a,o&&j(o)&&(c=o),j(r)){if(!(l=r.match(kn)))throw _n("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(u=l[1],c=c||l[3],!(r=t.hasOwnProperty(u)?t[u]:function(t,e,n){if(!e)return t;for(var r,i=e.split("."),a=t,o=i.length,s=0;s<o;s++)r=i[s],t&&(t=(a=t)[r]);return!n&&Y(t)?ft(a,t):t}(i.$scope,u,!0)))throw _n("ctrlreg","The controller with the name '{0}' is not registered.",u);Ft(r,u,!0)}if(a){var d=(z(r)?r[r.length-1]:r).prototype;return s=Object.create(d||null),c&&n(i,c,s,u||r.name),C((function(){var t=e.invoke(r,s,i,u);return t!==s&&(B(t)||Y(t))&&(s=t,c&&n(i,c,s,u||r.name)),s}),{instance:s,identifier:c})}return s=e.instantiate(r,i,u),c&&n(i,c,s,u||r.name),s};function n(t,e,n,r){if(!t||!B(t.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,e);t.$scope[e]=n}}]}function An(){this.$get=["$window",function(t){return o(t.document)}]}function Cn(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],r=n&&n.hidden;function i(){r=n.hidden}return t.on("visibilitychange",i),e.$on("$destroy",(function(){t.off("visibilitychange",i)})),function(){return r}}]}function Dn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var Mn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof o&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Rn="application/json",On={"Content-Type":"application/json;charset=utf-8"},In=/^\[|^\{(?!\{)/,Ln={"[":/]$/,"{":/}$/},Pn=/^\)]\}',?\n/,Fn=i("$http");function Nn(t){return B(t)?W(t)?t.toISOString():gt(t):t}function Un(){this.$get=function(){return function(t){if(!t)return"";var e=[];return _(t,(function(t,n){null===t||N(t)||Y(t)||(z(t)?x(t,(function(t){e.push(kt(n)+"="+kt(Nn(t)))})):e.push(kt(n)+"="+kt(Nn(t))))})),e.join("&")}}}function Bn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,r,i){z(n)?x(n,(function(e,n){t(e,r+"["+(B(e)?n:"")+"]")})):B(n)&&!W(n)?_(n,(function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))})):(Y(n)&&(n=n()),e.push(kt(r)+"="+(null==n?"":kt(Nn(n)))))}(t,"",!0),e.join("&")}}}function Vn(t,e){if(j(t)){var n=t.replace(Pn,"").trim();if(n){var r=e("Content-Type"),i=r&&0===r.indexOf(Rn);if(i||(o=(a=n).match(In))&&Ln[o[0]].test(a))try{t=mt(n)}catch(e){if(!i)return t;throw Fn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}var a,o;return t}function jn(t){var e,n=Bt();function r(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return j(t)?x(t.split("\n"),(function(t){e=t.indexOf(":"),r(h(tt(t.substr(0,e))),tt(t.substr(e+1)))})):B(t)&&x(t,(function(t,e){r(h(e),tt(t))})),n}function Hn(t){var e;return function(n){if(e||(e=jn(t)),n){var r=e[h(n)];return void 0===r&&(r=null),r}return e}}function Wn(t,e,n,r){return Y(r)?r(t,e,n):(x(r,(function(r){t=r(t,e,n)})),t)}function zn(t){return 200<=t&&t<300}function Gn(){var t=this.defaults={transformResponse:[Vn],transformRequest:[function(t){return!B(t)||(e=t,"[object File]"===v.call(e))||function(t){return"[object Blob]"===v.call(t)}(t)||function(t){return"[object FormData]"===v.call(t)}(t)?t:gt(t);var e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Ht(On),put:Ht(On),patch:Ht(On)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return U(t)?(e=!!t,this):e};var n=this.interceptors=[],r=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(a,o,s,l,u,c,d,p){var g=l("$http");t.paramSerializer=j(t.paramSerializer)?d.get(t.paramSerializer):t.paramSerializer;var m=[];x(n,(function(t){m.unshift(j(t)?d.get(t):d.invoke(t))}));var v,y=(v=[ui].concat(r.map(di)),function(t){var e=di(t);return v.some(hi.bind(null,e))});function b(n){if(!B(n))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!j(p.valueOf(n.url)))throw i("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var r=C({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);r.headers=function(e){var n,r,i,a=t.headers,o=C({},e.headers);a=C({},a.common,a[h(e.method)]);t:for(n in a){for(i in r=h(n),o)if(h(i)===r)continue t;o[n]=a[n]}return function(t,e){var n,r={};return x(t,(function(t,i){Y(t)?null!=(n=t(e))&&(r[i]=n):r[i]=t})),r}(o,Ht(e))}(n),r.method=f(r.method),r.paramSerializer=j(r.paramSerializer)?d.get(r.paramSerializer):r.paramSerializer,a.$$incOutstandingRequestCount("$http");var l=[],v=[],S=c.resolve(r);return x(m,(function(t){(t.request||t.requestError)&&l.unshift(t.request,t.requestError),(t.response||t.responseError)&&v.push(t.response,t.responseError)})),S=w(S,l),S=(S=w(S=S.then((function(n){var r=n.headers,i=Wn(n.data,Hn(r),void 0,n.transformRequest);N(i)&&x(r,(function(t,e){"content-type"===h(e)&&delete r[e]}));N(n.withCredentials)&&!N(t.withCredentials)&&(n.withCredentials=t.withCredentials);return function(n,r){var i,a,l=c.defer(),d=l.promise,f=n.headers,m="jsonp"===h(n.method),v=n.url;m?v=p.getTrustedResourceUrl(v):j(v)||(v=p.valueOf(v));v=function(t,e){e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e);return t}(v,n.paramSerializer(n.params)),m&&(v=function(t,e){var n=t.split("?");if(n.length>2)throw Fn("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return x(xt(n[1]),(function(n,r){if("JSON_CALLBACK"===n)throw Fn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(r===e)throw Fn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)})),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(v,n.jsonpCallbackParam));b.pendingRequests.push(n),d.then(E,E),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(i=B(n.cache)?n.cache:B(t.cache)?t.cache:g);i&&(U(a=i.get(v))?J(a)?a.then(k,k):z(a)?_(a[1],a[0],Ht(a[2]),a[3],a[4]):_(a,200,{},"OK","complete"):i.put(v,d));if(N(a)){var S=y(n.url)?s()[n.xsrfCookieName||t.xsrfCookieName]:void 0;S&&(f[n.xsrfHeaderName||t.xsrfHeaderName]=S),o(n.method,v,r,T,f,n.timeout,n.withCredentials,n.responseType,w(n.eventHandlers),w(n.uploadEventHandlers))}return d;function w(t){if(t){var n={};return x(t,(function(t,r){n[r]=function(n){function r(){t(n)}e?u.$applyAsync(r):u.$$phase?r():u.$apply(r)}})),n}}function T(t,n,r,a,o){function s(){_(n,t,r,a,o)}i&&(zn(t)?i.put(v,[t,n,jn(r),a,o]):i.remove(v)),e?u.$applyAsync(s):(s(),u.$$phase||u.$apply())}function _(t,e,r,i,a){(zn(e=e>=-1?e:0)?l.resolve:l.reject)({data:t,status:e,headers:Hn(r),config:n,statusText:i,xhrStatus:a})}function k(t){_(t.data,t.status,Ht(t.headers()),t.statusText,t.xhrStatus)}function E(){var t=b.pendingRequests.indexOf(n);-1!==t&&b.pendingRequests.splice(t,1)}}(n,i).then(T,T)})),v)).finally((function(){a.$$completeOutstandingRequest(I,"$http")}));function w(t,e){for(var n=0,r=e.length;n<r;){var i=e[n++],a=e[n++];t=t.then(i,a)}return e.length=0,t}function T(t){var e=C({},t);return e.data=Wn(t.data,t.headers,t.status,r.transformResponse),zn(t.status)?e:c.reject(e)}}return b.pendingRequests=[],function(t){x(arguments,(function(t){b[t]=function(e,n){return b(C({},n||{},{method:t,url:e}))}}))}("get","delete","head","jsonp"),function(t){x(arguments,(function(t){b[t]=function(e,n,r){return b(C({},r||{},{method:t,url:e,data:n}))}}))}("post","put","patch"),b.defaults=t,b}]}function Yn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function qn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,r){return function(t,e,n,r,i){return function(i,o,s,l,u,c,d,f,p,g){if(o=o||t.url(),"jsonp"===h(i))var m=r.createCallback(o),v=a(o,m,(function(t,e){var n=200===t&&r.getResponse(m);E(l,t,n,"",e,"complete"),r.removeCallback(m)}));else{var y=e(i,o),b=!1;y.open(i,o,!0),x(u,(function(t,e){U(t)&&y.setRequestHeader(e,t)})),y.onload=function(){var t=y.statusText||"",e="response"in y?y.response:y.responseText,n=1223===y.status?204:y.status;0===n&&(n=e?200:"file"===di(o).protocol?404:0),E(l,n,e,y.getAllResponseHeaders(),t,"complete")};var S=function(){E(l,-1,null,null,"","error")},w=function(){E(l,-1,null,null,"",b?"timeout":"abort")},T=function(){E(l,-1,null,null,"","timeout")};if(y.onerror=S,y.ontimeout=T,y.onabort=w,x(p,(function(t,e){y.addEventListener(e,t)})),x(g,(function(t,e){y.upload.addEventListener(e,t)})),d&&(y.withCredentials=!0),f)try{y.responseType=f}catch(t){if("json"!==f)throw t}y.send(N(s)?null:s)}if(c>0)var _=n((function(){k("timeout")}),c);else J(c)&&c.then((function(){k(U(c.$$timeoutId)?"timeout":"abort")}));function k(t){b="timeout"===t,v&&v(),y&&y.abort()}function E(t,e,r,i,a,o){U(_)&&n.cancel(_),v=y=null,t(e,r,i,a,o)}};function a(t,e,n){t=t.replace("JSON_CALLBACK",e);var a=i.createElement("script"),o=null;return a.type="text/javascript",a.src=t,a.async=!0,o=function(t){a.removeEventListener("load",o),a.removeEventListener("error",o),i.body.removeChild(a),a=null;var s=-1,l="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),l=t.type,s="error"===t.type?404:200),n&&n(s,l)},a.addEventListener("load",o),a.addEventListener("error",o),i.body.appendChild(a),o}}(t,r,t.defer,e,n[0])}]}var Kn=S.$interpolateMinErr=i("$interpolate");function Xn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var a=t.length,o=e.length,s=new RegExp(t.replace(/./g,u),"g"),l=new RegExp(e.replace(/./g,u),"g");function u(t){return"\\\\\\"+t}function c(n){return n.replace(s,t).replace(l,e)}function d(t,e,n,r){var i=t.$watch((function(t){return i(),r(t)}),e,n);return i}function h(s,l,u,h){var f=u===i.URL||u===i.MEDIA_URL;if(!s.length||-1===s.indexOf(t)){if(l)return;var p=c(s);f&&(p=i.getTrusted(u,p));var g=P(p);return g.exp=s,g.expressions=[],g.$$watchDelegate=d,g}h=!!h;for(var m,v,y,b,S,w=0,T=[],x=s.length,_=[],k=[];w<x;){if(-1===(m=s.indexOf(t,w))||-1===(v=s.indexOf(e,m+a))){w!==x&&_.push(c(s.substring(w)));break}w!==m&&_.push(c(s.substring(w,m))),b=s.substring(m+a,v),T.push(b),w=v+o,k.push(_.length),_.push("")}S=1===_.length&&1===k.length;var E=f&&S?void 0:function(t){try{return t=u&&!f?i.getTrusted(u,t):i.valueOf(t),h&&!U(t)?t:Vt(t)}catch(t){r(Kn.interr(s,t))}};if(y=T.map((function(t){return n(t,E)})),!l||T.length){var $=function(t){for(var e=0,n=T.length;e<n;e++){if(h&&N(t[e]))return;_[k[e]]=t[e]}return f?i.getTrusted(u,S?_[0]:_.join("")):(u&&_.length>1&&Kn.throwNoconcat(s),_.join(""))};return C((function(t){var e=0,n=T.length,i=new Array(n);try{for(;e<n;e++)i[e]=y[e](t);return $(i)}catch(t){r(Kn.interr(s,t))}}),{exp:s,expressions:T,$$watchDelegate:function(t,e){var n;return t.$watchGroup(y,(function(r,i){var a=$(r);e.call(this,a,r!==i?n:a,t),n=a}))}})}}return h.startSymbol=function(){return t},h.endSymbol=function(){return e},h}]}Kn.throwNoconcat=function(t){throw Kn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Kn.interr=function(t,e){return Kn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Zn=i("$interval");function Jn(){this.$get=["$$intervalFactory","$window",function(t,e){var n={},r=function(t){e.clearInterval(t),delete n[t]},i=t((function(t,r,i){var a=e.setInterval(t,r);return n[a]=i,a}),r);return i.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw Zn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!n.hasOwnProperty(t.$$intervalId))return!1;var e=t.$$intervalId,i=n[e];return jr(i.promise),i.reject("canceled"),r(e),!0},i}]}function Qn(){this.$get=["$browser","$q","$$q","$rootScope",function(t,e,n,r){return function(i,a){return function(o,s,l,u){var c=arguments.length>4,d=c?ht(arguments,4):[],h=0,f=U(u)&&!u,p=(f?n:e).defer(),g=p.promise;function m(){c?o.apply(null,d):o(h)}function v(){f?t.defer(m):r.$evalAsync(m),p.notify(h++),l>0&&h>=l&&(p.resolve(h),a(g.$$intervalId)),f||r.$apply()}return l=U(l)?l:0,g.$$intervalId=i(v,s,p,f),g}}}]}var tr=function(){this.$get=function(){var t=S.callbacks,e={};return{createCallback:function(n){var r="_"+(t.$$counter++).toString(36),i="angular.callbacks."+r,a=function(t){var e=function(t){e.data=t,e.called=!0};return e.id=t,e}(r);return e[i]=t[r]=a,i},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var r=e[n];delete t[r.id],delete e[n]}}}},er=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,nr={http:80,https:443,ftp:21},rr=i("$location");function ir(t,e,n){var r,i=(r=[],x(e,(function(t,e){z(t)?x(t,(function(t){r.push(kt(e,!0)+(!0===t?"":"="+kt(t,!0)))})):r.push(kt(e,!0)+(!0===t?"":"="+kt(t,!0)))})),r.length?r.join("&"):""),a=n?"#"+_t(n):"";return function(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=_t(e[n].replace(/%2F/g,"/"));return e.join("/")}(t)+(i?"?"+i:"")+a}function ar(t,e){var n=di(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=M(n.port)||nr[n.protocol]||null}var or=/^\s*[\\/]{2,}/;function sr(t,e,n){if(or.test(t))throw rr("badpath",'Invalid url "{0}".',t);var r="/"!==t.charAt(0);r&&(t="/"+t);var i=di(t),a=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;e.$$path=function(t,e){for(var n=t.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),e&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(a,n),e.$$search=xt(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function lr(t,e){return t.slice(0,e.length)===e}function ur(t,e){if(lr(e,t))return e.substr(t.length)}function cr(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function dr(t,e,n){this.$$html5=!0,n=n||"",ar(t,this),this.$$parse=function(t){var n=ur(e,t);if(!j(n))throw rr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);sr(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(t){return e+t.substr(1)},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(U(a=ur(t,r))?(o=a,s=n&&U(a=ur(n,a))?e+(ur("/",a)||a):t+o):U(a=ur(e,r))?s=e+a:e===r+"/"&&(s=e),s&&this.$$parse(s),!!s);var a,o,s}}function hr(t,e,n){ar(t,this),this.$$parse=function(r){var i,a=ur(t,r)||ur(e,r);N(a)||"#"!==a.charAt(0)?this.$$html5?i=a:(i="",N(a)&&(t=r,this.replace())):N(i=ur(n,a))&&(i=a),sr(i,this,!1),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;lr(e,n)&&(e=e.replace(n,""));if(i.exec(e))return t;return(r=i.exec(t))?r[1]:t}(this.$$path,i,t),this.$$compose()},this.$$normalizeUrl=function(e){return t+(e?n+e:"")},this.$$parseLinkUrl=function(e,n){return cr(t)===cr(e)&&(this.$$parse(e),!0)}}function fr(t,e,n){this.$$html5=!0,hr.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(t===cr(r)?a=r:(o=ur(e,r))?a=t+n+o:e===r+"/"&&(a=e),a&&this.$$parse(a),!!a);var a,o},this.$$normalizeUrl=function(e){return t+n+e}}var pr={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=ir(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:gr("$$absUrl"),url:function(t){if(N(t))return this.$$url;var e=er.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:gr("$$protocol"),host:gr("$$host"),port:gr("$$port"),path:mr("$$path",(function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t})),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(j(t)||H(t))t=t.toString(),this.$$search=xt(t);else{if(!B(t))throw rr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");x(t=ot(t,{}),(function(e,n){null==e&&delete t[n]})),this.$$search=t}break;default:N(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:mr("$$hash",(function(t){return null!==t?t.toString():""})),replace:function(){return this.$$replace=!0,this}};function gr(t){return function(){return this[t]}}function mr(t,e){return function(n){return N(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function vr(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return U(e)?(t=e,this):t},this.html5Mode=function(t){return Z(t)?(e.enabled=t,this):B(t)?(Z(t.enabled)&&(e.enabled=t.enabled),Z(t.requireBase)&&(e.requireBase=t.requireBase),(Z(t.rewriteLinks)||j(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,a,s){var l,u,c,d,h=r.baseHref(),f=r.url();if(e.enabled){if(!h&&e.requireBase)throw rr("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=(d=f).substring(0,d.indexOf("/",d.indexOf("//")+2))+(h||"/"),u=i.history?dr:fr}else c=cr(f),u=hr;var p=function(t){return t.substr(0,cr(t).lastIndexOf("/")+1)}(c);(l=new u(c,p,"#"+t)).$$parseLinkUrl(f,f),l.$$state=r.state();var g=/^\s*(javascript|mailto):/i;function m(t,e,n){var i=l.url(),a=l.$$state;try{r.url(t,e,n),l.$$state=r.state()}catch(t){throw l.url(i),l.$$state=a,t}}a.on("click",(function(t){var i=e.rewriteLinks;if(i&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var s=o(t.target);"a"!==rt(s[0]);)if(s[0]===a[0]||!(s=s.parent())[0])return;if(!j(i)||!N(s.attr(i))){var u=s.prop("href"),c=s.attr("href")||s.attr("xlink:href");B(u)&&"[object SVGAnimatedString]"===u.toString()&&(u=di(u.animVal).href),g.test(u)||!u||s.attr("target")||t.isDefaultPrevented()||l.$$parseLinkUrl(u,c)&&(t.preventDefault(),l.absUrl()!==r.url()&&n.$apply())}}})),l.absUrl()!==f&&r.url(l.absUrl(),!0);var v=!0;return r.onUrlChange((function(t,e){lr(t,p)?(n.$evalAsync((function(){var r,i=l.absUrl(),a=l.$$state;l.$$parse(t),l.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,a).defaultPrevented,l.absUrl()===t&&(r?(l.$$parse(i),l.$$state=a,m(i,!1,a)):(v=!1,y(i,a)))})),n.$$phase||n.$digest()):s.location.href=t})),n.$watch((function(){if(v||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var t=r.url(),e=l.absUrl(),a=r.state(),o=l.$$replace,s=!((u=t)===(c=e)||di(u).href===di(c).href)||l.$$html5&&i.history&&a!==l.$$state;(v||s)&&(v=!1,n.$evalAsync((function(){var e=l.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,l.$$state,a).defaultPrevented;l.absUrl()===e&&(r?(l.$$parse(t),l.$$state=a):(s&&m(e,o,a===l.$$state?null:l.$$state),y(t,a)))})))}var u,c;l.$$replace=!1})),l;function y(t,e){n.$broadcast("$locationChangeSuccess",l.absUrl(),t,l.$$state,e)}}]}function yr(){var t=!0,e=this;this.debugEnabled=function(e){return U(e)?(t=e,this):t},this.$get=["$window",function(n){var r,i=a||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:s("log"),info:s("info"),warn:s("warn"),error:s("error"),debug:(r=s("debug"),function(){t&&r.apply(e,arguments)})};function o(t){return G(t)&&(t.stack&&i?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function s(t){var e=n.console||{},r=e[t]||e.log||I;return function(){var t=[];return x(arguments,(function(e){t.push(o(e))})),Function.prototype.apply.call(r,e,t)}}}]}x([fr,hr,dr],(function(t){t.prototype=Object.create(pr),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==dr||!this.$$html5)throw rr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=N(e)?null:e,this.$$urlUpdatedByLocation=!0,this}}));var br=i("$parse"),Sr={}.constructor.prototype.valueOf;function wr(t){return t+""}var Tr=Bt();x("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(t){Tr[t]=!0}));var xr={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},_r=function(t){this.options=t};_r.prototype={constructor:_r,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=Tr[e],a=Tr[n],o=Tr[r];if(i||a||o){var s=o?r:a?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=U(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw br("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=h(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(r+=a,i){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{n+=xr[a]||a}i=!1}else if("\\"===a)i=!0;else{if(a===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",e)}};var kr=function(t,e){this.lexer=t,this.options=e};function Er(t,e){return void 0!==t?t:e}function $r(t,e){return void 0===t?e:void 0===e?t:t+e}kr.Program="Program",kr.ExpressionStatement="ExpressionStatement",kr.AssignmentExpression="AssignmentExpression",kr.ConditionalExpression="ConditionalExpression",kr.LogicalExpression="LogicalExpression",kr.BinaryExpression="BinaryExpression",kr.UnaryExpression="UnaryExpression",kr.CallExpression="CallExpression",kr.MemberExpression="MemberExpression",kr.Identifier="Identifier",kr.Literal="Literal",kr.ArrayExpression="ArrayExpression",kr.Property="Property",kr.ObjectExpression="ObjectExpression",kr.ThisExpression="ThisExpression",kr.LocalsExpression="LocalsExpression",kr.NGValueParameter="NGValueParameter",kr.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:kr.Program,body:t}},expressionStatement:function(){return{type:kr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Dr(t))throw br("lval","Trying to assign a value to a non l-value");t={type:kr.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:kr.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:kr.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:kr.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:kr.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:kr.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:kr.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:kr.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:kr.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=ot(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:kr.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:kr.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:kr.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:kr.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:kr.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:kr.Identifier,name:t.text}},constant:function(){return{type:kr.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:kr.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:kr.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:kr.ObjectExpression,properties:e}},throwError:function(t,e){throw br("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw br("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw br("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var a=this.tokens[t],o=a.text;if(o===e||o===n||o===r||o===i||!e&&!n&&!r&&!i)return a}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:kr.ThisExpression},$locals:{type:kr.LocalsExpression}}};function Ar(t,e,n){var r,i,a,o=t.isPure=function(t,e){switch(t.type){case kr.MemberExpression:if(t.computed)return!1;break;case kr.UnaryExpression:return 1;case kr.BinaryExpression:return"+"!==t.operator&&1;case kr.CallExpression:return!1}return void 0===e?2:e}(t,n);switch(t.type){case kr.Program:r=!0,x(t.body,(function(t){Ar(t.expression,e,o),r=r&&t.expression.constant})),t.constant=r;break;case kr.Literal:t.constant=!0,t.toWatch=[];break;case kr.UnaryExpression:Ar(t.argument,e,o),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case kr.BinaryExpression:Ar(t.left,e,o),Ar(t.right,e,o),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case kr.LogicalExpression:Ar(t.left,e,o),Ar(t.right,e,o),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case kr.ConditionalExpression:Ar(t.test,e,o),Ar(t.alternate,e,o),Ar(t.consequent,e,o),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case kr.Identifier:t.constant=!1,t.toWatch=[t];break;case kr.MemberExpression:Ar(t.object,e,o),t.computed&&Ar(t.property,e,o),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case kr.CallExpression:a=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),r=a,i=[],x(t.arguments,(function(t){Ar(t,e,o),r=r&&t.constant,i.push.apply(i,t.toWatch)})),t.constant=r,t.toWatch=a?i:[t];break;case kr.AssignmentExpression:Ar(t.left,e,o),Ar(t.right,e,o),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case kr.ArrayExpression:r=!0,i=[],x(t.elements,(function(t){Ar(t,e,o),r=r&&t.constant,i.push.apply(i,t.toWatch)})),t.constant=r,t.toWatch=i;break;case kr.ObjectExpression:r=!0,i=[],x(t.properties,(function(t){Ar(t.value,e,o),r=r&&t.value.constant,i.push.apply(i,t.value.toWatch),t.computed&&(Ar(t.key,e,!1),r=r&&t.key.constant,i.push.apply(i,t.key.toWatch))})),t.constant=r,t.toWatch=i;break;case kr.ThisExpression:case kr.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Cr(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length||n[0]!==e?n:void 0}}function Dr(t){return t.type===kr.Identifier||t.type===kr.MemberExpression}function Mr(t){if(1===t.body.length&&Dr(t.body[0].expression))return{type:kr.AssignmentExpression,left:t.body[0].expression,right:{type:kr.NGValueParameter},operator:"="}}function Rr(t){this.$filter=t}function Or(t){this.$filter=t}function Ir(t,e,n){this.ast=new kr(t,n),this.astCompiler=n.csp?new Or(e):new Rr(e)}function Lr(t){return Y(t.valueOf)?t.valueOf():Sr.call(t)}function Pr(){var t,e,n=Bt(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,r){return t=n,e=r,this},this.$get=["$filter",function(i){var a={csp:ut().noUnsafeEval,literals:ot(r),isIdentifierStart:Y(t)&&t,isIdentifierContinue:Y(e)&&e};return o.$$getAst=function(t){return new Ir(new _r(a),i,a).getAst(t).ast},o;function o(t,e){var r,o;switch(typeof t){case"string":if(t=t.trim(),!(r=n[o=t]))r=new Ir(new _r(a),i,a).parse(t),n[o]=h(r);return f(r,e);case"function":return f(t,e);default:return f(I,e)}}function s(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Lr(t))&&!n)&&(t===e||t!=t&&e!=e)}function l(t,e,n,r,i){var a,o=r.inputs;if(1===o.length){var l=s;return o=o[0],t.$watch((function(t){var e=o(t);return s(e,l,o.isPure)||(a=r(t,void 0,void 0,[e]),l=e&&Lr(e)),a}),e,n,i)}for(var u=[],c=[],d=0,h=o.length;d<h;d++)u[d]=s,c[d]=null;return t.$watch((function(t){for(var e=!1,n=0,i=o.length;n<i;n++){var l=o[n](t);(e||(e=!s(l,u[n],o[n].isPure)))&&(c[n]=l,u[n]=l&&Lr(l))}return e&&(a=r(t,void 0,void 0,c)),a}),e,n,i)}function u(t,e,n,r,i){var a,o,s=r.literal?c:U,l=r.$$intercepted||r,u=r.$$interceptor||L,d=r.inputs&&!l.inputs;return p.literal=r.literal,p.constant=r.constant,p.inputs=r.inputs,h(p),a=t.$watch(p,e,n,i);function f(){s(o)&&a()}function p(t,e,n,r){return o=d&&r?r[0]:l(t,e,n,r),s(o)&&t.$$postDigest(f),u(o)}}function c(t){var e=!0;return x(t,(function(t){U(t)||(e=!1)})),e}function d(t,e,n,r){var i=t.$watch((function(t){return i(),r(t)}),e,n);return i}function h(t){return t.constant?t.$$watchDelegate=d:t.oneTime?t.$$watchDelegate=u:t.inputs&&(t.$$watchDelegate=l),t}function f(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function n(n){return e(t(n))}return n.$stateful=t.$stateful||e.$stateful,n.$$pure=t.$$pure&&e.$$pure,n}(t.$$interceptor,e),t=t.$$intercepted);var n=!1,r=function(r,i,a,o){var s=n&&o?o[0]:t(r,i,a,o);return e(s)};return r.$$intercepted=t,r.$$interceptor=e,r.literal=t.literal,r.oneTime=t.oneTime,r.constant=t.constant,e.$stateful||(n=!t.inputs,r.inputs=t.inputs?t.inputs:[t],e.$$pure||(r.inputs=r.inputs.map((function(t){return 2===t.isPure?function(e){return t(e)}:t})))),h(r)}}]}function Fr(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return Ur((function(t){e.$evalAsync(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return U(e)?(t=e,this):t}}function Nr(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return Ur((function(t){e.defer(t)}),n,t)}],this.errorOnUnhandledRejections=function(e){return U(e)?(t=e,this):t}}function Ur(t,e,n){var r=i("$q",TypeError),a=0,o=[];function s(){return new l}function l(){var t=this.promise=new u;this.resolve=function(e){h(t,e)},this.reject=function(e){p(t,e)},this.notify=function(e){m(t,e)}}function u(){this.$$state={status:0}}function c(){for(;!a&&o.length;){var t=o.shift();if(!Br(t)){Vr(t);var n="Possibly unhandled rejection: "+Wt(t.value);G(t.value)?e(t.value,n):e(n)}}}function d(r){!n||r.pending||2!==r.status||Br(r)||(0===a&&0===o.length&&t(c),o.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++a,t((function(){!function(r){var i,o,s;s=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var l=0,u=s.length;l<u;++l){Vr(r),o=s[l][0],i=s[l][r.status];try{Y(i)?h(o,i(r.value)):1===r.status?h(o,r.value):p(o,r.value)}catch(t){p(o,t),t&&!0===t.$$passToExceptionHandler&&e(t)}}}finally{--a,n&&0===a&&t(c)}}(r)})))}function h(t,e){t.$$state.status||(e===t?g(t,r("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):f(t,e))}function f(t,e){var n,r=!1;try{(B(e)||Y(e))&&(n=e.then),Y(n)?(t.$$state.status=-1,n.call(e,(function(e){if(r)return;r=!0,f(t,e)}),i,(function(e){m(t,e)}))):(t.$$state.value=e,t.$$state.status=1,d(t.$$state))}catch(t){i(t)}function i(e){r||(r=!0,g(t,e))}}function p(t,e){t.$$state.status||g(t,e)}function g(t,e){t.$$state.value=e,t.$$state.status=2,d(t.$$state)}function m(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&t((function(){for(var t,n,a=0,o=i.length;a<o;a++){n=i[a][0],t=i[a][3];try{m(n,Y(t)?t(r):r)}catch(t){e(t)}}}))}function v(t){var e=new u;return p(e,t),e}function y(t,e,n){var r=null;try{Y(n)&&(r=n())}catch(t){return v(t)}return J(r)?r.then((function(){return e(t)}),v):e(t)}function b(t,e,n,r){var i=new u;return h(i,t),i.then(e,n,r)}C(u.prototype,{then:function(t,e,n){if(N(t)&&N(e)&&N(n))return this;var r=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&d(this.$$state),r},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then((function(e){return y(e,S,t)}),(function(e){return y(e,v,t)}),e)}});var S=b;function w(t){if(!Y(t))throw r("norslvr","Expected resolverFn, got '{0}'",t);var e=new u;return t((function(t){h(e,t)}),(function(t){p(e,t)})),e}return w.prototype=u.prototype,w.defer=s,w.reject=v,w.when=b,w.resolve=S,w.all=function(t){var e=new u,n=0,r=z(t)?[]:{};return x(t,(function(t,i){n++,b(t).then((function(t){r[i]=t,--n||h(e,r)}),(function(t){p(e,t)}))})),0===n&&h(e,r),e},w.race=function(t){var e=s();return x(t,(function(t){b(t).then(e.resolve,e.reject)})),e.promise},w}function Br(t){return!!t.pur}function Vr(t){t.pur=!0}function jr(t){t.$$state&&Vr(t.$$state)}function Hr(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,a=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return a.supported=i,a}]}function Wr(){var t=10,e=i("$rootScope"),n=null,r=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(i,o,s){function l(t){t.currentScope.$$destroyed=!0}function u(t){9===a&&(t.$$childHead&&u(t.$$childHead),t.$$nextSibling&&u(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function c(){this.$id=E(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}c.prototype={constructor:c,$new:function(t,e){var n;return e=e||this,t?(n=new c).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=E(),this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",l),n},$watch:function(t,e,r,i){var a=o(t),s=Y(e)?e:I;if(a.$$watchDelegate)return a.$$watchDelegate(this,s,r,a,t);var l=this,u=l.$$watchers,c={fn:s,last:w,get:a,exp:i||t,eq:!!r};return n=null,u||((u=l.$$watchers=[]).$$digestWatchIndex=-1),u.unshift(c),u.$$digestWatchIndex++,b(this,1),function(){var t=at(u,c);t>=0&&(b(l,-1),t<u.$$digestWatchIndex&&u.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),r=new Array(t.length),i=[],a=this,o=!1,s=!0;if(!t.length){var l=!0;return a.$evalAsync((function(){l&&e(r,r,a)})),function(){l=!1}}if(1===t.length)return this.$watch(t[0],(function(t,i,a){r[0]=t,n[0]=i,e(r,t===i?r:n,a)}));function u(){o=!1;try{s?(s=!1,e(r,r,a)):e(r,n,a)}finally{for(var i=0;i<t.length;i++)n[i]=r[i]}}return x(t,(function(t,e){var n=a.$watch(t,(function(t){r[e]=t,o||(o=!0,a.$evalAsync(u))}));i.push(n)})),function(){for(;i.length;)i.shift()()}},$watchCollection:function(t,e){g.$$pure=o(t).literal,g.$stateful=!g.$$pure;var n,r,i,a=this,s=e.length>1,l=0,u=o(t,g),c=[],h={},f=!0,p=0;function g(t){var e,i,a,o;if(!N(n=t)){if(B(n))if(T(n)){r!==c&&(p=(r=c).length=0,l++),e=n.length,p!==e&&(l++,r.length=p=e);for(var s=0;s<e;s++)o=r[s],a=n[s],o!=o&&a!=a||o===a||(l++,r[s]=a)}else{for(i in r!==h&&(r=h={},p=0,l++),e=0,n)d.call(n,i)&&(e++,a=n[i],o=r[i],i in r?o!=o&&a!=a||o===a||(l++,r[i]=a):(p++,r[i]=a,l++));if(p>e)for(i in l++,r)d.call(n,i)||(p--,delete r[i])}else r!==n&&(r=n,l++);return l}}return this.$watch(u,(function(){if(f?(f=!1,e(n,n,a)):e(n,i,a),s)if(B(n))if(T(n)){i=new Array(n.length);for(var t=0;t<n.length;t++)i[t]=n[t]}else for(var r in i={},n)d.call(n,r)&&(i[r]=n[r]);else i=n}))},$digest:function(){var a,o,l,u,c,d,g,b,S,T=t,x=f.length?h:this,k=[];v("$digest"),s.$$checkUrlChange(),this===h&&null!==r&&(s.defer.cancel(r),_()),n=null;do{c=!1,g=x;for(var E=0;E<f.length;E++){try{(0,(S=f[E]).fn)(S.scope,S.locals)}catch(t){i(t)}n=null}f.length=0;t:do{if(u=!g.$$suspended&&g.$$watchers)for(u.$$digestWatchIndex=u.length;u.$$digestWatchIndex--;)try{if(a=u[u.$$digestWatchIndex])if((o=(0,a.get)(g))===(l=a.last)||(a.eq?lt(o,l):R(o)&&R(l))){if(a===n){c=!1;break t}}else c=!0,n=a,a.last=a.eq?ot(o,null):o,(0,a.fn)(o,l===w?o:l,g),T<5&&(k[b=4-T]||(k[b]=[]),k[b].push({msg:Y(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:o,oldVal:l}))}catch(t){i(t)}if(!(d=!g.$$suspended&&g.$$watchersCount&&g.$$childHead||g!==x&&g.$$nextSibling))for(;g!==x&&!(d=g.$$nextSibling);)g=g.$parent}while(g=d);if((c||f.length)&&!T--)throw y(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,k)}while(c||f.length);for(y();m<p.length;)try{p[m++]()}catch(t){i(t)}p.length=m=0,s.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===h&&s.$$applicationDestroyed(),b(this,-this.$$watchersCount),this.$$listenerCount)S(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=I,this.$on=this.$watch=this.$watchGroup=function(){return I},this.$$listeners={},this.$$nextSibling=null,u(this)}},$eval:function(t,e){return o(t)(this,e)},$evalAsync:function(t,e){h.$$phase||f.length||s.defer((function(){f.length&&h.$digest()}),null,"$evalAsync"),f.push({scope:this,fn:o(t),locals:e})},$$postDigest:function(t){p.push(t)},$apply:function(t){try{v("$apply");try{return this.$eval(t)}finally{y()}}catch(t){i(t)}finally{try{h.$digest()}catch(t){throw i(t),t}}},$applyAsync:function(t){var e=this;t&&g.push((function(){e.$eval(t)})),t=o(t),null===r&&(r=s.defer((function(){h.$apply(_)}),null,"$applyAsync"))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do{r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(delete n[r],S(i,1,t))}},$emit:function(t,e){var n,r,a,o=[],s=this,l=!1,u={name:t,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=dt([u],arguments,1);do{for(n=s.$$listeners[t]||o,u.currentScope=s,r=0,a=n.length;r<a;r++)if(n[r])try{n[r].apply(null,c)}catch(t){i(t)}else n.splice(r,1),r--,a--;if(l)break;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(t,e){var n=this,r=n,a=n,o={name:t,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return o;for(var s,l,u,c=dt([o],arguments,1);r=a;){for(o.currentScope=r,l=0,u=(s=r.$$listeners[t]||[]).length;l<u;l++)if(s[l])try{s[l].apply(null,c)}catch(t){i(t)}else s.splice(l,1),l--,u--;if(!(a=r.$$listenerCount[t]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(a=r.$$nextSibling);)r=r.$parent}return o.currentScope=null,o}};var h=new c,f=h.$$asyncQueue=[],p=h.$$postDigestQueue=[],g=h.$$applyAsyncQueue=[],m=0;return h;function v(t){if(h.$$phase)throw e("inprog","{0} already in progress",h.$$phase);h.$$phase=t}function y(){h.$$phase=null}function b(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function S(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function w(){}function _(){for(;g.length;)try{g.shift()()}catch(t){i(t)}r=null}}]}function zr(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return U(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return U(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i=r?e:t,a=di(n&&n.trim()).href;return""===a||a.match(i)?n:"unsafe:"+a}}}Rr.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Ar(t,e.$filter);var n,r="";if(this.stage="assign",n=Mr(t)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var a=Cr(t.body);e.stage="inputs",x(a,(function(t,n){var r="fn"+n;e.state[r]={vars:[],body:[],own:{}},e.state.computing=r;var i=e.nextId();e.recurse(t,i),e.return_(i),e.state.inputs.push({name:r,isPure:t.isPure}),t.watchId=n})),this.state.computing="fn",this.stage="main",this.recurse(t);var o='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",o)(this.$filter,wr,Er,$r);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return x(e,(function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")})),e.length&&t.push("fn.inputs=["+e.map((function(t){return t.name})).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return x(this.state.filters,(function(n,r){t.push(n+"=$filter("+e.escape(r)+")")})),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,i,a){var o,s,l,u,c,d=this;if(r=r||I,!a&&U(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,i,!0));switch(t.type){case kr.Program:x(t.body,(function(e,n){d.recurse(e.expression,void 0,void 0,(function(t){s=t})),n!==t.body.length-1?d.current().body.push(s,";"):d.return_(s)}));break;case kr.Literal:u=this.escape(t.value),this.assign(e,u),r(e||u);break;case kr.UnaryExpression:this.recurse(t.argument,void 0,void 0,(function(t){s=t})),u=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,u),r(u);break;case kr.BinaryExpression:this.recurse(t.left,void 0,void 0,(function(t){o=t})),this.recurse(t.right,void 0,void 0,(function(t){s=t})),u="+"===t.operator?this.plus(o,s):"-"===t.operator?this.ifDefined(o,0)+t.operator+this.ifDefined(s,0):"("+o+")"+t.operator+"("+s+")",this.assign(e,u),r(u);break;case kr.LogicalExpression:e=e||this.nextId(),d.recurse(t.left,e),d.if_("&&"===t.operator?e:d.not(e),d.lazyRecurse(t.right,e)),r(e);break;case kr.ConditionalExpression:e=e||this.nextId(),d.recurse(t.test,e),d.if_(e,d.lazyRecurse(t.alternate,e),d.lazyRecurse(t.consequent,e)),r(e);break;case kr.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",t.name)),(function(){d.if_("inputs"===d.stage||"s",(function(){i&&1!==i&&d.if_(d.isNull(d.nonComputedMember("s",t.name)),d.lazyAssign(d.nonComputedMember("s",t.name),"{}")),d.assign(e,d.nonComputedMember("s",t.name))}))}),e&&d.lazyAssign(e,d.nonComputedMember("l",t.name))),r(e);break;case kr.MemberExpression:o=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),d.recurse(t.object,o,void 0,(function(){d.if_(d.notNull(o),(function(){t.computed?(s=d.nextId(),d.recurse(t.property,s),d.getStringValue(s),i&&1!==i&&d.if_(d.not(d.computedMember(o,s)),d.lazyAssign(d.computedMember(o,s),"{}")),u=d.computedMember(o,s),d.assign(e,u),n&&(n.computed=!0,n.name=s)):(i&&1!==i&&d.if_(d.isNull(d.nonComputedMember(o,t.property.name)),d.lazyAssign(d.nonComputedMember(o,t.property.name),"{}")),u=d.nonComputedMember(o,t.property.name),d.assign(e,u),n&&(n.computed=!1,n.name=t.property.name))}),(function(){d.assign(e,"undefined")})),r(e)}),!!i);break;case kr.CallExpression:e=e||this.nextId(),t.filter?(s=d.filter(t.callee.name),l=[],x(t.arguments,(function(t){var e=d.nextId();d.recurse(t,e),l.push(e)})),u=s+"("+l.join(",")+")",d.assign(e,u),r(e)):(s=d.nextId(),o={},l=[],d.recurse(t.callee,s,o,(function(){d.if_(d.notNull(s),(function(){x(t.arguments,(function(e){d.recurse(e,t.constant?void 0:d.nextId(),void 0,(function(t){l.push(t)}))})),u=o.name?d.member(o.context,o.name,o.computed)+"("+l.join(",")+")":s+"("+l.join(",")+")",d.assign(e,u)}),(function(){d.assign(e,"undefined")})),r(e)})));break;case kr.AssignmentExpression:s=this.nextId(),o={},this.recurse(t.left,void 0,o,(function(){d.if_(d.notNull(o.context),(function(){d.recurse(t.right,s),u=d.member(o.context,o.name,o.computed)+t.operator+s,d.assign(e,u),r(e||u)}))}),1);break;case kr.ArrayExpression:l=[],x(t.elements,(function(e){d.recurse(e,t.constant?void 0:d.nextId(),void 0,(function(t){l.push(t)}))})),u="["+l.join(",")+"]",this.assign(e,u),r(e||u);break;case kr.ObjectExpression:l=[],c=!1,x(t.properties,(function(t){t.computed&&(c=!0)})),c?(e=e||this.nextId(),this.assign(e,"{}"),x(t.properties,(function(t){t.computed?(o=d.nextId(),d.recurse(t.key,o)):o=t.key.type===kr.Identifier?t.key.name:""+t.key.value,s=d.nextId(),d.recurse(t.value,s),d.assign(d.member(e,o,t.computed),s)}))):(x(t.properties,(function(e){d.recurse(e.value,t.constant?void 0:d.nextId(),void 0,(function(t){l.push(d.escape(e.key.type===kr.Identifier?e.key.name:""+e.key.value)+":"+t)}))})),u="{"+l.join(",")+"}",this.assign(e,u)),r(e||u);break;case kr.ThisExpression:this.assign(e,"s"),r(e||"s");break;case kr.LocalsExpression:this.assign(e,"l"),r(e||"l");break;case kr.NGValueParameter:this.assign(e,"v"),r(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,r,i,a){var o=this;return function(){o.recurse(t,e,n,r,i,a)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(j(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(H(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw br("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},Or.prototype={compile:function(t){var e,n,r=this;Ar(t,r.$filter),(e=Mr(t))&&(n=this.recurse(e));var i,a=Cr(t.body);a&&(i=[],x(a,(function(t,e){var n=r.recurse(t);n.isPure=t.isPure,t.input=n,i.push(n),t.watchId=e})));var o=[];x(t.body,(function(t){o.push(r.recurse(t.expression))}));var s=0===t.body.length?I:1===t.body.length?o[0]:function(t,e){var n;return x(o,(function(r){n=r(t,e)})),n};return n&&(s.assign=function(t,e,r){return n(t,r,e)}),i&&(s.inputs=i),s},recurse:function(t,e,n){var r,i,a,o=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case kr.Literal:return this.value(t.value,e);case kr.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case kr.BinaryExpression:case kr.LogicalExpression:return r=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](r,i,e);case kr.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case kr.Identifier:return o.identifier(t.name,e,n);case kr.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(r,i,e,n):this.nonComputedMember(r,i,e,n);case kr.CallExpression:return a=[],x(t.arguments,(function(t){a.push(o.recurse(t))})),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,n,r,o){for(var s=[],l=0;l<a.length;++l)s.push(a[l](t,n,r,o));var u=i.apply(void 0,s,o);return e?{context:void 0,name:void 0,value:u}:u}:function(t,n,r,o){var s,l=i(t,n,r,o);if(null!=l.value){for(var u=[],c=0;c<a.length;++c)u.push(a[c](t,n,r,o));s=l.value.apply(l.context,u)}return e?{value:s}:s};case kr.AssignmentExpression:return r=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,n,a,o){var s=r(t,n,a,o),l=i(t,n,a,o);return s.context[s.name]=l,e?{value:l}:l};case kr.ArrayExpression:return a=[],x(t.elements,(function(t){a.push(o.recurse(t))})),function(t,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](t,n,r,i));return e?{value:o}:o};case kr.ObjectExpression:return a=[],x(t.properties,(function(t){t.computed?a.push({key:o.recurse(t.key),computed:!0,value:o.recurse(t.value)}):a.push({key:t.key.type===kr.Identifier?t.key.name:""+t.key.value,computed:!1,value:o.recurse(t.value)})})),function(t,n,r,i){for(var o={},s=0;s<a.length;++s)a[s].computed?o[a[s].key(t,n,r,i)]=a[s].value(t,n,r,i):o[a[s].key]=a[s].value(t,n,r,i);return e?{value:o}:o};case kr.ThisExpression:return function(t){return e?{value:t}:t};case kr.LocalsExpression:return function(t,n){return e?{value:n}:n};case kr.NGValueParameter:return function(t,n,r){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,a){var o=t(n,r,i,a);return o=U(o)?+o:0,e?{value:o}:o}},"unary-":function(t,e){return function(n,r,i,a){var o=t(n,r,i,a);return o=U(o)?-o:-0,e?{value:o}:o}},"unary!":function(t,e){return function(n,r,i,a){var o=!t(n,r,i,a);return e?{value:o}:o}},"binary+":function(t,e,n){return function(r,i,a,o){var s=$r(t(r,i,a,o),e(r,i,a,o));return n?{value:s}:s}},"binary-":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o),l=e(r,i,a,o),u=(U(s)?s:0)-(U(l)?l:0);return n?{value:u}:u}},"binary*":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)*e(r,i,a,o);return n?{value:s}:s}},"binary/":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)/e(r,i,a,o);return n?{value:s}:s}},"binary%":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)%e(r,i,a,o);return n?{value:s}:s}},"binary===":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)===e(r,i,a,o);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)!==e(r,i,a,o);return n?{value:s}:s}},"binary==":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)==e(r,i,a,o);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)!=e(r,i,a,o);return n?{value:s}:s}},"binary<":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)<e(r,i,a,o);return n?{value:s}:s}},"binary>":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)>e(r,i,a,o);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)<=e(r,i,a,o);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)>=e(r,i,a,o);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)&&e(r,i,a,o);return n?{value:s}:s}},"binary||":function(t,e,n){return function(r,i,a,o){var s=t(r,i,a,o)||e(r,i,a,o);return n?{value:s}:s}},"ternary?:":function(t,e,n,r){return function(i,a,o,s){var l=t(i,a,o,s)?e(i,a,o,s):n(i,a,o,s);return r?{value:l}:l}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(r,i,a,o){var s=i&&t in i?i:r;n&&1!==n&&s&&null==s[t]&&(s[t]={});var l=s?s[t]:void 0;return e?{context:s,name:t,value:l}:l}},computedMember:function(t,e,n,r){return function(i,a,o,s){var l,u,c=t(i,a,o,s);return null!=c&&(l=wr(l=e(i,a,o,s)),r&&1!==r&&c&&!c[l]&&(c[l]={}),u=c[l]),n?{context:c,name:l,value:u}:u}},nonComputedMember:function(t,e,n,r){return function(i,a,o,s){var l=t(i,a,o,s);r&&1!==r&&l&&null==l[e]&&(l[e]={});var u=null!=l?l[e]:void 0;return n?{context:l,name:e,value:u}:u}},inputs:function(t,e){return function(n,r,i,a){return a?a[e]:t(n,r,i)}}},Ir.prototype={constructor:Ir,parse:function(t){var e=this.getAst(t),n=this.astCompiler.compile(e.ast);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===kr.Literal||t.body[0].expression.type===kr.ArrayExpression||t.body[0].expression.type===kr.ObjectExpression)}(e.ast),n.constant=function(t){return t.constant}(e.ast),n.oneTime=e.oneTime,n},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var Gr=i("$sce"),Yr={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},qr=/_([a-z])/g;function Kr(t){return t.replace(qr,Jt)}function Xr(t){var e=[];return U(t)&&x(t,(function(t){e.push(function(t){if("self"===t)return t;if(j(t)){if(t.indexOf("***")>-1)throw Gr("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(q(t))return new RegExp("^"+t.source+"$");throw Gr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))})),e}function Zr(){this.SCE_CONTEXTS=Yr;var e=["self"],n=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Xr(t)),e},this.resourceUrlBlacklist=function(t){return arguments.length&&(n=Xr(t)),n},this.$get=["$injector","$$sanitizeUri",function(r,i){var a=function(t){throw Gr("unsafe","Attempting to use an unsafe value in a safe context.")};function o(e,n){return"self"===e?hi(n,ui)||function(e){return hi(e,function(){if(t.document.baseURI)return t.document.baseURI;si||((si=t.document.createElement("a")).href=".",si=si.cloneNode(!1));return si.href}())}(n):!!e.exec(n.href)}function s(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}r.has("$sanitize")&&(a=r.get("$sanitize"));var l=s(),u={};return u[Yr.HTML]=s(l),u[Yr.CSS]=s(l),u[Yr.MEDIA_URL]=s(l),u[Yr.URL]=s(u[Yr.MEDIA_URL]),u[Yr.JS]=s(l),u[Yr.RESOURCE_URL]=s(u[Yr.URL]),{trustAs:function(t,e){var n=u.hasOwnProperty(t)?u[t]:null;if(!n)throw Gr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||N(e)||""===e)return e;if("string"!=typeof e)throw Gr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,r){if(null===r||N(r)||""===r)return r;var s=u.hasOwnProperty(t)?u[t]:null;if(s&&r instanceof s)return r.$$unwrapTrustedValue();if(Y(r.$$unwrapTrustedValue)&&(r=r.$$unwrapTrustedValue()),t===Yr.MEDIA_URL||t===Yr.URL)return i(r.toString(),t===Yr.MEDIA_URL);if(t===Yr.RESOURCE_URL){if(function(t){var r,i,a=di(t.toString()),s=!1;for(r=0,i=e.length;r<i;r++)if(o(e[r],a)){s=!0;break}if(s)for(r=0,i=n.length;r<i;r++)if(o(n[r],a)){s=!1;break}return s}(r))return r;throw Gr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",r.toString())}if(t===Yr.HTML)return a(r);throw Gr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof l?t.$$unwrapTrustedValue():t}}}]}function Jr(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&a<8)throw Gr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Ht(Yr);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=L),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,(function(e){return r.getTrusted(t,e)}))};var i=r.parseAs,o=r.getTrusted,s=r.trustAs;return x(Yr,(function(t,e){var n=h(e);r[Kr("parse_as_"+n)]=function(e){return i(t,e)},r[Kr("get_trusted_"+n)]=function(e){return o(t,e)},r[Kr("trust_as_"+n)]=function(e){return s(t,e)}})),r}]}function Qr(){this.$get=["$window","$document",function(t,e){var n={},r=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,i=M((/android (\d+)/.exec(h((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},l=s.body&&s.body.style,u=!1,c=!1;return l&&(u=!(!("transition"in l)&&!("webkitTransition"in l)),c=!(!("animation"in l)&&!("webkitAnimation"in l))),{history:!(!r||i<4||o),hasEvent:function(t){if("input"===t&&a)return!1;if(N(n[t])){var e=s.createElement("div");n[t]="on"+t in e}return n[t]},csp:ut(),transitions:u,animations:c,android:i}}]}function ti(){this.$get=P((function(t){return new ei(t)}))}function ei(t){var e=this,n={},r=[],i=e.ALL_TASKS_TYPE="$$all$$",a=e.DEFAULT_TASK_TYPE="$$default$$";function o(){var t=r.pop();return t&&t.cb}function s(t){for(var e=r.length-1;e>=0;--e){var n=r[e];if(n.type===t)return r.splice(e,1),n.cb}}e.completeTask=function(e,r){r=r||a;try{e()}finally{!function(t){n[t=t||a]&&(n[t]--,n[i]--)}(r);var l=n[r],u=n[i];if(!u||!l)for(var c,d=u?s:o;c=d(r);)try{c()}catch(e){t.error(e)}}},e.incTaskCount=function(t){n[t=t||a]=(n[t]||0)+1,n[i]=(n[i]||0)+1},e.notifyWhenNoPendingTasks=function(t,e){n[e=e||i]?r.push({type:e,cb:t}):t()}}var ni=i("$templateRequest");function ri(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,r,i,a){function o(s,l){o.totalPendingRequests++,j(s)&&!N(n.get(s))||(s=a.getTrustedResourceUrl(s));var u=r.defaults&&r.defaults.transformResponse;return z(u)?u=u.filter((function(t){return t!==Vn})):u===Vn&&(u=null),r.get(s,C({cache:n,transformResponse:u},t)).finally((function(){o.totalPendingRequests--})).then((function(t){return n.put(s,t.data)}),(function(t){l||(t=ni("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText),e(t));return i.reject(t)}))}return o.totalPendingRequests=0,o}]}function ii(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={findBindings:function(t,e,n){var r=t.getElementsByClassName("ng-binding"),i=[];return x(r,(function(t){var r=S.element(t).data("$binding");r&&x(r,(function(r){n?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(r)&&i.push(t):-1!==r.indexOf(e)&&i.push(t)}))})),i},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var a="["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]',o=t.querySelectorAll(a);if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return r}]}var ai=i("$timeout");function oi(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){var a={};function o(o,s,l){Y(o)||(l=s,s=o,o=I);var u,c=ht(arguments,3),d=U(l)&&!l,h=(d?r:n).defer(),f=h.promise;return u=e.defer((function(){try{h.resolve(o.apply(null,c))}catch(t){h.reject(t),i(t)}finally{delete a[f.$$timeoutId]}d||t.$apply()}),s,"$timeout"),f.$$timeoutId=u,a[u]=h,f}return o.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw ai("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!a.hasOwnProperty(t.$$timeoutId))return!1;var n=t.$$timeoutId,r=a[n];return jr(r.promise),r.reject("canceled"),delete a[n],e.defer.cancel(n)},o}]}var si,li=t.document.createElement("a"),ui=di(t.location.href);li.href="http://[::1]";var ci="[::1]"===li.hostname;function di(t){if(!j(t))return t;var e=t;a&&(li.setAttribute("href",e),e=li.href),li.setAttribute("href",e);var n=li.hostname;return!ci&&n.indexOf(":")>-1&&(n="["+n+"]"),{href:li.href,protocol:li.protocol?li.protocol.replace(/:$/,""):"",host:li.host,search:li.search?li.search.replace(/^\?/,""):"",hash:li.hash?li.hash.replace(/^#/,""):"",hostname:n,port:li.port,pathname:"/"===li.pathname.charAt(0)?li.pathname:"/"+li.pathname}}function hi(t,e){return t=di(t),e=di(e),t.protocol===e.protocol&&t.host===e.host}function fi(){this.$get=P(t)}function pi(t){var e=t[0]||{},n={},r="";function i(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,a,o,s,l,u=function(t){try{return t.cookie||""}catch(t){return""}}(e);if(u!==r)for(t=(r=u).split("; "),n={},o=0;o<t.length;o++)(s=(a=t[o]).indexOf("="))>0&&(l=i(a.substring(0,s)),N(n[l])&&(n[l]=i(a.substring(s+1))));return n}}function gi(){this.$get=pi}function mi(t){var e="Filter";function n(r,i){if(B(r)){var a={};return x(r,(function(t,e){a[e]=n(e,t)})),a}return t.factory(r+e,i)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",Si),n("date",Ri),n("filter",vi),n("json",Oi),n("limitTo",Pi),n("lowercase",Ii),n("number",wi),n("orderBy",Ni),n("uppercase",Li)}function vi(){return function(t,e,n,r){if(!T(t)){if(null==t)return t;throw i("filter")("notarray","Expected array but received: {0}",t)}var a,o;switch(r=r||"$",bi(e)){case"function":a=e;break;case"boolean":case"null":case"number":case"string":o=!0;case"object":a=function(t,e,n,r){var i=B(t)&&n in t;!0===e?e=lt:Y(e)||(e=function(t,e){return!N(t)&&(null===t||null===e?t===e:!(B(e)||B(t)&&!F(t))&&(t=h(""+t),e=h(""+e),-1!==t.indexOf(e)))});return function(a){return i&&!B(a)?yi(a,t[n],e,n,!1):yi(a,t,e,n,r)}}(e,n,r,o);break;default:return t}return Array.prototype.filter.call(t,a)}}function yi(t,e,n,r,i,a){var o=bi(t),s=bi(e);if("string"===s&&"!"===e.charAt(0))return!yi(t,e.substring(1),n,r,i);if(z(t))return t.some((function(t){return yi(t,e,n,r,i)}));switch(o){case"object":var l;if(i){for(l in t)if(l.charAt&&"$"!==l.charAt(0)&&yi(t[l],e,n,r,!0))return!0;return!a&&yi(t,e,n,r,!1)}if("object"===s){for(l in e){var u=e[l];if(!Y(u)&&!N(u)){var c=l===r;if(!yi(c?t:t[l],u,n,r,c,c))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function bi(t){return null===t?"null":typeof t}pi.$inject=["$document"],mi.$inject=["$provide"];function Si(t){var e=t.NUMBER_FORMATS;return function(t,n,r){N(n)&&(n=e.CURRENCY_SYM),N(r)&&(r=e.PATTERNS[1].maxFrac);var i=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:Ti(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(i,n)}}function wi(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:Ti(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Ti(t,e,n,r,i){if(!j(t)&&!H(t)||isNaN(t))return"";var a,o=!isFinite(t),s=!1,l=Math.abs(t)+"",u="";if(o)u="∞";else{(function(t,e,n,r){var i=t.d,a=i.length-t.i,o=(e=N(e)?Math.min(Math.max(n,a),r):+e)+t.i,s=i[o];if(o>0){i.splice(Math.max(t.i,o));for(var l=o;l<i.length;l++)i[l]=0}else{a=Math.max(0,a),t.i=1,i.length=Math.max(1,o=e+1),i[0]=0;for(var u=1;u<o;u++)i[u]=0}if(s>=5)if(o-1<0){for(var c=0;c>o;c--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[o-1]++;for(;a<Math.max(0,e);a++)i.push(0);var d=i.reduceRight((function(t,e,n,r){return e+=t,r[n]=e%10,Math.floor(e/10)}),0);d&&(i.unshift(d),t.i++)})(a=function(t){var e,n,r,i,a,o=0;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;"0"===t.charAt(r);r++);if(r===(a=t.length))e=[0],n=1;else{for(a--;"0"===t.charAt(a);)a--;for(n-=r,e=[],i=0;r<=a;r++,i++)e[i]=+t.charAt(r)}return n>22&&(e=e.splice(0,21),o=n-1,n=1),{d:e,e:o,i:n}}(l),i,e.minFrac,e.maxFrac);var c=a.d,d=a.i,h=a.e,f=[];for(s=c.reduce((function(t,e){return t&&!e}),!0);d<0;)c.unshift(0),d++;d>0?f=c.splice(d,c.length):(f=c,c=[0]);var p=[];for(c.length>=e.lgSize&&p.unshift(c.splice(-e.lgSize,c.length).join(""));c.length>e.gSize;)p.unshift(c.splice(-e.gSize,c.length).join(""));c.length&&p.unshift(c.join("")),u=p.join(n),f.length&&(u+=r+f.join("")),h&&(u+="e+"+h)}return t<0&&!s?e.negPre+u+e.negSuf:e.posPre+u+e.posSuf}function xi(t,e,n,r){var i="";for((t<0||r&&t<=0)&&(r?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),i+t}function _i(t,e,n,r,i){return n=n||0,function(a){var o=a["get"+t]();return(n>0||o>-n)&&(o+=n),0===o&&-12===n&&(o=12),xi(o,e,r,i)}}function ki(t,e,n){return function(r,i){var a=r["get"+t]();return i[f((n?"STANDALONE":"")+(e?"SHORT":"")+t)][a]}}function Ei(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function $i(t){return function(e){var n,r=Ei(e.getFullYear()),i=+(n=e,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+r;return xi(1+Math.round(i/6048e5),t)}}function Ai(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}Si.$inject=["$locale"],wi.$inject=["$locale"];var Ci={yyyy:_i("FullYear",4,0,!1,!0),yy:_i("FullYear",2,0,!0,!0),y:_i("FullYear",1,0,!1,!0),MMMM:ki("Month"),MMM:ki("Month",!0),MM:_i("Month",2,1),M:_i("Month",1,1),LLLL:ki("Month",!1,!0),dd:_i("Date",2),d:_i("Date",1),HH:_i("Hours",2),H:_i("Hours",1),hh:_i("Hours",2,-12),h:_i("Hours",1,-12),mm:_i("Minutes",2),m:_i("Minutes",1),ss:_i("Seconds",2),s:_i("Seconds",1),sss:_i("Milliseconds",3),EEEE:ki("Day"),EEE:ki("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var r=-1*n,i=r>=0?"+":"";return i+=xi(Math[r>0?"floor":"ceil"](r/60),2)+xi(Math.abs(r%60),2)},ww:$i(2),w:$i(1),G:Ai,GG:Ai,GGG:Ai,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Di=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Mi=/^-?\d+$/;function Ri(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,o,s="",l=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,j(n)&&(n=Mi.test(n)?M(n):function(t){var n;if(n=t.match(e)){var r=new Date(0),i=0,a=0,o=n[8]?r.setUTCFullYear:r.setFullYear,s=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=M(n[9]+n[10]),a=M(n[9]+n[11])),o.call(r,M(n[1]),M(n[2])-1,M(n[3]));var l=M(n[4]||0)-i,u=M(n[5]||0)-a,c=M(n[6]||0),d=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(r,l,u,c,d),r}return t}(n)),H(n)&&(n=new Date(n)),!W(n)||!isFinite(n.getTime()))return n;for(;r;)(o=Di.exec(r))?r=(l=dt(l,o,1)).pop():(l.push(r),r=null);var u=n.getTimezoneOffset();return i&&(u=yt(i,u),n=St(n,i,!0)),x(l,(function(e){s+=(a=Ci[e])?a(n,t.DATETIME_FORMATS,u):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),s}}function Oi(){return function(t,e){return N(e)&&(e=2),gt(t,e)}}Ri.$inject=["$locale"];var Ii=P(h),Li=P(f);function Pi(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):M(e),R(e)?t:(H(t)&&(t=t.toString()),T(t)?(n=(n=!n||isNaN(n)?0:M(n))<0?Math.max(0,t.length+n):n,e>=0?Fi(t,n,n+e):0===n?Fi(t,e,t.length):Fi(t,Math.max(0,n+e),n)):t)}}function Fi(t,e,n){return j(t)?t.slice(e,n):p.call(t,e,n)}function Ni(t){return function(r,a,o,s){if(null==r)return r;if(!T(r))throw i("orderBy")("notarray","Expected array but received: {0}",r);z(a)||(a=[a]),0===a.length&&(a=["+"]);var l=a.map((function(e){var n=1,r=L;if(Y(e))r=e;else if(j(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e)).constant)){var i=r();r=function(t){return t[i]}}return{get:r,descending:n}})),u=o?-1:1,c=Y(s)?s:n,d=Array.prototype.map.call(r,(function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:l.map((function(r){return function(t,n){var r=typeof t;null===t?r="null":"object"===r&&(t=function(t){if(Y(t.valueOf)&&e(t=t.valueOf()))return t;if(F(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:r,index:n}}(r.get(t),n)}))}}));return d.sort((function(t,e){for(var r=0,i=l.length;r<i;r++){var a=c(t.predicateValues[r],e.predicateValues[r]);if(a)return a*l[r].descending*u}return(c(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*u})),r=d.map((function(t){return t.value}))};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,r=t.type,i=e.type;if(r===i){var a=t.value,o=e.value;"string"===r?(a=a.toLowerCase(),o=o.toLowerCase()):"object"===r&&(B(a)&&(a=t.index),B(o)&&(o=e.index)),a!==o&&(n=a<o?-1:1)}else n="undefined"===r?1:"undefined"===i?-1:"null"===r?1:"null"===i||r<i?-1:1;return n}}function Ui(t){return Y(t)&&(t={link:t}),t.restrict=t.restrict||"AC",P(t)}Ni.$inject=["$parse"];var Bi=P({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===v.call(e.prop("href"))?"xlink:href":"href";e.on("click",(function(t){e.attr(n)||t.preventDefault()}))}}}}),Vi={};x(Re,(function(t,e){if("multiple"!==t){var n=wn("ng-"+e),r=i;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[n]&&i(t,0,r)}),Vi[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(t,r,i){t.$watch(i[n],(function(t){i.$set(e,!!t)}))}})),x(Ie,(function(t,e){Vi[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(u);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(r[e],(function(t){r.$set(e,t)}))}}}})),x(["src","srcset","href"],(function(t){var e=wn("ng-"+t);Vi[e]=["$sce",function(n){return{priority:99,link:function(r,i,o){var s=t,l=t;"href"===t&&"[object SVGAnimatedString]"===v.call(i.prop("href"))&&(l="xlinkHref",o.$attr[l]="xlink:href",s=null),o.$set(e,n.getTrustedMediaUrl(o[e])),o.$observe(e,(function(e){e?(o.$set(l,e),a&&s&&i.prop(s,o[l])):"href"===t&&o.$set(l,null)}))}}}]}));var ji={$addControl:I,$getControls:P([]),$$renameControl:function(t,e){t.$name=e},$removeControl:I,$setValidity:I,$setDirty:I,$setPristine:I,$setSubmitted:I,$$setSubmitted:I},Hi="ng-pending",Wi="ng-submitted";function zi(t,e,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=ji,this.$$element=t,this.$$animate=r,Ki(this)}zi.$inject=["$element","$attrs","$scope","$animate","$interpolate"],zi.prototype={$rollbackViewValue:function(){x(this.$$controls,(function(t){t.$rollbackViewValue()}))},$commitViewValue:function(){x(this.$$controls,(function(t){t.$commitViewValue()}))},$addControl:function(t){Nt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$getControls:function(){return Ht(this.$$controls)},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],x(this.$pending,(function(e,n){this.$setValidity(n,null,t)}),this),x(this.$error,(function(e,n){this.$setValidity(n,null,t)}),this),x(this.$$success,(function(e,n){this.$setValidity(n,null,t)}),this),at(this.$$controls,t),t.$$parentForm=ji},$setDirty:function(){this.$$animate.removeClass(this.$$element,Wa),this.$$animate.addClass(this.$$element,za),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Wa,za+" "+Wi),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,x(this.$$controls,(function(t){t.$setPristine()}))},$setUntouched:function(){x(this.$$controls,(function(t){t.$setUntouched()}))},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==ji;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,Wi),this.$submitted=!0,x(this.$$controls,(function(t){t.$$setSubmitted&&t.$$setSubmitted()}))}},Xi({clazz:zi,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(at(r,n),0===r.length&&delete t[e])}});var Gi=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:zi,compile:function(n,i){n.addClass(Wa).addClass(ja);var a=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,n,i,o){var s=o[0];if(!("action"in i)){var l=function(e){t.$apply((function(){s.$commitViewValue(),s.$setSubmitted()})),e.preventDefault()};n[0].addEventListener("submit",l),n.on("$destroy",(function(){e((function(){n[0].removeEventListener("submit",l)}),0,!1)}))}(o[1]||s.$$parentForm).$addControl(s);var u=a?r(s.$name):I;a&&(u(t,s),i.$observe(a,(function(e){s.$name!==e&&(u(t,void 0),s.$$parentForm.$$renameControl(s,e),(u=r(s.$name))(t,s))}))),n.on("$destroy",(function(){s.$$parentForm.$removeControl(s),u(t,void 0),C(s,ji)}))}}}};function r(t){return""===t?n('this[""]').assign:n(t).assign||I}}]},Yi=Gi(),qi=Gi(!0);function Ki(t){t.$$classCache={},t.$$classCache[Ha]=!(t.$$classCache[ja]=t.$$element.hasClass(ja))}function Xi(t){var e=t.clazz,n=t.set,r=t.unset;function i(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function a(t,e,n){e=e?"-"+Ot(e,"-"):"",i(t,ja+e,!0===n),i(t,Ha+e,!1===n)}e.prototype.$setValidity=function(t,e,o){var s;N(e)?function(t,e,r,i){t[e]||(t[e]={});n(t[e],r,i)}(this,"$pending",t,o):function(t,e,n,i){t[e]&&r(t[e],n,i);Zi(t[e])&&(t[e]=void 0)}(this,"$pending",t,o),Z(e)?e?(r(this.$error,t,o),n(this.$$success,t,o)):(n(this.$error,t,o),r(this.$$success,t,o)):(r(this.$error,t,o),r(this.$$success,t,o)),this.$pending?(i(this,Hi,!0),this.$valid=this.$invalid=void 0,a(this,"",null)):(i(this,Hi,!1),this.$valid=Zi(this.$error),this.$invalid=!this.$valid,a(this,"",this.$valid)),a(this,t,s=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,s,this)}}function Zi(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Ji=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Qi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,ta=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,ea=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,na=/^(\d{4,})-(\d{2})-(\d{2})$/,ra=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ia=/^(\d{4,})-W(\d\d)$/,aa=/^(\d{4,})-(\d\d)$/,oa=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,sa=Bt();x("date,datetime-local,month,time,week".split(","),(function(t){sa[t]=!0}));var la={text:function(t,e,n,r,i,a){ca(t,e,n,r,i,a),ua(r)},date:ha("date",na,da(na,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ha("datetimelocal",ra,da(ra,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:ha("time",oa,da(oa,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ha("week",ia,(function(t,e){if(W(t))return t;if(j(t)){ia.lastIndex=0;var n=ia.exec(t);if(n){var r=+n[1],i=+n[2],a=0,o=0,s=0,l=0,u=Ei(r),c=7*(i-1);return e&&(a=e.getHours(),o=e.getMinutes(),s=e.getSeconds(),l=e.getMilliseconds()),new Date(r,0,u.getDate()+c,a,o,s,l)}}return NaN}),"yyyy-Www"),month:ha("month",aa,da(aa,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,r,i,a,o,s){var l;if(fa(t,e,n,r,"number"),pa(r),ca(t,e,n,r,i,a),U(n.min)||n.ngMin){var u=n.min||s(n.ngMin)(t);l=ga(u),r.$validators.min=function(t,e){return r.$isEmpty(e)||N(l)||e>=l},n.$observe("min",(function(t){t!==u&&(l=ga(t),u=t,r.$validate())}))}if(U(n.max)||n.ngMax){var c=n.max||s(n.ngMax)(t),d=ga(c);r.$validators.max=function(t,e){return r.$isEmpty(e)||N(d)||e<=d},n.$observe("max",(function(t){t!==c&&(d=ga(t),c=t,r.$validate())}))}if(U(n.step)||n.ngStep){var h=n.step||s(n.ngStep)(t),f=ga(h);r.$validators.step=function(t,e){return r.$isEmpty(e)||N(f)||ya(e,l||0,f)},n.$observe("step",(function(t){t!==h&&(f=ga(t),h=t,r.$validate())}))}},url:function(t,e,n,r,i,a){ca(t,e,n,r,i,a),ua(r),r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||Qi.test(n)}},email:function(t,e,n,r,i,a){ca(t,e,n,r,i,a),ua(r),r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||ta.test(n)}},radio:function(t,e,n,r){var i=!n.ngTrim||"false"!==tt(n.ngTrim);N(n.name)&&e.attr("name",E());e.on("change",(function(t){var a;e[0].checked&&(a=n.value,i&&(a=tt(a)),r.$setViewValue(a,t&&t.type))})),r.$render=function(){var t=n.value;i&&(t=tt(t)),e[0].checked=t===r.$viewValue},n.$observe("value",r.$render)},range:function(t,e,n,r,i,a){fa(t,e,n,r,"range"),pa(r),ca(t,e,n,r,i,a);var o=r.$$hasNativeValidators&&"range"===e[0].type,s=o?0:void 0,l=o?100:void 0,u=o?1:void 0,c=e[0].validity,d=U(n.min),h=U(n.max),f=U(n.step),p=r.$render;r.$render=o&&U(c.rangeUnderflow)&&U(c.rangeOverflow)?function(){p(),r.$setViewValue(e.val())}:p,d&&(s=ga(n.min),r.$validators.min=o?function(){return!0}:function(t,e){return r.$isEmpty(e)||N(s)||e>=s},g("min",(function(t){if(s=ga(t),R(r.$modelValue))return;if(o){var n=e.val();s>n&&(n=s,e.val(n)),r.$setViewValue(n)}else r.$validate()})));h&&(l=ga(n.max),r.$validators.max=o?function(){return!0}:function(t,e){return r.$isEmpty(e)||N(l)||e<=l},g("max",(function(t){if(l=ga(t),R(r.$modelValue))return;if(o){var n=e.val();l<n&&(e.val(l),n=l<s?s:l),r.$setViewValue(n)}else r.$validate()})));f&&(u=ga(n.step),r.$validators.step=o?function(){return!c.stepMismatch}:function(t,e){return r.$isEmpty(e)||N(u)||ya(e,s||0,u)},g("step",(function(t){if(u=ga(t),R(r.$modelValue))return;o?r.$viewValue!==e.val()&&r.$setViewValue(e.val()):r.$validate()})));function g(t,r){e.attr(t,n[t]);var i=n[t];n.$observe(t,(function(t){t!==i&&(i=t,r(t))}))}},checkbox:function(t,e,n,r,i,a,o,s){var l=ba(s,t,"ngTrueValue",n.ngTrueValue,!0),u=ba(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("change",(function(t){r.$setViewValue(e[0].checked,t&&t.type)})),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push((function(t){return lt(t,l)})),r.$parsers.push((function(t){return t?l:u}))},hidden:I,button:I,submit:I,reset:I,file:I};function ua(t){t.$formatters.push((function(e){return t.$isEmpty(e)?e:e.toString()}))}function ca(t,e,n,r,i,a){var o,s=h(e[0].type);if(!i.android){var l=!1;e.on("compositionstart",(function(){l=!0})),e.on("compositionupdate",(function(t){(N(t.data)||""===t.data)&&(l=!1)})),e.on("compositionend",(function(){l=!1,u()}))}var u=function(t){if(o&&(a.defer.cancel(o),o=null),!l){var i=e.val(),u=t&&t.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(i=tt(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))e.on("input",u);else{var c=function(t,e,n){o||(o=a.defer((function(){o=null,e&&e.value===n||u(t)})))};e.on("keydown",(function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||c(t,this,this.value)})),i.hasEvent("paste")&&e.on("paste cut drop",c)}e.on("change",u),sa[s]&&r.$$hasNativeValidators&&s===n.type&&e.on("keydown wheel mousedown",(function(t){if(!o){var e=this.validity,n=e.badInput,r=e.typeMismatch;o=a.defer((function(){o=null,e.badInput===n&&e.typeMismatch===r||u(t)}))}})),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function da(t,e){return function(n,r){var i,a;if(W(n))return n;if(j(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Ji.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n)){i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},x(i,(function(t,n){n<e.length&&(a[e[n]]=+t)}));var o=new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0);return a.yyyy<100&&o.setFullYear(a.yyyy),o}}return NaN}}function ha(t,e,n,r){return function(i,a,o,s,l,u,c,d){fa(i,a,o,s,t),ca(0,a,o,s,l,u);var h,f,p="time"===t||"datetimelocal"===t;if(s.$parsers.push((function(n){return s.$isEmpty(n)?null:e.test(n)?w(n,h):void(s.$$parserName=t)})),s.$formatters.push((function(t){if(t&&!W(t))throw Xa("datefmt","Expected `{0}` to be a date",t);if(b(t)){h=t;var e=s.$options.getOption("timezone");return e&&(f=e,h=St(h,e,!0)),function(t,e){var n=r;p&&j(s.$options.getOption("timeSecondsFormat"))&&(n=r.replace("ss.sss",s.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var i=c("date")(t,n,e);p&&s.$options.getOption("timeStripZeroSeconds")&&(i=i.replace(/(?::00)?(?:\.000)?$/,""));return i}(t,e)}return h=null,f=null,""})),U(o.min)||o.ngMin){var g=o.min||d(o.ngMin)(i),m=S(g);s.$validators.min=function(t){return!b(t)||N(m)||n(t)>=m},o.$observe("min",(function(t){t!==g&&(m=S(t),g=t,s.$validate())}))}if(U(o.max)||o.ngMax){var v=o.max||d(o.ngMax)(i),y=S(v);s.$validators.max=function(t){return!b(t)||N(y)||n(t)<=y},o.$observe("max",(function(t){t!==v&&(y=S(t),v=t,s.$validate())}))}function b(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function S(t){return U(t)&&!W(t)?w(t)||void 0:t}function w(t,e){var r=s.$options.getOption("timezone");f&&f!==r&&(e=bt(e,yt(f)));var i=n(t,e);return!isNaN(i)&&r&&(i=St(i,r)),i}}}function fa(t,e,n,r,i){var a=e[0];(r.$$hasNativeValidators=B(a.validity))&&r.$parsers.push((function(t){var n=e.prop(c)||{};if(!n.badInput&&!n.typeMismatch)return t;r.$$parserName=i}))}function pa(t){t.$parsers.push((function(e){return t.$isEmpty(e)?null:ea.test(e)?parseFloat(e):void(t.$$parserName="number")})),t.$formatters.push((function(e){if(!t.$isEmpty(e)){if(!H(e))throw Xa("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}))}function ga(t){return U(t)&&!H(t)&&(t=parseFloat(t)),R(t)?void 0:t}function ma(t){return(0|t)===t}function va(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var r=/e-(\d+)$/.exec(e);if(r)return Number(r[1])}return 0}return e.length-n-1}function ya(t,e,n){var r=Number(t),i=!ma(r),a=!ma(e),o=!ma(n);if(i||a||o){var s=i?va(r):0,l=a?va(e):0,u=o?va(n):0,c=Math.max(s,l,u),d=Math.pow(10,c);r*=d,e*=d,n*=d,i&&(r=Math.round(r)),a&&(e=Math.round(e)),o&&(n=Math.round(n))}return(r-e)%n==0}function ba(t,e,n,r,i){var a;if(U(r)){if(!(a=t(r)).constant)throw Xa("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return a(e)}return i}var Sa=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,a,o,s){s[0]&&(la[h(o.type)]||la.text)(i,a,o,s[0],e,t,n,r)}}}}],wa=function(){var t={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(t){this.setAttribute("value",t)}};return{restrict:"E",priority:200,compile:function(e,n){if("hidden"===h(n.type))return{pre:function(e,n,r,i){var a=n[0];a.parentNode&&a.parentNode.insertBefore(a,a.nextSibling),Object.defineProperty&&Object.defineProperty(a,"value",t)}}}}},Ta=/^(true|false|\d+)$/,xa=function(){function t(t,e,n){var r=U(n)?n:9===a?"":null;t.prop("value",r),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return Ta.test(n.ngValue)?function(e,n,r){t(n,r,e.$eval(r.ngValue))}:function(e,n,r){e.$watch(r.ngValue,(function(e){t(n,r,e)}))}}}},_a=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,(function(t){n.textContent=Vt(t)}))}}}}],ka=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){var a=t(r.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(r,a.expressions),r=r[0],i.$observe("ngBindTemplate",(function(t){r.textContent=N(t)?"":t}))}}}}],Ea=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var a=e(i.ngBindHtml),o=e(i.ngBindHtml,(function(e){return t.valueOf(e)}));return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(o,(function(){var n=a(e);r.html(t.getTrustedHtml(n)||"")}))}}}}],$a=P({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push((function(){t.$eval(n.ngChange)}))}});function Aa(t,e){var n;return t="ngClass"+t,["$parse",function(o){return{restrict:"AC",link:function(s,l,u){var c,d=l.data("$classCounts"),h=!0;function f(t,e){var n=[];return x(t,(function(t){(e>0||d[t])&&(d[t]=(d[t]||0)+e,d[t]===+(e>0)&&n.push(t))})),n.join(" ")}d||(d=Bt(),l.data("$classCounts",d)),"ngClass"!==t&&(n||(n=o("$index",(function(t){return 1&t}))),s.$watch(n,(function(t){t===e?(n=f(i(n=c),1),u.$addClass(n)):function(t){t=f(i(t),-1),u.$removeClass(t)}(c);var n;h=t}))),s.$watch(o(u[t],a),(function(t){h===e&&function(t,e){var n=i(t),a=i(e),o=r(n,a),s=r(a,n),l=f(o,-1),c=f(s,1);u.$addClass(c),u.$removeClass(l)}(c,t);c=t}))}}}];function r(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],a=0;a<e.length;a++)if(i===e[a])continue t;n.push(i)}return n}function i(t){return t&&t.split(" ")}function a(t){if(!t)return t;var e=t;return z(t)?e=t.map(a).join(" "):B(t)?e=Object.keys(t).filter((function(e){return t[e]})).join(" "):j(t)||(e=t+""),e}}var Ca=Aa("",!0),Da=Aa("Odd",0),Ma=Aa("Even",1),Ra=Ui({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Oa=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ia={},La={blur:!0,focus:!0};function Pa(t,e,n,r,i,a){return{restrict:"A",compile:function(o,s){var l=t(s[r]);return function(t,r){r.on(i,(function(r){var i=function(){l(t,{$event:r})};if(e.$$phase)if(a)t.$evalAsync(i);else try{i()}catch(t){n(t)}else t.$apply(i)}))}}}}x("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(t){var e=wn("ng-"+t);Ia[e]=["$parse","$rootScope","$exceptionHandler",function(n,r,i){return Pa(n,r,i,e,t,La[t])}]}));var Fa=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,a,o){var s,l,u;n.$watch(i.ngIf,(function(n){n?l||o((function(n,a){l=a,n[n.length++]=e.$$createComment("end ngIf",i.ngIf),s={clone:n},t.enter(n,r.parent(),r)})):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),s&&(u=Ut(s.clone),t.leave(u).done((function(t){!1!==t&&(u=null)})),s=null))}))}}}],Na=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:S.noop,compile:function(r,i){var a=i.ngInclude||i.src,o=i.onload||"",s=i.autoscroll;return function(r,i,l,u,c){var d,h,f,p=0,g=function(){h&&(h.remove(),h=null),d&&(d.$destroy(),d=null),f&&(n.leave(f).done((function(t){!1!==t&&(h=null)})),h=f,f=null)};r.$watch(a,(function(a){var l=function(t){!1===t||!U(s)||s&&!r.$eval(s)||e()},h=++p;a?(t(a,!0).then((function(t){if(!r.$$destroyed&&h===p){var e=r.$new();u.template=t;var s=c(e,(function(t){g(),n.enter(t,null,i).done(l)}));f=s,(d=e).$emit("$includeContentLoaded",a),r.$eval(o)}}),(function(){r.$$destroyed||h===p&&(g(),r.$emit("$includeContentError",a))})),r.$emit("$includeContentRequested",a)):(g(),u.template=null)}))}}}}],Ua=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,a){if(v.call(r[0]).match(/SVG/))return r.empty(),void e(de(a.template,t.document).childNodes)(n,(function(t){r.append(t)}),{futureParentElement:r});r.html(a.template),e(r.contents())(n)}}}],Ba=Ui({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Va=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var i=n.ngList||", ",a="false"!==n.ngTrim,o=a?tt(i):i;r.$parsers.push((function(t){if(!N(t)){var e=[];return t&&x(t.split(o),(function(t){t&&e.push(a?tt(t):t)})),e}})),r.$formatters.push((function(t){if(z(t))return t.join(i)})),r.$isEmpty=function(t){return!t||!t.length}}}},ja="ng-valid",Ha="ng-invalid",Wa="ng-pristine",za="ng-dirty",Ga="ng-untouched",Ya="ng-touched",qa="ng-empty",Ka="ng-not-empty",Xa=i("ngModel");function Za(t,e,n,r,i,a,o,s,l){var u;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(t),this.$$parentForm=ji,this.$options=Ja,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=n,this.$$element=r,this.$$animate=a,this.$$timeout=o,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=e,Ki(this),(u=this).$$scope.$watch((function(t){var e=u.$$ngModelGet(t);return e===u.$modelValue||u.$modelValue!=u.$modelValue&&e!=e||u.$$setModelValue(e),e}))}Za.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Za.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return Y(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){Y(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Xa("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,wt(this.$$element))},$render:I,$isEmpty:function(t){return N(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,Ka),this.$$animate.addClass(this.$$element,qa)):(this.$$animate.removeClass(this.$$element,qa),this.$$animate.addClass(this.$$element,Ka))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,za),this.$$animate.addClass(this.$$element,Wa)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Wa),this.$$animate.addClass(this.$$element,za),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Ga,Ya)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Ya,Ga)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!R(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),a=this;this.$$runValidators(e,t,(function(t){i||n===t||(a.$modelValue=t?e:void 0,a.$modelValue!==r&&a.$$writeModelToScope())}))}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var r,i,a=this.$$currentValidationRunId,o=this;(function(){var t=o.$$parserName;if(!N(o.$$parserValid))return o.$$parserValid||(x(o.$validators,(function(t,e){s(e,null)})),x(o.$asyncValidators,(function(t,e){s(e,null)}))),s(t,o.$$parserValid),o.$$parserValid;s(t,null);return!0})()?!function(){var n=!0;if(x(o.$validators,(function(r,i){var a=Boolean(r(t,e));n=n&&a,s(i,a)})),!n)return x(o.$asyncValidators,(function(t,e){s(e,null)})),!1;return!0}()?l(!1):(r=[],i=!0,x(o.$asyncValidators,(function(n,a){var o=n(t,e);if(!J(o))throw Xa("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",o);s(a,void 0),r.push(o.then((function(){s(a,!0)}),(function(){i=!1,s(a,!1)})))})),r.length?o.$$q.all(r).then((function(){l(i)}),I):l(!0)):l(!1);function s(t,e){a===o.$$currentValidationRunId&&o.$setValidity(t,e)}function l(t){a===o.$$currentValidationRunId&&n(t)}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!N(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(N(t=this.$parsers[n](t))){this.$$parserValid=!1;break}R(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");function a(){e.$modelValue!==r&&e.$$writeModelToScope()}this.$$rawModelValue=t,i&&(this.$modelValue=t,a()),this.$$runValidators(t,this.$$lastCommittedViewValue,(function(n){i||(e.$modelValue=n?t:void 0,a())}))},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),x(this.$viewChangeListeners,(function(t){try{t()}catch(t){this.$$exceptionHandler(t)}}),this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");H(e[t])?e=e[t]:H(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:H(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout((function(){n.$commitViewValue()}),e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply((function(){n.$commitViewValue()}))},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,I))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Xi({clazz:Za,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Ja,Qa=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Za,priority:1,compile:function(e){return e.addClass(Wa).addClass(Ga).addClass(ja),{pre:function(t,e,n,r){var i=r[0],a=r[1]||i.$$parentForm,o=r[2];o&&(i.$options=o.$options),i.$$initGetterSetters(),a.$addControl(i),n.$observe("name",(function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)})),t.$on("$destroy",(function(){i.$$parentForm.$removeControl(i)}))},post:function(e,n,r,i){var a=i[0];function o(){a.$setTouched()}a.$$setUpdateOnEvents(),n.on("blur",(function(){a.$touched||(t.$$phase?e.$evalAsync(o):e.$apply(o))}))}}}}}],to=/(\s+|^)default(\s+|$)/;function eo(t){this.$$options=t}eo.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return x(t=C({},t),(function(n,r){"$inherit"===n?"*"===r?e=!0:(t[r]=this.$$options[r],"updateOn"===r&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(t.updateOnDefault=!1,t[r]=tt(n.replace(to,(function(){return t.updateOnDefault=!0," "}))))}),this),e&&(delete t["*"],ro(t,this.$$options)),ro(t,Ja.$$options),new eo(t)}},Ja=new eo({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var no=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Ja,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function ro(t,e){x(e,(function(e,n){U(t[n])||(t[n]=e)}))}var io=Ui({terminal:!0,priority:1e3}),ao=i("ngOptions"),oo=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,so=["$compile","$document","$parse",function(e,n,r){var i=t.document.createElement("option"),a=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=I},post:function(t,s,l,u){for(var c=u[0],d=u[1],h=l.multiple,f=0,p=s.children(),g=p.length;f<g;f++)if(""===p[f].value){c.hasEmptyOption=!0,c.emptyOption=p.eq(f);break}s.empty();var m,v=!!c.emptyOption;o(i.cloneNode(!1)).val("?");var y=function(t,e,n){var i=t.match(oo);if(!i)throw ao("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,wt(e));var a=i[5]||i[7],o=i[6],s=/ as /.test(i[0])&&i[1],l=i[9],u=r(i[2]?i[1]:a),c=s&&r(s)||u,d=l&&r(l),h=l?function(t,e){return d(n,e)}:function(t){return Ue(t)},f=function(t,e){return h(t,b(t,e))},p=r(i[2]||i[1]),g=r(i[3]||""),m=r(i[4]||""),v=r(i[8]),y={},b=o?function(t,e){return y[o]=e,y[a]=t,y}:function(t){return y[a]=t,y};function S(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function w(t){var e;if(!o&&T(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:l,getTrackByValue:f,getWatchables:r(v,(function(t){for(var e=[],r=w(t=t||[]),a=r.length,o=0;o<a;o++){var s=t===r?o:r[o],l=t[s],u=b(l,s),c=h(l,u);if(e.push(c),i[2]||i[1]){var d=p(n,u);e.push(d)}if(i[4]){var f=m(n,u);e.push(f)}}return e})),getOptions:function(){for(var t=[],e={},r=v(n)||[],i=w(r),a=i.length,o=0;o<a;o++){var s=r===i?o:i[o],u=r[s],d=b(u,s),y=c(n,d),T=h(y,d),x=new S(T,y,p(n,d),g(n,d),m(n,d));t.push(x),e[T]=x}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[f(t)]},getViewValueFromOption:function(t){return l?ot(t.viewValue):t.viewValue}}}}}(l.ngOptions,s,t),b=n[0].createDocumentFragment();function S(t,e){var n=i.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label);e.value=t.selectValue}(t,n)}function w(t){var e=m.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}c.generateUnknownOptionValue=function(t){return"?"},h?(c.writeValue=function(t){if(m){var e=t&&t.map(w)||[];m.items.forEach((function(t){t.element.selected&&!it(e,t)&&(t.element.selected=!1)}))}},c.readValue=function(){var t=s.val()||[],e=[];return x(t,(function(t){var n=m.selectValueMap[t];n&&!n.disabled&&e.push(m.getViewValueFromOption(n))})),e},y.trackBy&&t.$watchCollection((function(){if(z(d.$viewValue))return d.$viewValue.map((function(t){return y.getTrackByValue(t)}))}),(function(){d.$render()}))):(c.writeValue=function(t){if(m){var e=s[0].options[s[0].selectedIndex],n=m.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(s[0].value!==n.selectValue&&(c.removeUnknownOption(),s[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):c.selectUnknownOrEmptyOption(t)}},c.readValue=function(){var t=m.selectValueMap[s.val()];return t&&!t.disabled?(c.unselectEmptyOption(),c.removeUnknownOption(),m.getViewValueFromOption(t)):null},y.trackBy&&t.$watch((function(){return y.getTrackByValue(d.$viewValue)}),(function(){d.$render()}))),v&&(e(c.emptyOption)(t),s.prepend(c.emptyOption),8===c.emptyOption[0].nodeType?(c.hasEmptyOption=!1,c.registerOption=function(t,e){""===e.val()&&(c.hasEmptyOption=!0,c.emptyOption=e,c.emptyOption.removeClass("ng-scope"),d.$render(),e.on("$destroy",(function(){var t=c.$isEmptyOptionSelected();c.hasEmptyOption=!1,c.emptyOption=void 0,t&&d.$render()})))}):c.emptyOption.removeClass("ng-scope")),t.$watchCollection(y.getWatchables,(function(){var t=m&&c.readValue();if(m)for(var e=m.items.length-1;e>=0;e--){var n=m.items[e];U(n.group)?Ce(n.element.parentNode):Ce(n.element)}m=y.getOptions();var r={};if(m.items.forEach((function(t){var e;U(t.group)?((e=r[t.group])||(e=a.cloneNode(!1),b.appendChild(e),e.label=null===t.group?"null":t.group,r[t.group]=e),S(t,e)):S(t,b)})),s[0].appendChild(b),d.$render(),!d.$isEmpty(t)){var i=c.readValue();(y.trackBy||h?lt(t,i):t===i)||(d.$setViewValue(i),d.$render())}}))}}}}],lo=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,o,s){var l,u=s.count,c=s.$attr.when&&o.attr(s.$attr.when),d=s.offset||0,f=a.$eval(c)||{},p={},g=e.startSymbol(),m=e.endSymbol(),v=g+u+"-"+d+m,y=S.noop;function b(t){o.text(t||"")}x(s,(function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+h(n[2]);f[r]=o.attr(s.$attr[e])}})),x(f,(function(t,n){p[n]=e(t.replace(r,v))})),a.$watch(u,(function(e){var r=parseFloat(e),i=R(r);if(i||r in f||(r=t.pluralCat(r-d)),!(r===l||i&&R(l))){y();var o=p[r];N(o)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+c),y=I,b()):y=a.$watch(o,b),l=r}}))}}}],uo=i("ngRef"),co=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,n){var r=wn(rt(e)),i=t(n.ngRef),a=i.assign||function(){throw uo("nonassign",'Expression in ngRef="{0}" is non-assignable!',n.ngRef)};return function(t,e,o){var s;if(o.hasOwnProperty("ngRefRead")){if("$element"===o.ngRefRead)s=e;else if(!(s=e.data("$"+o.ngRefRead+"Controller")))throw uo("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',o.ngRefRead,n.ngRef)}else s=e.data("$"+r+"Controller");a(t,s=s||e),e.on("$destroy",(function(){i(t)===s&&a(t,null)}))}}}}],ho=["$parse","$animate","$compile",function(t,e,n){var r="$$NG_REMOVED",a=i("ngRepeat"),o=function(t,e,n,r,i,a,o){t[n]=r,i&&(t[i]=a),t.$index=e,t.$first=0===e,t.$last=e===o-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},s=function(t){return t.clone[0]},l=function(t){return t.clone[t.clone.length-1]},u=function(t,e,n){return Ue(n)},c=function(t,e){return e};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,h){var f=h.ngRepeat,p=n.$$createComment("end ngRepeat",f),g=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!g)throw a("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);var m=g[1],v=g[2],y=g[3],b=g[4];if(!(g=m.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw a("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var S,w=g[3]||g[1],_=g[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw a("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);if(b){var k={$id:Ue},E=t(b);S=function(t,e,n,r){return _&&(k[_]=e),k[w]=n,k.$index=r,E(t,k)}}return function(t,n,i,h,g){var m=Bt();t.$watchCollection(v,(function(i){var h,v,b,E,$,A,C,D,M,R,O,I,L=n[0],P=Bt();if(y&&(t[y]=i),T(i))M=i,D=S||u;else for(var F in D=S||c,M=[],i)d.call(i,F)&&"$"!==F.charAt(0)&&M.push(F);for(E=M.length,O=new Array(E),h=0;h<E;h++)if($=i===M?h:M[h],A=i[$],C=D(t,$,A,h),m[C])R=m[C],delete m[C],P[C]=R,O[h]=R;else{if(P[C])throw x(O,(function(t){t&&t.scope&&(m[t.id]=t)})),a("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",f,C,A);O[h]={id:C,scope:void 0,clone:void 0},P[C]=!0}for(var N in k&&(k[w]=void 0),m){if(I=Ut((R=m[N]).clone),e.leave(I),I[0].parentNode)for(h=0,v=I.length;h<v;h++)I[h][r]=!0;R.scope.$destroy()}for(h=0;h<E;h++)if($=i===M?h:M[h],A=i[$],(R=O[h]).scope){b=L;do{b=b.nextSibling}while(b&&b[r]);s(R)!==b&&e.move(Ut(R.clone),null,L),L=l(R),o(R.scope,h,w,A,_,$,E)}else g((function(t,n){R.scope=n;var r=p.cloneNode(!1);t[t.length++]=r,e.enter(t,null,L),L=r,R.clone=t,P[R.id]=R,o(R.scope,h,w,A,_,$,E)}));m=P}))}}}}],fo="ng-hide",po="ng-hide-animate",go=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,(function(e){t[e?"removeClass":"addClass"](n,fo,{tempClasses:po})}))}}}],mo=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,(function(e){t[e?"addClass":"removeClass"](n,fo,{tempClasses:po})}))}}}],vo=Ui((function(t,e,n){t.$watchCollection(n.ngStyle,(function(t,n){n&&t!==n&&x(n,(function(t,n){e.css(n,"")})),t&&e.css(t)}))})),yo=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var o=i.ngSwitch||i.on,s=[],l=[],u=[],c=[],d=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(o,(function(n){for(var r,i;u.length;)t.cancel(u.pop());for(r=0,i=c.length;r<i;++r){var o=Ut(l[r].clone);c[r].$destroy(),(u[r]=t.leave(o)).done(d(u,r))}l.length=0,c.length=0,(s=a.cases["!"+n]||a.cases["?"])&&x(s,(function(n){n.transclude((function(r,i){c.push(i);var a=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen");var o={clone:r};l.push(o),t.enter(r,a.parent(),a)}))}))}))}}}],bo=Ui({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){x(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter((function(t,e,n){return n[e-1]!==t})),(function(t){r.cases["!"+t]=r.cases["!"+t]||[],r.cases["!"+t].push({transclude:i,element:e})}))}}),So=Ui({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),wo=i("ngTransclude"),To=["$compile",function(t){return{restrict:"EAC",compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,r,i,a){if(!a)throw wo("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",wt(e));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var o=r.ngTransclude||r.ngTranscludeSlot;function s(){n(t,(function(t){e.append(t)}))}a((function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];if(r.nodeType!==jt||r.nodeValue.trim())return!0}}(t)?e.append(t):(s(),n.$destroy())}),null,o),o&&!a.isSlotFilled(o)&&s()}}}}],xo=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var r=n.id,i=e[0].text;t.put(r,i)}}}}],_o={$setViewValue:I,$render:I};function ko(t,e){t.prop("selected",e),t.attr("selected",e)}var Eo=["$element","$scope",function(e,n){var r=this,i=new je;r.selectValueMap={},r.ngModelCtrl=_o,r.multiple=!1,r.unknownOption=o(t.document.createElement("option")),r.hasEmptyOption=!1,r.emptyOption=void 0,r.renderUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),e.prepend(r.unknownOption),ko(r.unknownOption,!0),e.val(n)},r.updateUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),ko(r.unknownOption,!0),e.val(n)},r.generateUnknownOptionValue=function(t){return"? "+Ue(t)+" ?"},r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.selectEmptyOption=function(){r.emptyOption&&(e.val(""),ko(r.emptyOption,!0))},r.unselectEmptyOption=function(){r.hasEmptyOption&&ko(r.emptyOption,!1)},n.$on("$destroy",(function(){r.renderUnknownOption=I})),r.readValue=function(){var t=e.val(),n=t in r.selectValueMap?r.selectValueMap[t]:t;return r.hasOption(n)?n:null},r.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&ko(o(n),!1),r.hasOption(t)){r.removeUnknownOption();var i=Ue(t);e.val(i in r.selectValueMap?i:t);var a=e[0].options[e[0].selectedIndex];ko(o(a),!0)}else r.selectUnknownOrEmptyOption(t)},r.addOption=function(t,e){if(8!==e[0].nodeType){Nt(t,'"option value"'),""===t&&(r.hasEmptyOption=!0,r.emptyOption=e);var n=i.get(t)||0;i.set(t,n+1),s()}},r.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.delete(t),""===t&&(r.hasEmptyOption=!1,r.emptyOption=void 0)):i.set(t,e-1))},r.hasOption=function(t){return!!i.get(t)},r.$hasEmptyOption=function(){return r.hasEmptyOption},r.$isUnknownOptionSelected=function(){return e[0].options[0]===r.unknownOption[0]},r.$isEmptyOptionSelected=function(){return r.hasEmptyOption&&e[0].options[e[0].selectedIndex]===r.emptyOption[0]},r.selectUnknownOrEmptyOption=function(t){null==t&&r.emptyOption?(r.removeUnknownOption(),r.selectEmptyOption()):r.unknownOption.parent().length?r.updateUnknownOption(t):r.renderUnknownOption(t)};var a=!1;function s(){a||(a=!0,n.$$postDigest((function(){a=!1,r.ngModelCtrl.$render()})))}var l=!1;function u(t){l||(l=!0,n.$$postDigest((function(){n.$$destroyed||(l=!1,r.ngModelCtrl.$setViewValue(r.readValue()),t&&r.ngModelCtrl.$render())})))}r.registerOption=function(t,e,n,i,a){var o,l;n.$attr.ngValue?n.$observe("value",(function(t){var n,i=e.prop("selected");U(l)&&(r.removeOption(o),delete r.selectValueMap[l],n=!0),l=Ue(t),o=t,r.selectValueMap[l]=t,r.addOption(t,e),e.attr("value",l),n&&i&&u()})):i?n.$observe("value",(function(t){var n;r.readValue();var i=e.prop("selected");U(o)&&(r.removeOption(o),n=!0),o=t,r.addOption(t,e),n&&i&&u()})):a?t.$watch(a,(function(t,i){n.$set("value",t);var a=e.prop("selected");i!==t&&r.removeOption(i),r.addOption(t,e),i&&a&&u()})):r.addOption(n.value,e);n.$observe("disabled",(function(t){("true"===t||t&&e.prop("selected"))&&(r.multiple?u(!0):(r.ngModelCtrl.$setViewValue(null),r.ngModelCtrl.$render()))})),e.on("$destroy",(function(){var t=r.readValue(),e=n.value;r.removeOption(e),s(),(r.multiple&&t&&-1!==t.indexOf(e)||t===e)&&u(!0)}))}}],$o=function(){return{restrict:"E",require:["select","?ngModel"],controller:Eo,priority:1,link:{pre:function(t,e,n,r){var i=r[0],a=r[1];if(!a)return void(i.registerOption=I);if(i.ngModelCtrl=a,e.on("change",(function(){i.removeUnknownOption(),t.$apply((function(){a.$setViewValue(i.readValue())}))})),n.multiple){i.multiple=!0,i.readValue=function(){var t=[];return x(e.find("option"),(function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in i.selectValueMap?i.selectValueMap[n]:n)}})),t},i.writeValue=function(t){x(e.find("option"),(function(e){var n=!!t&&(it(t,e.value)||it(t,i.selectValueMap[e.value]));n!==e.selected&&ko(o(e),n)}))};var s,l=NaN;t.$watch((function(){l!==a.$viewValue||lt(s,a.$viewValue)||(s=Ht(a.$viewValue),a.$render()),l=a.$viewValue})),a.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,r){var i=r[1];if(!i)return;var a=r[0];i.$render=function(){a.writeValue(i.$viewValue)}}}}},Ao=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var r,i;return U(n.ngValue)||(U(n.value)?r=t(n.value,!0):(i=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var a="$selectController",o=e.parent(),s=o.data(a)||o.parent().data(a);s&&s.registerOption(t,e,n,r,i)}}}}],Co=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var a=r.hasOwnProperty("required")||t(r.ngRequired)(e);r.ngRequired||(r.required=!0),i.$validators.required=function(t,e){return!a||!i.$isEmpty(e)},r.$observe("required",(function(t){a!==t&&(a=t,i.$validate())}))}}}}],Do=["$parse",function(t){return{restrict:"A",require:"?ngModel",compile:function(e,n){var r,i;return n.ngPattern&&(r=n.ngPattern,i="/"===n.ngPattern.charAt(0)&&u.test(n.ngPattern)?function(){return n.ngPattern}:t(n.ngPattern)),function(t,e,n,a){if(a){var o=n.pattern;n.ngPattern?o=i(t):r=n.pattern;var s=Oo(o,r,e);n.$observe("pattern",(function(t){var n=s;s=Oo(t,r,e),(n&&n.toString())!==(s&&s.toString())&&a.$validate()})),a.$validators.pattern=function(t,e){return a.$isEmpty(e)||N(s)||s.test(e)}}}}}}],Mo=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var a=r.maxlength||t(r.ngMaxlength)(e),o=Io(a);r.$observe("maxlength",(function(t){a!==t&&(o=Io(t),a=t,i.$validate())})),i.$validators.maxlength=function(t,e){return o<0||i.$isEmpty(e)||e.length<=o}}}}}],Ro=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var a=r.minlength||t(r.ngMinlength)(e),o=Io(a)||-1;r.$observe("minlength",(function(t){a!==t&&(o=Io(t)||-1,a=t,i.$validate())})),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=o}}}}}];function Oo(t,e,n){if(t){if(j(t)&&(t=new RegExp("^"+t+"$")),!t.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",e,t,wt(n));return t}}function Io(t){var e=M(t);return R(e)?-1:e}t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(!function(){var e;if(!It){var n=ct();(s=N(n)?t.jQuery:n?t[n]:void 0)&&s.fn.on?(o=s,C(s.fn,{scope:Me.scope,isolateScope:Me.isolateScope,controller:Me.controller,injector:Me.injector,inheritedData:Me.inheritedData})):o=fe,e=o.cleanData,o.cleanData=function(t){for(var n,r,i=0;null!=(r=t[i]);i++)(n=(o._data(r)||{}).events)&&n.$destroy&&o(r).triggerHandler("$destroy");e(t)},S.element=o,It=!0}}(),function(e){C(e,{errorHandlingConfig:n,bootstrap:Ct,copy:ot,extend:C,merge:D,equals:lt,element:o,forEach:x,injector:Je,noop:I,bind:ft,toJson:gt,fromJson:mt,identity:L,isUndefined:N,isDefined:U,isString:j,isFunction:Y,isObject:B,isNumber:H,isElement:nt,isArray:z,version:zt,isDate:W,callbacks:{$$counter:0},getTestability:Mt,reloadWithDebugInfo:Dt,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:Lt,$$minErr:i,$$csp:ut,$$encodeUriSegment:_t,$$encodeUriQuery:kt,$$lowercase:h,$$stringify:Vt,$$uppercase:f}),(l=function(t){var e=i("$injector"),n=i("ng");function r(t,e,n){return t[e]||(t[e]=n())}var a=r(t,"angular",Object);return a.$$minErr=a.$$minErr||i,r(a,"module",(function(){var t={};return function(i,a,o){var s={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name","module")}(i),a&&t.hasOwnProperty(i)&&(t[i]=null),r(t,i,(function(){if(!a)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],l=[],u=d("$injector","invoke","push",r),c={_invokeQueue:t,_configBlocks:r,_runBlocks:l,info:function(t){if(U(t)){if(!B(t))throw n("aobj","Argument '{0}' must be an object","value");return s=t,this}return s},requires:a,name:i,provider:h("$provide","provider"),factory:h("$provide","factory"),service:h("$provide","service"),value:d("$provide","value"),constant:d("$provide","constant","unshift"),decorator:h("$provide","decorator",r),animation:h("$animateProvider","register"),filter:h("$filterProvider","register"),controller:h("$controllerProvider","register"),directive:h("$compileProvider","directive"),component:h("$compileProvider","component"),config:u,run:function(t){return l.push(t),this}};return o&&u(o),c;function d(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),c}}function h(e,n,r){return r||(r=t),function(t,a){return a&&Y(a)&&(a.$$moduleName=i),r.push([e,n,arguments]),c}}}))}}))}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:zr}),t.provider("$compile",vn).directive({a:Bi,input:Sa,textarea:Sa,form:Yi,script:xo,select:$o,option:Ao,ngBind:_a,ngBindHtml:Ea,ngBindTemplate:ka,ngClass:Ca,ngClassEven:Ma,ngClassOdd:Da,ngCloak:Ra,ngController:Oa,ngForm:qi,ngHide:mo,ngIf:Fa,ngInclude:Na,ngInit:Ba,ngNonBindable:io,ngPluralize:lo,ngRef:co,ngRepeat:ho,ngShow:go,ngStyle:vo,ngSwitch:yo,ngSwitchWhen:bo,ngSwitchDefault:So,ngOptions:so,ngTransclude:To,ngModel:Qa,ngList:Va,ngChange:$a,pattern:Do,ngPattern:Do,required:Co,ngRequired:Co,minlength:Ro,ngMinlength:Ro,maxlength:Mo,ngMaxlength:Mo,ngValue:xa,ngModelOptions:no}).directive({ngInclude:Ua,input:wa}).directive(Vi).directive(Ia),t.provider({$anchorScroll:Qe,$animate:sn,$animateCss:cn,$$animateJs:an,$$animateQueue:on,$$AnimateRunner:un,$$animateAsyncRun:ln,$browser:hn,$cacheFactory:fn,$controller:$n,$document:An,$$isDocumentHidden:Cn,$exceptionHandler:Dn,$filter:mi,$$forceReflow:Mn,$interpolate:Xn,$interval:Jn,$$intervalFactory:Qn,$http:Gn,$httpParamSerializer:Un,$httpParamSerializerJQLike:Bn,$httpBackend:qn,$xhrFactory:Yn,$jsonpCallbacks:tr,$location:vr,$log:yr,$parse:Pr,$rootScope:Wr,$q:Fr,$$q:Nr,$sce:Jr,$sceDelegate:Zr,$sniffer:Qr,$$taskTrackerFactory:ti,$templateCache:pn,$templateRequest:ri,$$testability:ii,$timeout:oi,$window:fi,$$rAF:Hr,$$jqLite:Ne,$$Map:He,$$cookieReader:gi})}]).info({angularVersion:"1.8.0"})}(S),S.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,r){var i=0|t,a=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var r=Math.pow(10,n);return{v:n,f:(t*r|0)%r}}(t,r);return 1==i&&0==a.v?e:n}})}]),o((function(){At(t.document,Ct)})))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}'));var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return r(null==e&&n.path)}},n.exports),n.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var i=angular,a=function(t,e){return i.merge(t,e)},o=function(t){return t>=0&&t<10?"0"+t:t},s=function(t){t=+new Date(t);var e=[[60,"seconds",1],[120,"1 minute ago","1 minute from now"],[3600,"minutes",60],[7200,"1 hour ago","1 hour from now"],[86400,"hours",3600],[172800,"a day ago","Tomorrow"],[604800,"days",86400],[1209600,"Last week","Next week"],[2419200,"weeks",604800],[4838400,"a month ago","Next month"],[29030400,"months",2419200],[58060800,"a year ago","Next year"],[290304e4,"years",29030400]],n=(+new Date-t)/1e3,r="ago",i=1;if(n<0&&(n=Math.abs(n),r="from now",i=2),n>=0&&n<5)return"just now";for(var a,o=0;a=e[o++];)if(n<a[0])return"string"==typeof a[2]?a[i]:Math.floor(n/a[2])+" "+a[1]+" "+r;return t},l=function(t,e,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,n||t.apply(i,a)},s=n&&!r;clearTimeout(r),r=setTimeout(o,e),s&&t.apply(i,a)}},u=function(t){return(0===t.indexOf("http")?t:window.CONFIG.serverUrl+"/"+t).replace(/([^:])\/+/g,"$1/")},c=Object.freeze({__proto__:null,mergeObjects:a,leadZero:o,numberFilter:function(t){return function(e){var n=parseFloat(e);return n&&!isNaN(n)?n.toFixed(t):e}},switchPercents:function(t,e,n){return n=n||!1,e=e||100,function(r,i){var a=t in i.attributes?i.attributes[t]:null;return a=parseFloat(a),isNaN(a)?(a=i.state,r.states&&a in r.states?r.states[a]:a):(a=Math.round(a/e*100),n&&(a=10*Math.round(a/10)),a+"%")}},playSound:function(t){var e=new Audio(t);e.loop=!1,e.play()},timeAgo:s,debounce:l,toAbsoluteServerURL:u}),d="yandex",h="mapbox",f={ANIMATED:"animated",ANIMATED_GPU:"animated_gpu",SIMPLE:"simple"},p={DEVICE_TRACKER:"device_tracker",SCRIPT:"script",AUTOMATION:"automation",SENSOR:"sensor",SENSOR_ICON:"sensor_icon",SWITCH:"switch",LOCK:"lock",COVER:"cover",COVER_TOGGLE:"cover_toggle",FAN:"fan",INPUT_BOOLEAN:"input_boolean",LIGHT:"light",TEXT_LIST:"text_list",INPUT_NUMBER:"input_number",INPUT_SELECT:"input_select",INPUT_DATETIME:"input_datetime",CAMERA:"camera",CAMERA_THUMBNAIL:"camera_thumbnail",CAMERA_STREAM:"camera_stream",SCENE:"scene",SLIDER:"slider",IFRAME:"iframe",DOOR_ENTRY:"door_entry",WEATHER:"weather",CLIMATE:"climate",MEDIA_PLAYER:"media_player",CUSTOM:"custom",ALARM:"alarm",WEATHER_LIST:"weather_list",VACUUM:"vacuum",POPUP_IFRAME:"popup_iframe",POPUP:"popup",DIMMER_SWITCH:"dimmer_switch",GAUGE:"gauge",IMAGE:"image",HISTORY:"history"},g={TIME:"time",DATE:"date",DATETIME:"datetime",WEATHER:"weather",CUSTOM_HTML:"custom_html"},m=g,v={LIGHT:{BRIGHTNESS:1},MEDIA_PLAYER:{PAUSE:1,SEEK:2,VOLUME_SET:4,VOLUME_STEP:1024,VOLUME_MUTE:8,PREVIOUS_TRACK:16,NEXT_TRACK:32,YOUTUBE:64,TURN_ON:128,TURN_OFF:256,STOP:4096},VACUUM:{TURN_ON:1,TURN_OFF:2,PAUSE:4,STOP:8,RETURN_HOME:16,FAN_SPEED:32,BATTERY:64,STATUS:128,SEND_COMMAND:256,LOCATE:512,CLEAN_SPOT:1024,MAP:2048,STATE:4096,START:8192}},y={LEFT:"left",BOTTOM:"bottom"},b={VERTICALLY:"vertically",HORIZONTALLY:"horizontally"},S={LEFT:"left",RIGHT:"right"},w="_tkn1",T={styles:{padding:"30px 130px 0",fontSize:"28px"},left:[{type:g.DATETIME,dateFormat:"EEEE, LLLL dd",styles:{margin:"0"}}],right:[{type:g.CUSTOM_HTML,html:"Welcome to the <b>TileBoard</b>",styles:{margin:"40px 0 0"}}]},x={layout:{padding:{left:0}},elements:{line:{fill:!1,borderWidth:3,stepped:!1,cubicInterpolationMode:"monotone"}},legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!0,ticks:{mirror:!0,callback:function(t,e,n){return e===n.length-1||0===e?t:null}}}]},tooltips:{callbacks:{title:function(t,e){return s(t[0].label)},label:function(t,e){return t.value}}}},_=Object.freeze({__proto__:null,CLASS_BIG:"-big-entity",CLASS_SMALL:"-small-entity",CLASS_MICRO:"-micro-entity",GOOGLE_MAP:"google",YANDEX_MAP:d,MAPBOX_MAP:h,TRANSITIONS:f,ITEM_TRANSPARENT:"transparent",CUSTOM_THEMES:{TRANSPARENT:"transparent",MATERIAL:"material",WIN95:"win95",WINPHONE:"winphone",MOBILE:"mobile",COMPACT:"compact",HOMEKIT:"homekit",FRESH_AIR:"fresh-air",WHITE_PAPER:"white-paper"},TYPES:p,HEADER_ITEMS:g,SCREENSAVER_ITEMS:m,FEATURES:v,MENU_POSITIONS:y,GROUP_ALIGNS:b,NOTIES_POSITIONS:S,ENTITY_SIZES:{SMALL:"small",NORMAL:"normal",BIG:"big"},TOKEN_CACHE_KEY:w,DEFAULT_HEADER:T,MINIMAL_CHART_OPTIONS:x}),k=function(){var t=[],e=!1,n=function(t){this.setData(t)};return n.prototype.setData=function(t){this.id=t.id||Math.random(),this.title=t.title,this.message=t.message,this.icon=t.icon,this.lifetime=t.lifetime,this.type=t.type||n.INFO,this._timeout=null,this.resetTimeout();var e=this;setTimeout((function(){e.showed=!0,n.fireUpdate()}),100),n.fireUpdate()},n.prototype.resetTimeout=function(){var t=this;this.clearTimeout(),this.lifetime&&(this._timeout=setTimeout((function(){n.remove(t),n.fireUpdate()}),1e3*this.lifetime))},n.prototype.getClasses=function(){return this._classes||(this._classes=[]),this._classes.length=0,this._classes.push("-"+this.type),this.showed&&this._classes.push("-showed"),this._classes},n.prototype.getLifetimeStyles=function(){return this._lifetimeStyles||(this._lifetimeStyles={},this.lifetime&&(this._lifetimeStyles.animationDuration=this.lifetime+"s")),this._lifetimeStyles},n.prototype.clearTimeout=function(){this._timeout&&clearTimeout(this._timeout)},n.prototype.remove=function(){n.remove(this)},n.noties=[],n.notiesHistory=[],n.INFO="info",n.WARNING="warning",n.ERROR="error",n.SUCCESS="success",n.onUpdate=function(e){return-1!==t.indexOf(e)?function(){}:(t.push(e),function(){t=t.filter((function(t){return t!==e}))})},n.fireUpdate=function(){e||(e=!0,t.forEach((function(t){try{setTimeout((function(){e=!1,t()}),0)}catch(t){}})),setTimeout((function(){e=!1}),0))},n.add=function(t,e,r,i,a,o){return n.addObject({type:t,title:e,message:r,icon:i,lifetime:a,id:o})},n.addObject=function(t){if(t.id&&n.getById(t.id)){var e=n.getById(t.id);return e.setData(t),e}var r=new n(t);return n.noties.push(r),n.notiesHistory.push(r),r},n.getById=function(t){for(var e=0;e<n.noties.length;e++)if(n.noties[e].id===t)return n.noties[e];return null},n.hasSeenNoteId=function(t){for(var e=0;e<n.notiesHistory.length;e++)if(n.notiesHistory[e].id===t)return!0;return!1},n.remove=function(t){n.noties=n.noties.filter((function(e){return e!==t}))},n.removeAll=function(){n.noties=[]},n}();for(var E in _)window[E]=_[E];for(var $ in c)window[$]=c[$];window.Noty=k,window.onerror=function(t,e,n,r){var i=[t,"File: "+e,"Line: "+n+":"+r].join("<br>");k.addObject({type:k.ERROR,title:"JS error",message:i,lifetime:12,id:t})};var A=i.module("App",["hmTouchEvents","colorpicker","angularjs-gauge","angularMoment","chart.js"]),C=n((function(t){
/*! Hammer.JS - v2.0.7 - 2016-04-22
   * http://hammerjs.github.io/
   *
   * Copyright (c) 2016 Jorik Tangelder;
   * Licensed under the MIT license */
!function(e,n,r,i){var a,o=["","webkit","Moz","MS","ms","o"],s=n.createElement("div"),l=Math.round,u=Math.abs,c=Date.now;function d(t,e,n){return setTimeout(y(t,n),e)}function h(t,e,n){return!!Array.isArray(t)&&(f(t,n[e],n),!0)}function f(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function p(t,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=e.console&&(e.console.warn||e.console.log);return a&&a.call(e.console,i,r),t.apply(this,arguments)}}a="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])}return e}:Object.assign;var g=p((function(t,e,n){for(var r=Object.keys(e),a=0;a<r.length;)(!n||n&&t[r[a]]===i)&&(t[r[a]]=e[r[a]]),a++;return t}),"extend","Use `assign`."),m=p((function(t,e){return g(t,e,!0)}),"merge","Use `assign`.");function v(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&a(r,n)}function y(t,e){return function(){return t.apply(e,arguments)}}function b(t,e){return"function"==typeof t?t.apply(e&&e[0]||i,e):t}function S(t,e){return t===i?e:t}function w(t,e,n){f(k(e),(function(e){t.addEventListener(e,n,!1)}))}function T(t,e,n){f(k(e),(function(e){t.removeEventListener(e,n,!1)}))}function x(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function k(t){return t.trim().split(/\s+/g)}function E(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function $(t){return Array.prototype.slice.call(t,0)}function A(t,e,n){for(var r=[],i=[],a=0;a<t.length;){var o=e?t[a][e]:t[a];E(i,o)<0&&r.push(t[a]),i[a]=o,a++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function C(t,e){for(var n,r,a=e[0].toUpperCase()+e.slice(1),s=0;s<o.length;){if((r=(n=o[s])?n+a:e)in t)return r;s++}return i}var D=1;function M(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}var R="ontouchstart"in e,O=C(e,"PointerEvent")!==i,I=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),L="touch",P="mouse",F=24,N=["x","y"],U=["clientX","clientY"];function B(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&n.handler(e)},this.init()}function V(t,e,n){var r=n.pointers.length,a=n.changedPointers.length,o=1&e&&r-a==0,s=12&e&&r-a==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,a=r.length;n.firstInput||(n.firstInput=j(e));a>1&&!n.firstMultiple?n.firstMultiple=j(e):1===a&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,d=e.center=H(r);e.timeStamp=c(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Y(l,d),e.distance=G(l,d),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},a=t.prevInput||{};1!==e.eventType&&4!==a.eventType||(i=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=z(e.deltaX,e.deltaY);var h=W(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=u(h.x)>u(h.y)?h.x:h.y,e.scale=s?(f=s.pointers,p=r,G(p[0],p[1],U)/G(f[0],f[1],U)):1,e.rotation=s?function(t,e){return Y(e[1],e[0],U)+Y(t[1],t[0],U)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,a,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(l>25||s.velocity===i)){var c=e.deltaX-s.deltaX,d=e.deltaY-s.deltaY,h=W(l,c,d);r=h.x,a=h.y,n=u(h.x)>u(h.y)?h.x:h.y,o=z(c,d),t.lastInterval=e}else n=s.velocity,r=s.velocityX,a=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=a,e.direction=o}(n,e);var f,p;var g=t.element;x(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function j(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:l(t.pointers[n].clientX),clientY:l(t.pointers[n].clientY)},n++;return{timeStamp:c(),pointers:e,center:H(e),deltaX:t.deltaX,deltaY:t.deltaY}}function H(t){var e=t.length;if(1===e)return{x:l(t[0].clientX),y:l(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:l(n/e),y:l(r/e)}}function W(t,e,n){return{x:e/t||0,y:n/t||0}}function z(t,e){return t===e?1:u(t)>=u(e)?t<0?2:4:e<0?8:16}function G(t,e,n){n||(n=N);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function Y(t,e,n){n||(n=N);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}B.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(M(this.element),this.evWin,this.domHandler)}};var q={mousedown:1,mousemove:2,mouseup:4},K="mousedown",X="mousemove mouseup";function Z(){this.evEl=K,this.evWin=X,this.pressed=!1,B.apply(this,arguments)}v(Z,B,{handler:function(t){var e=q[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:P,srcEvent:t}))}});var J={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Q={2:L,3:"pen",4:P,5:"kinect"},tt="pointerdown",et="pointermove pointerup pointercancel";function nt(){this.evEl=tt,this.evWin=et,B.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(tt="MSPointerDown",et="MSPointerMove MSPointerUp MSPointerCancel"),v(nt,B,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=J[r],a=Q[t.pointerType]||t.pointerType,o=a==L,s=E(e,t.pointerId,"pointerId");1&i&&(0===t.button||o)?s<0&&(e.push(t),s=e.length-1):12&i&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),n&&e.splice(s,1))}});var rt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},it="touchstart",at="touchstart touchmove touchend touchcancel";function ot(){this.evTarget=it,this.evWin=at,this.started=!1,B.apply(this,arguments)}function st(t,e){var n=$(t.touches),r=$(t.changedTouches);return 12&e&&(n=A(n.concat(r),"identifier",!0)),[n,r]}v(ot,B,{handler:function(t){var e=rt[t.type];if(1===e&&(this.started=!0),this.started){var n=st.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:L,srcEvent:t})}}});var lt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ut="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=ut,this.targetIds={},B.apply(this,arguments)}function dt(t,e){var n=$(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,a,o=$(t.changedTouches),s=[],l=this.target;if(a=n.filter((function(t){return x(t.target,l)})),1===e)for(i=0;i<a.length;)r[a[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&s.push(o[i]),12&e&&delete r[o[i].identifier],i++;return s.length?[A(a.concat(s),"identifier",!0),s]:void 0}v(ct,B,{handler:function(t){var e=lt[t.type],n=dt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:L,srcEvent:t})}});function ht(){B.apply(this,arguments);var t=y(this.handler,this);this.touch=new ct(this.manager,t),this.mouse=new Z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function ft(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,pt.call(this,e)):12&t&&pt.call(this,e)}function pt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function gt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],a=Math.abs(e-i.x),o=Math.abs(n-i.y);if(a<=25&&o<=25)return!0}return!1}v(ht,B,{handler:function(t,e,n){var r=n.pointerType==L,i=n.pointerType==P;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)ft.call(this,e,n);else if(i&&gt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var mt=C(s.style,"touchAction"),vt=mt!==i,yt="compute",bt="auto",St="manipulation",wt="none",Tt="pan-x",xt="pan-y",_t=function(){if(!vt)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!n||e.CSS.supports("touch-action",r)})),t}();function kt(t,e){this.manager=t,this.set(e)}kt.prototype={set:function(t){t==yt&&(t=this.compute()),vt&&this.manager.element.style&&_t[t]&&(this.manager.element.style[mt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return f(this.manager.recognizers,(function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(_(t,wt))return wt;var e=_(t,Tt),n=_(t,xt);if(e&&n)return wt;if(e||n)return e?Tt:xt;if(_(t,St))return St;return bt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=_(r,wt)&&!_t.none,a=_(r,xt)&&!_t["pan-y"],o=_(r,Tt)&&!_t["pan-x"];if(i){var s=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(s&&l&&u)return}if(!o||!a)return i||a&&6&n||o&&n&F?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Et=32;function $t(t){this.options=a({},this.defaults,t||{}),this.id=D++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function At(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Ct(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Dt(t,e){var n=e.manager;return n?n.get(t):t}function Mt(){$t.apply(this,arguments)}function Rt(){Mt.apply(this,arguments),this.pX=null,this.pY=null}function Ot(){Mt.apply(this,arguments)}function It(){$t.apply(this,arguments),this._timer=null,this._input=null}function Lt(){Mt.apply(this,arguments)}function Pt(){Mt.apply(this,arguments)}function Ft(){$t.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Nt(t,e){return(e=e||{}).recognizers=S(e.recognizers,Nt.defaults.preset),new Ut(t,e)}$t.prototype={defaults:{},set:function(t){return a(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(h(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Dt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return h(t,"dropRecognizeWith",this)||(t=Dt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(h(t,"requireFailure",this))return this;var e=this.requireFail;return-1===E(e,t=Dt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(h(t,"dropRequireFailure",this))return this;t=Dt(t,this);var e=E(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+At(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+At(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Et},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=a({},t);if(!b(this.options.enable,[this,e]))return this.reset(),void(this.state=Et);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},v(Mt,$t,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:Et}}),v(Rt,Mt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(xt),t&F&&e.push(Tt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,a=t.deltaX,o=t.deltaY;return i&e.direction||(6&e.direction?(i=0===a?1:a<0?2:4,n=a!=this.pX,r=Math.abs(t.deltaX)):(i=0===o?1:o<0?8:16,n=o!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Mt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ct(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),v(Ot,Mt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[wt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),v(It,$t,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[bt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Et},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}}),v(Lt,Mt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[wt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),v(Pt,Mt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:n&F&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&u(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Ct(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),v(Ft,$t,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[St]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||G(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&a?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Et},failTimeout:function(){return this._timer=d((function(){this.state=Et}),this.options.interval,this),Et},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Nt.VERSION="2.0.7",Nt.defaults={domEvents:!1,touchAction:yt,enable:!0,inputTarget:null,inputClass:null,preset:[[Lt,{enable:!1}],[Ot,{enable:!1},["rotate"]],[Pt,{direction:6}],[Rt,{direction:6},["swipe"]],[Ft],[Ft,{event:"doubletap",taps:2},["tap"]],[It]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ut(t,e){var n;this.options=a({},Nt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(O?nt:I?ct:R?ht:Z))(n,V),this.touchAction=new kt(this,this.options.touchAction),Bt(this,!0),f(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Bt(t,e){var n,r=t.element;r.style&&(f(t.options.cssProps,(function(i,a){n=C(r.style,a),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Ut.prototype={set:function(t){return a(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var a=0;a<r.length;)n=r[a],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),a++}},get:function(t){if(t instanceof $t)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(h(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(h(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=E(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return f(k(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==i){var n=this.handlers;return f(k(t),(function(t){e?n[t]&&n[t].splice(E(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var r=n.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}(t,e);var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](e),i++}},destroy:function(){this.element&&Bt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(Nt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Et,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:F,DIRECTION_ALL:30,Manager:Ut,Input:B,TouchAction:kt,TouchInput:ct,MouseInput:Z,PointerEventInput:nt,TouchMouseInput:ht,SingleTouchInput:ot,Recognizer:$t,AttrRecognizer:Mt,Tap:Ft,Pan:Rt,Swipe:Pt,Pinch:Ot,Rotate:Lt,Press:It,on:w,off:T,each:f,merge:m,extend:g,assign:a,inherit:v,bindFn:y,prefixed:C}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Nt,t.exports?t.exports=Nt:e.Hammer=Nt}(window,document)}));!function(t,e){if(void 0===t)throw Error("angular-hammer: AngularJS (angular) is undefined but is necessary.");if(void 0===e)throw Error("angular-hammer: HammerJS (Hammer) is undefined but is necessary.");var n="hmTouchEvents",r=t.module("hmTouchEvents",[]);function i(t,n){return void 0===t||void 0===n?null:(r=n.indexOf("pan")>-1?new e.Pan:n.indexOf("pinch")>-1?new e.Pinch:n.indexOf("press")>-1?new e.Press:n.indexOf("rotate")>-1?new e.Rotate:n.indexOf("swipe")>-1?new e.Swipe:new e.Tap,t.add(r),r);var r}function a(t){return t.indexOf("pan")>-1?"pan":t.indexOf("pinch")>-1?"pinch":t.indexOf("press")>-1?"press":t.indexOf("rotate")>-1?"rotate":t.indexOf("swipe")>-1?"swipe":t.indexOf("tap")>-1?"tap":"custom"}r.provider(n,(function(){var r=this,i=!1,o={},s={},l={};function u(e){return(e=t.copy(e)).event?"doubletap"==e.event?(e.type="tap",e.taps||(e.taps=2),e._name="doubletap"):e._name=!1:e._name=e.type||!1,e}l[e.Tap.toString()]="tap",l[e.Pan.toString()]="pan",l[e.Pinch.toString()]="pinch",l[e.Press.toString()]="press",l[e.Rotate.toString()]="rotate",l[e.Swipe.toString()]="swipe",r.applyHammerPresets=function(){var n=e.defaults.preset;t.forEach(n,(function(t){var e=t[1];e.type||(e.type=l[t[0]]),(e=u(e))._name&&(o[e._name]=e)}))},r.addManagerOption=function(e,n){"object"==typeof e?t.extend(s,e):s[e]=n},r.addRecognizerOption=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)r.addRecognizerOption(t[e]);else{if("object"!=typeof t)throw Error(n+"Provider: addRecognizerOption: should be object or array of objects");(t=u(t))._name?o[t.type]=t:t.event||(i=t)}},r.$get=function(){return{extendWithDefaultManagerOpts:function(e){for(var n in e="object"!=typeof e?{}:t.copy(e),s)e[n]||(e[n]=t.copy(s[n]));return e},extendWithDefaultRecognizerOpts:function(e,r){if("object"!=typeof r&&(r=[]),Array.isArray(r)||(r=[r]),"custom"==e)return r;var s,l=a(e),c=o[e]||o[l],d=!1,h=t.extend({},i||{},c||{});return r.forEach((function(n){if(!n.event&&!n.type)return t.extend(h,n);d||(n.event==e?(s=n,d=!0):n.event||n.type!=l||(s=n))})),s=s?u(s):function(t){if("custom"==t)throw Error(n+"Provider: no defaults exist for custom events");var e=a(t);return u("doubletap"==t?{type:e,event:"doubletap"}:{type:e})}(e),[t.extend(h,s)]}}}})),t.forEach(["hmCustom:custom","hmSwipe:swipe","hmSwipeleft:swipeleft","hmSwiperight:swiperight","hmSwipeup:swipeup","hmSwipedown:swipedown","hmPan:pan","hmPanstart:panstart","hmPanmove:panmove","hmPanend:panend","hmPancancel:pancancel","hmPanleft:panleft","hmPanright:panright","hmPanup:panup","hmPandown:pandown","hmPress:press","hmPressup:pressup","hmRotate:rotate","hmRotatestart:rotatestart","hmRotatemove:rotatemove","hmRotateend:rotateend","hmRotatecancel:rotatecancel","hmPinch:pinch","hmPinchstart:pinchstart","hmPinchmove:pinchmove","hmPinchend:pinchend","hmPinchcancel:pinchcancel","hmPinchin:pinchin","hmPinchout:pinchout","hmTap:tap","hmDoubletap:doubletap"],(function(o){var s=o.split(":"),l=s[0],u=s[1];r.directive(l,["$parse","$window",n,function(r,o,s){return{restrict:"A",scope:!1,link:function(c,d,h){if(!e||!o.addEventListener)throw Error(n+": window.Hammer or window.addEventListener not found, can't add event "+l);var f=d.data("hammer"),p=s.extendWithDefaultManagerOpts(c.$eval(h.hmManagerOptions)),g=s.extendWithDefaultRecognizerOpts(u,c.$eval(h.hmRecognizerOptions));f||(f=new e.Manager(d[0],p),d.data("hammer",f),c.$on("$destroy",(function(){f.destroy()})));var m=r(h[l]).bind(null,c),v=function(e){e.element=d;var n=!0,r=f.get(a(e.type));if(r){var i=r.options;i.preventDefault&&e.preventDefault(),i.stopPropagation&&e.srcEvent.stopPropagation(),n=t.isUndefined(i.invokeApply)||i.invokeApply}n?c.$apply((function(){m({$event:e})})):m({$event:e})};t.forEach(g,(function(n){"custom"!==u&&("doubletap"===u&&f.get("tap")?n.recognizeWith="tap":"pan"==n.type&&f.get("swipe")?n.recognizeWith="swipe":"pinch"==n.type&&f.get("rotate")&&(n.recognizeWith="rotate")),function(n,r,a){if(null==n||null==r||null==r.type)return console.error("ERROR: Angular Hammer could not setup the recognizer. Values of the passed manager and options: ",n,r);var o=n.get(r._name);o||(o=i(n,r._name));r.directions||("pan"===r._name||"swipe"===r._name?r.directions="DIRECTION_ALL":r._name.indexOf("left")>-1?r.directions="DIRECTION_LEFT":r._name.indexOf("right")>-1?r.directions="DIRECTION_RIGHT":r._name.indexOf("up")>-1?r.directions="DIRECTION_UP":r._name.indexOf("down")>-1?r.directions="DIRECTION_DOWN":r.directions="");if(r.direction=function(n){var r=0;return t.forEach(n.split("|"),(function(t){e.hasOwnProperty(t)&&(r|=e[t])})),r}(r.directions),o.set(r),"string"==typeof r.recognizeWith){var s;null==n.get(r.recognizeWith)&&(s=i(n,r.recognizeWith)),null!=s&&o.recognizeWith(s)}"string"==typeof r.dropRecognizeWith&&null!=n.get(r.dropRecognizeWith)&&o.dropRecognizeWith(n.get(r.dropRecognizeWith));if("string"==typeof r.requireFailure){var l;null==n.get(r.requireFailure)&&(l=i(n,{type:r.requireFailure})),null!=l&&o.requireFailure(l)}"string"==typeof r.dropRequireFailure&&null!=n.get(r.dropRequireFailure)&&o.dropRequireFailure(n.get(r.dropRequireFailure));!0===r.preventGhosts&&null!=a&&function(t){if(!t)return;var e=[],n=25,r=2500;"ontouchstart"in window&&(t[0].addEventListener("touchstart",a,!0),t[0].addEventListener("touchend",s,!0),t[0].addEventListener("click",i,!0),t[0].addEventListener("mouseup",i,!0));function i(t){for(var r=0;r<e.length;r++){var i=e[r][0],a=e[r][1];if(Math.abs(t.clientX-i)<n&&Math.abs(t.clientY-a)<n){t.stopPropagation(),t.preventDefault();break}}}function a(){e=[]}function o(){e.splice(0,1)}function s(t){if(t.touches.length-t.changedTouches.length<=0){var n=t.changedTouches[0];e.push([n.clientX,n.clientY]),setTimeout(o,r)}}}(a)}(f,function(t,e){t&&(e.preventGhosts=t.preventGhosts);return e}(p,n),d),f.on(u,v)}))}}}])}))}(angular,Hammer),Hammer=C;var D={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},M=n((function(t){var e={};for(var n in D)D.hasOwnProperty(n)&&(e[D[n]]=n);var r=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in r)if(r.hasOwnProperty(i)){if(!("channels"in r[i]))throw new Error("missing channels property: "+i);if(!("labels"in r[i]))throw new Error("missing channel labels property: "+i);if(r[i].labels.length!==r[i].channels)throw new Error("channel and label counts mismatch: "+i);var a=r[i].channels,o=r[i].labels;delete r[i].channels,delete r[i].labels,Object.defineProperty(r[i],"channels",{value:a}),Object.defineProperty(r[i],"labels",{value:o})}r.rgb.hsl=function(t){var e,n,r=t[0]/255,i=t[1]/255,a=t[2]/255,o=Math.min(r,i,a),s=Math.max(r,i,a),l=s-o;return s===o?e=0:r===s?e=(i-a)/l:i===s?e=2+(a-r)/l:a===s&&(e=4+(r-i)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(o+s)/2,[e,100*(s===o?0:n<=.5?l/(s+o):l/(2-s-o)),100*n]},r.rgb.hsv=function(t){var e,n,r,i,a,o=t[0]/255,s=t[1]/255,l=t[2]/255,u=Math.max(o,s,l),c=u-Math.min(o,s,l),d=function(t){return(u-t)/6/c+.5};return 0===c?i=a=0:(a=c/u,e=d(o),n=d(s),r=d(l),o===u?i=r-n:s===u?i=1/3+e-r:l===u&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*a,100*u]},r.rgb.hwb=function(t){var e=t[0],n=t[1],i=t[2];return[r.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(n,i))),100*(i=1-1/255*Math.max(e,Math.max(n,i)))]},r.rgb.cmyk=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]},r.rgb.keyword=function(t){var n=e[t];if(n)return n;var r,i,a,o=1/0;for(var s in D)if(D.hasOwnProperty(s)){var l=D[s],u=(i=t,a=l,Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)+Math.pow(i[2]-a[2],2));u<o&&(o=u,r=s)}return r},r.keyword.rgb=function(t){return D[t]},r.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},r.rgb.lab=function(t){var e=r.rgb.xyz(t),n=e[0],i=e[1],a=e[2];return i/=100,a/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(n-i),200*(i-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},r.hsl.rgb=function(t){var e,n,r,i,a,o=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[a=255*l,a,a];e=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(r=o+1/3*-(u-1))<0&&r++,r>1&&r--,a=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[u]=255*a;return i},r.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=n,a=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=a<=1?a:2-a,[e,100*(0===r?2*i/(a+i):2*n/(r+n)),100*((r+n)/2)]},r.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,a=e-Math.floor(e),o=255*r*(1-n),s=255*r*(1-n*a),l=255*r*(1-n*(1-a));switch(r*=255,i){case 0:return[r,l,o];case 1:return[s,r,o];case 2:return[o,r,l];case 3:return[o,s,r];case 4:return[l,o,r];case 5:return[r,o,s]}},r.hsv.hsl=function(t){var e,n,r,i=t[0],a=t[1]/100,o=t[2]/100,s=Math.max(o,.01);return r=(2-a)*o,n=a*s,[i,100*(n=(n/=(e=(2-a)*s)<=1?e:2-e)||0),100*(r/=2)]},r.hwb.rgb=function(t){var e,n,r,i,a,o,s,l=t[0]/360,u=t[1]/100,c=t[2]/100,d=u+c;switch(d>1&&(u/=d,c/=d),r=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(r=1-r),i=u+r*((n=1-c)-u),e){default:case 6:case 0:a=n,o=i,s=u;break;case 1:a=i,o=n,s=u;break;case 2:a=u,o=n,s=i;break;case 3:a=u,o=i,s=n;break;case 4:a=i,o=u,s=n;break;case 5:a=n,o=u,s=i}return[255*a,255*o,255*s]},r.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},r.xyz.rgb=function(t){var e,n,r,i=t[0]/100,a=t[1]/100,o=t[2]/100;return n=-.9689*i+1.8758*a+.0415*o,r=.0557*i+-.204*a+1.057*o,e=(e=3.2406*i+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},r.xyz.lab=function(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},r.lab.xyz=function(t){var e,n,r,i=t[0];e=t[1]/500+(n=(i+16)/116),r=n-t[2]/200;var a=Math.pow(n,3),o=Math.pow(e,3),s=Math.pow(r,3);return n=a>.008856?a:(n-16/116)/7.787,e=o>.008856?o:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[e*=95.047,n*=100,r*=108.883]},r.lab.lch=function(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]},r.lch.lab=function(t){var e,n=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[n,r*Math.cos(e),r*Math.sin(e)]},r.rgb.ansi16=function(t){var e=t[0],n=t[1],i=t[2],a=1 in arguments?arguments[1]:r.rgb.hsv(t)[2];if(0===(a=Math.round(a/50)))return 30;var o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===a&&(o+=60),o},r.hsv.ansi16=function(t){return r.rgb.ansi16(r.hsv.rgb(t),t[2])},r.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},r.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},r.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},r.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},r.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},r.rgb.hcg=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,a=Math.max(Math.max(n,r),i),o=Math.min(Math.min(n,r),i),s=a-o;return e=s<=0?0:a===n?(r-i)/s%6:a===r?2+(i-n)/s:4+(n-r)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?o/(1-s):0)]},r.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;return(r=n<.5?2*e*n:2*e*(1-n))<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},r.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},r.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i,a=[0,0,0],o=e%1*6,s=o%1,l=1-s;switch(Math.floor(o)){case 0:a[0]=1,a[1]=s,a[2]=0;break;case 1:a[0]=l,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=s;break;case 3:a[0]=0,a[1]=l,a[2]=1;break;case 4:a[0]=s,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=l}return i=(1-n)*r,[255*(n*a[0]+i),255*(n*a[1]+i),255*(n*a[2]+i)]},r.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},r.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},r.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},r.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,r=n-e,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},r.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},r.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},r.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},r.gray.hsl=r.gray.hsv=function(t){return[0,0,t[0]]},r.gray.hwb=function(t){return[0,100,t[0]]},r.gray.cmyk=function(t){return[0,0,0,t[0]]},r.gray.lab=function(t){return[t[0],0,0]},r.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},r.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}}));function R(t){var e=function(){for(var t={},e=Object.keys(M),n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var r=n.pop(),i=Object.keys(M[r]),a=i.length,o=0;o<a;o++){var s=i[o],l=e[s];-1===l.distance&&(l.distance=e[r].distance+1,l.parent=r,n.unshift(s))}return e}function O(t,e){return function(n){return e(t(n))}}function I(t,e){for(var n=[e[t].parent,t],r=M[e[t].parent][t],i=e[t].parent;e[i].parent;)n.unshift(e[i].parent),r=O(M[e[i].parent][i],r),i=e[i].parent;return r.conversion=n,r}var L={};Object.keys(M).forEach((function(t){L[t]={},Object.defineProperty(L[t],"channels",{value:M[t].channels}),Object.defineProperty(L[t],"labels",{value:M[t].labels});var e=function(t){for(var e=R(t),n={},r=Object.keys(e),i=r.length,a=0;a<i;a++){var o=r[a];null!==e[o].parent&&(n[o]=I(o,e))}return n}(t);Object.keys(e).forEach((function(n){var r=e[n];L[t][n]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(r),L[t][n].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))}));var P=L,F={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},N={getRgba:U,getHsla:B,getRgb:function(t){var e=U(t);return e&&e.slice(0,3)},getHsl:function(t){var e=B(t);return e&&e.slice(0,3)},getHwb:V,getAlpha:function(t){var e=U(t);if(e)return e[3];if(e=B(t))return e[3];if(e=V(t))return e[3]},hexString:function(t,e){e=void 0!==e&&3===t.length?e:t[3];return"#"+G(t[0])+G(t[1])+G(t[2])+(e>=0&&e<1?G(Math.round(255*e)):"")},rgbString:function(t,e){if(e<1||t[3]&&t[3]<1)return j(t,e);return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:j,percentString:function(t,e){if(e<1||t[3]&&t[3]<1)return H(t,e);var n=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),i=Math.round(t[2]/255*100);return"rgb("+n+"%, "+r+"%, "+i+"%)"},percentaString:H,hslString:function(t,e){if(e<1||t[3]&&t[3]<1)return W(t,e);return"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:W,hwbString:function(t,e){void 0===e&&(e=void 0!==t[3]?t[3]:1);return"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return Y[t.slice(0,3)]}};function U(t){if(t){var e=[0,0,0],n=1,r=t.match(/^#([a-fA-F0-9]{3,4})$/i),i="";if(r){i=(r=r[1])[3];for(var a=0;a<e.length;a++)e[a]=parseInt(r[a]+r[a],16);i&&(n=Math.round(parseInt(i+i,16)/255*100)/100)}else if(r=t.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){i=r[2],r=r[1];for(a=0;a<e.length;a++)e[a]=parseInt(r.slice(2*a,2*a+2),16);i&&(n=Math.round(parseInt(i,16)/255*100)/100)}else if(r=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=parseInt(r[a+1]);n=parseFloat(r[4])}else if(r=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<e.length;a++)e[a]=Math.round(2.55*parseFloat(r[a+1]));n=parseFloat(r[4])}else if(r=t.match(/(\w+)/)){if("transparent"==r[1])return[0,0,0,0];if(!(e=F[r[1]]))return}for(a=0;a<e.length;a++)e[a]=z(e[a],0,255);return n=n||0==n?z(n,0,1):1,e[3]=n,e}}function B(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[z(parseInt(e[1]),0,360),z(parseFloat(e[2]),0,100),z(parseFloat(e[3]),0,100),z(isNaN(n)?1:n,0,1)]}}}function V(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[z(parseInt(e[1]),0,360),z(parseFloat(e[2]),0,100),z(parseFloat(e[3]),0,100),z(isNaN(n)?1:n,0,1)]}}}function j(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function H(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function W(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function z(t,e,n){return Math.min(Math.max(e,t),n)}function G(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}var Y={};for(var q in F)Y[F[q]]=q;var K=function(t){return t instanceof K?t:this instanceof K?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof t?(e=N.getRgba(t))?this.setValues("rgb",e):(e=N.getHsla(t))?this.setValues("hsl",e):(e=N.getHwb(t))&&this.setValues("hwb",e):"object"==typeof t&&(void 0!==(e=t).r||void 0!==e.red?this.setValues("rgb",e):void 0!==e.l||void 0!==e.lightness?this.setValues("hsl",e):void 0!==e.v||void 0!==e.value?this.setValues("hsv",e):void 0!==e.w||void 0!==e.whiteness?this.setValues("hwb",e):void 0===e.c&&void 0===e.cyan||this.setValues("cmyk",e)))):new K(t);var e};K.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var t=this.values;return 1!==t.alpha?t.hwb.concat([t.alpha]):t.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var t=this.values;return t.rgb.concat([t.alpha])},hslaArray:function(){var t=this.values;return t.hsl.concat([t.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return N.hexString(this.values.rgb)},rgbString:function(){return N.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return N.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return N.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return N.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return N.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return N.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return N.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var t=this.values.rgb;return t[0]<<16|t[1]<<8|t[2]},luminosity:function(){for(var t=this.values.rgb,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){var e=this.values.hsl;return e[2]+=e[2]*t,this.setValues("hsl",e),this},darken:function(t){var e=this.values.hsl;return e[2]-=e[2]*t,this.setValues("hsl",e),this},saturate:function(t){var e=this.values.hsl;return e[1]+=e[1]*t,this.setValues("hsl",e),this},desaturate:function(t){var e=this.values.hsl;return e[1]-=e[1]*t,this.setValues("hsl",e),this},whiten:function(t){var e=this.values.hwb;return e[1]+=e[1]*t,this.setValues("hwb",e),this},blacken:function(t){var e=this.values.hwb;return e[2]+=e[2]*t,this.setValues("hwb",e),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){var e=this.values.alpha;return this.setValues("alpha",e-e*t),this},opaquer:function(t){var e=this.values.alpha;return this.setValues("alpha",e+e*t),this},rotate:function(t){var e=this.values.hsl,n=(e[0]+t)%360;return e[0]=n<0?360+n:n,this.setValues("hsl",e),this},mix:function(t,e){var n=this,r=t,i=void 0===e?.5:e,a=2*i-1,o=n.alpha()-r.alpha(),s=((a*o==-1?a:(a+o)/(1+a*o))+1)/2,l=1-s;return this.rgb(s*n.red()+l*r.red(),s*n.green()+l*r.green(),s*n.blue()+l*r.blue()).alpha(n.alpha()*i+r.alpha()*(1-i))},toJSON:function(){return this.rgb()},clone:function(){var t,e,n=new K,r=this.values,i=n.values;for(var a in r)r.hasOwnProperty(a)&&(t=r[a],"[object Array]"===(e={}.toString.call(t))?i[a]=t.slice(0):"[object Number]"===e?i[a]=t:console.error("unexpected color value:",t));return n}},K.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},K.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},K.prototype.getValues=function(t){for(var e=this.values,n={},r=0;r<t.length;r++)n[t.charAt(r)]=e[t][r];return 1!==e.alpha&&(n.a=e.alpha),n},K.prototype.setValues=function(t,e){var n,r,i=this.values,a=this.spaces,o=this.maxes,s=1;if(this.valid=!0,"alpha"===t)s=e;else if(e.length)i[t]=e.slice(0,t.length),s=e[t.length];else if(void 0!==e[t.charAt(0)]){for(n=0;n<t.length;n++)i[t][n]=e[t.charAt(n)];s=e.a}else if(void 0!==e[a[t][0]]){var l=a[t];for(n=0;n<t.length;n++)i[t][n]=e[l[n]];s=e.alpha}if(i.alpha=Math.max(0,Math.min(1,void 0===s?i.alpha:s)),"alpha"===t)return!1;for(n=0;n<t.length;n++)r=Math.max(0,Math.min(o[t][n],i[t][n])),i[t][n]=Math.round(r);for(var u in a)u!==t&&(i[u]=P[t][u](i[t]));return!0},K.prototype.setSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n),this)},K.prototype.setChannel=function(t,e,n){var r=this.values[t];return void 0===n?r[e]:(n===r[e]||(r[e]=n,this.setValues(t,r)),this)},"undefined"!=typeof window&&(window.Color=K);var X=K,Z=function(t){var e=t.helpers,n=e.noop;t.defaults.global.legend={display:!0,position:"top",fullWidth:!0,reverse:!1,onClick:function(t,e){var n=e.datasetIndex,r=this.chart,i=r.getDatasetMeta(n);i.hidden=null===i.hidden?!r.data.datasets[n].hidden:null,r.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(t){var n=t.data;return e.isArray(n.datasets)?n.datasets.map((function(n,r){return{text:n.label,fillStyle:e.isArray(n.backgroundColor)?n.backgroundColor[0]:n.backgroundColor,hidden:!t.isDatasetVisible(r),lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:n.borderWidth,strokeStyle:n.borderColor,pointStyle:n.pointStyle,datasetIndex:r}}),this):[]}}},t.Legend=t.Element.extend({initialize:function(t){e.extend(this,t),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:n,update:function(t,e,n){var r=this;return r.beforeUpdate(),r.maxWidth=t,r.maxHeight=e,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:n,beforeSetDimensions:n,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:n,beforeBuildLabels:n,buildLabels:function(){var t=this;t.legendItems=t.options.labels.generateLabels.call(t,t.chart),t.options.reverse&&t.legendItems.reverse()},afterBuildLabels:n,beforeFit:n,fit:function(){var n=this,r=n.options,i=r.labels,a=r.display,o=n.ctx,s=t.defaults.global,l=e.getValueOrDefault,u=l(i.fontSize,s.defaultFontSize),c=l(i.fontStyle,s.defaultFontStyle),d=l(i.fontFamily,s.defaultFontFamily),h=e.fontString(u,c,d),f=n.legendHitBoxes=[],p=n.minSize,g=n.isHorizontal();if(g?(p.width=n.maxWidth,p.height=a?10:0):(p.width=a?10:0,p.height=n.maxHeight),a)if(o.font=h,g){var m=n.lineWidths=[0],v=n.legendItems.length?u+i.padding:0;o.textAlign="left",o.textBaseline="top",e.each(n.legendItems,(function(t,e){var r=(i.usePointStyle?u*Math.sqrt(2):i.boxWidth)+u/2+o.measureText(t.text).width;m[m.length-1]+r+i.padding>=n.width&&(v+=u+i.padding,m[m.length]=n.left),f[e]={left:0,top:0,width:r,height:u},m[m.length-1]+=r+i.padding})),p.height+=v}else{var y=i.padding,b=n.columnWidths=[],S=i.padding,w=0,T=0,x=u+y;e.each(n.legendItems,(function(t,e){var n=(i.usePointStyle?2*i.boxWidth:i.boxWidth)+u/2+o.measureText(t.text).width;T+x>p.height&&(S+=w+i.padding,b.push(w),w=0,T=0),w=Math.max(w,n),T+=x,f[e]={left:0,top:0,width:n,height:u}})),S+=w,b.push(w),p.width+=S}n.width=p.width,n.height=p.height},afterFit:n,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var n=this,r=n.options,i=r.labels,a=t.defaults.global,o=a.elements.line,s=n.width,l=n.lineWidths;if(r.display){var u,c=n.ctx,d=e.getValueOrDefault,h=d(i.fontColor,a.defaultFontColor),f=d(i.fontSize,a.defaultFontSize),p=d(i.fontStyle,a.defaultFontStyle),g=d(i.fontFamily,a.defaultFontFamily),m=e.fontString(f,p,g);c.textAlign="left",c.textBaseline="top",c.lineWidth=.5,c.strokeStyle=h,c.fillStyle=h,c.font=m;var v=i.boxWidth,y=n.legendHitBoxes,b=n.isHorizontal();u=b?{x:n.left+(s-l[0])/2,y:n.top+i.padding,line:0}:{x:n.left+i.padding,y:n.top+i.padding,line:0};var S=f+i.padding;e.each(n.legendItems,(function(e,h){var p=c.measureText(e.text).width,g=i.usePointStyle?f+f/2+p:v+f/2+p,m=u.x,w=u.y;b?m+g>=s&&(w=u.y+=S,u.line++,m=u.x=n.left+(s-l[u.line])/2):w+S>n.bottom&&(m=u.x=m+n.columnWidths[u.line]+i.padding,w=u.y=n.top,u.line++),function(e,n,i){if(!(isNaN(v)||v<=0)){c.save(),c.fillStyle=d(i.fillStyle,a.defaultColor),c.lineCap=d(i.lineCap,o.borderCapStyle),c.lineDashOffset=d(i.lineDashOffset,o.borderDashOffset),c.lineJoin=d(i.lineJoin,o.borderJoinStyle),c.lineWidth=d(i.lineWidth,o.borderWidth),c.strokeStyle=d(i.strokeStyle,a.defaultColor);var s=0===d(i.lineWidth,o.borderWidth);if(c.setLineDash&&c.setLineDash(d(i.lineDash,o.borderDash)),r.labels&&r.labels.usePointStyle){var l=f*Math.SQRT2/2,u=l/Math.SQRT2,h=e+u,p=n+u;t.canvasHelpers.drawPoint(c,i.pointStyle,l,h,p)}else s||c.strokeRect(e,n,v,f),c.fillRect(e,n,v,f);c.restore()}}(m,w,e),y[h].left=m,y[h].top=w,function(t,e,n,r){c.fillText(n.text,v+f/2+t,e),n.hidden&&(c.beginPath(),c.lineWidth=2,c.moveTo(v+f/2+t,e+f/2),c.lineTo(v+f/2+t+r,e+f/2),c.stroke())}(m,w,e,p),b?u.x+=g+i.padding:u.y+=S}))}},handleEvent:function(t){var n=this,r=n.options,i="mouseup"===t.type?"click":t.type;if("mousemove"===i){if(!r.onHover)return}else{if("click"!==i)return;if(!r.onClick)return}var a=e.getRelativePosition(t,n.chart.chart),o=a.x,s=a.y;if(o>=n.left&&o<=n.right&&s>=n.top&&s<=n.bottom)for(var l=n.legendHitBoxes,u=0;u<l.length;++u){var c=l[u];if(o>=c.left&&o<=c.left+c.width&&s>=c.top&&s<=c.top+c.height){if("click"===i){r.onClick.call(n,t,n.legendItems[u]);break}if("mousemove"===i){r.onHover.call(n,t,n.legendItems[u]);break}}}}}),t.plugins.register({beforeInit:function(e){var n=e.options.legend;n&&(e.legend=new t.Legend({ctx:e.chart.ctx,options:n,chart:e}),t.layoutService.addBox(e,e.legend))}})},J=function(t){var e=t.helpers;function n(t,n){return n&&(e.isArray(n)?Array.prototype.push.apply(t,n):t.push(n)),t}t.defaults.global.tooltips={enabled:!0,custom:null,mode:"single",backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,yAlign:"center",xAlign:"center",caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",callbacks:{beforeTitle:e.noop,title:function(t,e){var n="",r=e.labels,i=r?r.length:0;if(t.length>0){var a=t[0];a.xLabel?n=a.xLabel:i>0&&a.index<i&&(n=r[a.index])}return n},afterTitle:e.noop,beforeBody:e.noop,beforeLabel:e.noop,label:function(t,e){return(e.datasets[t.datasetIndex].label||"")+": "+t.yLabel},labelColor:function(t,e){var n=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},afterLabel:e.noop,afterBody:e.noop,beforeFooter:e.noop,footer:e.noop,afterFooter:e.noop}},t.Tooltip=t.Element.extend({initialize:function(){var n=t.defaults.global,r=this._options,i=e.getValueOrDefault;e.extend(this,{_model:{xPadding:r.xPadding,yPadding:r.yPadding,xAlign:r.xAlign,yAlign:r.yAlign,bodyFontColor:r.bodyFontColor,_bodyFontFamily:i(r.bodyFontFamily,n.defaultFontFamily),_bodyFontStyle:i(r.bodyFontStyle,n.defaultFontStyle),_bodyAlign:r.bodyAlign,bodyFontSize:i(r.bodyFontSize,n.defaultFontSize),bodySpacing:r.bodySpacing,titleFontColor:r.titleFontColor,_titleFontFamily:i(r.titleFontFamily,n.defaultFontFamily),_titleFontStyle:i(r.titleFontStyle,n.defaultFontStyle),titleFontSize:i(r.titleFontSize,n.defaultFontSize),_titleAlign:r.titleAlign,titleSpacing:r.titleSpacing,titleMarginBottom:r.titleMarginBottom,footerFontColor:r.footerFontColor,_footerFontFamily:i(r.footerFontFamily,n.defaultFontFamily),_footerFontStyle:i(r.footerFontStyle,n.defaultFontStyle),footerFontSize:i(r.footerFontSize,n.defaultFontSize),_footerAlign:r.footerAlign,footerSpacing:r.footerSpacing,footerMarginTop:r.footerMarginTop,caretSize:r.caretSize,cornerRadius:r.cornerRadius,backgroundColor:r.backgroundColor,opacity:0,legendColorBackground:r.multiKeyBackground}})},getTitle:function(){var t=this,e=t._options,r=e.callbacks,i=r.beforeTitle.apply(t,arguments),a=r.title.apply(t,arguments),o=r.afterTitle.apply(t,arguments),s=[];return s=n(s,i),s=n(s,a),s=n(s,o)},getBeforeBody:function(){var t=this._options.callbacks.beforeBody.apply(this,arguments);return e.isArray(t)?t:void 0!==t?[t]:[]},getBody:function(t,r){var i=this,a=i._options.callbacks,o=[];return e.each(t,(function(t){var e={before:[],lines:[],after:[]};n(e.before,a.beforeLabel.call(i,t,r)),n(e.lines,a.label.call(i,t,r)),n(e.after,a.afterLabel.call(i,t,r)),o.push(e)})),o},getAfterBody:function(){var t=this._options.callbacks.afterBody.apply(this,arguments);return e.isArray(t)?t:void 0!==t?[t]:[]},getFooter:function(){var t=this,e=t._options.callbacks,r=e.beforeFooter.apply(t,arguments),i=e.footer.apply(t,arguments),a=e.afterFooter.apply(t,arguments),o=[];return o=n(o,r),o=n(o,i),o=n(o,a)},update:function(t){var n,r,i,a,o,s,l,u=this,c=u._options,d=u._model,h=u._active,f=u._data,p=u._chartInstance;if(h.length){d.opacity=1;var g=[],m=function(t){if(!t.length)return!1;var e,n,r=[],i=[];for(e=0,n=t.length;e<n;++e){var a=t[e];if(a&&a.hasValue()){var o=a.tooltipPosition();r.push(o.x),i.push(o.y)}}var s=0,l=0;for(e=0;e<r.length;++e)r[e]&&(s+=r[e],l+=i[e]);return{x:Math.round(s/r.length),y:Math.round(l/r.length)}}(h),v=[];for(n=0,r=h.length;n<r;++n)v.push((i=h[n],a=void 0,o=void 0,s=void 0,l=void 0,a=i._xScale,o=i._yScale||i._scale,s=i._index,l=i._datasetIndex,{xLabel:a?a.getLabelForIndex(s,l):"",yLabel:o?o.getLabelForIndex(s,l):"",index:s,datasetIndex:l}));c.itemSort&&(v=v.sort((function(t,e){return c.itemSort(t,e,f)}))),h.length>1&&e.each(v,(function(t){g.push(c.callbacks.labelColor.call(u,t,p))})),e.extend(d,{title:u.getTitle(v,f),beforeBody:u.getBeforeBody(v,f),body:u.getBody(v,f),afterBody:u.getAfterBody(v,f),footer:u.getFooter(v,f),x:Math.round(m.x),y:Math.round(m.y),caretPadding:e.getValueOrDefault(m.padding,2),labelColors:g});var y=u.getTooltipSize(d);u.determineAlignment(y),e.extend(d,u.getBackgroundPoint(d,y))}else u._model.opacity=0;return t&&c.custom&&c.custom.call(u,d),u},getTooltipSize:function(t){var n=this._chart.ctx,r={height:2*t.yPadding,width:0},i=t.body,a=i.reduce((function(t,e){return t+e.before.length+e.lines.length+e.after.length}),0);a+=t.beforeBody.length+t.afterBody.length;var o=t.title.length,s=t.footer.length,l=t.titleFontSize,u=t.bodyFontSize,c=t.footerFontSize;r.height+=o*l,r.height+=(o-1)*t.titleSpacing,r.height+=o?t.titleMarginBottom:0,r.height+=a*u,r.height+=a?(a-1)*t.bodySpacing:0,r.height+=s?t.footerMarginTop:0,r.height+=s*c,r.height+=s?(s-1)*t.footerSpacing:0;var d=0,h=function(t){r.width=Math.max(r.width,n.measureText(t).width+d)};return n.font=e.fontString(l,t._titleFontStyle,t._titleFontFamily),e.each(t.title,h),n.font=e.fontString(u,t._bodyFontStyle,t._bodyFontFamily),e.each(t.beforeBody.concat(t.afterBody),h),d=i.length>1?u+2:0,e.each(i,(function(t){e.each(t.before,h),e.each(t.lines,h),e.each(t.after,h)})),d=0,n.font=e.fontString(c,t._footerFontStyle,t._footerFontFamily),e.each(t.footer,h),r.width+=2*t.xPadding,r},determineAlignment:function(t){var e,n,r,i,a,o=this,s=o._model,l=o._chart,u=o._chartInstance.chartArea;s.y<t.height?s.yAlign="top":s.y>l.height-t.height&&(s.yAlign="bottom");var c=(u.left+u.right)/2,d=(u.top+u.bottom)/2;"center"===s.yAlign?(e=function(t){return t<=c},n=function(t){return t>c}):(e=function(e){return e<=t.width/2},n=function(e){return e>=l.width-t.width/2}),r=function(e){return e+t.width>l.width},i=function(e){return e-t.width<0},a=function(t){return t<=d?"top":"bottom"},e(s.x)?(s.xAlign="left",r(s.x)&&(s.xAlign="center",s.yAlign=a(s.y))):n(s.x)&&(s.xAlign="right",i(s.x)&&(s.xAlign="center",s.yAlign=a(s.y)))},getBackgroundPoint:function(t,e){var n={x:t.x,y:t.y},r=t.caretSize,i=t.caretPadding,a=t.cornerRadius,o=t.xAlign,s=t.yAlign,l=r+i,u=a+i;return"right"===o?n.x-=e.width:"center"===o&&(n.x-=e.width/2),"top"===s?n.y+=l:n.y-="bottom"===s?e.height+l:e.height/2,"center"===s?"left"===o?n.x+=l:"right"===o&&(n.x-=l):"left"===o?n.x-=u:"right"===o&&(n.x+=u),n},drawCaret:function(t,n,r){var i,a,o,s,l,u,c=this._view,d=this._chart.ctx,h=c.caretSize,f=c.cornerRadius,p=c.xAlign,g=c.yAlign,m=t.x,v=t.y,y=n.width,b=n.height;"center"===g?("left"===p?(a=(i=m)-h,o=i):(a=(i=m+y)+h,o=i),s=(l=v+b/2)-h,u=l+h):("left"===p?o=(a=(i=m+f)+h)+h:"right"===p?o=(a=(i=m+y-f)-h)-h:(i=(a=m+y/2)-h,o=a+h),"top"===g?(l=(s=v)-h,u=s):(l=(s=v+b)+h,u=s));var S=e.color(c.backgroundColor);d.fillStyle=S.alpha(r*S.alpha()).rgbString(),d.beginPath(),d.moveTo(i,s),d.lineTo(a,l),d.lineTo(o,u),d.closePath(),d.fill()},drawTitle:function(t,n,r,i){var a=n.title;if(a.length){r.textAlign=n._titleAlign,r.textBaseline="top";var o,s,l=n.titleFontSize,u=n.titleSpacing,c=e.color(n.titleFontColor);for(r.fillStyle=c.alpha(i*c.alpha()).rgbString(),r.font=e.fontString(l,n._titleFontStyle,n._titleFontFamily),o=0,s=a.length;o<s;++o)r.fillText(a[o],t.x,t.y),t.y+=l+u,o+1===a.length&&(t.y+=n.titleMarginBottom-u)}},drawBody:function(t,n,r,i){var a=n.bodyFontSize,o=n.bodySpacing,s=n.body;r.textAlign=n._bodyAlign,r.textBaseline="top";var l=e.color(n.bodyFontColor),u=l.alpha(i*l.alpha()).rgbString();r.fillStyle=u,r.font=e.fontString(a,n._bodyFontStyle,n._bodyFontFamily);var c=0,d=function(e){r.fillText(e,t.x+c,t.y),t.y+=a+o};e.each(n.beforeBody,d);var h=s.length>1;c=h?a+2:0,e.each(s,(function(o,s){e.each(o.before,d),e.each(o.lines,(function(o){h&&(r.fillStyle=e.color(n.legendColorBackground).alpha(i).rgbaString(),r.fillRect(t.x,t.y,a,a),r.strokeStyle=e.color(n.labelColors[s].borderColor).alpha(i).rgbaString(),r.strokeRect(t.x,t.y,a,a),r.fillStyle=e.color(n.labelColors[s].backgroundColor).alpha(i).rgbaString(),r.fillRect(t.x+1,t.y+1,a-2,a-2),r.fillStyle=u),d(o)})),e.each(o.after,d)})),c=0,e.each(n.afterBody,d),t.y-=o},drawFooter:function(t,n,r,i){var a=n.footer;if(a.length){t.y+=n.footerMarginTop,r.textAlign=n._footerAlign,r.textBaseline="top";var o=e.color(n.footerFontColor);r.fillStyle=o.alpha(i*o.alpha()).rgbString(),r.font=e.fontString(n.footerFontSize,n._footerFontStyle,n._footerFontFamily),e.each(a,(function(e){r.fillText(e,t.x,t.y),t.y+=n.footerFontSize+n.footerSpacing}))}},draw:function(){var t=this._chart.ctx,n=this._view;if(0!==n.opacity){var r=this.getTooltipSize(n),i={x:n.x,y:n.y},a=Math.abs(n.opacity<.001)?0:n.opacity;if(this._options.enabled){var o=e.color(n.backgroundColor);t.fillStyle=o.alpha(a*o.alpha()).rgbString(),e.drawRoundedRectangle(t,i.x,i.y,r.width,r.height,n.cornerRadius),t.fill(),this.drawCaret(i,r,a),i.x+=n.xPadding,i.y+=n.yPadding,this.drawTitle(i,n,t,a),this.drawBody(i,n,t,a),this.drawFooter(i,n,t,a)}}}})},Q=n((function(t,e){t.exports=function(){var e,n;function i(){return e.apply(null,arguments)}function a(t){e=t}function o(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function s(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(l(t,e))return!1;return!0}function c(t){return void 0===t}function d(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function h(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function f(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function p(t,e){for(var n in e)l(e,n)&&(t[n]=e[n]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function g(t,e,n,r){return qn(t,e,n,r,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(t){return null==t._pf&&(t._pf=m()),t._pf}function y(t){if(null==t._isValid){var e=v(t),r=n.call(e.parsedDateParts,(function(t){return null!=t})),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function b(t){var e=g(NaN);return null!=t?p(v(e),t):v(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),r=n.length>>>0;for(e=0;e<r;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var S=i.momentProperties=[],w=!1;function T(t,e){var n,r,i;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=v(e)),c(e._locale)||(t._locale=e._locale),S.length>0)for(n=0;n<S.length;n++)c(i=e[r=S[n]])||(t[r]=i);return t}function x(t){T(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,i.updateOffset(this),w=!1)}function _(t){return t instanceof x||null!=t&&null!=t._isAMomentObject}function k(t){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function E(t,e){var n=!0;return p((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,t),n){var r,a,o,s=[];for(a=0;a<arguments.length;a++){if(r="","object"==typeof arguments[a]){for(o in r+="\n["+a+"] ",arguments[0])l(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[a];s.push(r)}k(t+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var $,A={};function C(t,e){null!=i.deprecationHandler&&i.deprecationHandler(t,e),A[t]||(k(e),A[t]=!0)}function D(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function M(t){var e,n;for(n in t)l(t,n)&&(D(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function R(t,e){var n,r=p({},t);for(n in e)l(e,n)&&(s(t[n])&&s(e[n])?(r[n]={},p(r[n],t[n]),p(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)l(t,n)&&!l(e,n)&&s(t[n])&&(r[n]=p({},r[n]));return r}function O(t){null!=t&&this.set(t)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,$=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)l(t,e)&&n.push(e);return n};var I={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function L(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return D(r)?r.call(e,n):r}function P(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},B={};function V(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(B[t]=i),e&&(B[e[0]]=function(){return P(i.apply(this,arguments),e[1],e[2])}),n&&(B[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function j(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function H(t){var e,n,r=t.match(F);for(e=0,n=r.length;e<n;e++)B[r[e]]?r[e]=B[r[e]]:r[e]=j(r[e]);return function(e){var i,a="";for(i=0;i<n;i++)a+=D(r[i])?r[i].call(e,t):r[i];return a}}function W(t,e){return t.isValid()?(e=z(e,t.localeData()),U[e]=U[e]||H(e),U[e](t)):t.localeData().invalidDate()}function z(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(N.lastIndex=0;n>=0&&N.test(t);)t=t.replace(N,r),N.lastIndex=0,n-=1;return t}var G={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Y(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(F).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])}var q="Invalid date";function K(){return this._invalidDate}var X="%d",Z=/\d{1,2}/;function J(t){return this._ordinal.replace("%d",t)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function tt(t,e,n,r){var i=this._relativeTime[n];return D(i)?i(t,e,n,r):i.replace(/%d/i,t)}function et(t,e){var n=this._relativeTime[t>0?"future":"past"];return D(n)?n(e):n.replace(/%s/i,e)}var nt={};function rt(t,e){var n=t.toLowerCase();nt[n]=nt[n+"s"]=nt[e]=t}function it(t){return"string"==typeof t?nt[t]||nt[t.toLowerCase()]:void 0}function at(t){var e,n,r={};for(n in t)l(t,n)&&(e=it(n))&&(r[e]=t[n]);return r}var ot={};function st(t,e){ot[t]=e}function lt(t){var e,n=[];for(e in t)l(t,e)&&n.push({unit:e,priority:ot[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}function ut(t){return t%4==0&&t%100!=0||t%400==0}function ct(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function dt(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=ct(e)),n}function ht(t,e){return function(n){return null!=n?(pt(this,t,n),i.updateOffset(this,e),this):ft(this,t)}}function ft(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function pt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&ut(t.year())&&1===t.month()&&29===t.date()?(n=dt(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),te(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function gt(t){return D(this[t=it(t)])?this[t]():this}function mt(t,e){if("object"==typeof t){var n,r=lt(t=at(t));for(n=0;n<r.length;n++)this[r[n].unit](t[r[n].unit])}else if(D(this[t=it(t)]))return this[t](e);return this}var vt,yt=/\d/,bt=/\d\d/,St=/\d{3}/,wt=/\d{4}/,Tt=/[+-]?\d{6}/,xt=/\d\d?/,_t=/\d\d\d\d?/,kt=/\d\d\d\d\d\d?/,Et=/\d{1,3}/,$t=/\d{1,4}/,At=/[+-]?\d{1,6}/,Ct=/\d+/,Dt=/[+-]?\d+/,Mt=/Z|[+-]\d\d:?\d\d/gi,Rt=/Z|[+-]\d\d(?::?\d\d)?/gi,Ot=/[+-]?\d+(\.\d{1,3})?/,It=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Lt(t,e,n){vt[t]=D(e)?e:function(t,r){return t&&n?n:e}}function Pt(t,e){return l(vt,t)?vt[t](e._strict,e._locale):new RegExp(Ft(t))}function Ft(t){return Nt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i})))}function Nt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}vt={};var Ut={};function Bt(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),d(e)&&(r=function(t,n){n[e]=dt(t)}),n=0;n<t.length;n++)Ut[t[n]]=r}function Vt(t,e){Bt(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function jt(t,e,n){null!=e&&l(Ut,t)&&Ut[t](e,n._a,n,t)}var Ht,Wt=0,zt=1,Gt=2,Yt=3,qt=4,Kt=5,Xt=6,Zt=7,Jt=8;function Qt(t,e){return(t%e+e)%e}function te(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=Qt(e,12);return t+=(e-n)/12,1===n?ut(t)?29:28:31-n%7%2}Ht=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},V("M",["MM",2],"Mo",(function(){return this.month()+1})),V("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),V("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),rt("month","M"),st("month",8),Lt("M",xt),Lt("MM",xt,bt),Lt("MMM",(function(t,e){return e.monthsShortRegex(t)})),Lt("MMMM",(function(t,e){return e.monthsRegex(t)})),Bt(["M","MM"],(function(t,e){e[zt]=dt(t)-1})),Bt(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[zt]=i:v(n).invalidMonth=t}));var ee="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ne="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),re=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ie=It,ae=It;function oe(t,e){return t?o(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||re).test(e)?"format":"standalone"][t.month()]:o(this._months)?this._months:this._months.standalone}function se(t,e){return t?o(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[re.test(e)?"format":"standalone"][t.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function le(t,e,n){var r,i,a,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=g([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=Ht.call(this._shortMonthsParse,o))?i:null:-1!==(i=Ht.call(this._longMonthsParse,o))?i:null:"MMM"===e?-1!==(i=Ht.call(this._shortMonthsParse,o))||-1!==(i=Ht.call(this._longMonthsParse,o))?i:null:-1!==(i=Ht.call(this._longMonthsParse,o))||-1!==(i=Ht.call(this._shortMonthsParse,o))?i:null}function ue(t,e,n){var r,i,a;if(this._monthsParseExact)return le.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=g([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function ce(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=dt(e);else if(!d(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),te(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function de(t){return null!=t?(ce(this,t),i.updateOffset(this,!0),this):ft(this,"Month")}function he(){return te(this.year(),this.month())}function fe(t){return this._monthsParseExact?(l(this,"_monthsRegex")||ge.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=ie),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function pe(t){return this._monthsParseExact?(l(this,"_monthsRegex")||ge.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=ae),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function ge(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],a=[];for(e=0;e<12;e++)n=g([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),a.sort(t),e=0;e<12;e++)r[e]=Nt(r[e]),i[e]=Nt(i[e]);for(e=0;e<24;e++)a[e]=Nt(a[e]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function me(t){return ut(t)?366:365}V("Y",0,0,(function(){var t=this.year();return t<=9999?P(t,4):"+"+t})),V(0,["YY",2],0,(function(){return this.year()%100})),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),rt("year","y"),st("year",1),Lt("Y",Dt),Lt("YY",xt,bt),Lt("YYYY",$t,wt),Lt("YYYYY",At,Tt),Lt("YYYYYY",At,Tt),Bt(["YYYYY","YYYYYY"],Wt),Bt("YYYY",(function(t,e){e[Wt]=2===t.length?i.parseTwoDigitYear(t):dt(t)})),Bt("YY",(function(t,e){e[Wt]=i.parseTwoDigitYear(t)})),Bt("Y",(function(t,e){e[Wt]=parseInt(t,10)})),i.parseTwoDigitYear=function(t){return dt(t)+(dt(t)>68?1900:2e3)};var ve=ht("FullYear",!0);function ye(){return ut(this.year())}function be(t,e,n,r,i,a,o){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,a,o),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,a,o),s}function Se(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function we(t,e,n){var r=7+e-n;return-(7+Se(t,0,r).getUTCDay()-e)%7+r-1}function Te(t,e,n,r,i){var a,o,s=1+7*(e-1)+(7+n-r)%7+we(t,r,i);return s<=0?o=me(a=t-1)+s:s>me(t)?(a=t+1,o=s-me(t)):(a=t,o=s),{year:a,dayOfYear:o}}function xe(t,e,n){var r,i,a=we(t.year(),e,n),o=Math.floor((t.dayOfYear()-a-1)/7)+1;return o<1?r=o+_e(i=t.year()-1,e,n):o>_e(t.year(),e,n)?(r=o-_e(t.year(),e,n),i=t.year()+1):(i=t.year(),r=o),{week:r,year:i}}function _e(t,e,n){var r=we(t,e,n),i=we(t+1,e,n);return(me(t)-r+i)/7}function ke(t){return xe(t,this._week.dow,this._week.doy).week}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),rt("week","w"),rt("isoWeek","W"),st("week",5),st("isoWeek",5),Lt("w",xt),Lt("ww",xt,bt),Lt("W",xt),Lt("WW",xt,bt),Vt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=dt(t)}));var Ee={dow:0,doy:6};function $e(){return this._week.dow}function Ae(){return this._week.doy}function Ce(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function De(t){var e=xe(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Me(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function Re(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Oe(t,e){return t.slice(e,7).concat(t.slice(0,e))}V("d",0,"do","day"),V("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),V("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),V("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),rt("day","d"),rt("weekday","e"),rt("isoWeekday","E"),st("day",11),st("weekday",11),st("isoWeekday",11),Lt("d",xt),Lt("e",xt),Lt("E",xt),Lt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),Lt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),Lt("dddd",(function(t,e){return e.weekdaysRegex(t)})),Vt(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:v(n).invalidWeekday=t})),Vt(["d","e","E"],(function(t,e,n,r){e[r]=dt(t)}));var Ie="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Le="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Pe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Fe=It,Ne=It,Ue=It;function Be(t,e){var n=o(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Oe(n,this._week.dow):t?n[t.day()]:n}function Ve(t){return!0===t?Oe(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function je(t){return!0===t?Oe(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function He(t,e,n){var r,i,a,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=g([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=Ht.call(this._weekdaysParse,o))?i:null:"ddd"===e?-1!==(i=Ht.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=Ht.call(this._minWeekdaysParse,o))?i:null:"dddd"===e?-1!==(i=Ht.call(this._weekdaysParse,o))||-1!==(i=Ht.call(this._shortWeekdaysParse,o))||-1!==(i=Ht.call(this._minWeekdaysParse,o))?i:null:"ddd"===e?-1!==(i=Ht.call(this._shortWeekdaysParse,o))||-1!==(i=Ht.call(this._weekdaysParse,o))||-1!==(i=Ht.call(this._minWeekdaysParse,o))?i:null:-1!==(i=Ht.call(this._minWeekdaysParse,o))||-1!==(i=Ht.call(this._weekdaysParse,o))||-1!==(i=Ht.call(this._shortWeekdaysParse,o))?i:null}function We(t,e,n){var r,i,a;if(this._weekdaysParseExact)return He.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=g([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function ze(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Me(t,this.localeData()),this.add(t-e,"d")):e}function Ge(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Ye(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Re(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function qe(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ze.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Fe),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ke(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ze.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ne),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Xe(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ze.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ue),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ze(){function t(t,e){return e.length-t.length}var e,n,r,i,a,o=[],s=[],l=[],u=[];for(e=0;e<7;e++)n=g([2e3,1]).day(e),r=Nt(this.weekdaysMin(n,"")),i=Nt(this.weekdaysShort(n,"")),a=Nt(this.weekdays(n,"")),o.push(r),s.push(i),l.push(a),u.push(r),u.push(i),u.push(a);o.sort(t),s.sort(t),l.sort(t),u.sort(t),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Je(){return this.hours()%12||12}function Qe(){return this.hours()||24}function tn(t,e){V(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function en(t,e){return e._meridiemParse}function nn(t){return"p"===(t+"").toLowerCase().charAt(0)}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Je),V("k",["kk",2],0,Qe),V("hmm",0,0,(function(){return""+Je.apply(this)+P(this.minutes(),2)})),V("hmmss",0,0,(function(){return""+Je.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)})),V("Hmm",0,0,(function(){return""+this.hours()+P(this.minutes(),2)})),V("Hmmss",0,0,(function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)})),tn("a",!0),tn("A",!1),rt("hour","h"),st("hour",13),Lt("a",en),Lt("A",en),Lt("H",xt),Lt("h",xt),Lt("k",xt),Lt("HH",xt,bt),Lt("hh",xt,bt),Lt("kk",xt,bt),Lt("hmm",_t),Lt("hmmss",kt),Lt("Hmm",_t),Lt("Hmmss",kt),Bt(["H","HH"],Yt),Bt(["k","kk"],(function(t,e,n){var r=dt(t);e[Yt]=24===r?0:r})),Bt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),Bt(["h","hh"],(function(t,e,n){e[Yt]=dt(t),v(n).bigHour=!0})),Bt("hmm",(function(t,e,n){var r=t.length-2;e[Yt]=dt(t.substr(0,r)),e[qt]=dt(t.substr(r)),v(n).bigHour=!0})),Bt("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[Yt]=dt(t.substr(0,r)),e[qt]=dt(t.substr(r,2)),e[Kt]=dt(t.substr(i)),v(n).bigHour=!0})),Bt("Hmm",(function(t,e,n){var r=t.length-2;e[Yt]=dt(t.substr(0,r)),e[qt]=dt(t.substr(r))})),Bt("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[Yt]=dt(t.substr(0,r)),e[qt]=dt(t.substr(r,2)),e[Kt]=dt(t.substr(i))}));var rn=/[ap]\.?m?\.?/i,an=ht("Hours",!0);function on(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var sn,ln={calendar:I,longDateFormat:G,invalidDate:q,ordinal:X,dayOfMonthOrdinalParse:Z,relativeTime:Q,months:ee,monthsShort:ne,week:Ee,weekdays:Ie,weekdaysMin:Pe,weekdaysShort:Le,meridiemParse:rn},un={},cn={};function dn(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function hn(t){return t?t.toLowerCase().replace("_","-"):t}function fn(t){for(var e,n,r,i,a=0;a<t.length;){for(e=(i=hn(t[a]).split("-")).length,n=(n=hn(t[a+1]))?n.split("-"):null;e>0;){if(r=pn(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&dn(i,n)>=e-1)break;e--}a++}return sn}function pn(e){var n=null;if(void 0===un[e]&&t&&t.exports)try{n=sn._abbr,r(),gn(n)}catch(t){un[e]=null}return un[e]}function gn(t,e){var n;return t&&((n=c(e)?yn(t):mn(t,e))?sn=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),sn._abbr}function mn(t,e){if(null!==e){var n,r=ln;if(e.abbr=t,null!=un[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[t]._config;else if(null!=e.parentLocale)if(null!=un[e.parentLocale])r=un[e.parentLocale]._config;else{if(null==(n=pn(e.parentLocale)))return cn[e.parentLocale]||(cn[e.parentLocale]=[]),cn[e.parentLocale].push({name:t,config:e}),null;r=n._config}return un[t]=new O(R(r,e)),cn[t]&&cn[t].forEach((function(t){mn(t.name,t.config)})),gn(t),un[t]}return delete un[t],null}function vn(t,e){if(null!=e){var n,r,i=ln;null!=un[t]&&null!=un[t].parentLocale?un[t].set(R(un[t]._config,e)):(null!=(r=pn(t))&&(i=r._config),e=R(i,e),null==r&&(e.abbr=t),(n=new O(e)).parentLocale=un[t],un[t]=n),gn(t)}else null!=un[t]&&(null!=un[t].parentLocale?(un[t]=un[t].parentLocale,t===gn()&&gn(t)):null!=un[t]&&delete un[t]);return un[t]}function yn(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return sn;if(!o(t)){if(e=pn(t))return e;t=[t]}return fn(t)}function bn(){return $(un)}function Sn(t){var e,n=t._a;return n&&-2===v(t).overflow&&(e=n[zt]<0||n[zt]>11?zt:n[Gt]<1||n[Gt]>te(n[Wt],n[zt])?Gt:n[Yt]<0||n[Yt]>24||24===n[Yt]&&(0!==n[qt]||0!==n[Kt]||0!==n[Xt])?Yt:n[qt]<0||n[qt]>59?qt:n[Kt]<0||n[Kt]>59?Kt:n[Xt]<0||n[Xt]>999?Xt:-1,v(t)._overflowDayOfYear&&(e<Wt||e>Gt)&&(e=Gt),v(t)._overflowWeeks&&-1===e&&(e=Zt),v(t)._overflowWeekday&&-1===e&&(e=Jt),v(t).overflow=e),t}var wn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xn=/Z|[+-]\d\d(?::?\d\d)?/,_n=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],kn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],En=/^\/?Date\((-?\d+)/i,$n=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,An={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Cn(t){var e,n,r,i,a,o,s=t._i,l=wn.exec(s)||Tn.exec(s);if(l){for(v(t).iso=!0,e=0,n=_n.length;e<n;e++)if(_n[e][1].exec(l[1])){i=_n[e][0],r=!1!==_n[e][2];break}if(null==i)return void(t._isValid=!1);if(l[3]){for(e=0,n=kn.length;e<n;e++)if(kn[e][1].exec(l[3])){a=(l[2]||" ")+kn[e][0];break}if(null==a)return void(t._isValid=!1)}if(!r&&null!=a)return void(t._isValid=!1);if(l[4]){if(!xn.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=i+(a||"")+(o||""),Vn(t)}else t._isValid=!1}function Dn(t,e,n,r,i,a){var o=[Mn(t),ne.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return a&&o.push(parseInt(a,10)),o}function Mn(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function Rn(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function On(t,e,n){return!t||Le.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}function In(t,e,n){if(t)return An[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Ln(t){var e,n=$n.exec(Rn(t._i));if(n){if(e=Dn(n[4],n[3],n[2],n[5],n[6],n[7]),!On(n[1],e,t))return;t._a=e,t._tzm=In(n[8],n[9],n[10]),t._d=Se.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),v(t).rfc2822=!0}else t._isValid=!1}function Pn(t){var e=En.exec(t._i);null===e?(Cn(t),!1===t._isValid&&(delete t._isValid,Ln(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:i.createFromInputFallback(t)))):t._d=new Date(+e[1])}function Fn(t,e,n){return null!=t?t:null!=e?e:n}function Nn(t){var e=new Date(i.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Un(t){var e,n,r,i,a,o=[];if(!t._d){for(r=Nn(t),t._w&&null==t._a[Gt]&&null==t._a[zt]&&Bn(t),null!=t._dayOfYear&&(a=Fn(t._a[Wt],r[Wt]),(t._dayOfYear>me(a)||0===t._dayOfYear)&&(v(t)._overflowDayOfYear=!0),n=Se(a,0,t._dayOfYear),t._a[zt]=n.getUTCMonth(),t._a[Gt]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=o[e]=r[e];for(;e<7;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Yt]&&0===t._a[qt]&&0===t._a[Kt]&&0===t._a[Xt]&&(t._nextDay=!0,t._a[Yt]=0),t._d=(t._useUTC?Se:be).apply(null,o),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Yt]=24),t._w&&void 0!==t._w.d&&t._w.d!==i&&(v(t).weekdayMismatch=!0)}}function Bn(t){var e,n,r,i,a,o,s,l,u;null!=(e=t._w).GG||null!=e.W||null!=e.E?(a=1,o=4,n=Fn(e.GG,t._a[Wt],xe(Kn(),1,4).year),r=Fn(e.W,1),((i=Fn(e.E,1))<1||i>7)&&(l=!0)):(a=t._locale._week.dow,o=t._locale._week.doy,u=xe(Kn(),a,o),n=Fn(e.gg,t._a[Wt],u.year),r=Fn(e.w,u.week),null!=e.d?((i=e.d)<0||i>6)&&(l=!0):null!=e.e?(i=e.e+a,(e.e<0||e.e>6)&&(l=!0)):i=a),r<1||r>_e(n,a,o)?v(t)._overflowWeeks=!0:null!=l?v(t)._overflowWeekday=!0:(s=Te(n,r,i,a,o),t._a[Wt]=s.year,t._dayOfYear=s.dayOfYear)}function Vn(t){if(t._f!==i.ISO_8601)if(t._f!==i.RFC_2822){t._a=[],v(t).empty=!0;var e,n,r,a,o,s,l=""+t._i,u=l.length,c=0;for(r=z(t._f,t._locale).match(F)||[],e=0;e<r.length;e++)a=r[e],(n=(l.match(Pt(a,t))||[])[0])&&((o=l.substr(0,l.indexOf(n))).length>0&&v(t).unusedInput.push(o),l=l.slice(l.indexOf(n)+n.length),c+=n.length),B[a]?(n?v(t).empty=!1:v(t).unusedTokens.push(a),jt(a,n,t)):t._strict&&!n&&v(t).unusedTokens.push(a);v(t).charsLeftOver=u-c,l.length>0&&v(t).unusedInput.push(l),t._a[Yt]<=12&&!0===v(t).bigHour&&t._a[Yt]>0&&(v(t).bigHour=void 0),v(t).parsedDateParts=t._a.slice(0),v(t).meridiem=t._meridiem,t._a[Yt]=jn(t._locale,t._a[Yt],t._meridiem),null!==(s=v(t).era)&&(t._a[Wt]=t._locale.erasConvertYear(s,t._a[Wt])),Un(t),Sn(t)}else Ln(t);else Cn(t)}function jn(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}function Hn(t){var e,n,r,i,a,o,s=!1;if(0===t._f.length)return v(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)a=0,o=!1,e=T({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],Vn(e),y(e)&&(o=!0),a+=v(e).charsLeftOver,a+=10*v(e).unusedTokens.length,v(e).score=a,s?a<r&&(r=a,n=e):(null==r||a<r||o)&&(r=a,n=e,o&&(s=!0));p(t,n||e)}function Wn(t){if(!t._d){var e=at(t._i),n=void 0===e.day?e.date:e.day;t._a=f([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Un(t)}}function zn(t){var e=new x(Sn(Gn(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Gn(t){var e=t._i,n=t._f;return t._locale=t._locale||yn(t._l),null===e||void 0===n&&""===e?b({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),_(e)?new x(Sn(e)):(h(e)?t._d=e:o(n)?Hn(t):n?Vn(t):Yn(t),y(t)||(t._d=null),t))}function Yn(t){var e=t._i;c(e)?t._d=new Date(i.now()):h(e)?t._d=new Date(e.valueOf()):"string"==typeof e?Pn(t):o(e)?(t._a=f(e.slice(0),(function(t){return parseInt(t,10)})),Un(t)):s(e)?Wn(t):d(e)?t._d=new Date(e):i.createFromInputFallback(t)}function qn(t,e,n,r,i){var a={};return!0!==e&&!1!==e||(r=e,e=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(s(t)&&u(t)||o(t)&&0===t.length)&&(t=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=t,a._f=e,a._strict=r,zn(a)}function Kn(t,e,n,r){return qn(t,e,n,r,!1)}i.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Xn=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Kn.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:b()})),Zn=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Kn.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:b()}));function Jn(t,e){var n,r;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return Kn();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}function Qn(){return Jn("isBefore",[].slice.call(arguments,0))}function tr(){return Jn("isAfter",[].slice.call(arguments,0))}var er=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(t){var e,n,r=!1;for(e in t)if(l(t,e)&&(-1===Ht.call(nr,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<nr.length;++n)if(t[nr[n]]){if(r)return!1;parseFloat(t[nr[n]])!==dt(t[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function ar(){return Ar(NaN)}function or(t){var e=at(t),n=e.year||0,r=e.quarter||0,i=e.month||0,a=e.week||e.isoWeek||0,o=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._isValid=rr(e),this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+o+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=yn(),this._bubble()}function sr(t){return t instanceof or}function lr(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function ur(t,e,n){var r,i=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),o=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&dt(t[r])!==dt(e[r]))&&o++;return o+a}function cr(t,e){V(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+P(~~(t/60),2)+e+P(~~t%60,2)}))}cr("Z",":"),cr("ZZ",""),Lt("Z",Rt),Lt("ZZ",Rt),Bt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=hr(Rt,t)}));var dr=/([\+\-]|\d\d)/gi;function hr(t,e){var n,r,i=(e||"").match(t);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(dr)||["-",0,0])[1]+dt(n[2]))?0:"+"===n[0]?r:-r}function fr(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(_(t)||h(t)?t.valueOf():Kn(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):Kn(t).local()}function pr(t){return-Math.round(t._d.getTimezoneOffset())}function gr(t,e,n){var r,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=hr(Rt,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(r=pr(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),a!==t&&(!e||this._changeInProgress?Or(this,Ar(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:pr(this)}function mr(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function vr(t){return this.utcOffset(0,t)}function yr(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(pr(this),"m")),this}function br(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=hr(Mt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Sr(t){return!!this.isValid()&&(t=t?Kn(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function wr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Tr(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t,e={};return T(e,this),(e=Gn(e))._a?(t=e._isUTC?g(e._a):Kn(e._a),this._isDSTShifted=this.isValid()&&ur(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function xr(){return!!this.isValid()&&!this._isUTC}function _r(){return!!this.isValid()&&this._isUTC}function kr(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Er=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,$r=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ar(t,e){var n,r,i,a=t,o=null;return sr(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:d(t)||!isNaN(+t)?(a={},e?a[e]=+t:a.milliseconds=+t):(o=Er.exec(t))?(n="-"===o[1]?-1:1,a={y:0,d:dt(o[Gt])*n,h:dt(o[Yt])*n,m:dt(o[qt])*n,s:dt(o[Kt])*n,ms:dt(lr(1e3*o[Xt]))*n}):(o=$r.exec(t))?(n="-"===o[1]?-1:1,a={y:Cr(o[2],n),M:Cr(o[3],n),w:Cr(o[4],n),d:Cr(o[5],n),h:Cr(o[6],n),m:Cr(o[7],n),s:Cr(o[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(i=Mr(Kn(a.from),Kn(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),r=new or(a),sr(t)&&l(t,"_locale")&&(r._locale=t._locale),sr(t)&&l(t,"_isValid")&&(r._isValid=t._isValid),r}function Cr(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Dr(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Mr(t,e){var n;return t.isValid()&&e.isValid()?(e=fr(e,t),t.isBefore(e)?n=Dr(t,e):((n=Dr(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Rr(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Or(this,Ar(n,r),t),this}}function Or(t,e,n,r){var a=e._milliseconds,o=lr(e._days),s=lr(e._months);t.isValid()&&(r=null==r||r,s&&ce(t,ft(t,"Month")+s*n),o&&pt(t,"Date",ft(t,"Date")+o*n),a&&t._d.setTime(t._d.valueOf()+a*n),r&&i.updateOffset(t,o||s))}Ar.fn=or.prototype,Ar.invalid=ar;var Ir=Rr(1,"add"),Lr=Rr(-1,"subtract");function Pr(t){return"string"==typeof t||t instanceof String}function Fr(t){return _(t)||h(t)||Pr(t)||d(t)||Ur(t)||Nr(t)||null==t}function Nr(t){var e,n,r=s(t)&&!u(t),i=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<a.length;e+=1)n=a[e],i=i||l(t,n);return r&&i}function Ur(t){var e=o(t),n=!1;return e&&(n=0===t.filter((function(e){return!d(e)&&Pr(t)})).length),e&&n}function Br(t){var e,n,r=s(t)&&!u(t),i=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<a.length;e+=1)n=a[e],i=i||l(t,n);return r&&i}function Vr(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function jr(t,e){1===arguments.length&&(Fr(arguments[0])?(t=arguments[0],e=void 0):Br(arguments[0])&&(e=arguments[0],t=void 0));var n=t||Kn(),r=fr(n,this).startOf("day"),a=i.calendarFormat(this,r)||"sameElse",o=e&&(D(e[a])?e[a].call(this,n):e[a]);return this.format(o||this.localeData().calendar(a,this,Kn(n)))}function Hr(){return new x(this)}function Wr(t,e){var n=_(t)?t:Kn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=it(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function zr(t,e){var n=_(t)?t:Kn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=it(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function Gr(t,e,n,r){var i=_(t)?t:Kn(t),a=_(e)?e:Kn(e);return!!(this.isValid()&&i.isValid()&&a.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n))}function Yr(t,e){var n,r=_(t)?t:Kn(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=it(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function qr(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Kr(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Xr(t,e,n){var r,i,a;if(!this.isValid())return NaN;if(!(r=fr(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=it(e)){case"year":a=Zr(this,r)/12;break;case"month":a=Zr(this,r);break;case"quarter":a=Zr(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-i)/864e5;break;case"week":a=(this-r-i)/6048e5;break;default:a=this-r}return n?a:ct(a)}function Zr(t,e){if(t.date()<e.date())return-Zr(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function Jr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Qr(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?W(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(n,"Z")):W(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ti(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,r,i="moment",a="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),t="["+i+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=a+'[")]',this.format(t+e+n+r)}function ei(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var e=W(this,t);return this.localeData().postformat(e)}function ni(t,e){return this.isValid()&&(_(t)&&t.isValid()||Kn(t).isValid())?Ar({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ri(t){return this.from(Kn(),t)}function ii(t,e){return this.isValid()&&(_(t)&&t.isValid()||Kn(t).isValid())?Ar({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ai(t){return this.to(Kn(),t)}function oi(t){var e;return void 0===t?this._locale._abbr:(null!=(e=yn(t))&&(this._locale=e),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var si=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function li(){return this._locale}var ui=1e3,ci=60*ui,di=60*ci,hi=3506328*di;function fi(t,e){return(t%e+e)%e}function pi(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-hi:new Date(t,e,n).valueOf()}function gi(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-hi:Date.UTC(t,e,n)}function mi(t){var e,n;if(void 0===(t=it(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?gi:pi,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=fi(e+(this._isUTC?0:this.utcOffset()*ci),di);break;case"minute":e=this._d.valueOf(),e-=fi(e,ci);break;case"second":e=this._d.valueOf(),e-=fi(e,ui)}return this._d.setTime(e),i.updateOffset(this,!0),this}function vi(t){var e,n;if(void 0===(t=it(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?gi:pi,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=di-fi(e+(this._isUTC?0:this.utcOffset()*ci),di)-1;break;case"minute":e=this._d.valueOf(),e+=ci-fi(e,ci)-1;break;case"second":e=this._d.valueOf(),e+=ui-fi(e,ui)-1}return this._d.setTime(e),i.updateOffset(this,!0),this}function yi(){return this._d.valueOf()-6e4*(this._offset||0)}function bi(){return Math.floor(this.valueOf()/1e3)}function Si(){return new Date(this.valueOf())}function wi(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Ti(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function xi(){return this.isValid()?this.toISOString():null}function _i(){return y(this)}function ki(){return p({},v(this))}function Ei(){return v(this).overflow}function $i(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ai(t,e){var n,r,a,o=this._eras||yn("en")._eras;for(n=0,r=o.length;n<r;++n){switch(typeof o[n].since){case"string":a=i(o[n].since).startOf("day"),o[n].since=a.valueOf()}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":a=i(o[n].until).startOf("day").valueOf(),o[n].until=a.valueOf()}}return o}function Ci(t,e,n){var r,i,a,o,s,l=this.eras();for(t=t.toUpperCase(),r=0,i=l.length;r<i;++r)if(a=l[r].name.toUpperCase(),o=l[r].abbr.toUpperCase(),s=l[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(o===t)return l[r];break;case"NNNN":if(a===t)return l[r];break;case"NNNNN":if(s===t)return l[r]}else if([a,o,s].indexOf(t)>=0)return l[r]}function Di(t,e){var n=t.since<=t.until?1:-1;return void 0===e?i(t.since).year():i(t.since).year()+(e-t.offset)*n}function Mi(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].name;if(r[t].until<=n&&n<=r[t].since)return r[t].name}return""}function Ri(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].narrow;if(r[t].until<=n&&n<=r[t].since)return r[t].narrow}return""}function Oi(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t){if(n=this.startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until)return r[t].abbr;if(r[t].until<=n&&n<=r[t].since)return r[t].abbr}return""}function Ii(){var t,e,n,r,a=this.localeData().eras();for(t=0,e=a.length;t<e;++t)if(n=a[t].since<=a[t].until?1:-1,r=this.startOf("day").valueOf(),a[t].since<=r&&r<=a[t].until||a[t].until<=r&&r<=a[t].since)return(this.year()-i(a[t].since).year())*n+a[t].offset;return this.year()}function Li(t){return l(this,"_erasNameRegex")||ji.call(this),t?this._erasNameRegex:this._erasRegex}function Pi(t){return l(this,"_erasAbbrRegex")||ji.call(this),t?this._erasAbbrRegex:this._erasRegex}function Fi(t){return l(this,"_erasNarrowRegex")||ji.call(this),t?this._erasNarrowRegex:this._erasRegex}function Ni(t,e){return e.erasAbbrRegex(t)}function Ui(t,e){return e.erasNameRegex(t)}function Bi(t,e){return e.erasNarrowRegex(t)}function Vi(t,e){return e._eraYearOrdinalRegex||Ct}function ji(){var t,e,n=[],r=[],i=[],a=[],o=this.eras();for(t=0,e=o.length;t<e;++t)r.push(Nt(o[t].name)),n.push(Nt(o[t].abbr)),i.push(Nt(o[t].narrow)),a.push(Nt(o[t].name)),a.push(Nt(o[t].abbr)),a.push(Nt(o[t].narrow));this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function Hi(t,e){V(0,[t,t.length],0,e)}function Wi(t){return Xi.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function zi(t){return Xi.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Gi(){return _e(this.year(),1,4)}function Yi(){return _e(this.isoWeekYear(),1,4)}function qi(){var t=this.localeData()._week;return _e(this.year(),t.dow,t.doy)}function Ki(){var t=this.localeData()._week;return _e(this.weekYear(),t.dow,t.doy)}function Xi(t,e,n,r,i){var a;return null==t?xe(this,r,i).year:(e>(a=_e(t,r,i))&&(e=a),Zi.call(this,t,e,n,r,i))}function Zi(t,e,n,r,i){var a=Te(t,e,n,r,i),o=Se(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Ji(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}V("N",0,0,"eraAbbr"),V("NN",0,0,"eraAbbr"),V("NNN",0,0,"eraAbbr"),V("NNNN",0,0,"eraName"),V("NNNNN",0,0,"eraNarrow"),V("y",["y",1],"yo","eraYear"),V("y",["yy",2],0,"eraYear"),V("y",["yyy",3],0,"eraYear"),V("y",["yyyy",4],0,"eraYear"),Lt("N",Ni),Lt("NN",Ni),Lt("NNN",Ni),Lt("NNNN",Ui),Lt("NNNNN",Bi),Bt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?v(n).era=i:v(n).invalidEra=t})),Lt("y",Ct),Lt("yy",Ct),Lt("yyy",Ct),Lt("yyyy",Ct),Lt("yo",Vi),Bt(["y","yy","yyy","yyyy"],Wt),Bt(["yo"],(function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Wt]=n._locale.eraYearOrdinalParse(t,i):e[Wt]=parseInt(t,10)})),V(0,["gg",2],0,(function(){return this.weekYear()%100})),V(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Hi("gggg","weekYear"),Hi("ggggg","weekYear"),Hi("GGGG","isoWeekYear"),Hi("GGGGG","isoWeekYear"),rt("weekYear","gg"),rt("isoWeekYear","GG"),st("weekYear",1),st("isoWeekYear",1),Lt("G",Dt),Lt("g",Dt),Lt("GG",xt,bt),Lt("gg",xt,bt),Lt("GGGG",$t,wt),Lt("gggg",$t,wt),Lt("GGGGG",At,Tt),Lt("ggggg",At,Tt),Vt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=dt(t)})),Vt(["gg","GG"],(function(t,e,n,r){e[r]=i.parseTwoDigitYear(t)})),V("Q",0,"Qo","quarter"),rt("quarter","Q"),st("quarter",7),Lt("Q",yt),Bt("Q",(function(t,e){e[zt]=3*(dt(t)-1)})),V("D",["DD",2],"Do","date"),rt("date","D"),st("date",9),Lt("D",xt),Lt("DD",xt,bt),Lt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),Bt(["D","DD"],Gt),Bt("Do",(function(t,e){e[Gt]=dt(t.match(xt)[0])}));var Qi=ht("Date",!0);function ta(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}V("DDD",["DDDD",3],"DDDo","dayOfYear"),rt("dayOfYear","DDD"),st("dayOfYear",4),Lt("DDD",Et),Lt("DDDD",St),Bt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=dt(t)})),V("m",["mm",2],0,"minute"),rt("minute","m"),st("minute",14),Lt("m",xt),Lt("mm",xt,bt),Bt(["m","mm"],qt);var ea=ht("Minutes",!1);V("s",["ss",2],0,"second"),rt("second","s"),st("second",15),Lt("s",xt),Lt("ss",xt,bt),Bt(["s","ss"],Kt);var na,ra,ia=ht("Seconds",!1);for(V("S",0,0,(function(){return~~(this.millisecond()/100)})),V(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),V(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),V(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),V(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),V(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),V(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),rt("millisecond","ms"),st("millisecond",16),Lt("S",Et,yt),Lt("SS",Et,bt),Lt("SSS",Et,St),na="SSSS";na.length<=9;na+="S")Lt(na,Ct);function aa(t,e){e[Xt]=dt(1e3*("0."+t))}for(na="S";na.length<=9;na+="S")Bt(na,aa);function oa(){return this._isUTC?"UTC":""}function sa(){return this._isUTC?"Coordinated Universal Time":""}ra=ht("Milliseconds",!1),V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var la=x.prototype;function ua(t){return Kn(1e3*t)}function ca(){return Kn.apply(null,arguments).parseZone()}function da(t){return t}la.add=Ir,la.calendar=jr,la.clone=Hr,la.diff=Xr,la.endOf=vi,la.format=ei,la.from=ni,la.fromNow=ri,la.to=ii,la.toNow=ai,la.get=gt,la.invalidAt=Ei,la.isAfter=Wr,la.isBefore=zr,la.isBetween=Gr,la.isSame=Yr,la.isSameOrAfter=qr,la.isSameOrBefore=Kr,la.isValid=_i,la.lang=si,la.locale=oi,la.localeData=li,la.max=Zn,la.min=Xn,la.parsingFlags=ki,la.set=mt,la.startOf=mi,la.subtract=Lr,la.toArray=wi,la.toObject=Ti,la.toDate=Si,la.toISOString=Qr,la.inspect=ti,"undefined"!=typeof Symbol&&null!=Symbol.for&&(la[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),la.toJSON=xi,la.toString=Jr,la.unix=bi,la.valueOf=yi,la.creationData=$i,la.eraName=Mi,la.eraNarrow=Ri,la.eraAbbr=Oi,la.eraYear=Ii,la.year=ve,la.isLeapYear=ye,la.weekYear=Wi,la.isoWeekYear=zi,la.quarter=la.quarters=Ji,la.month=de,la.daysInMonth=he,la.week=la.weeks=Ce,la.isoWeek=la.isoWeeks=De,la.weeksInYear=qi,la.weeksInWeekYear=Ki,la.isoWeeksInYear=Gi,la.isoWeeksInISOWeekYear=Yi,la.date=Qi,la.day=la.days=ze,la.weekday=Ge,la.isoWeekday=Ye,la.dayOfYear=ta,la.hour=la.hours=an,la.minute=la.minutes=ea,la.second=la.seconds=ia,la.millisecond=la.milliseconds=ra,la.utcOffset=gr,la.utc=vr,la.local=yr,la.parseZone=br,la.hasAlignedHourOffset=Sr,la.isDST=wr,la.isLocal=xr,la.isUtcOffset=_r,la.isUtc=kr,la.isUTC=kr,la.zoneAbbr=oa,la.zoneName=sa,la.dates=E("dates accessor is deprecated. Use date instead.",Qi),la.months=E("months accessor is deprecated. Use month instead",de),la.years=E("years accessor is deprecated. Use year instead",ve),la.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",mr),la.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Tr);var ha=O.prototype;function fa(t,e,n,r){var i=yn(),a=g().set(r,e);return i[n](a,t)}function pa(t,e,n){if(d(t)&&(e=t,t=void 0),t=t||"",null!=e)return fa(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=fa(t,r,n,"month");return i}function ga(t,e,n,r){"boolean"==typeof t?(d(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,d(e)&&(n=e,e=void 0),e=e||"");var i,a=yn(),o=t?a._week.dow:0,s=[];if(null!=n)return fa(e,(n+o)%7,r,"day");for(i=0;i<7;i++)s[i]=fa(e,(i+o)%7,r,"day");return s}function ma(t,e){return pa(t,e,"months")}function va(t,e){return pa(t,e,"monthsShort")}function ya(t,e,n){return ga(t,e,n,"weekdays")}function ba(t,e,n){return ga(t,e,n,"weekdaysShort")}function Sa(t,e,n){return ga(t,e,n,"weekdaysMin")}ha.calendar=L,ha.longDateFormat=Y,ha.invalidDate=K,ha.ordinal=J,ha.preparse=da,ha.postformat=da,ha.relativeTime=tt,ha.pastFuture=et,ha.set=M,ha.eras=Ai,ha.erasParse=Ci,ha.erasConvertYear=Di,ha.erasAbbrRegex=Pi,ha.erasNameRegex=Li,ha.erasNarrowRegex=Fi,ha.months=oe,ha.monthsShort=se,ha.monthsParse=ue,ha.monthsRegex=pe,ha.monthsShortRegex=fe,ha.week=ke,ha.firstDayOfYear=Ae,ha.firstDayOfWeek=$e,ha.weekdays=Be,ha.weekdaysMin=je,ha.weekdaysShort=Ve,ha.weekdaysParse=We,ha.weekdaysRegex=qe,ha.weekdaysShortRegex=Ke,ha.weekdaysMinRegex=Xe,ha.isPM=nn,ha.meridiem=on,gn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===dt(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),i.lang=E("moment.lang is deprecated. Use moment.locale instead.",gn),i.langData=E("moment.langData is deprecated. Use moment.localeData instead.",yn);var wa=Math.abs;function Ta(){var t=this._data;return this._milliseconds=wa(this._milliseconds),this._days=wa(this._days),this._months=wa(this._months),t.milliseconds=wa(t.milliseconds),t.seconds=wa(t.seconds),t.minutes=wa(t.minutes),t.hours=wa(t.hours),t.months=wa(t.months),t.years=wa(t.years),this}function xa(t,e,n,r){var i=Ar(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function _a(t,e){return xa(this,t,e,1)}function ka(t,e){return xa(this,t,e,-1)}function Ea(t){return t<0?Math.floor(t):Math.ceil(t)}function $a(){var t,e,n,r,i,a=this._milliseconds,o=this._days,s=this._months,l=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*Ea(Ca(s)+o),o=0,s=0),l.milliseconds=a%1e3,t=ct(a/1e3),l.seconds=t%60,e=ct(t/60),l.minutes=e%60,n=ct(e/60),l.hours=n%24,o+=ct(n/24),s+=i=ct(Aa(o)),o-=Ea(Ca(i)),r=ct(s/12),s%=12,l.days=o,l.months=s,l.years=r,this}function Aa(t){return 4800*t/146097}function Ca(t){return 146097*t/4800}function Da(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=it(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+Aa(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Ca(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function Ma(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*dt(this._months/12):NaN}function Ra(t){return function(){return this.as(t)}}var Oa=Ra("ms"),Ia=Ra("s"),La=Ra("m"),Pa=Ra("h"),Fa=Ra("d"),Na=Ra("w"),Ua=Ra("M"),Ba=Ra("Q"),Va=Ra("y");function ja(){return Ar(this)}function Ha(t){return t=it(t),this.isValid()?this[t+"s"]():NaN}function Wa(t){return function(){return this.isValid()?this._data[t]:NaN}}var za=Wa("milliseconds"),Ga=Wa("seconds"),Ya=Wa("minutes"),qa=Wa("hours"),Ka=Wa("days"),Xa=Wa("months"),Za=Wa("years");function Ja(){return ct(this.days()/7)}var Qa=Math.round,to={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function eo(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function no(t,e,n,r){var i=Ar(t).abs(),a=Qa(i.as("s")),o=Qa(i.as("m")),s=Qa(i.as("h")),l=Qa(i.as("d")),u=Qa(i.as("M")),c=Qa(i.as("w")),d=Qa(i.as("y")),h=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||c<=1&&["w"]||c<n.w&&["ww",c]),(h=h||u<=1&&["M"]||u<n.M&&["MM",u]||d<=1&&["y"]||["yy",d])[2]=e,h[3]=+t>0,h[4]=r,eo.apply(null,h)}function ro(t){return void 0===t?Qa:"function"==typeof t&&(Qa=t,!0)}function io(t,e){return void 0!==to[t]&&(void 0===e?to[t]:(to[t]=e,"s"===t&&(to.ss=e-1),!0))}function ao(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,a=to;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(i=t),"object"==typeof e&&(a=Object.assign({},to,e),null!=e.s&&null==e.ss&&(a.ss=e.s-1)),r=no(this,!i,a,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var oo=Math.abs;function so(t){return(t>0)-(t<0)||+t}function lo(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r,i,a,o,s,l=oo(this._milliseconds)/1e3,u=oo(this._days),c=oo(this._months),d=this.asSeconds();return d?(t=ct(l/60),e=ct(t/60),l%=60,t%=60,n=ct(c/12),c%=12,r=l?l.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",a=so(this._months)!==so(d)?"-":"",o=so(this._days)!==so(d)?"-":"",s=so(this._milliseconds)!==so(d)?"-":"",i+"P"+(n?a+n+"Y":"")+(c?a+c+"M":"")+(u?o+u+"D":"")+(e||t||l?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(l?s+r+"S":"")):"P0D"}var uo=or.prototype;return uo.isValid=ir,uo.abs=Ta,uo.add=_a,uo.subtract=ka,uo.as=Da,uo.asMilliseconds=Oa,uo.asSeconds=Ia,uo.asMinutes=La,uo.asHours=Pa,uo.asDays=Fa,uo.asWeeks=Na,uo.asMonths=Ua,uo.asQuarters=Ba,uo.asYears=Va,uo.valueOf=Ma,uo._bubble=$a,uo.clone=ja,uo.get=Ha,uo.milliseconds=za,uo.seconds=Ga,uo.minutes=Ya,uo.hours=qa,uo.days=Ka,uo.weeks=Ja,uo.months=Xa,uo.years=Za,uo.humanize=ao,uo.toISOString=lo,uo.toString=lo,uo.toJSON=lo,uo.locale=oi,uo.localeData=li,uo.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",lo),uo.lang=si,V("X",0,0,"unix"),V("x",0,0,"valueOf"),Lt("x",Dt),Lt("X",Ot),Bt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),Bt("x",(function(t,e,n){n._d=new Date(dt(t))})),
//! moment.js
i.version="2.27.0",a(Kn),i.fn=la,i.min=Qn,i.max=tr,i.now=er,i.utc=g,i.unix=ua,i.months=ma,i.isDate=h,i.locale=gn,i.invalid=b,i.duration=Ar,i.isMoment=_,i.weekdays=ya,i.parseZone=ca,i.localeData=yn,i.isDuration=sr,i.monthsShort=va,i.weekdaysMin=Sa,i.defineLocale=mn,i.updateLocale=vn,i.locales=bn,i.weekdaysShort=ba,i.normalizeUnits=it,i.relativeTimeRounding=ro,i.relativeTimeThreshold=io,i.calendarFormat=Vr,i.prototype=la,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()})),tt=Q;tt="function"==typeof tt?tt:window.moment;var et=n((function(t){var e=function(){var t=function(e,n){var r=this,i=t.helpers;return r.config=n||{data:{datasets:[]}},e.length&&e[0].getContext&&(e=e[0]),e.getContext&&(e=e.getContext("2d")),r.ctx=e,r.canvas=e.canvas,e.canvas.style.display=e.canvas.style.display||"block",r.width=e.canvas.width||parseInt(i.getStyle(e.canvas,"width"),10)||i.getMaximumWidth(e.canvas),r.height=e.canvas.height||parseInt(i.getStyle(e.canvas,"height"),10)||i.getMaximumHeight(e.canvas),r.aspectRatio=r.width/r.height,(isNaN(r.aspectRatio)||!1===isFinite(r.aspectRatio))&&(r.aspectRatio=void 0!==n.aspectRatio?n.aspectRatio:2),r.originalCanvasStyleWidth=e.canvas.style.width,r.originalCanvasStyleHeight=e.canvas.style.height,i.retinaScale(r),r.controller=new t.Controller(r),i.addResizeListener(e.canvas.parentNode,(function(){r.controller&&r.controller.config.options.responsive&&r.controller.resize()})),r.controller?r.controller:r};return t.defaults={global:{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"single",animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');for(var n=0;n<t.data.datasets.length;n++)e.push('<li><span style="background-color:'+t.data.datasets[n].backgroundColor+'"></span>'),t.data.datasets[n].label&&e.push(t.data.datasets[n].label),e.push("</li>");return e.push("</ul>"),e.join("")}}},t.Chart=t,t}();!function(t){var e,n=t.helpers={};n.each=function(t,e,r,i){var a,o;if(n.isArray(t))if(o=t.length,i)for(a=o-1;a>=0;a--)e.call(r,t[a],a);else for(a=0;a<o;a++)e.call(r,t[a],a);else if("object"==typeof t){var s=Object.keys(t);for(o=s.length,a=0;a<o;a++)e.call(r,t[s[a]],s[a])}},n.clone=function(t){var e={};return n.each(t,(function(t,r){n.isArray(t)?e[r]=t.slice(0):e[r]="object"==typeof t&&null!==t?n.clone(t):t})),e},n.extend=function(t){for(var e=function(e,n){t[n]=e},r=1,i=arguments.length;r<i;r++)n.each(arguments[r],e);return t},n.configMerge=function(e){var r=n.clone(e);return n.each(Array.prototype.slice.call(arguments,1),(function(e){n.each(e,(function(e,i){if("scales"===i)r[i]=n.scaleMerge(r.hasOwnProperty(i)?r[i]:{},e);else if("scale"===i)r[i]=n.configMerge(r.hasOwnProperty(i)?r[i]:{},t.scaleService.getScaleDefaults(e.type),e);else if(r.hasOwnProperty(i)&&n.isArray(r[i])&&n.isArray(e)){var a=r[i];n.each(e,(function(t,e){e<a.length?"object"==typeof a[e]&&null!==a[e]&&"object"==typeof t&&null!==t?a[e]=n.configMerge(a[e],t):a[e]=t:a.push(t)}))}else r.hasOwnProperty(i)&&"object"==typeof r[i]&&null!==r[i]&&"object"==typeof e?r[i]=n.configMerge(r[i],e):r[i]=e}))})),r},n.scaleMerge=function(e,r){var i=n.clone(e);return n.each(r,(function(e,r){"xAxes"===r||"yAxes"===r?i.hasOwnProperty(r)?n.each(e,(function(e,a){var o=n.getValueOrDefault(e.type,"xAxes"===r?"category":"linear"),s=t.scaleService.getScaleDefaults(o);a>=i[r].length||!i[r][a].type?i[r].push(n.configMerge(s,e)):e.type&&e.type!==i[r][a].type?i[r][a]=n.configMerge(i[r][a],s,e):i[r][a]=n.configMerge(i[r][a],e)})):(i[r]=[],n.each(e,(function(e){var a=n.getValueOrDefault(e.type,"xAxes"===r?"category":"linear");i[r].push(n.configMerge(t.scaleService.getScaleDefaults(a),e))}))):i.hasOwnProperty(r)&&"object"==typeof i[r]&&null!==i[r]&&"object"==typeof e?i[r]=n.configMerge(i[r],e):i[r]=e})),i},n.getValueAtIndexOrDefault=function(t,e,r){return null==t?r:n.isArray(t)?e<t.length?t[e]:r:t},n.getValueOrDefault=function(t,e){return void 0===t?e:t},n.indexOf=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return n;return-1},n.where=function(t,e){if(n.isArray(t)&&Array.prototype.filter)return t.filter(e);var r=[];return n.each(t,(function(t){e(t)&&r.push(t)})),r},n.findIndex=Array.prototype.findIndex?function(t,e,n){return t.findIndex(e,n)}:function(t,e,n){n=void 0===n?t:n;for(var r=0,i=t.length;r<i;++r)if(e.call(n,t[r],r,t))return r;return-1},n.findNextWhere=function(t,e,n){null==n&&(n=-1);for(var r=n+1;r<t.length;r++){var i=t[r];if(e(i))return i}},n.findPreviousWhere=function(t,e,n){null==n&&(n=t.length);for(var r=n-1;r>=0;r--){var i=t[r];if(e(i))return i}},n.inherits=function(t){var e=this,r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=r};return i.prototype=e.prototype,r.prototype=new i,r.extend=n.inherits,t&&n.extend(r.prototype,t),r.__super__=e.prototype,r},n.noop=function(){},n.uid=(e=0,function(){return e++}),n.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},n.almostEquals=function(t,e,n){return Math.abs(t-e)<n},n.max=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.max(t,e)}),Number.NEGATIVE_INFINITY)},n.min=function(t){return t.reduce((function(t,e){return isNaN(e)?t:Math.min(t,e)}),Number.POSITIVE_INFINITY)},n.sign=Math.sign?function(t){return Math.sign(t)}:function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},n.log10=Math.log10?function(t){return Math.log10(t)}:function(t){return Math.log(t)/Math.LN10},n.toRadians=function(t){return t*(Math.PI/180)},n.toDegrees=function(t){return t*(180/Math.PI)},n.getAngleFromPoint=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r),a=Math.atan2(r,n);return a<-.5*Math.PI&&(a+=2*Math.PI),{angle:a,distance:i}},n.aliasPixel=function(t){return t%2==0?0:.5},n.splineCurve=function(t,e,n,r){var i=t.skip?e:t,a=e,o=n.skip?e:n,s=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)),l=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),u=s/(s+l),c=l/(s+l),d=r*(u=isNaN(u)?0:u),h=r*(c=isNaN(c)?0:c);return{previous:{x:a.x-d*(o.x-i.x),y:a.y-d*(o.y-i.y)},next:{x:a.x+h*(o.x-i.x),y:a.y+h*(o.y-i.y)}}},n.EPSILON=Number.EPSILON||1e-14,n.splineCurveMonotone=function(t){var e,r,i,a,o,s,l,u,c,d=(t||[]).map((function(t){return{model:t._model,deltaK:0,mK:0}})),h=d.length;for(e=0;e<h;++e)(i=d[e]).model.skip||(r=e>0?d[e-1]:null,(a=e<h-1?d[e+1]:null)&&!a.model.skip&&(i.deltaK=(a.model.y-i.model.y)/(a.model.x-i.model.x)),!r||r.model.skip?i.mK=i.deltaK:!a||a.model.skip?i.mK=r.deltaK:this.sign(r.deltaK)!==this.sign(i.deltaK)?i.mK=0:i.mK=(r.deltaK+i.deltaK)/2);for(e=0;e<h-1;++e)i=d[e],a=d[e+1],i.model.skip||a.model.skip||(n.almostEquals(i.deltaK,0,this.EPSILON)?i.mK=a.mK=0:(o=i.mK/i.deltaK,s=a.mK/i.deltaK,(u=Math.pow(o,2)+Math.pow(s,2))<=9||(l=3/Math.sqrt(u),i.mK=o*l*i.deltaK,a.mK=s*l*i.deltaK)));for(e=0;e<h;++e)(i=d[e]).model.skip||(r=e>0?d[e-1]:null,a=e<h-1?d[e+1]:null,r&&!r.model.skip&&(c=(i.model.x-r.model.x)/3,i.model.controlPointPreviousX=i.model.x-c,i.model.controlPointPreviousY=i.model.y-c*i.mK),a&&!a.model.skip&&(c=(a.model.x-i.model.x)/3,i.model.controlPointNextX=i.model.x+c,i.model.controlPointNextY=i.model.y+c*i.mK))},n.nextItem=function(t,e,n){return n?e>=t.length-1?t[0]:t[e+1]:e>=t.length-1?t[t.length-1]:t[e+1]},n.previousItem=function(t,e,n){return n?e<=0?t[t.length-1]:t[e-1]:e<=0?t[0]:t[e-1]},n.niceNum=function(t,e){var r=Math.floor(n.log10(t)),i=t/Math.pow(10,r);return(e?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10)*Math.pow(10,r)};var r=n.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(1-Math.pow(2,-10*t/1))},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),r<Math.abs(1)?(r=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/r),-r*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n))},easeOutElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),r<Math.abs(1)?(r=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.3*1.5*1),r<Math.abs(1)?(r=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:function(t){return 1-r.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t*1:t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*r.easeInBounce(2*t):.5*r.easeOutBounce(2*t-1)+.5}};function i(t,e,n){var r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}function a(t){return null!=t&&"none"!==t}function o(t,e,n){var r=document.defaultView,o=t.parentNode,s=r.getComputedStyle(t)[e],l=r.getComputedStyle(o)[e],u=a(s),c=a(l),d=Number.POSITIVE_INFINITY;return u||c?Math.min(u?i(s,t,n):d,c?i(l,o,n):d):"none"}n.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},n.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)},n.getRelativePosition=function(t,e){var r,i,a=t.originalEvent||t,o=t.currentTarget||t.srcElement,s=o.getBoundingClientRect(),l=a.touches;l&&l.length>0?(r=l[0].clientX,i=l[0].clientY):(r=a.clientX,i=a.clientY);var u=parseFloat(n.getStyle(o,"padding-left")),c=parseFloat(n.getStyle(o,"padding-top")),d=parseFloat(n.getStyle(o,"padding-right")),h=parseFloat(n.getStyle(o,"padding-bottom")),f=s.right-s.left-u-d,p=s.bottom-s.top-c-h;return{x:r=Math.round((r-s.left-u)/f*o.width/e.currentDevicePixelRatio),y:i=Math.round((i-s.top-c)/p*o.height/e.currentDevicePixelRatio)}},n.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},n.removeEvent=function(t,e,r){t.removeEventListener?t.removeEventListener(e,r,!1):t.detachEvent?t.detachEvent("on"+e,r):t["on"+e]=n.noop},n.bindEvents=function(t,e,r){var i=t.events=t.events||{};n.each(e,(function(e){i[e]=function(){r.apply(t,arguments)},n.addEvent(t.chart.canvas,e,i[e])}))},n.unbindEvents=function(t,e){var r=t.chart.canvas;n.each(e,(function(t,e){n.removeEvent(r,e,t)}))},n.getConstraintWidth=function(t){return o(t,"max-width","clientWidth")},n.getConstraintHeight=function(t){return o(t,"max-height","clientHeight")},n.getMaximumWidth=function(t){var e=t.parentNode,r=parseInt(n.getStyle(e,"padding-left"),10),i=parseInt(n.getStyle(e,"padding-right"),10),a=e.clientWidth-r-i,o=n.getConstraintWidth(t);return isNaN(o)?a:Math.min(a,o)},n.getMaximumHeight=function(t){var e=t.parentNode,r=parseInt(n.getStyle(e,"padding-top"),10),i=parseInt(n.getStyle(e,"padding-bottom"),10),a=e.clientHeight-r-i,o=n.getConstraintHeight(t);return isNaN(o)?a:Math.min(a,o)},n.getStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)},n.retinaScale=function(t){var e=t.ctx,n=t.canvas,r=n.width,i=n.height,a=t.currentDevicePixelRatio=window.devicePixelRatio||1;1!==a&&(n.height=i*a,n.width=r*a,e.scale(a,a),t.originalDevicePixelRatio=t.originalDevicePixelRatio||a),n.style.width=r+"px",n.style.height=i+"px"},n.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},n.fontString=function(t,e,n){return e+" "+t+"px "+n},n.longestText=function(t,e,r,i){var a=(i=i||{}).data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(a=i.data={},o=i.garbageCollect=[],i.font=e),t.font=e;var s=0;n.each(r,(function(e){null!=e&&!0!==n.isArray(e)?s=n.measureText(t,a,o,s,e):n.isArray(e)&&n.each(e,(function(e){null==e||n.isArray(e)||(s=n.measureText(t,a,o,s,e))}))}));var l=o.length/2;if(l>r.length){for(var u=0;u<l;u++)delete a[o[u]];o.splice(0,l)}return s},n.measureText=function(t,e,n,r,i){var a=e[i];return a||(a=e[i]=t.measureText(i).width,n.push(i)),a>r&&(r=a),r},n.numberOfLabelLines=function(t){var e=1;return n.each(t,(function(t){n.isArray(t)&&t.length>e&&(e=t.length)})),e},n.drawRoundedRectangle=function(t,e,n,r,i,a){t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+r-a,n),t.quadraticCurveTo(e+r,n,e+r,n+a),t.lineTo(e+r,n+i-a),t.quadraticCurveTo(e+r,n+i,e+r-a,n+i),t.lineTo(e+a,n+i),t.quadraticCurveTo(e,n+i,e,n+i-a),t.lineTo(e,n+a),t.quadraticCurveTo(e,n,e+a,n),t.closePath()},n.color=function(e){return X?e instanceof CanvasGradient?X(t.defaults.global.defaultColor):X(e):(console.error("Color.js not found!"),e)},n.addResizeListener=function(t,e){var n=document.createElement("iframe"),r="chartjs-hidden-iframe";n.classlist?n.classlist.add(r):n.setAttribute("class",r),n.tabIndex=-1;var i=n.style;i.width="100%",i.display="block",i.border=0,i.height=0,i.margin=0,i.position="absolute",i.left=0,i.right=0,i.top=0,i.bottom=0,t.insertBefore(n,t.firstChild),(n.contentWindow||n).onresize=function(){if(e)return e()}},n.removeResizeListener=function(t){var e=t.querySelector(".chartjs-hidden-iframe");e&&e.parentNode.removeChild(e)},n.isArray=Array.isArray?function(t){return Array.isArray(t)}:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.arrayEquals=function(t,e){var r,i,a,o;if(!t||!e||t.length!==e.length)return!1;for(r=0,i=t.length;r<i;++r)if(a=t[r],o=e[r],a instanceof Array&&o instanceof Array){if(!n.arrayEquals(a,o))return!1}else if(a!==o)return!1;return!0},n.callCallback=function(t,e,n){t&&"function"==typeof t.call&&t.apply(n,e)},n.getHoverColor=function(t){return t instanceof CanvasPattern?t:n.color(t).saturate(.5).darken(.1).rgbString()}}(e),function(t){(t.canvasHelpers={}).drawPoint=function(t,e,n,r,i){var a,o,s,l,u,c;if("object"!=typeof e||"[object HTMLImageElement]"!==(a=e.toString())&&"[object HTMLCanvasElement]"!==a){if(!(isNaN(n)||n<=0)){switch(e){default:t.beginPath(),t.arc(r,i,n,0,2*Math.PI),t.closePath(),t.fill();break;case"triangle":t.beginPath(),u=(o=3*n/Math.sqrt(3))*Math.sqrt(3)/2,t.moveTo(r-o/2,i+u/3),t.lineTo(r+o/2,i+u/3),t.lineTo(r,i-2*u/3),t.closePath(),t.fill();break;case"rect":c=1/Math.SQRT2*n,t.beginPath(),t.fillRect(r-c,i-c,2*c,2*c),t.strokeRect(r-c,i-c,2*c,2*c);break;case"rectRot":c=1/Math.SQRT2*n,t.beginPath(),t.moveTo(r-c,i),t.lineTo(r,i+c),t.lineTo(r+c,i),t.lineTo(r,i-c),t.closePath(),t.fill();break;case"cross":t.beginPath(),t.moveTo(r,i+n),t.lineTo(r,i-n),t.moveTo(r-n,i),t.lineTo(r+n,i),t.closePath();break;case"crossRot":t.beginPath(),s=Math.cos(Math.PI/4)*n,l=Math.sin(Math.PI/4)*n,t.moveTo(r-s,i-l),t.lineTo(r+s,i+l),t.moveTo(r-s,i+l),t.lineTo(r+s,i-l),t.closePath();break;case"star":t.beginPath(),t.moveTo(r,i+n),t.lineTo(r,i-n),t.moveTo(r-n,i),t.lineTo(r+n,i),s=Math.cos(Math.PI/4)*n,l=Math.sin(Math.PI/4)*n,t.moveTo(r-s,i-l),t.lineTo(r+s,i+l),t.moveTo(r-s,i+l),t.lineTo(r+s,i-l),t.closePath();break;case"line":t.beginPath(),t.moveTo(r-n,i),t.lineTo(r+n,i),t.closePath();break;case"dash":t.beginPath(),t.moveTo(r,i),t.lineTo(r+n,i),t.closePath()}t.stroke()}}else t.drawImage(e,r-e.width/2,i-e.height/2)}}(e),function(t){var e=t.helpers;t.elements={},t.Element=function(t){e.extend(this,t),this.initialize.apply(this,arguments)},e.extend(t.Element.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var t=this;return t._view||(t._view=e.clone(t._model)),t._start=e.clone(t._view),t},transition:function(t){var n=this;return n._view||(n._view=e.clone(n._model)),1===t?(n._view=n._model,n._start=null,n):(n._start||n.pivot(),e.each(n._model,(function(r,i){if("_"===i[0]);else if(n._view.hasOwnProperty(i))if(r===n._view[i]);else if("string"==typeof r)try{var a=e.color(n._model[i]).mix(e.color(n._start[i]),t);n._view[i]=a.rgbString()}catch(t){n._view[i]=r}else if("number"==typeof r){var o=void 0!==n._start[i]&&!1===isNaN(n._start[i])?n._start[i]:0;n._view[i]=(n._model[i]-o)*t+o}else n._view[i]=r;else"number"!=typeof r||isNaN(n._view[i])?n._view[i]=r:n._view[i]=r*t}),n),n)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return e.isNumber(this._model.x)&&e.isNumber(this._model.y)}}),t.Element.extend=e.inherits}(e),function(t){var e=t.helpers;t.defaults.global.animation={duration:1e3,easing:"easeOutQuart",onProgress:e.noop,onComplete:e.noop},t.Animation=t.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),t.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(t,e,n,r){var i=this;r||(t.animating=!0);for(var a=0;a<i.animations.length;++a)if(i.animations[a].chartInstance===t)return void(i.animations[a].animationObject=e);i.animations.push({chartInstance:t,animationObject:e}),1===i.animations.length&&i.requestAnimationFrame()},cancelAnimation:function(t){var n=e.findIndex(this.animations,(function(e){return e.chartInstance===t}));-1!==n&&(this.animations.splice(n,1),t.animating=!1)},requestAnimationFrame:function(){var t=this;null===t.request&&(t.request=e.requestAnimFrame.call(window,(function(){t.request=null,t.startDigest()})))},startDigest:function(){var t=this,e=Date.now(),n=0;t.dropFrames>1&&(n=Math.floor(t.dropFrames),t.dropFrames=t.dropFrames%1);for(var r=0;r<t.animations.length;)null===t.animations[r].animationObject.currentStep&&(t.animations[r].animationObject.currentStep=0),t.animations[r].animationObject.currentStep+=1+n,t.animations[r].animationObject.currentStep>t.animations[r].animationObject.numSteps&&(t.animations[r].animationObject.currentStep=t.animations[r].animationObject.numSteps),t.animations[r].animationObject.render(t.animations[r].chartInstance,t.animations[r].animationObject),t.animations[r].animationObject.onAnimationProgress&&t.animations[r].animationObject.onAnimationProgress.call&&t.animations[r].animationObject.onAnimationProgress.call(t.animations[r].chartInstance,t.animations[r]),t.animations[r].animationObject.currentStep===t.animations[r].animationObject.numSteps?(t.animations[r].animationObject.onAnimationComplete&&t.animations[r].animationObject.onAnimationComplete.call&&t.animations[r].animationObject.onAnimationComplete.call(t.animations[r].chartInstance,t.animations[r]),t.animations[r].chartInstance.animating=!1,t.animations.splice(r,1)):++r;var i=(Date.now()-e)/t.frameDuration;t.dropFrames+=i,t.animations.length>0&&t.requestAnimationFrame()}}}(e),function(t){var e=t.helpers;t.types={},t.instances={},t.controllers={},t.Controller=function(n){return this.chart=n,this.config=n.config,this.options=this.config.options=e.configMerge(t.defaults.global,t.defaults[this.config.type],this.config.options||{}),this.id=e.uid(),Object.defineProperty(this,"data",{get:function(){return this.config.data}}),t.instances[this.id]=this,this.options.responsive&&this.resize(!0),this.initialize(),this},e.extend(t.Controller.prototype,{initialize:function(){var e=this;return t.plugins.notify("beforeInit",[e]),e.bindEvents(),e.ensureScalesHaveIDs(),e.buildOrUpdateControllers(),e.buildScales(),e.updateLayout(),e.resetElements(),e.initToolTip(),e.update(),t.plugins.notify("afterInit",[e]),e},clear:function(){return e.clear(this.chart),this},stop:function(){return t.animationService.cancelAnimation(this),this},resize:function(n){var r=this,i=r.chart,a=i.canvas,o=e.getMaximumWidth(a),s=i.aspectRatio,l=r.options.maintainAspectRatio&&!1===isNaN(s)&&isFinite(s)&&0!==s?o/s:e.getMaximumHeight(a);if(i.width===o&&i.height===l)return r;a.width=i.width=o,a.height=i.height=l,e.retinaScale(i);var u={width:o,height:l};return t.plugins.notify("resize",[r,u]),r.options.onResize&&r.options.onResize(r,u),n||(r.stop(),r.update(r.options.responsiveAnimationDuration)),r},ensureScalesHaveIDs:function(){var t=this.options,n=t.scales||{},r=t.scale;e.each(n.xAxes,(function(t,e){t.id=t.id||"x-axis-"+e})),e.each(n.yAxes,(function(t,e){t.id=t.id||"y-axis-"+e})),r&&(r.id=r.id||"scale")},buildScales:function(){var n=this,r=n.options,i=n.scales={},a=[];r.scales&&(a=a.concat((r.scales.xAxes||[]).map((function(t){return{options:t,dtype:"category"}})),(r.scales.yAxes||[]).map((function(t){return{options:t,dtype:"linear"}})))),r.scale&&a.push({options:r.scale,dtype:"radialLinear",isDefault:!0}),e.each(a,(function(r){var a=r.options,o=e.getValueOrDefault(a.type,r.dtype),s=t.scaleService.getScaleConstructor(o);if(s){var l=new s({id:a.id,options:a,ctx:n.chart.ctx,chart:n});i[l.id]=l,r.isDefault&&(n.scale=l)}})),t.scaleService.addScalesToLayout(this)},updateLayout:function(){t.layoutService.update(this,this.chart.width,this.chart.height)},buildOrUpdateControllers:function(){var n=this,r=[],i=[];if(e.each(n.data.datasets,(function(e,a){var o=n.getDatasetMeta(a);o.type||(o.type=e.type||n.config.type),r.push(o.type),o.controller?o.controller.updateIndex(a):(o.controller=new t.controllers[o.type](n,a),i.push(o.controller))}),n),r.length>1)for(var a=1;a<r.length;a++)if(r[a]!==r[a-1]){n.isCombo=!0;break}return i},resetElements:function(){var t=this;e.each(t.data.datasets,(function(e,n){t.getDatasetMeta(n).controller.reset()}),t)},update:function(n,r){var i=this;t.plugins.notify("beforeUpdate",[i]),i.tooltip._data=i.data;var a=i.buildOrUpdateControllers();e.each(i.data.datasets,(function(t,e){i.getDatasetMeta(e).controller.buildOrUpdateElements()}),i),t.layoutService.update(i,i.chart.width,i.chart.height),t.plugins.notify("afterScaleUpdate",[i]),e.each(a,(function(t){t.reset()})),i.updateDatasets(),t.plugins.notify("afterUpdate",[i]),i.render(n,r)},updateDatasets:function(){var e,n,r=this;if(t.plugins.notify("beforeDatasetsUpdate",[r])){for(e=0,n=r.data.datasets.length;e<n;++e)r.getDatasetMeta(e).controller.update();t.plugins.notify("afterDatasetsUpdate",[r])}},render:function(n,r){var i=this;t.plugins.notify("beforeRender",[i]);var a=i.options.animation;if(a&&(void 0!==n&&0!==n||void 0===n&&0!==a.duration)){var o=new t.Animation;o.numSteps=(n||a.duration)/16.66,o.easing=a.easing,o.render=function(t,n){var r=e.easingEffects[n.easing],i=n.currentStep/n.numSteps,a=r(i);t.draw(a,i,n.currentStep)},o.onAnimationProgress=a.onProgress,o.onAnimationComplete=a.onComplete,t.animationService.addAnimation(i,o,n,r)}else i.draw(),a&&a.onComplete&&a.onComplete.call&&a.onComplete.call(i);return i},draw:function(n){var r=this,i=n||1;r.clear(),t.plugins.notify("beforeDraw",[r,i]),e.each(r.boxes,(function(t){t.draw(r.chartArea)}),r),r.scale&&r.scale.draw(),t.plugins.notify("beforeDatasetsDraw",[r,i]),e.each(r.data.datasets,(function(t,e){r.isDatasetVisible(e)&&r.getDatasetMeta(e).controller.draw(n)}),r,!0),t.plugins.notify("afterDatasetsDraw",[r,i]),r.tooltip.transition(i).draw(),t.plugins.notify("afterDraw",[r,i])},getElementAtEvent:function(t){var n=this,r=e.getRelativePosition(t,n.chart),i=[];return e.each(n.data.datasets,(function(t,a){if(n.isDatasetVisible(a)){var o=n.getDatasetMeta(a);e.each(o.data,(function(t){if(t.inRange(r.x,r.y))return i.push(t),i}))}})),i.slice(0,1)},getElementsAtEvent:function(t){var n=this,r=e.getRelativePosition(t,n.chart),i=[],a=function(){if(n.data.datasets)for(var t=0;t<n.data.datasets.length;t++){var e=n.getDatasetMeta(t);if(n.isDatasetVisible(t))for(var i=0;i<e.data.length;i++)if(e.data[i].inRange(r.x,r.y))return e.data[i]}}.call(n);return a?(e.each(n.data.datasets,(function(t,e){if(n.isDatasetVisible(e)){var r=n.getDatasetMeta(e).data[a._index];r&&!r._view.skip&&i.push(r)}}),n),i):i},getElementsAtXAxis:function(t){var n=this,r=e.getRelativePosition(t,n.chart),i=[],a=function(){if(n.data.datasets)for(var t=0;t<n.data.datasets.length;t++){var e=n.getDatasetMeta(t);if(n.isDatasetVisible(t))for(var i=0;i<e.data.length;i++)if(e.data[i].inLabelRange(r.x,r.y))return e.data[i]}}.call(n);return a?(e.each(n.data.datasets,(function(t,r){if(n.isDatasetVisible(r)){var o=n.getDatasetMeta(r),s=e.findIndex(o.data,(function(t){return a._model.x===t._model.x}));-1===s||o.data[s]._view.skip||i.push(o.data[s])}}),n),i):i},getElementsAtEventForMode:function(t,e){var n=this;switch(e){case"single":return n.getElementAtEvent(t);case"label":return n.getElementsAtEvent(t);case"dataset":return n.getDatasetAtEvent(t);case"x-axis":return n.getElementsAtXAxis(t);default:return t}},getDatasetAtEvent:function(t){var e=this.getElementAtEvent(t);return e.length>0&&(e=this.getDatasetMeta(e[0]._datasetIndex).data),e},getDatasetMeta:function(t){var e=this,n=e.data.datasets[t];n._meta||(n._meta={});var r=n._meta[e.id];return r||(r=n._meta[e.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),r},getVisibleDatasetCount:function(){for(var t=0,e=0,n=this.data.datasets.length;e<n;++e)this.isDatasetVisible(e)&&t++;return t},isDatasetVisible:function(t){var e=this.getDatasetMeta(t);return"boolean"==typeof e.hidden?!e.hidden:!this.data.datasets[t].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroy:function(){var n=this;n.stop(),n.clear(),e.unbindEvents(n,n.events),e.removeResizeListener(n.chart.canvas.parentNode);var r=n.chart.canvas;r.width=n.chart.width,r.height=n.chart.height,void 0!==n.chart.originalDevicePixelRatio&&n.chart.ctx.scale(1/n.chart.originalDevicePixelRatio,1/n.chart.originalDevicePixelRatio),r.style.width=n.chart.originalCanvasStyleWidth,r.style.height=n.chart.originalCanvasStyleHeight,t.plugins.notify("destroy",[n]),delete t.instances[n.id]},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new t.Tooltip({_chart:e.chart,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var t=this;e.bindEvents(t,t.options.events,(function(e){t.eventHandler(e)}))},updateHoverStyle:function(t,e,n){var r,i,a,o=n?"setHoverStyle":"removeHoverStyle";switch(e){case"single":t=[t[0]];break;case"label":case"dataset":case"x-axis":break;default:return}for(i=0,a=t.length;i<a;++i)(r=t[i])&&this.getDatasetMeta(r._datasetIndex).controller[o](r)},eventHandler:function(t){var n=this,r=n.tooltip,i=n.options||{},a=i.hover,o=i.tooltips;return n.lastActive=n.lastActive||[],n.lastTooltipActive=n.lastTooltipActive||[],"mouseout"===t.type?(n.active=[],n.tooltipActive=[]):(n.active=n.getElementsAtEventForMode(t,a.mode),n.tooltipActive=n.getElementsAtEventForMode(t,o.mode)),a.onHover&&a.onHover.call(n,n.active),n.legend&&n.legend.handleEvent&&n.legend.handleEvent(t),"mouseup"!==t.type&&"click"!==t.type||i.onClick&&i.onClick.call(n,t,n.active),n.lastActive.length&&n.updateHoverStyle(n.lastActive,a.mode,!1),n.active.length&&a.mode&&n.updateHoverStyle(n.active,a.mode,!0),(o.enabled||o.custom)&&(r.initialize(),r._active=n.tooltipActive,r.update(!0)),r.pivot(),n.animating||e.arrayEquals(n.active,n.lastActive)&&e.arrayEquals(n.tooltipActive,n.lastTooltipActive)||(n.stop(),(o.enabled||o.custom)&&r.update(!0),n.render(a.animationDuration,!0)),n.lastActive=n.active,n.lastTooltipActive=n.tooltipActive,n}})}(e),function(t){var e=t.helpers,n=e.noop;t.DatasetController=function(t,e){this.initialize(t,e)},e.extend(t.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(t,e){var n=this;n.chart=t,n.index=e,n.linkScales(),n.addElements()},updateIndex:function(t){this.index=t},linkScales:function(){var t=this,e=t.getMeta(),n=t.getDataset();null===e.xAxisID&&(e.xAxisID=n.xAxisID||t.chart.options.scales.xAxes[0].id),null===e.yAxisID&&(e.yAxisID=n.yAxisID||t.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(t){return this.chart.scales[t]},reset:function(){this.update(!0)},createMetaDataset:function(){var t=this,e=t.datasetElementType;return e&&new e({_chart:t.chart.chart,_datasetIndex:t.index})},createMetaData:function(t){var e=this,n=e.dataElementType;return n&&new n({_chart:e.chart.chart,_datasetIndex:e.index,_index:t})},addElements:function(){var t,e,n=this,r=n.getMeta(),i=n.getDataset().data||[],a=r.data;for(t=0,e=i.length;t<e;++t)a[t]=a[t]||n.createMetaData(r,t);r.dataset=r.dataset||n.createMetaDataset()},addElementAndReset:function(t){var e=this,n=e.createMetaData(t);e.getMeta().data.splice(t,0,n),e.updateElement(n,t,!0)},buildOrUpdateElements:function(){var t=this.getMeta().data,e=this.getDataset().data.length,n=t.length;if(e<n)t.splice(e,n-e);else if(e>n)for(var r=n;r<e;++r)this.addElementAndReset(r)},update:n,draw:function(t){var n=t||1;e.each(this.getMeta().data,(function(t){t.transition(n).draw()}))},removeHoverStyle:function(t,n){var r=this.chart.data.datasets[t._datasetIndex],i=t._index,a=t.custom||{},o=e.getValueAtIndexOrDefault,s=t._model;s.backgroundColor=a.backgroundColor?a.backgroundColor:o(r.backgroundColor,i,n.backgroundColor),s.borderColor=a.borderColor?a.borderColor:o(r.borderColor,i,n.borderColor),s.borderWidth=a.borderWidth?a.borderWidth:o(r.borderWidth,i,n.borderWidth)},setHoverStyle:function(t){var n=this.chart.data.datasets[t._datasetIndex],r=t._index,i=t.custom||{},a=e.getValueAtIndexOrDefault,o=e.getHoverColor,s=t._model;s.backgroundColor=i.hoverBackgroundColor?i.hoverBackgroundColor:a(n.hoverBackgroundColor,r,o(s.backgroundColor)),s.borderColor=i.hoverBorderColor?i.hoverBorderColor:a(n.hoverBorderColor,r,o(s.borderColor)),s.borderWidth=i.hoverBorderWidth?i.hoverBorderWidth:a(n.hoverBorderWidth,r,s.borderWidth)}}),t.DatasetController.extend=e.inherits}(e),function(t){var e=t.helpers;t.layoutService={defaults:{},addBox:function(t,e){t.boxes||(t.boxes=[]),t.boxes.push(e)},removeBox:function(t,e){t.boxes&&t.boxes.splice(t.boxes.indexOf(e),1)},update:function(t,n,r){if(t){var i=e.where(t.boxes,(function(t){return"left"===t.options.position})),a=e.where(t.boxes,(function(t){return"right"===t.options.position})),o=e.where(t.boxes,(function(t){return"top"===t.options.position})),s=e.where(t.boxes,(function(t){return"bottom"===t.options.position})),l=e.where(t.boxes,(function(t){return"chartArea"===t.options.position}));o.sort((function(t,e){return(e.options.fullWidth?1:0)-(t.options.fullWidth?1:0)})),s.sort((function(t,e){return(t.options.fullWidth?1:0)-(e.options.fullWidth?1:0)}));var u=n-0,c=r-0,d=c/2,h=(n-u/2)/(i.length+a.length),f=(r-d)/(o.length+s.length),p=u,g=c,m=[];e.each(i.concat(a,o,s),(function(t){var e,n=t.isHorizontal();n?(e=t.update(t.options.fullWidth?u:p,f),g-=e.height):(e=t.update(h,d),p-=e.width),m.push({horizontal:n,minSize:e,box:t})}));var v=0,y=0,b=0,S=0;e.each(i.concat(a),k),e.each(i,(function(t){v+=t.width})),e.each(a,(function(t){y+=t.width})),e.each(o.concat(s),k),e.each(o,(function(t){b+=t.height})),e.each(s,(function(t){S+=t.height})),e.each(i.concat(a),(function(t){var n=e.findNextWhere(m,(function(e){return e.box===t})),r={left:0,right:0,top:b,bottom:S};n&&t.update(n.minSize.width,g,r)})),v=0,y=0,b=0,S=0,e.each(i,(function(t){v+=t.width})),e.each(a,(function(t){y+=t.width})),e.each(o,(function(t){b+=t.height})),e.each(s,(function(t){S+=t.height}));var w=r-b-S,T=n-v-y;T===p&&w===g||(e.each(i,(function(t){t.height=w})),e.each(a,(function(t){t.height=w})),e.each(o,(function(t){t.options.fullWidth||(t.width=T)})),e.each(s,(function(t){t.options.fullWidth||(t.width=T)})),g=w,p=T);var x=0,_=0;e.each(i.concat(o),E),x+=p,_+=g,e.each(a,E),e.each(s,E),t.chartArea={left:v,top:b,right:v+p,bottom:b+g},e.each(l,(function(e){e.left=t.chartArea.left,e.top=t.chartArea.top,e.right=t.chartArea.right,e.bottom=t.chartArea.bottom,e.update(p,g)}))}function k(t){var n=e.findNextWhere(m,(function(e){return e.box===t}));if(n)if(t.isHorizontal()){var r={left:v,right:y,top:0,bottom:0};t.update(t.options.fullWidth?u:p,c/2,r)}else t.update(n.minSize.width,g)}function E(t){t.isHorizontal()?(t.left=t.options.fullWidth?0:v,t.right=t.options.fullWidth?n-0:v+p,t.top=_,t.bottom=_+t.height,_=t.bottom):(t.left=x,t.right=x+t.width,t.top=b,t.bottom=b+g,x=t.right)}}}}(e),function(t){var e=t.helpers;t.scaleService={constructors:{},defaults:{},registerScaleType:function(t,n,r){this.constructors[t]=n,this.defaults[t]=e.clone(r)},getScaleConstructor:function(t){return this.constructors.hasOwnProperty(t)?this.constructors[t]:void 0},getScaleDefaults:function(n){return this.defaults.hasOwnProperty(n)?e.scaleMerge(t.defaults.scale,this.defaults[n]):{}},updateScaleDefaults:function(t,n){var r=this.defaults;r.hasOwnProperty(t)&&(r[t]=e.extend(r[t],n))},addScalesToLayout:function(n){e.each(n.scales,(function(e){t.layoutService.addBox(n,e)}))}}}(e),function(t){var e=t.helpers.noop;t.plugins={_plugins:[],register:function(t){var e=this._plugins;[].concat(t).forEach((function(t){-1===e.indexOf(t)&&e.push(t)}))},unregister:function(t){var e=this._plugins;[].concat(t).forEach((function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}))},clear:function(){this._plugins=[]},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(t,e){var n,r,i=this._plugins,a=i.length;for(n=0;n<a;++n)if("function"==typeof(r=i[n])[t]&&!1===r[t].apply(r,e||[]))return!1;return!0}},t.PluginBase=t.Element.extend({beforeInit:e,afterInit:e,beforeUpdate:e,afterUpdate:e,beforeDraw:e,afterDraw:e,destroy:e}),t.pluginService=t.plugins}(e),function(t){var e=t.helpers;t.defaults.scale={display:!0,position:"left",gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{labelString:"",display:!1},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:10,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:function(t){return e.isArray(t)?t:""+t}}},t.Scale=t.Element.extend({beforeUpdate:function(){e.callCallback(this.options.beforeUpdate,[this])},update:function(t,n,r){var i=this;return i.beforeUpdate(),i.maxWidth=t,i.maxHeight=n,i.margins=e.extend({left:0,right:0,top:0,bottom:0},r),i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeDataLimits(),i.determineDataLimits(),i.afterDataLimits(),i.beforeBuildTicks(),i.buildTicks(),i.afterBuildTicks(),i.beforeTickToLabelConversion(),i.convertTicksToLabels(),i.afterTickToLabelConversion(),i.beforeCalculateTickRotation(),i.calculateTickRotation(),i.afterCalculateTickRotation(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:function(){e.callCallback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){e.callCallback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0},afterSetDimensions:function(){e.callCallback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){e.callCallback(this.options.beforeDataLimits,[this])},determineDataLimits:e.noop,afterDataLimits:function(){e.callCallback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){e.callCallback(this.options.beforeBuildTicks,[this])},buildTicks:e.noop,afterBuildTicks:function(){e.callCallback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){e.callCallback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this;t.ticks=t.ticks.map((function(e,n,r){return t.options.ticks.userCallback?t.options.ticks.userCallback(e,n,r):t.options.ticks.callback(e,n,r)}),t)},afterTickToLabelConversion:function(){e.callCallback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){e.callCallback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var n=this,r=n.ctx,i=t.defaults.global,a=n.options.ticks,o=e.getValueOrDefault(a.fontSize,i.defaultFontSize),s=e.getValueOrDefault(a.fontStyle,i.defaultFontStyle),l=e.getValueOrDefault(a.fontFamily,i.defaultFontFamily),u=e.fontString(o,s,l);r.font=u;var c,d=r.measureText(n.ticks[0]).width,h=r.measureText(n.ticks[n.ticks.length-1]).width;if(n.labelRotation=a.minRotation||0,n.paddingRight=0,n.paddingLeft=0,n.options.display&&n.isHorizontal()){n.paddingRight=h/2+3,n.paddingLeft=d/2+3,n.longestTextCache||(n.longestTextCache={});for(var f,p,g=e.longestText(r,u,n.ticks,n.longestTextCache),m=g,v=n.getPixelForTick(1)-n.getPixelForTick(0)-6;m>v&&n.labelRotation<a.maxRotation;){if(f=Math.cos(e.toRadians(n.labelRotation)),p=Math.sin(e.toRadians(n.labelRotation)),(c=f*d)+o/2>n.yLabelWidth&&(n.paddingLeft=c+o/2),n.paddingRight=o/2,p*g>n.maxHeight){n.labelRotation--;break}n.labelRotation++,m=f*g}}n.margins&&(n.paddingLeft=Math.max(n.paddingLeft-n.margins.left,0),n.paddingRight=Math.max(n.paddingRight-n.margins.right,0))},afterCalculateTickRotation:function(){e.callCallback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){e.callCallback(this.options.beforeFit,[this])},fit:function(){var n=this,r=n.minSize={width:0,height:0},i=n.options,a=t.defaults.global,o=i.ticks,s=i.scaleLabel,l=i.gridLines,u=i.display,c=n.isHorizontal(),d=e.getValueOrDefault(o.fontSize,a.defaultFontSize),h=e.getValueOrDefault(o.fontStyle,a.defaultFontStyle),f=e.getValueOrDefault(o.fontFamily,a.defaultFontFamily),p=e.fontString(d,h,f),g=e.getValueOrDefault(s.fontSize,a.defaultFontSize),m=i.gridLines.tickMarkLength;if(r.width=c?n.isFullWidth()?n.maxWidth-n.margins.left-n.margins.right:n.maxWidth:u&&l.drawTicks?m:0,r.height=c?u&&l.drawTicks?m:0:n.maxHeight,s.display&&u&&(c?r.height+=1.5*g:r.width+=1.5*g),o.display&&u){n.longestTextCache||(n.longestTextCache={});var v=e.longestText(n.ctx,p,n.ticks,n.longestTextCache),y=e.numberOfLabelLines(n.ticks),b=.5*d;if(c){n.longestLabelWidth=v;var S=Math.sin(e.toRadians(n.labelRotation))*n.longestLabelWidth+d*y+b*y;r.height=Math.min(n.maxHeight,r.height+S),n.ctx.font=p;var w=n.ctx.measureText(n.ticks[0]).width,T=n.ctx.measureText(n.ticks[n.ticks.length-1]).width,x=Math.cos(e.toRadians(n.labelRotation)),_=Math.sin(e.toRadians(n.labelRotation));n.paddingLeft=0!==n.labelRotation?x*w+3:w/2+3,n.paddingRight=0!==n.labelRotation?_*(d/2)+3:T/2+3}else{var k=n.maxWidth-r.width;o.mirror?v=0:v+=n.options.ticks.padding,v<k?r.width+=v:r.width=n.maxWidth,n.paddingTop=d/2,n.paddingBottom=d/2}}n.margins&&(n.paddingLeft=Math.max(n.paddingLeft-n.margins.left,0),n.paddingTop=Math.max(n.paddingTop-n.margins.top,0),n.paddingRight=Math.max(n.paddingRight-n.margins.right,0),n.paddingBottom=Math.max(n.paddingBottom-n.margins.bottom,0)),n.width=r.width,n.height=r.height},afterFit:function(){e.callCallback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){return null==t||"number"==typeof t&&isNaN(t)?NaN:"object"==typeof t?t instanceof Date||t.isValid?t:this.getRightValue(this.isHorizontal()?t.x:t.y):t},getLabelForIndex:e.noop,getPixelForValue:e.noop,getValueForPixel:e.noop,getPixelForTick:function(t,e){var n=this;if(n.isHorizontal()){var r=(n.width-(n.paddingLeft+n.paddingRight))/Math.max(n.ticks.length-(n.options.gridLines.offsetGridLines?0:1),1),i=r*t+n.paddingLeft;return e&&(i+=r/2),n.left+Math.round(i)+(n.isFullWidth()?n.margins.left:0)}var a=n.height-(n.paddingTop+n.paddingBottom);return n.top+t*(a/(n.ticks.length-1))},getPixelForDecimal:function(t){var e=this;if(e.isHorizontal()){var n=(e.width-(e.paddingLeft+e.paddingRight))*t+e.paddingLeft;return e.left+Math.round(n)+(e.isFullWidth()?e.margins.left:0)}return e.top+t*e.height},getBasePixel:function(){var t=this,e=t.min,n=t.max;return t.getPixelForValue(t.beginAtZero?0:e<0&&n<0?n:e>0&&n>0?e:0)},draw:function(n){var r=this,i=r.options;if(i.display){var a,o,s=r.ctx,l=t.defaults.global,u=i.ticks,c=i.gridLines,d=i.scaleLabel,h=0!==r.labelRotation,f=u.autoSkip,p=r.isHorizontal();u.maxTicksLimit&&(o=u.maxTicksLimit);var g=e.getValueOrDefault(u.fontColor,l.defaultFontColor),m=e.getValueOrDefault(u.fontSize,l.defaultFontSize),v=e.getValueOrDefault(u.fontStyle,l.defaultFontStyle),y=e.getValueOrDefault(u.fontFamily,l.defaultFontFamily),b=e.fontString(m,v,y),S=c.tickMarkLength,w=e.getValueOrDefault(c.borderDash,l.borderDash),T=e.getValueOrDefault(c.borderDashOffset,l.borderDashOffset),x=e.getValueOrDefault(d.fontColor,l.defaultFontColor),_=e.getValueOrDefault(d.fontSize,l.defaultFontSize),k=e.getValueOrDefault(d.fontStyle,l.defaultFontStyle),E=e.getValueOrDefault(d.fontFamily,l.defaultFontFamily),$=e.fontString(_,k,E),A=e.toRadians(r.labelRotation),C=Math.cos(A),D=r.longestLabelWidth*C;s.fillStyle=g;var M=[];if(p){if(a=!1,h&&(D/=2),(D+u.autoSkipPadding)*r.ticks.length>r.width-(r.paddingLeft+r.paddingRight)&&(a=1+Math.floor((D+u.autoSkipPadding)*r.ticks.length/(r.width-(r.paddingLeft+r.paddingRight)))),o&&r.ticks.length>o)for(;!a||r.ticks.length/(a||1)>o;)a||(a=1),a+=1;f||(a=!1)}var R="right"===i.position?r.left:r.right-S,O="right"===i.position?r.left+S:r.right,I="bottom"===i.position?r.top:r.bottom-S,L="bottom"===i.position?r.top+S:r.bottom;if(e.each(r.ticks,(function(t,o){if(null!=t){var s=r.ticks.length===o+1;if((!(a>1&&o%a>0||o%a==0&&o+a>=r.ticks.length)||s)&&null!=t){var l,d,f,g,m,v,y,b,x,_,k,E;o===(void 0!==r.zeroLineIndex?r.zeroLineIndex:0)?(l=c.zeroLineWidth,d=c.zeroLineColor):(l=e.getValueAtIndexOrDefault(c.lineWidth,o),d=e.getValueAtIndexOrDefault(c.color,o));var $="middle",C="middle";if(p){h||(C="top"===i.position?"bottom":"top"),$=h?"right":"center";var D=r.getPixelForTick(o)+e.aliasPixel(l);k=r.getPixelForTick(o,c.offsetGridLines)+u.labelOffset,E=h?r.top+12:"top"===i.position?r.bottom-S:r.top+S,f=m=y=x=D,g=I,v=L,b=n.top,_=n.bottom}else{"left"===i.position?u.mirror?(k=r.right+u.padding,$="left"):(k=r.right-u.padding,$="right"):u.mirror?(k=r.left-u.padding,$="right"):(k=r.left+u.padding,$="left");var P=r.getPixelForTick(o);P+=e.aliasPixel(l),E=r.getPixelForTick(o,c.offsetGridLines),f=R,m=O,y=n.left,x=n.right,g=v=b=_=P}M.push({tx1:f,ty1:g,tx2:m,ty2:v,x1:y,y1:b,x2:x,y2:_,labelX:k,labelY:E,glWidth:l,glColor:d,glBorderDash:w,glBorderDashOffset:T,rotation:-1*A,label:t,textBaseline:C,textAlign:$})}}})),e.each(M,(function(t){if(c.display&&(s.save(),s.lineWidth=t.glWidth,s.strokeStyle=t.glColor,s.setLineDash&&(s.setLineDash(t.glBorderDash),s.lineDashOffset=t.glBorderDashOffset),s.beginPath(),c.drawTicks&&(s.moveTo(t.tx1,t.ty1),s.lineTo(t.tx2,t.ty2)),c.drawOnChartArea&&(s.moveTo(t.x1,t.y1),s.lineTo(t.x2,t.y2)),s.stroke(),s.restore()),u.display){s.save(),s.translate(t.labelX,t.labelY),s.rotate(t.rotation),s.font=b,s.textBaseline=t.textBaseline,s.textAlign=t.textAlign;var n=t.label;if(e.isArray(n))for(var r=0,i=-(n.length-1)*m*.75;r<n.length;++r)s.fillText(""+n[r],0,i),i+=1.5*m;else s.fillText(n,0,0);s.restore()}})),d.display){var P,F,N=0;if(p)P=r.left+(r.right-r.left)/2,F="bottom"===i.position?r.bottom-_/2:r.top+_/2;else{var U="left"===i.position;P=U?r.left+_/2:r.right-_/2,F=r.top+(r.bottom-r.top)/2,N=U?-.5*Math.PI:.5*Math.PI}s.save(),s.translate(P,F),s.rotate(N),s.textAlign="center",s.textBaseline="middle",s.fillStyle=x,s.font=$,s.fillText(d.labelString,0,0),s.restore()}if(c.drawBorder){s.lineWidth=e.getValueAtIndexOrDefault(c.lineWidth,0),s.strokeStyle=e.getValueAtIndexOrDefault(c.color,0);var B=r.left,V=r.right,j=r.top,H=r.bottom,W=e.aliasPixel(s.lineWidth);p?(j=H="top"===i.position?r.bottom:r.top,j+=W,H+=W):(B=V="left"===i.position?r.right:r.left,B+=W,V+=W),s.beginPath(),s.moveTo(B,j),s.lineTo(V,H),s.stroke()}}}})}(e),function(t){var e=t.helpers;t.defaults.global.title={display:!1,position:"top",fullWidth:!0,fontStyle:"bold",padding:10,text:""};var n=e.noop;t.Title=t.Element.extend({initialize:function(n){var r=this;e.extend(r,n),r.options=e.configMerge(t.defaults.global.title,n.options),r.legendHitBoxes=[]},beforeUpdate:function(){var n=this.chart.options;n&&n.title&&(this.options=e.configMerge(t.defaults.global.title,n.title))},update:function(t,e,n){var r=this;return r.beforeUpdate(),r.maxWidth=t,r.maxHeight=e,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:n,beforeSetDimensions:n,setDimensions:function(){var t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0,t.minSize={width:0,height:0}},afterSetDimensions:n,beforeBuildLabels:n,buildLabels:n,afterBuildLabels:n,beforeFit:n,fit:function(){var n=this,r=e.getValueOrDefault,i=n.options,a=t.defaults.global,o=i.display,s=r(i.fontSize,a.defaultFontSize),l=n.minSize;n.isHorizontal()?(l.width=n.maxWidth,l.height=o?s+2*i.padding:0):(l.width=o?s+2*i.padding:0,l.height=n.maxHeight),n.width=l.width,n.height=l.height},afterFit:n,isHorizontal:function(){var t=this.options.position;return"top"===t||"bottom"===t},draw:function(){var n=this,r=n.ctx,i=e.getValueOrDefault,a=n.options,o=t.defaults.global;if(a.display){var s,l,u=i(a.fontSize,o.defaultFontSize),c=i(a.fontStyle,o.defaultFontStyle),d=i(a.fontFamily,o.defaultFontFamily),h=e.fontString(u,c,d),f=0,p=n.top,g=n.left,m=n.bottom,v=n.right;r.fillStyle=i(a.fontColor,o.defaultFontColor),r.font=h,n.isHorizontal()?(s=g+(v-g)/2,l=p+(m-p)/2):(s="left"===a.position?g+u/2:v-u/2,l=p+(m-p)/2,f=Math.PI*("left"===a.position?-.5:.5)),r.save(),r.translate(s,l),r.rotate(f),r.textAlign="center",r.textBaseline="middle",r.fillText(a.text,0,0),r.restore()}}}),t.plugins.register({beforeInit:function(e){var n=e.options.title;n&&(e.titleBlock=new t.Title({ctx:e.chart.ctx,options:n,chart:e}),t.layoutService.addBox(e,e.titleBlock))}})}(e),Z(e),J(e),function(t){var e=t.helpers,n=t.defaults.global;n.elements.arc={backgroundColor:n.defaultColor,borderColor:"#fff",borderWidth:2},t.elements.Arc=t.Element.extend({inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hoverRadius,2)},inRange:function(t,n){var r=this._view;if(r){for(var i=e.getAngleFromPoint(r,{x:t,y:n}),a=i.angle,o=i.distance,s=r.startAngle,l=r.endAngle;l<s;)l+=2*Math.PI;for(;a>l;)a-=2*Math.PI;for(;a<s;)a+=2*Math.PI;var u=a>=s&&a<=l,c=o>=r.innerRadius&&o<=r.outerRadius;return u&&c}return!1},tooltipPosition:function(){var t=this._view,e=t.startAngle+(t.endAngle-t.startAngle)/2,n=(t.outerRadius-t.innerRadius)/2+t.innerRadius;return{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n}},draw:function(){var t=this._chart.ctx,e=this._view,n=e.startAngle,r=e.endAngle;t.beginPath(),t.arc(e.x,e.y,e.outerRadius,n,r),t.arc(e.x,e.y,e.innerRadius,r,n,!0),t.closePath(),t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth,t.fillStyle=e.backgroundColor,t.fill(),t.lineJoin="bevel",e.borderWidth&&t.stroke()}})}(e),function(t){var e=t.helpers,n=t.defaults.global;t.defaults.global.elements.line={tension:.4,backgroundColor:n.defaultColor,borderWidth:3,borderColor:n.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0},t.elements.Line=t.Element.extend({draw:function(){var t=this,r=t._view,i=r.spanGaps,a=r.scaleZero,o=t._loop,s=t._chart.ctx;function l(t,e){var n=e._view;!0===e._view.steppedLine?(s.lineTo(n.x,t._view.y),s.lineTo(n.x,n.y)):0===e._view.tension?s.lineTo(n.x,n.y):s.bezierCurveTo(t._view.controlPointNextX,t._view.controlPointNextY,n.controlPointPreviousX,n.controlPointPreviousY,n.x,n.y)}s.save();var u,c,d,h,f=t._children.slice(),p=-1;if(o&&f.length&&f.push(f[0]),f.length&&r.fill){for(s.beginPath(),u=0;u<f.length;++u)c=f[u],d=e.previousItem(f,u),h=c._view,0===u?(o?s.moveTo(a.x,a.y):s.moveTo(h.x,a),h.skip||(p=u,s.lineTo(h.x,h.y))):(d=-1===p?d:f[p],h.skip?i||p!==u-1||(o?s.lineTo(a.x,a.y):s.lineTo(d._view.x,a)):(p!==u-1?i&&-1!==p?l(d,c):(o||s.lineTo(h.x,a),s.lineTo(h.x,h.y)):l(d,c),p=u));o||-1===p||s.lineTo(f[p]._view.x,a),s.fillStyle=r.backgroundColor||n.defaultColor,s.closePath(),s.fill()}var g=n.elements.line;for(s.lineCap=r.borderCapStyle||g.borderCapStyle,s.setLineDash&&s.setLineDash(r.borderDash||g.borderDash),s.lineDashOffset=r.borderDashOffset||g.borderDashOffset,s.lineJoin=r.borderJoinStyle||g.borderJoinStyle,s.lineWidth=r.borderWidth||g.borderWidth,s.strokeStyle=r.borderColor||n.defaultColor,s.beginPath(),p=-1,u=0;u<f.length;++u)c=f[u],d=e.previousItem(f,u),h=c._view,0===u?h.skip||(s.moveTo(h.x,h.y),p=u):(d=-1===p?d:f[p],h.skip||(p!==u-1&&!i||-1===p?s.moveTo(h.x,h.y):l(d,c),p=u));s.stroke(),s.restore()}})}(e),function(t){var e=t.helpers,n=t.defaults.global,r=n.defaultColor;n.elements.point={radius:3,pointStyle:"circle",backgroundColor:r,borderWidth:1,borderColor:r,hitRadius:1,hoverRadius:4,hoverBorderWidth:1},t.elements.Point=t.Element.extend({inRange:function(t,e){var n=this._view;return!!n&&Math.pow(t-n.x,2)+Math.pow(e-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:function(t){var e=this._view;return!!e&&Math.pow(t-e.x,2)<Math.pow(e.radius+e.hitRadius,2)},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y,padding:t.radius+t.borderWidth}},draw:function(){var i=this._view,a=this._chart.ctx,o=i.pointStyle,s=i.radius,l=i.x,u=i.y;i.skip||(a.strokeStyle=i.borderColor||r,a.lineWidth=e.getValueOrDefault(i.borderWidth,n.elements.point.borderWidth),a.fillStyle=i.backgroundColor||r,t.canvasHelpers.drawPoint(a,o,s,l,u))}})}(e),function(t){var e=t.defaults.global;e.elements.rectangle={backgroundColor:e.defaultColor,borderWidth:0,borderColor:e.defaultColor,borderSkipped:"bottom"},t.elements.Rectangle=t.Element.extend({draw:function(){var t=this._chart.ctx,e=this._view,n=e.width/2,r=e.x-n,i=e.x+n,a=e.base-(e.base-e.y),o=e.borderWidth/2;e.borderWidth&&(r+=o,i-=o,a+=o),t.beginPath(),t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth;var s=[[r,e.base],[r,a],[i,a],[i,e.base]],l=["bottom","left","top","right"].indexOf(e.borderSkipped,0);function u(t){return s[(l+t)%4]}-1===l&&(l=0),t.moveTo.apply(t,u(0));for(var c=1;c<4;c++)t.lineTo.apply(t,u(c));t.fill(),e.borderWidth&&t.stroke()},height:function(){var t=this._view;return t.base-t.y},inRange:function(t,e){var n=this._view;return!!n&&(n.y<n.base?t>=n.x-n.width/2&&t<=n.x+n.width/2&&e>=n.y&&e<=n.base:t>=n.x-n.width/2&&t<=n.x+n.width/2&&e>=n.base&&e<=n.y)},inLabelRange:function(t){var e=this._view;return!!e&&t>=e.x-e.width/2&&t<=e.x+e.width/2},tooltipPosition:function(){var t=this._view;return{x:t.x,y:t.y}}})}(e),function(t){var e=t.helpers,n=e.noop;t.LinearScaleBase=t.Scale.extend({handleTickRangeOptions:function(){var t=this,n=t.options.ticks;if(n.beginAtZero){var r=e.sign(t.min),i=e.sign(t.max);r<0&&i<0?t.max=0:r>0&&i>0&&(t.min=0)}void 0!==n.min?t.min=n.min:void 0!==n.suggestedMin&&(t.min=Math.min(t.min,n.suggestedMin)),void 0!==n.max?t.max=n.max:void 0!==n.suggestedMax&&(t.max=Math.max(t.max,n.suggestedMax)),t.min===t.max&&(t.max++,n.beginAtZero||t.min--)},getTickLimit:n,handleDirectionalChanges:n,buildTicks:function(){var t,n=this,r=n.options,i=n.ticks=[],a=r.ticks,o=e.getValueOrDefault,s=n.getTickLimit();if(s=Math.max(2,s),a.fixedStepSize&&a.fixedStepSize>0||a.stepSize&&a.stepSize>0)t=o(a.fixedStepSize,a.stepSize);else{var l=e.niceNum(n.max-n.min,!1);t=e.niceNum(l/(s-1),!0)}var u=Math.floor(n.min/t)*t,c=Math.ceil(n.max/t)*t,d=(c-u)/t;d=e.almostEquals(d,Math.round(d),t/1e3)?Math.round(d):Math.ceil(d),i.push(void 0!==a.min?a.min:u);for(var h=1;h<d;++h)i.push(u+h*t);i.push(void 0!==a.max?a.max:c),n.handleDirectionalChanges(),n.max=e.max(i),n.min=e.min(i),a.reverse?(i.reverse(),n.start=n.max,n.end=n.min):(n.start=n.min,n.end=n.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),t.Scale.prototype.convertTicksToLabels.call(e)}})}(e),function(t){var e=t.helpers,n=t.Scale.extend({getLabels:function(){var t=this.chart.data;return(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels},determineDataLimits:function(){var t,n=this,r=n.getLabels();n.minIndex=0,n.maxIndex=r.length-1,void 0!==n.options.ticks.min&&(t=e.indexOf(r,n.options.ticks.min),n.minIndex=-1!==t?t:n.minIndex),void 0!==n.options.ticks.max&&(t=e.indexOf(r,n.options.ticks.max),n.maxIndex=-1!==t?t:n.maxIndex),n.min=r[n.minIndex],n.max=r[n.maxIndex]},buildTicks:function(){var t=this,e=t.getLabels();t.ticks=0===t.minIndex&&t.maxIndex===e.length-1?e:e.slice(t.minIndex,t.maxIndex+1)},getLabelForIndex:function(t,e){var n=this,r=n.chart.data,i=n.isHorizontal();return r.xLabels&&i||r.yLabels&&!i?n.getRightValue(r.datasets[e].data[t]):n.ticks[t]},getPixelForValue:function(t,e,n,r){var i=this,a=Math.max(i.maxIndex+1-i.minIndex-(i.options.gridLines.offsetGridLines?0:1),1);if(void 0!==t&&isNaN(e)){var o=i.getLabels().indexOf(t);e=-1!==o?o:e}if(i.isHorizontal()){var s=(i.width-(i.paddingLeft+i.paddingRight))/a,l=s*(e-i.minIndex)+i.paddingLeft;return(i.options.gridLines.offsetGridLines&&r||i.maxIndex===i.minIndex&&r)&&(l+=s/2),i.left+Math.round(l)}var u=(i.height-(i.paddingTop+i.paddingBottom))/a,c=u*(e-i.minIndex)+i.paddingTop;return i.options.gridLines.offsetGridLines&&r&&(c+=u/2),i.top+Math.round(c)},getPixelForTick:function(t,e){return this.getPixelForValue(this.ticks[t],t+this.minIndex,null,e)},getValueForPixel:function(t){var e=this,n=Math.max(e.ticks.length-(e.options.gridLines.offsetGridLines?0:1),1),r=e.isHorizontal(),i=(r?e.width-(e.paddingLeft+e.paddingRight):e.height-(e.paddingTop+e.paddingBottom))/n;return t-=r?e.left:e.top,e.options.gridLines.offsetGridLines&&(t-=i/2),(t-=r?e.paddingLeft:e.paddingTop)<=0?0:Math.round(t/i)},getBasePixel:function(){return this.bottom}});t.scaleService.registerScaleType("category",n,{position:"bottom"})}(e),function(t){var e=t.helpers,n={position:"left",ticks:{callback:function(t,n,r){var i=r.length>3?r[2]-r[1]:r[1]-r[0];Math.abs(i)>1&&t!==Math.floor(t)&&(i=t-Math.floor(t));var a=e.log10(Math.abs(i)),o="";if(0!==t){var s=-1*Math.floor(a);s=Math.max(Math.min(s,20),0),o=t.toFixed(s)}else o="0";return o}}},r=t.LinearScaleBase.extend({determineDataLimits:function(){var t=this,n=t.options,r=t.chart,i=r.data.datasets,a=t.isHorizontal();function o(e){return a?e.xAxisID===t.id:e.yAxisID===t.id}if(t.min=null,t.max=null,n.stacked){var s={};e.each(i,(function(i,a){var l=r.getDatasetMeta(a);void 0===s[l.type]&&(s[l.type]={positiveValues:[],negativeValues:[]});var u=s[l.type].positiveValues,c=s[l.type].negativeValues;r.isDatasetVisible(a)&&o(l)&&e.each(i.data,(function(e,r){var i=+t.getRightValue(e);isNaN(i)||l.data[r].hidden||(u[r]=u[r]||0,c[r]=c[r]||0,n.relativePoints?u[r]=100:i<0?c[r]+=i:u[r]+=i)}))})),e.each(s,(function(n){var r=n.positiveValues.concat(n.negativeValues),i=e.min(r),a=e.max(r);t.min=null===t.min?i:Math.min(t.min,i),t.max=null===t.max?a:Math.max(t.max,a)}))}else e.each(i,(function(n,i){var a=r.getDatasetMeta(i);r.isDatasetVisible(i)&&o(a)&&e.each(n.data,(function(e,n){var r=+t.getRightValue(e);isNaN(r)||a.data[n].hidden||((null===t.min||r<t.min)&&(t.min=r),(null===t.max||r>t.max)&&(t.max=r))}))}));this.handleTickRangeOptions()},getTickLimit:function(){var n,r=this,i=r.options.ticks;if(r.isHorizontal())n=Math.min(i.maxTicksLimit?i.maxTicksLimit:11,Math.ceil(r.width/50));else{var a=e.getValueOrDefault(i.fontSize,t.defaults.global.defaultFontSize);n=Math.min(i.maxTicksLimit?i.maxTicksLimit:11,Math.ceil(r.height/(2*a)))}return n},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForValue:function(t){var e,n,r=this,i=r.paddingLeft,a=r.paddingBottom,o=r.start,s=+r.getRightValue(t),l=r.end-o;return r.isHorizontal()?(n=r.width-(i+r.paddingRight),e=r.left+n/l*(s-o),Math.round(e+i)):(n=r.height-(r.paddingTop+a),e=r.bottom-a-n/l*(s-o),Math.round(e))},getValueForPixel:function(t){var e=this,n=e.isHorizontal(),r=e.paddingLeft,i=e.paddingBottom,a=n?e.width-(r+e.paddingRight):e.height-(e.paddingTop+i),o=(n?t-e.left-r:e.bottom-i-t)/a;return e.start+(e.end-e.start)*o},getPixelForTick:function(t){return this.getPixelForValue(this.ticksAsNumbers[t])}});t.scaleService.registerScaleType("linear",r,n)}(e),function(t){var e=t.helpers,n={position:"left",ticks:{callback:function(t,n,r){var i=t/Math.pow(10,Math.floor(e.log10(t)));return 0===t?"0":1===i||2===i||5===i||0===n||n===r.length-1?t.toExponential():""}}},r=t.Scale.extend({determineDataLimits:function(){var t=this,n=t.options,r=n.ticks,i=t.chart,a=i.data.datasets,o=e.getValueOrDefault,s=t.isHorizontal();function l(e){return s?e.xAxisID===t.id:e.yAxisID===t.id}if(t.min=null,t.max=null,t.minNotZero=null,n.stacked){var u={};e.each(a,(function(r,a){var o=i.getDatasetMeta(a);i.isDatasetVisible(a)&&l(o)&&(void 0===u[o.type]&&(u[o.type]=[]),e.each(r.data,(function(e,r){var i=u[o.type],a=+t.getRightValue(e);isNaN(a)||o.data[r].hidden||(i[r]=i[r]||0,n.relativePoints?i[r]=100:i[r]+=a)})))})),e.each(u,(function(n){var r=e.min(n),i=e.max(n);t.min=null===t.min?r:Math.min(t.min,r),t.max=null===t.max?i:Math.max(t.max,i)}))}else e.each(a,(function(n,r){var a=i.getDatasetMeta(r);i.isDatasetVisible(r)&&l(a)&&e.each(n.data,(function(e,n){var r=+t.getRightValue(e);isNaN(r)||a.data[n].hidden||((null===t.min||r<t.min)&&(t.min=r),(null===t.max||r>t.max)&&(t.max=r),0!==r&&(null===t.minNotZero||r<t.minNotZero)&&(t.minNotZero=r))}))}));t.min=o(r.min,t.min),t.max=o(r.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(e.log10(t.min))-1),t.max=Math.pow(10,Math.floor(e.log10(t.max))+1)):(t.min=1,t.max=10))},buildTicks:function(){for(var t=this,n=t.options.ticks,r=e.getValueOrDefault,i=t.ticks=[],a=r(n.min,Math.pow(10,Math.floor(e.log10(t.min))));a<t.max;){var o,s;i.push(a),0===a?(o=Math.floor(e.log10(t.minNotZero)),s=Math.round(t.minNotZero/Math.pow(10,o))):(o=Math.floor(e.log10(a)),s=Math.floor(a/Math.pow(10,o))+1),10===s&&(s=1,++o),a=s*Math.pow(10,o)}var l=r(n.max,a);i.push(l),t.isHorizontal()||i.reverse(),t.max=e.max(i),t.min=e.min(i),n.reverse?(i.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),t.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},getPixelForTick:function(t){return this.getPixelForValue(this.tickValues[t])},getPixelForValue:function(t){var n,r,i,a=this,o=a.start,s=+a.getRightValue(t),l=a.paddingTop,u=a.paddingBottom,c=a.paddingLeft,d=a.options.ticks;return a.isHorizontal()?(i=e.log10(a.end)-e.log10(o),0===s?r=a.left+c:(n=a.width-(c+a.paddingRight),r=a.left+n/i*(e.log10(s)-e.log10(o)),r+=c)):(n=a.height-(l+u),0!==o||d.reverse?0===a.end&&d.reverse?(i=e.log10(a.start)-e.log10(a.minNotZero),r=s===a.end?a.top+l:s===a.minNotZero?a.top+l+.02*n:a.top+l+.02*n+.98*n/i*(e.log10(s)-e.log10(a.minNotZero))):(i=e.log10(a.end)-e.log10(o),n=a.height-(l+u),r=a.bottom-u-n/i*(e.log10(s)-e.log10(o))):(i=e.log10(a.end)-e.log10(a.minNotZero),r=s===o?a.bottom-u:s===a.minNotZero?a.bottom-u-.02*n:a.bottom-u-.02*n-.98*n/i*(e.log10(s)-e.log10(a.minNotZero)))),r},getValueForPixel:function(t){var n,r,i=this,a=e.log10(i.end)-e.log10(i.start);return i.isHorizontal()?(r=i.width-(i.paddingLeft+i.paddingRight),n=i.start*Math.pow(10,(t-i.left-i.paddingLeft)*a/r)):(r=i.height-(i.paddingTop+i.paddingBottom),n=Math.pow(10,(i.bottom-i.paddingBottom-t)*a/r)/i.start),n}});t.scaleService.registerScaleType("logarithmic",r,n)}(e),function(t){var e=t.helpers,n=t.defaults.global,r=t.LinearScaleBase.extend({getValueCount:function(){return this.chart.data.labels.length},setDimensions:function(){var t=this,r=t.options,i=r.ticks;t.width=t.maxWidth,t.height=t.maxHeight,t.xCenter=Math.round(t.width/2),t.yCenter=Math.round(t.height/2);var a=e.min([t.height,t.width]),o=e.getValueOrDefault(i.fontSize,n.defaultFontSize);t.drawingArea=r.display?a/2-(o/2+i.backdropPaddingY):a/2},determineDataLimits:function(){var t=this,n=t.chart;t.min=null,t.max=null,e.each(n.data.datasets,(function(r,i){if(n.isDatasetVisible(i)){var a=n.getDatasetMeta(i);e.each(r.data,(function(e,n){var r=+t.getRightValue(e);isNaN(r)||a.data[n].hidden||((null===t.min||r<t.min)&&(t.min=r),(null===t.max||r>t.max)&&(t.max=r))}))}})),t.handleTickRangeOptions()},getTickLimit:function(){var t=this.options.ticks,r=e.getValueOrDefault(t.fontSize,n.defaultFontSize);return Math.min(t.maxTicksLimit?t.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*r)))},convertTicksToLabels:function(){var e=this;t.LinearScaleBase.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(e.options.pointLabels.callback,e)},getLabelForIndex:function(t,e){return+this.getRightValue(this.chart.data.datasets[e].data[t])},fit:function(){var t,r,i,a,o,s,l,u,c,d,h,f,p=this.options.pointLabels,g=e.getValueOrDefault(p.fontSize,n.defaultFontSize),m=e.getValueOrDefault(p.fontStyle,n.defaultFontStyle),v=e.getValueOrDefault(p.fontFamily,n.defaultFontFamily),y=e.fontString(g,m,v),b=e.min([this.height/2-g-5,this.width/2]),S=this.width,w=0;for(this.ctx.font=y,r=0;r<this.getValueCount();r++){t=this.getPointPosition(r,b),i=this.ctx.measureText(this.pointLabels[r]?this.pointLabels[r]:"").width+5;var T=360*(this.getIndexAngle(r)+Math.PI/2)/(2*Math.PI)%360;0===T||180===T?(a=i/2,t.x+a>S&&(S=t.x+a,o=r),t.x-a<w&&(w=t.x-a,l=r)):T<180?t.x+i>S&&(S=t.x+i,o=r):t.x-i<w&&(w=t.x-i,l=r)}c=w,d=Math.ceil(S-this.width),s=this.getIndexAngle(o),u=this.getIndexAngle(l),h=d/Math.sin(s+Math.PI/2),f=c/Math.sin(u+Math.PI/2),h=e.isNumber(h)?h:0,f=e.isNumber(f)?f:0,this.drawingArea=Math.round(b-(f+h)/2),this.setCenterPoint(f,h)},setCenterPoint:function(t,e){var n=this,r=n.width-e-n.drawingArea,i=t+n.drawingArea;n.xCenter=Math.round((i+r)/2+n.left),n.yCenter=Math.round(n.height/2+n.top)},getIndexAngle:function(t){var e=2*Math.PI/this.getValueCount(),n=(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360;return t*e-Math.PI/2+n},getDistanceFromCenterForValue:function(t){var e=this;if(null===t)return 0;var n=e.drawingArea/(e.max-e.min);return e.options.reverse?(e.max-t)*n:(t-e.min)*n},getPointPosition:function(t,e){var n=this,r=n.getIndexAngle(t);return{x:Math.round(Math.cos(r)*e)+n.xCenter,y:Math.round(Math.sin(r)*e)+n.yCenter}},getPointPositionForValue:function(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))},getBasePosition:function(){var t=this,e=t.min,n=t.max;return t.getPointPositionForValue(0,t.beginAtZero?0:e<0&&n<0?n:e>0&&n>0?e:0)},draw:function(){var t=this,r=t.options,i=r.gridLines,a=r.ticks,o=r.angleLines,s=r.pointLabels,l=e.getValueOrDefault;if(r.display){var u=t.ctx,c=l(a.fontSize,n.defaultFontSize),d=l(a.fontStyle,n.defaultFontStyle),h=l(a.fontFamily,n.defaultFontFamily),f=e.fontString(c,d,h);if(e.each(t.ticks,(function(o,s){if(s>0||r.reverse){var d=t.getDistanceFromCenterForValue(t.ticksAsNumbers[s]),h=t.yCenter-d;if(i.display&&0!==s)if(u.strokeStyle=e.getValueAtIndexOrDefault(i.color,s-1),u.lineWidth=e.getValueAtIndexOrDefault(i.lineWidth,s-1),r.lineArc)u.beginPath(),u.arc(t.xCenter,t.yCenter,d,0,2*Math.PI),u.closePath(),u.stroke();else{u.beginPath();for(var p=0;p<t.getValueCount();p++){var g=t.getPointPosition(p,d);0===p?u.moveTo(g.x,g.y):u.lineTo(g.x,g.y)}u.closePath(),u.stroke()}if(a.display){var m=l(a.fontColor,n.defaultFontColor);if(u.font=f,a.showLabelBackdrop){var v=u.measureText(o).width;u.fillStyle=a.backdropColor,u.fillRect(t.xCenter-v/2-a.backdropPaddingX,h-c/2-a.backdropPaddingY,v+2*a.backdropPaddingX,c+2*a.backdropPaddingY)}u.textAlign="center",u.textBaseline="middle",u.fillStyle=m,u.fillText(o,t.xCenter,h)}}})),!r.lineArc){u.lineWidth=o.lineWidth,u.strokeStyle=o.color;for(var p=t.getDistanceFromCenterForValue(r.reverse?t.min:t.max),g=l(s.fontSize,n.defaultFontSize),m=l(s.fontStyle,n.defaultFontStyle),v=l(s.fontFamily,n.defaultFontFamily),y=e.fontString(g,m,v),b=t.getValueCount()-1;b>=0;b--){if(o.display){var S=t.getPointPosition(b,p);u.beginPath(),u.moveTo(t.xCenter,t.yCenter),u.lineTo(S.x,S.y),u.stroke(),u.closePath()}var w=t.getPointPosition(b,p+5),T=l(s.fontColor,n.defaultFontColor);u.font=y,u.fillStyle=T;var x=t.pointLabels,_=360*(this.getIndexAngle(b)+Math.PI/2)/(2*Math.PI)%360;u.textAlign=0===_||180===_?"center":_<180?"left":"right",u.textBaseline=90===_||270===_?"middle":_>270||_<90?"bottom":"top",u.fillText(x[b]?x[b]:"",w.x,w.y)}}}}});t.scaleService.registerScaleType("radialLinear",r,{display:!0,animate:!0,lineArc:!1,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2},pointLabels:{fontSize:10,callback:function(t){return t}}})}(e),function(t){var e=t.helpers,n={units:[{name:"millisecond",steps:[1,2,5,10,20,50,100,250,500]},{name:"second",steps:[1,2,5,10,30]},{name:"minute",steps:[1,2,5,10,30]},{name:"hour",steps:[1,2,3,6,12]},{name:"day",steps:[1,2,5]},{name:"week",maxStep:4},{name:"month",maxStep:3},{name:"quarter",maxStep:4},{name:"year",maxStep:!1}]},r=t.Scale.extend({initialize:function(){if(!tt)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");t.Scale.prototype.initialize.call(this)},getLabelMoment:function(t,e){return null===t||null===e?null:void 0!==this.labelMoments[t]?this.labelMoments[t][e]:null},getLabelDiff:function(t,e){var n=this;return null===t||null===e?null:(void 0===n.labelDiffs&&n.buildLabelDiffs(),void 0!==n.labelDiffs[t]?n.labelDiffs[t][e]:null)},getMomentStartOf:function(t){var e=this;return"week"===e.options.time.unit&&!1!==e.options.time.isoWeekday?t.clone().startOf("isoWeek").isoWeekday(e.options.time.isoWeekday):t.clone().startOf(e.tickUnit)},determineDataLimits:function(){var t=this;t.labelMoments=[];var n=[];t.chart.data.labels&&t.chart.data.labels.length>0?(e.each(t.chart.data.labels,(function(e){var r=t.parseTime(e);r.isValid()&&(t.options.time.round&&r.startOf(t.options.time.round),n.push(r))}),t),t.firstTick=tt.min.call(t,n),t.lastTick=tt.max.call(t,n)):(t.firstTick=null,t.lastTick=null),e.each(t.chart.data.datasets,(function(r,i){var a=[],o=t.chart.isDatasetVisible(i);"object"==typeof r.data[0]&&null!==r.data[0]?e.each(r.data,(function(e){var n=t.parseTime(t.getRightValue(e));n.isValid()&&(t.options.time.round&&n.startOf(t.options.time.round),a.push(n),o&&(t.firstTick=null!==t.firstTick?tt.min(t.firstTick,n):n,t.lastTick=null!==t.lastTick?tt.max(t.lastTick,n):n))}),t):a=n,t.labelMoments.push(a)}),t),t.options.time.min&&(t.firstTick=t.parseTime(t.options.time.min)),t.options.time.max&&(t.lastTick=t.parseTime(t.options.time.max)),t.firstTick=(t.firstTick||tt()).clone(),t.lastTick=(t.lastTick||tt()).clone()},buildLabelDiffs:function(){var t=this;t.labelDiffs=[];var n=[];t.chart.data.labels&&t.chart.data.labels.length>0&&e.each(t.chart.data.labels,(function(e){var r=t.parseTime(e);r.isValid()&&(t.options.time.round&&r.startOf(t.options.time.round),n.push(r.diff(t.firstTick,t.tickUnit,!0)))}),t),e.each(t.chart.data.datasets,(function(r){var i=[];"object"==typeof r.data[0]&&null!==r.data[0]?e.each(r.data,(function(e){var n=t.parseTime(t.getRightValue(e));n.isValid()&&(t.options.time.round&&n.startOf(t.options.time.round),i.push(n.diff(t.firstTick,t.tickUnit,!0)))}),t):i=n,t.labelDiffs.push(i)}),t)},buildTicks:function(){var r=this;r.ctx.save();var i,a=e.getValueOrDefault(r.options.ticks.fontSize,t.defaults.global.defaultFontSize),o=e.getValueOrDefault(r.options.ticks.fontStyle,t.defaults.global.defaultFontStyle),s=e.getValueOrDefault(r.options.ticks.fontFamily,t.defaults.global.defaultFontFamily),l=e.fontString(a,o,s);if(r.ctx.font=l,r.ticks=[],r.unitScale=1,r.scaleSizeInUnits=0,r.options.time.unit)r.tickUnit=r.options.time.unit||"day",r.displayFormat=r.options.time.displayFormats[r.tickUnit],r.scaleSizeInUnits=r.lastTick.diff(r.firstTick,r.tickUnit,!0),r.unitScale=e.getValueOrDefault(r.options.time.unitStepSize,1);else{var u=r.isHorizontal()?r.width-(r.paddingLeft+r.paddingRight):r.height-(r.paddingTop+r.paddingBottom),c=r.tickFormatFunction(r.firstTick,0,[]),d=r.ctx.measureText(c).width,h=u/(d=d*Math.cos(e.toRadians(r.options.ticks.maxRotation))+a*Math.sin(e.toRadians(r.options.ticks.maxRotation)));r.tickUnit=r.options.time.minUnit,r.scaleSizeInUnits=r.lastTick.diff(r.firstTick,r.tickUnit,!0),r.displayFormat=r.options.time.displayFormats[r.tickUnit];for(var f=0,p=n.units[f];f<n.units.length;){if(r.unitScale=1,e.isArray(p.steps)&&Math.ceil(r.scaleSizeInUnits/h)<e.max(p.steps)){for(var g=0;g<p.steps.length;++g)if(p.steps[g]>=Math.ceil(r.scaleSizeInUnits/h)){r.unitScale=e.getValueOrDefault(r.options.time.unitStepSize,p.steps[g]);break}break}if(!1===p.maxStep||Math.ceil(r.scaleSizeInUnits/h)<p.maxStep){r.unitScale=e.getValueOrDefault(r.options.time.unitStepSize,Math.ceil(r.scaleSizeInUnits/h));break}++f,p=n.units[f],r.tickUnit=p.name;var m=r.firstTick.diff(r.getMomentStartOf(r.firstTick),r.tickUnit,!0),v=r.getMomentStartOf(r.lastTick.clone().add(1,r.tickUnit)).diff(r.lastTick,r.tickUnit,!0);r.scaleSizeInUnits=r.lastTick.diff(r.firstTick,r.tickUnit,!0)+m+v,r.displayFormat=r.options.time.displayFormats[p.name]}}if(r.options.time.min?i=r.getMomentStartOf(r.firstTick):(r.firstTick=r.getMomentStartOf(r.firstTick),i=r.firstTick),!r.options.time.max){var y=r.getMomentStartOf(r.lastTick),b=y.diff(r.lastTick,r.tickUnit,!0);b<0?r.lastTick=r.getMomentStartOf(r.lastTick.add(1,r.tickUnit)):b>=0&&(r.lastTick=y),r.scaleSizeInUnits=r.lastTick.diff(r.firstTick,r.tickUnit,!0)}r.options.time.displayFormat&&(r.displayFormat=r.options.time.displayFormat),r.ticks.push(r.firstTick.clone());for(var S=1;S<=r.scaleSizeInUnits;++S){var w=i.clone().add(S,r.tickUnit);if(r.options.time.max&&w.diff(r.lastTick,r.tickUnit,!0)>=0)break;S%r.unitScale==0&&r.ticks.push(w)}0===r.ticks[r.ticks.length-1].diff(r.lastTick,r.tickUnit)&&0!==r.scaleSizeInUnits||(r.options.time.max?(r.ticks.push(r.lastTick.clone()),r.scaleSizeInUnits=r.lastTick.diff(r.ticks[0],r.tickUnit,!0)):(r.ticks.push(r.lastTick.clone()),r.scaleSizeInUnits=r.lastTick.diff(r.firstTick,r.tickUnit,!0))),r.ctx.restore(),r.labelDiffs=void 0},getLabelForIndex:function(t,e){var n=this,r=n.chart.data.labels&&t<n.chart.data.labels.length?n.chart.data.labels[t]:"";return"object"==typeof n.chart.data.datasets[e].data[0]&&(r=n.getRightValue(n.chart.data.datasets[e].data[t])),n.options.time.tooltipFormat&&(r=n.parseTime(r).format(n.options.time.tooltipFormat)),r},tickFormatFunction:function(t,n,r){var i=t.format(this.displayFormat),a=this.options.ticks,o=e.getValueOrDefault(a.callback,a.userCallback);return o?o(i,n,r):i},convertTicksToLabels:function(){var t=this;t.tickMoments=t.ticks,t.ticks=t.ticks.map(t.tickFormatFunction,t)},getPixelForValue:function(t,e,n){var r=this,i=null;if(void 0!==e&&void 0!==n&&(i=r.getLabelDiff(n,e)),null===i&&(t&&t.isValid||(t=r.parseTime(r.getRightValue(t))),t&&t.isValid&&t.isValid()&&(i=t.diff(r.firstTick,r.tickUnit,!0))),null!==i){var a=0!==i?i/r.scaleSizeInUnits:i;if(r.isHorizontal()){var o=(r.width-(r.paddingLeft+r.paddingRight))*a+r.paddingLeft;return r.left+Math.round(o)}var s=(r.height-(r.paddingTop+r.paddingBottom))*a+r.paddingTop;return r.top+Math.round(s)}},getPixelForTick:function(t){return this.getPixelForValue(this.tickMoments[t],null,null)},getValueForPixel:function(t){var e=this,n=e.isHorizontal()?e.width-(e.paddingLeft+e.paddingRight):e.height-(e.paddingTop+e.paddingBottom),r=(t-(e.isHorizontal()?e.left+e.paddingLeft:e.top+e.paddingTop))/n;return r*=e.scaleSizeInUnits,e.firstTick.clone().add(tt.duration(r,e.tickUnit).asSeconds(),"seconds")},parseTime:function(t){var e=this;return"string"==typeof e.options.time.parser?tt(t,e.options.time.parser):"function"==typeof e.options.time.parser?e.options.time.parser(t):"function"==typeof t.getMonth||"number"==typeof t?tt(t):t.isValid&&t.isValid()?t:"string"!=typeof e.options.time.format&&e.options.time.format.call?(console.warn("options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale"),e.options.time.format(t)):tt(t,e.options.time.format)}});t.scaleService.registerScaleType("time",r,{position:"bottom",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm:ss a",hour:"MMM D, hA",day:"ll",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1}})}(e),function(t){var e=t.helpers;t.defaults.bar={hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}},t.controllers.bar=t.DatasetController.extend({dataElementType:t.elements.Rectangle,initialize:function(e,n){t.DatasetController.prototype.initialize.call(this,e,n),this.getMeta().bar=!0},getBarCount:function(){var t=this,n=0;return e.each(t.chart.data.datasets,(function(e,r){t.chart.getDatasetMeta(r).bar&&t.chart.isDatasetVisible(r)&&++n}),t),n},update:function(t){var n=this;e.each(n.getMeta().data,(function(e,r){n.updateElement(e,r,t)}),n)},updateElement:function(t,n,r){var i=this,a=i.getMeta(),o=i.getScaleForId(a.xAxisID),s=i.getScaleForId(a.yAxisID),l=s.getBasePixel(),u=i.chart.options.elements.rectangle,c=t.custom||{},d=i.getDataset();e.extend(t,{_xScale:o,_yScale:s,_datasetIndex:i.index,_index:n,_model:{x:i.calculateBarX(n,i.index),y:r?l:i.calculateBarY(n,i.index),label:i.chart.data.labels[n],datasetLabel:d.label,base:r?l:i.calculateBarBase(i.index,n),width:i.calculateBarWidth(n),backgroundColor:c.backgroundColor?c.backgroundColor:e.getValueAtIndexOrDefault(d.backgroundColor,n,u.backgroundColor),borderSkipped:c.borderSkipped?c.borderSkipped:u.borderSkipped,borderColor:c.borderColor?c.borderColor:e.getValueAtIndexOrDefault(d.borderColor,n,u.borderColor),borderWidth:c.borderWidth?c.borderWidth:e.getValueAtIndexOrDefault(d.borderWidth,n,u.borderWidth)}}),t.pivot()},calculateBarBase:function(t,e){var n=this,r=n.getMeta(),i=n.getScaleForId(r.yAxisID),a=0;if(i.options.stacked){for(var o=n.chart,s=o.data.datasets,l=Number(s[t].data[e]),u=0;u<t;u++){var c=s[u],d=o.getDatasetMeta(u);if(d.bar&&d.yAxisID===i.id&&o.isDatasetVisible(u)){var h=Number(c.data[e]);a+=l<0?Math.min(h,0):Math.max(h,0)}}return i.getPixelForValue(a)}return i.getBasePixel()},getRuler:function(t){var e,n=this,r=n.getMeta(),i=n.getScaleForId(r.xAxisID),a=n.getBarCount(),o=(e="category"===i.options.type?i.getPixelForTick(t+1)-i.getPixelForTick(t):i.width/i.ticks.length)*i.options.categoryPercentage,s=(e-e*i.options.categoryPercentage)/2,l=o/a;return i.ticks.length!==n.chart.data.labels.length&&(l*=i.ticks.length/n.chart.data.labels.length),{datasetCount:a,tickWidth:e,categoryWidth:o,categorySpacing:s,fullBarWidth:l,barWidth:l*i.options.barPercentage,barSpacing:l-l*i.options.barPercentage}},calculateBarWidth:function(t){var e=this.getScaleForId(this.getMeta().xAxisID);if(e.options.barThickness)return e.options.barThickness;var n=this.getRuler(t);return e.options.stacked?n.categoryWidth:n.barWidth},getBarIndex:function(t){var e,n=0;for(e=0;e<t;++e)this.chart.getDatasetMeta(e).bar&&this.chart.isDatasetVisible(e)&&++n;return n},calculateBarX:function(t,e){var n=this,r=n.getMeta(),i=n.getScaleForId(r.xAxisID),a=n.getBarIndex(e),o=n.getRuler(t),s=i.getPixelForValue(null,t,e,n.chart.isCombo);return s-=n.chart.isCombo?o.tickWidth/2:0,i.options.stacked?s+o.categoryWidth/2+o.categorySpacing:s+o.barWidth/2+o.categorySpacing+o.barWidth*a+o.barSpacing/2+o.barSpacing*a},calculateBarY:function(t,e){var n=this,r=n.getMeta(),i=n.getScaleForId(r.yAxisID),a=Number(n.getDataset().data[t]);if(i.options.stacked){for(var o=0,s=0,l=0;l<e;l++){var u=n.chart.data.datasets[l],c=n.chart.getDatasetMeta(l);if(c.bar&&c.yAxisID===i.id&&n.chart.isDatasetVisible(l)){var d=Number(u.data[t]);d<0?s+=d||0:o+=d||0}}return a<0?i.getPixelForValue(s+a):i.getPixelForValue(o+a)}return i.getPixelForValue(a)},draw:function(t){var n=this,r=t||1;e.each(n.getMeta().data,(function(t,e){var i=n.getDataset().data[e];null==i||isNaN(i)||t.transition(r).draw()}),n)},setHoverStyle:function(t){var n=this.chart.data.datasets[t._datasetIndex],r=t._index,i=t.custom||{},a=t._model;a.backgroundColor=i.hoverBackgroundColor?i.hoverBackgroundColor:e.getValueAtIndexOrDefault(n.hoverBackgroundColor,r,e.getHoverColor(a.backgroundColor)),a.borderColor=i.hoverBorderColor?i.hoverBorderColor:e.getValueAtIndexOrDefault(n.hoverBorderColor,r,e.getHoverColor(a.borderColor)),a.borderWidth=i.hoverBorderWidth?i.hoverBorderWidth:e.getValueAtIndexOrDefault(n.hoverBorderWidth,r,a.borderWidth)},removeHoverStyle:function(t){var n=this.chart.data.datasets[t._datasetIndex],r=t._index,i=t.custom||{},a=t._model,o=this.chart.options.elements.rectangle;a.backgroundColor=i.backgroundColor?i.backgroundColor:e.getValueAtIndexOrDefault(n.backgroundColor,r,o.backgroundColor),a.borderColor=i.borderColor?i.borderColor:e.getValueAtIndexOrDefault(n.borderColor,r,o.borderColor),a.borderWidth=i.borderWidth?i.borderWidth:e.getValueAtIndexOrDefault(n.borderWidth,r,o.borderWidth)}}),t.defaults.horizontalBar={hover:{mode:"label"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(t,e){var n="";return t.length>0&&(t[0].yLabel?n=t[0].yLabel:e.labels.length>0&&t[0].index<e.labels.length&&(n=e.labels[t[0].index])),n},label:function(t,e){return(e.datasets[t.datasetIndex].label||"")+": "+t.xLabel}}}},t.controllers.horizontalBar=t.controllers.bar.extend({updateElement:function(t,n,r){var i=this,a=i.getMeta(),o=i.getScaleForId(a.xAxisID),s=i.getScaleForId(a.yAxisID),l=o.getBasePixel(),u=t.custom||{},c=i.getDataset(),d=i.chart.options.elements.rectangle;e.extend(t,{_xScale:o,_yScale:s,_datasetIndex:i.index,_index:n,_model:{x:r?l:i.calculateBarX(n,i.index),y:i.calculateBarY(n,i.index),label:i.chart.data.labels[n],datasetLabel:c.label,base:r?l:i.calculateBarBase(i.index,n),height:i.calculateBarHeight(n),backgroundColor:u.backgroundColor?u.backgroundColor:e.getValueAtIndexOrDefault(c.backgroundColor,n,d.backgroundColor),borderSkipped:u.borderSkipped?u.borderSkipped:d.borderSkipped,borderColor:u.borderColor?u.borderColor:e.getValueAtIndexOrDefault(c.borderColor,n,d.borderColor),borderWidth:u.borderWidth?u.borderWidth:e.getValueAtIndexOrDefault(c.borderWidth,n,d.borderWidth)},draw:function(){var t=this._chart.ctx,e=this._view,n=e.height/2,r=e.y-n,i=e.y+n,a=e.base-(e.base-e.x),o=e.borderWidth/2;e.borderWidth&&(r+=o,i-=o,a+=o),t.beginPath(),t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,t.lineWidth=e.borderWidth;var s=[[e.base,i],[e.base,r],[a,r],[a,i]],l=["bottom","left","top","right"].indexOf(e.borderSkipped,0);function u(t){return s[(l+t)%4]}-1===l&&(l=0),t.moveTo.apply(t,u(0));for(var c=1;c<4;c++)t.lineTo.apply(t,u(c));t.fill(),e.borderWidth&&t.stroke()},inRange:function(t,e){var n=this._view,r=!1;return n&&(r=n.x<n.base?e>=n.y-n.height/2&&e<=n.y+n.height/2&&t>=n.x&&t<=n.base:e>=n.y-n.height/2&&e<=n.y+n.height/2&&t>=n.base&&t<=n.x),r}}),t.pivot()},calculateBarBase:function(t,e){var n=this,r=n.getMeta(),i=n.getScaleForId(r.xAxisID),a=0;if(i.options.stacked){for(var o=n.chart,s=o.data.datasets,l=Number(s[t].data[e]),u=0;u<t;u++){var c=s[u],d=o.getDatasetMeta(u);if(d.bar&&d.xAxisID===i.id&&o.isDatasetVisible(u)){var h=Number(c.data[e]);a+=l<0?Math.min(h,0):Math.max(h,0)}}return i.getPixelForValue(a)}return i.getBasePixel()},getRuler:function(t){var e,n=this,r=n.getMeta(),i=n.getScaleForId(r.yAxisID),a=n.getBarCount(),o=(e="category"===i.options.type?i.getPixelForTick(t+1)-i.getPixelForTick(t):i.width/i.ticks.length)*i.options.categoryPercentage,s=(e-e*i.options.categoryPercentage)/2,l=o/a;return i.ticks.length!==n.chart.data.labels.length&&(l*=i.ticks.length/n.chart.data.labels.length),{datasetCount:a,tickHeight:e,categoryHeight:o,categorySpacing:s,fullBarHeight:l,barHeight:l*i.options.barPercentage,barSpacing:l-l*i.options.barPercentage}},calculateBarHeight:function(t){var e=this,n=e.getScaleForId(e.getMeta().yAxisID);if(n.options.barThickness)return n.options.barThickness;var r=e.getRuler(t);return n.options.stacked?r.categoryHeight:r.barHeight},calculateBarX:function(t,e){var n=this,r=n.getMeta(),i=n.getScaleForId(r.xAxisID),a=Number(n.getDataset().data[t]);if(i.options.stacked){for(var o=0,s=0,l=0;l<e;l++){var u=n.chart.data.datasets[l],c=n.chart.getDatasetMeta(l);if(c.bar&&c.xAxisID===i.id&&n.chart.isDatasetVisible(l)){var d=Number(u.data[t]);d<0?s+=d||0:o+=d||0}}return a<0?i.getPixelForValue(s+a):i.getPixelForValue(o+a)}return i.getPixelForValue(a)},calculateBarY:function(t,e){var n=this,r=n.getMeta(),i=n.getScaleForId(r.yAxisID),a=n.getBarIndex(e),o=n.getRuler(t),s=i.getPixelForValue(null,t,e,n.chart.isCombo);return s-=n.chart.isCombo?o.tickHeight/2:0,i.options.stacked?s+o.categoryHeight/2+o.categorySpacing:s+o.barHeight/2+o.categorySpacing+o.barHeight*a+o.barSpacing/2+o.barSpacing*a}})}(e),function(t){var e=t.helpers;t.defaults.bubble={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(t,e){var n=e.datasets[t.datasetIndex].label||"",r=e.datasets[t.datasetIndex].data[t.index];return n+": ("+r.x+", "+r.y+", "+r.r+")"}}}},t.controllers.bubble=t.DatasetController.extend({dataElementType:t.elements.Point,update:function(t){var n=this,r=n.getMeta().data;e.each(r,(function(e,r){n.updateElement(e,r,t)}))},updateElement:function(n,r,i){var a=this,o=a.getMeta(),s=a.getScaleForId(o.xAxisID),l=a.getScaleForId(o.yAxisID),u=n.custom||{},c=a.getDataset(),d=c.data[r],h=a.chart.options.elements.point,f=a.index;e.extend(n,{_xScale:s,_yScale:l,_datasetIndex:f,_index:r,_model:{x:i?s.getPixelForDecimal(.5):s.getPixelForValue("object"==typeof d?d:NaN,r,f,a.chart.isCombo),y:i?l.getBasePixel():l.getPixelForValue(d,r,f),radius:i?0:u.radius?u.radius:a.getRadius(d),hitRadius:u.hitRadius?u.hitRadius:e.getValueAtIndexOrDefault(c.hitRadius,r,h.hitRadius)}}),t.DatasetController.prototype.removeHoverStyle.call(a,n,h);var p=n._model;p.skip=u.skip?u.skip:isNaN(p.x)||isNaN(p.y),n.pivot()},getRadius:function(t){return t.r||this.chart.options.elements.point.radius},setHoverStyle:function(n){var r=this;t.DatasetController.prototype.setHoverStyle.call(r,n);var i=r.chart.data.datasets[n._datasetIndex],a=n._index,o=n.custom||{};n._model.radius=o.hoverRadius?o.hoverRadius:e.getValueAtIndexOrDefault(i.hoverRadius,a,r.chart.options.elements.point.hoverRadius)+r.getRadius(i.data[a])},removeHoverStyle:function(e){var n=this;t.DatasetController.prototype.removeHoverStyle.call(n,e,n.chart.options.elements.point);var r=n.chart.data.datasets[e._datasetIndex].data[e._index],i=e.custom||{};e._model.radius=i.radius?i.radius:n.getRadius(r)}})}(e),function(t){var e=t.helpers,n=t.defaults;n.doughnut={animation:{animateRotate:!0,animateScale:!1},aspectRatio:1,hover:{mode:"single"},legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var n=t.data,r=n.datasets,i=n.labels;if(r.length)for(var a=0;a<r[0].data.length;++a)e.push('<li><span style="background-color:'+r[0].backgroundColor[a]+'"></span>'),i[a]&&e.push(i[a]),e.push("</li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var n=t.data;return n.labels.length&&n.datasets.length?n.labels.map((function(r,i){var a=t.getDatasetMeta(0),o=n.datasets[0],s=a.data[i],l=s&&s.custom||{},u=e.getValueAtIndexOrDefault,c=t.options.elements.arc;return{text:r,fillStyle:l.backgroundColor?l.backgroundColor:u(o.backgroundColor,i,c.backgroundColor),strokeStyle:l.borderColor?l.borderColor:u(o.borderColor,i,c.borderColor),lineWidth:l.borderWidth?l.borderWidth:u(o.borderWidth,i,c.borderWidth),hidden:isNaN(o.data[i])||a.data[i].hidden,index:i}})):[]}},onClick:function(t,e){var n,r,i,a=e.index,o=this.chart;for(n=0,r=(o.data.datasets||[]).length;n<r;++n)(i=o.getDatasetMeta(n)).data[a]&&(i.data[a].hidden=!i.data[a].hidden);o.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+e.datasets[t.datasetIndex].data[t.index]}}}},n.pie=e.clone(n.doughnut),e.extend(n.pie,{cutoutPercentage:0}),t.controllers.doughnut=t.controllers.pie=t.DatasetController.extend({dataElementType:t.elements.Arc,linkScales:e.noop,getRingIndex:function(t){for(var e=0,n=0;n<t;++n)this.chart.isDatasetVisible(n)&&++e;return e},update:function(t){var n=this,r=n.chart,i=r.chartArea,a=r.options,o=a.elements.arc,s=i.right-i.left-o.borderWidth,l=i.bottom-i.top-o.borderWidth,u=Math.min(s,l),c={x:0,y:0},d=n.getMeta(),h=a.cutoutPercentage,f=a.circumference;if(f<2*Math.PI){var p=a.rotation%(2*Math.PI),g=(p+=2*Math.PI*(p>=Math.PI?-1:p<-Math.PI?1:0))+f,m={x:Math.cos(p),y:Math.sin(p)},v={x:Math.cos(g),y:Math.sin(g)},y=p<=0&&0<=g||p<=2*Math.PI&&2*Math.PI<=g,b=p<=.5*Math.PI&&.5*Math.PI<=g||p<=2.5*Math.PI&&2.5*Math.PI<=g,S=p<=-Math.PI&&-Math.PI<=g||p<=Math.PI&&Math.PI<=g,w=p<=.5*-Math.PI&&.5*-Math.PI<=g||p<=1.5*Math.PI&&1.5*Math.PI<=g,T=h/100,x={x:S?-1:Math.min(m.x*(m.x<0?1:T),v.x*(v.x<0?1:T)),y:w?-1:Math.min(m.y*(m.y<0?1:T),v.y*(v.y<0?1:T))},_={x:y?1:Math.max(m.x*(m.x>0?1:T),v.x*(v.x>0?1:T)),y:b?1:Math.max(m.y*(m.y>0?1:T),v.y*(v.y>0?1:T))},k={width:.5*(_.x-x.x),height:.5*(_.y-x.y)};u=Math.min(s/k.width,l/k.height),c={x:-.5*(_.x+x.x),y:-.5*(_.y+x.y)}}r.borderWidth=n.getMaxBorderWidth(d.data),r.outerRadius=Math.max((u-r.borderWidth)/2,0),r.innerRadius=Math.max(h?r.outerRadius/100*h:1,0),r.radiusLength=(r.outerRadius-r.innerRadius)/r.getVisibleDatasetCount(),r.offsetX=c.x*r.outerRadius,r.offsetY=c.y*r.outerRadius,d.total=n.calculateTotal(),n.outerRadius=r.outerRadius-r.radiusLength*n.getRingIndex(n.index),n.innerRadius=n.outerRadius-r.radiusLength,e.each(d.data,(function(e,r){n.updateElement(e,r,t)}))},updateElement:function(t,n,r){var i=this,a=i.chart,o=a.chartArea,s=a.options,l=s.animation,u=(o.left+o.right)/2,c=(o.top+o.bottom)/2,d=s.rotation,h=s.rotation,f=i.getDataset(),p=r&&l.animateRotate||t.hidden?0:i.calculateCircumference(f.data[n])*(s.circumference/(2*Math.PI)),g=r&&l.animateScale?0:i.innerRadius,m=r&&l.animateScale?0:i.outerRadius,v=e.getValueAtIndexOrDefault;e.extend(t,{_datasetIndex:i.index,_index:n,_model:{x:u+a.offsetX,y:c+a.offsetY,startAngle:d,endAngle:h,circumference:p,outerRadius:m,innerRadius:g,label:v(f.label,n,a.data.labels[n])}});var y=t._model;this.removeHoverStyle(t),r&&l.animateRotate||(y.startAngle=0===n?s.rotation:i.getMeta().data[n-1]._model.endAngle,y.endAngle=y.startAngle+y.circumference),t.pivot()},removeHoverStyle:function(e){t.DatasetController.prototype.removeHoverStyle.call(this,e,this.chart.options.elements.arc)},calculateTotal:function(){var t,n=this.getDataset(),r=this.getMeta(),i=0;return e.each(r.data,(function(e,r){t=n.data[r],isNaN(t)||e.hidden||(i+=Math.abs(t))})),i},calculateCircumference:function(t){var e=this.getMeta().total;return e>0&&!isNaN(t)?2*Math.PI*(t/e):0},getMaxBorderWidth:function(t){for(var e,n,r=0,i=this.index,a=t.length,o=0;o<a;o++)e=t[o]._model?t[o]._model.borderWidth:0,r=(n=t[o]._chart?t[o]._chart.config.data.datasets[i].hoverBorderWidth:0)>(r=e>r?e:r)?n:r;return r}})}(e),function(t){var e=t.helpers;function n(t,n){return e.getValueOrDefault(t.showLine,n.showLines)}t.defaults.line={showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}},t.controllers.line=t.DatasetController.extend({datasetElementType:t.elements.Line,dataElementType:t.elements.Point,addElementAndReset:function(e){var r=this,i=r.chart.options,a=r.getMeta();t.DatasetController.prototype.addElementAndReset.call(r,e),n(r.getDataset(),i)&&0!==a.dataset._model.tension&&r.updateBezierControlPoints()},update:function(t){var r,i,a,o=this,s=o.getMeta(),l=s.dataset,u=s.data||[],c=o.chart.options,d=c.elements.line,h=o.getScaleForId(s.yAxisID),f=o.getDataset(),p=n(f,c);for(p&&(a=l.custom||{},void 0!==f.tension&&void 0===f.lineTension&&(f.lineTension=f.tension),l._scale=h,l._datasetIndex=o.index,l._children=u,l._model={spanGaps:f.spanGaps?f.spanGaps:c.spanGaps,tension:a.tension?a.tension:e.getValueOrDefault(f.lineTension,d.tension),backgroundColor:a.backgroundColor?a.backgroundColor:f.backgroundColor||d.backgroundColor,borderWidth:a.borderWidth?a.borderWidth:f.borderWidth||d.borderWidth,borderColor:a.borderColor?a.borderColor:f.borderColor||d.borderColor,borderCapStyle:a.borderCapStyle?a.borderCapStyle:f.borderCapStyle||d.borderCapStyle,borderDash:a.borderDash?a.borderDash:f.borderDash||d.borderDash,borderDashOffset:a.borderDashOffset?a.borderDashOffset:f.borderDashOffset||d.borderDashOffset,borderJoinStyle:a.borderJoinStyle?a.borderJoinStyle:f.borderJoinStyle||d.borderJoinStyle,fill:a.fill?a.fill:void 0!==f.fill?f.fill:d.fill,steppedLine:a.steppedLine?a.steppedLine:e.getValueOrDefault(f.steppedLine,d.stepped),cubicInterpolationMode:a.cubicInterpolationMode?a.cubicInterpolationMode:e.getValueOrDefault(f.cubicInterpolationMode,d.cubicInterpolationMode),scaleTop:h.top,scaleBottom:h.bottom,scaleZero:h.getBasePixel()},l.pivot()),r=0,i=u.length;r<i;++r)o.updateElement(u[r],r,t);for(p&&0!==l._model.tension&&o.updateBezierControlPoints(),r=0,i=u.length;r<i;++r)u[r].pivot()},getPointBackgroundColor:function(t,n){var r=this.chart.options.elements.point.backgroundColor,i=this.getDataset(),a=t.custom||{};return a.backgroundColor?r=a.backgroundColor:i.pointBackgroundColor?r=e.getValueAtIndexOrDefault(i.pointBackgroundColor,n,r):i.backgroundColor&&(r=i.backgroundColor),r},getPointBorderColor:function(t,n){var r=this.chart.options.elements.point.borderColor,i=this.getDataset(),a=t.custom||{};return a.borderColor?r=a.borderColor:i.pointBorderColor?r=e.getValueAtIndexOrDefault(i.pointBorderColor,n,r):i.borderColor&&(r=i.borderColor),r},getPointBorderWidth:function(t,n){var r=this.chart.options.elements.point.borderWidth,i=this.getDataset(),a=t.custom||{};return a.borderWidth?r=a.borderWidth:i.pointBorderWidth?r=e.getValueAtIndexOrDefault(i.pointBorderWidth,n,r):i.borderWidth&&(r=i.borderWidth),r},updateElement:function(t,n,r){var i,a,o=this,s=o.getMeta(),l=t.custom||{},u=o.getDataset(),c=o.index,d=u.data[n],h=o.getScaleForId(s.yAxisID),f=o.getScaleForId(s.xAxisID),p=o.chart.options.elements.point,g=1===(o.chart.data.labels||[]).length||1===u.data.length||o.chart.isCombo;void 0!==u.radius&&void 0===u.pointRadius&&(u.pointRadius=u.radius),void 0!==u.hitRadius&&void 0===u.pointHitRadius&&(u.pointHitRadius=u.hitRadius),i=f.getPixelForValue("object"==typeof d?d:NaN,n,c,g),a=r?h.getBasePixel():o.calculatePointY(d,n,c),t._xScale=f,t._yScale=h,t._datasetIndex=c,t._index=n,t._model={x:i,y:a,skip:l.skip||isNaN(i)||isNaN(a),radius:l.radius||e.getValueAtIndexOrDefault(u.pointRadius,n,p.radius),pointStyle:l.pointStyle||e.getValueAtIndexOrDefault(u.pointStyle,n,p.pointStyle),backgroundColor:o.getPointBackgroundColor(t,n),borderColor:o.getPointBorderColor(t,n),borderWidth:o.getPointBorderWidth(t,n),tension:s.dataset._model?s.dataset._model.tension:0,steppedLine:!!s.dataset._model&&s.dataset._model.steppedLine,hitRadius:l.hitRadius||e.getValueAtIndexOrDefault(u.pointHitRadius,n,p.hitRadius)}},calculatePointY:function(t,e,n){var r,i,a,o=this,s=o.chart,l=o.getMeta(),u=o.getScaleForId(l.yAxisID),c=0,d=0;if(u.options.stacked){for(r=0;r<n;r++)if(i=s.data.datasets[r],"line"===(a=s.getDatasetMeta(r)).type&&a.yAxisID===u.id&&s.isDatasetVisible(r)){var h=Number(u.getRightValue(i.data[e]));h<0?d+=h||0:c+=h||0}var f=Number(u.getRightValue(t));return f<0?u.getPixelForValue(d+f):u.getPixelForValue(c+f)}return u.getPixelForValue(t)},updateBezierControlPoints:function(){var t,n,r,i,a=this,o=a.getMeta(),s=a.chart.chartArea,l=o.data||[];function u(t,e,n){return Math.max(Math.min(t,n),e)}if(o.dataset._model.spanGaps&&(l=l.filter((function(t){return!t._model.skip}))),"monotone"===o.dataset._model.cubicInterpolationMode)e.splineCurveMonotone(l);else for(t=0,n=l.length;t<n;++t)r=l[t]._model,i=e.splineCurve(e.previousItem(l,t)._model,r,e.nextItem(l,t)._model,o.dataset._model.tension),r.controlPointPreviousX=i.previous.x,r.controlPointPreviousY=i.previous.y,r.controlPointNextX=i.next.x,r.controlPointNextY=i.next.y;if(a.chart.options.elements.line.capBezierPoints)for(t=0,n=l.length;t<n;++t)(r=l[t]._model).controlPointPreviousX=u(r.controlPointPreviousX,s.left,s.right),r.controlPointPreviousY=u(r.controlPointPreviousY,s.top,s.bottom),r.controlPointNextX=u(r.controlPointNextX,s.left,s.right),r.controlPointNextY=u(r.controlPointNextY,s.top,s.bottom)},draw:function(t){var e,r,i=this,a=i.getMeta(),o=a.data||[],s=t||1;for(e=0,r=o.length;e<r;++e)o[e].transition(s);for(n(i.getDataset(),i.chart.options)&&a.dataset.transition(s).draw(),e=0,r=o.length;e<r;++e)o[e].draw()},setHoverStyle:function(t){var n=this.chart.data.datasets[t._datasetIndex],r=t._index,i=t.custom||{},a=t._model;a.radius=i.hoverRadius||e.getValueAtIndexOrDefault(n.pointHoverRadius,r,this.chart.options.elements.point.hoverRadius),a.backgroundColor=i.hoverBackgroundColor||e.getValueAtIndexOrDefault(n.pointHoverBackgroundColor,r,e.getHoverColor(a.backgroundColor)),a.borderColor=i.hoverBorderColor||e.getValueAtIndexOrDefault(n.pointHoverBorderColor,r,e.getHoverColor(a.borderColor)),a.borderWidth=i.hoverBorderWidth||e.getValueAtIndexOrDefault(n.pointHoverBorderWidth,r,a.borderWidth)},removeHoverStyle:function(t){var n=this,r=n.chart.data.datasets[t._datasetIndex],i=t._index,a=t.custom||{},o=t._model;void 0!==r.radius&&void 0===r.pointRadius&&(r.pointRadius=r.radius),o.radius=a.radius||e.getValueAtIndexOrDefault(r.pointRadius,i,n.chart.options.elements.point.radius),o.backgroundColor=n.getPointBackgroundColor(t,i),o.borderColor=n.getPointBorderColor(t,i),o.borderWidth=n.getPointBorderWidth(t,i)}})}(e),function(t){var e=t.helpers;t.defaults.polarArea={scale:{type:"radialLinear",lineArc:!0,ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,aspectRatio:1,legendCallback:function(t){var e=[];e.push('<ul class="'+t.id+'-legend">');var n=t.data,r=n.datasets,i=n.labels;if(r.length)for(var a=0;a<r[0].data.length;++a)e.push('<li><span style="background-color:'+r[0].backgroundColor[a]+'">'),i[a]&&e.push(i[a]),e.push("</span></li>");return e.push("</ul>"),e.join("")},legend:{labels:{generateLabels:function(t){var n=t.data;return n.labels.length&&n.datasets.length?n.labels.map((function(r,i){var a=t.getDatasetMeta(0),o=n.datasets[0],s=a.data[i].custom||{},l=e.getValueAtIndexOrDefault,u=t.options.elements.arc;return{text:r,fillStyle:s.backgroundColor?s.backgroundColor:l(o.backgroundColor,i,u.backgroundColor),strokeStyle:s.borderColor?s.borderColor:l(o.borderColor,i,u.borderColor),lineWidth:s.borderWidth?s.borderWidth:l(o.borderWidth,i,u.borderWidth),hidden:isNaN(o.data[i])||a.data[i].hidden,index:i}})):[]}},onClick:function(t,e){var n,r,i,a=e.index,o=this.chart;for(n=0,r=(o.data.datasets||[]).length;n<r;++n)(i=o.getDatasetMeta(n)).data[a].hidden=!i.data[a].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(t,e){return e.labels[t.index]+": "+t.yLabel}}}},t.controllers.polarArea=t.DatasetController.extend({dataElementType:t.elements.Arc,linkScales:e.noop,update:function(t){var n=this,r=n.chart,i=r.chartArea,a=n.getMeta(),o=r.options,s=o.elements.arc,l=Math.min(i.right-i.left,i.bottom-i.top);r.outerRadius=Math.max((l-s.borderWidth/2)/2,0),r.innerRadius=Math.max(o.cutoutPercentage?r.outerRadius/100*o.cutoutPercentage:1,0),r.radiusLength=(r.outerRadius-r.innerRadius)/r.getVisibleDatasetCount(),n.outerRadius=r.outerRadius-r.radiusLength*n.index,n.innerRadius=n.outerRadius-r.radiusLength,a.count=n.countVisibleElements(),e.each(a.data,(function(e,r){n.updateElement(e,r,t)}))},updateElement:function(t,n,r){for(var i=this,a=i.chart,o=i.getDataset(),s=a.options,l=s.animation,u=a.scale,c=e.getValueAtIndexOrDefault,d=a.data.labels,h=i.calculateCircumference(o.data[n]),f=u.xCenter,p=u.yCenter,g=0,m=i.getMeta(),v=0;v<n;++v)isNaN(o.data[v])||m.data[v].hidden||++g;var y=s.startAngle,b=t.hidden?0:u.getDistanceFromCenterForValue(o.data[n]),S=y+h*g,w=S+(t.hidden?0:h),T=l.animateScale?0:u.getDistanceFromCenterForValue(o.data[n]);e.extend(t,{_datasetIndex:i.index,_index:n,_scale:u,_model:{x:f,y:p,innerRadius:0,outerRadius:r?T:b,startAngle:r&&l.animateRotate?y:S,endAngle:r&&l.animateRotate?y:w,label:c(d,n,d[n])}}),i.removeHoverStyle(t),t.pivot()},removeHoverStyle:function(e){t.DatasetController.prototype.removeHoverStyle.call(this,e,this.chart.options.elements.arc)},countVisibleElements:function(){var t=this.getDataset(),n=this.getMeta(),r=0;return e.each(n.data,(function(e,n){isNaN(t.data[n])||e.hidden||r++})),r},calculateCircumference:function(t){var e=this.getMeta().count;return e>0&&!isNaN(t)?2*Math.PI/e:0}})}(e),function(t){var e=t.helpers;t.defaults.radar={scale:{type:"radialLinear"},elements:{line:{tension:0}}},t.controllers.radar=t.DatasetController.extend({datasetElementType:t.elements.Line,dataElementType:t.elements.Point,linkScales:e.noop,addElementAndReset:function(e){t.DatasetController.prototype.addElementAndReset.call(this,e),this.updateBezierControlPoints()},update:function(t){var n=this,r=n.getMeta(),i=r.dataset,a=r.data,o=i.custom||{},s=n.getDataset(),l=n.chart.options.elements.line,u=n.chart.scale;void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),e.extend(r.dataset,{_datasetIndex:n.index,_children:a,_loop:!0,_model:{tension:o.tension?o.tension:e.getValueOrDefault(s.lineTension,l.tension),backgroundColor:o.backgroundColor?o.backgroundColor:s.backgroundColor||l.backgroundColor,borderWidth:o.borderWidth?o.borderWidth:s.borderWidth||l.borderWidth,borderColor:o.borderColor?o.borderColor:s.borderColor||l.borderColor,fill:o.fill?o.fill:void 0!==s.fill?s.fill:l.fill,borderCapStyle:o.borderCapStyle?o.borderCapStyle:s.borderCapStyle||l.borderCapStyle,borderDash:o.borderDash?o.borderDash:s.borderDash||l.borderDash,borderDashOffset:o.borderDashOffset?o.borderDashOffset:s.borderDashOffset||l.borderDashOffset,borderJoinStyle:o.borderJoinStyle?o.borderJoinStyle:s.borderJoinStyle||l.borderJoinStyle,scaleTop:u.top,scaleBottom:u.bottom,scaleZero:u.getBasePosition()}}),r.dataset.pivot(),e.each(a,(function(e,r){n.updateElement(e,r,t)}),n),n.updateBezierControlPoints()},updateElement:function(t,n,r){var i=this,a=t.custom||{},o=i.getDataset(),s=i.chart.scale,l=i.chart.options.elements.point,u=s.getPointPositionForValue(n,o.data[n]);e.extend(t,{_datasetIndex:i.index,_index:n,_scale:s,_model:{x:r?s.xCenter:u.x,y:r?s.yCenter:u.y,tension:a.tension?a.tension:e.getValueOrDefault(o.tension,i.chart.options.elements.line.tension),radius:a.radius?a.radius:e.getValueAtIndexOrDefault(o.pointRadius,n,l.radius),backgroundColor:a.backgroundColor?a.backgroundColor:e.getValueAtIndexOrDefault(o.pointBackgroundColor,n,l.backgroundColor),borderColor:a.borderColor?a.borderColor:e.getValueAtIndexOrDefault(o.pointBorderColor,n,l.borderColor),borderWidth:a.borderWidth?a.borderWidth:e.getValueAtIndexOrDefault(o.pointBorderWidth,n,l.borderWidth),pointStyle:a.pointStyle?a.pointStyle:e.getValueAtIndexOrDefault(o.pointStyle,n,l.pointStyle),hitRadius:a.hitRadius?a.hitRadius:e.getValueAtIndexOrDefault(o.hitRadius,n,l.hitRadius)}}),t._model.skip=a.skip?a.skip:isNaN(t._model.x)||isNaN(t._model.y)},updateBezierControlPoints:function(){var t=this.chart.chartArea,n=this.getMeta();e.each(n.data,(function(r,i){var a=r._model,o=e.splineCurve(e.previousItem(n.data,i,!0)._model,a,e.nextItem(n.data,i,!0)._model,a.tension);a.controlPointPreviousX=Math.max(Math.min(o.previous.x,t.right),t.left),a.controlPointPreviousY=Math.max(Math.min(o.previous.y,t.bottom),t.top),a.controlPointNextX=Math.max(Math.min(o.next.x,t.right),t.left),a.controlPointNextY=Math.max(Math.min(o.next.y,t.bottom),t.top),r.pivot()}))},draw:function(t){var n=this.getMeta(),r=t||1;e.each(n.data,(function(t){t.transition(r)})),n.dataset.transition(r).draw(),e.each(n.data,(function(t){t.draw()}))},setHoverStyle:function(t){var n=this.chart.data.datasets[t._datasetIndex],r=t.custom||{},i=t._index,a=t._model;a.radius=r.hoverRadius?r.hoverRadius:e.getValueAtIndexOrDefault(n.pointHoverRadius,i,this.chart.options.elements.point.hoverRadius),a.backgroundColor=r.hoverBackgroundColor?r.hoverBackgroundColor:e.getValueAtIndexOrDefault(n.pointHoverBackgroundColor,i,e.getHoverColor(a.backgroundColor)),a.borderColor=r.hoverBorderColor?r.hoverBorderColor:e.getValueAtIndexOrDefault(n.pointHoverBorderColor,i,e.getHoverColor(a.borderColor)),a.borderWidth=r.hoverBorderWidth?r.hoverBorderWidth:e.getValueAtIndexOrDefault(n.pointHoverBorderWidth,i,a.borderWidth)},removeHoverStyle:function(t){var n=this.chart.data.datasets[t._datasetIndex],r=t.custom||{},i=t._index,a=t._model,o=this.chart.options.elements.point;a.radius=r.radius?r.radius:e.getValueAtIndexOrDefault(n.radius,i,o.radius),a.backgroundColor=r.backgroundColor?r.backgroundColor:e.getValueAtIndexOrDefault(n.pointBackgroundColor,i,o.backgroundColor),a.borderColor=r.borderColor?r.borderColor:e.getValueAtIndexOrDefault(n.pointBorderColor,i,o.borderColor),a.borderWidth=r.borderWidth?r.borderWidth:e.getValueAtIndexOrDefault(n.pointBorderWidth,i,o.borderWidth)}})}(e),function(t){t.Bar=function(e,n){return n.type="bar",new t(e,n)}}(e),function(t){t.Bubble=function(e,n){return n.type="bubble",new t(e,n)}}(e),function(t){t.Doughnut=function(e,n){return n.type="doughnut",new t(e,n)}}(e),function(t){t.Line=function(e,n){return n.type="line",new t(e,n)}}(e),function(t){t.PolarArea=function(e,n){return n.type="polarArea",new t(e,n)}}(e),function(t){t.Radar=function(e,n){return n.options=t.helpers.configMerge({aspectRatio:1},n.options),n.type="radar",new t(e,n)}}(e),function(t){t.defaults.scatter={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-1"}],yAxes:[{type:"linear",position:"left",id:"y-axis-1"}]},tooltips:{callbacks:{title:function(){return""},label:function(t){return"("+t.xLabel+", "+t.yLabel+")"}}}},t.controllers.scatter=t.controllers.line,t.Scatter=function(e,n){return n.type="scatter",new t(e,n)}}(e),window.Chart=t.exports=e}));n((function(t,e){
/*!
   * angular-chart.js - An angular.js wrapper for Chart.js
   * http://jtblin.github.io/angular-chart.js/
   * Version: 1.1.1
   *
   * Copyright 2016 Jerome Touffe-Blin
   * Released under the BSD-2-Clause license
   * https://github.com/jtblin/angular-chart.js/blob/master/LICENSE
   */
t.exports=function(t,e){e.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",e.defaults.global.tooltips.mode="label",e.defaults.global.elements.line.borderWidth=2,e.defaults.global.elements.rectangle.borderWidth=2,e.defaults.global.legend.display=!1,e.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var n="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return n&&(e.defaults.global.animation=!1),t.module("chart.js",[]).provider("ChartJs",r).factory("ChartJsFactory",["ChartJs","$timeout",i]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(t){return new t("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("polarArea")}]).directive("chartBubble",["ChartJsFactory",function(t){return new t("bubble")}]).name;function r(){var n={responsive:!0},r={Chart:e,getOptions:function(e){var r=e&&n[e]||{};return t.extend({},n,r)}};this.setOptions=function(e,i){i?n[e]=t.merge(n[e]||{},i):(i=e,n=t.merge(n,i)),t.merge(r.Chart.defaults,n)},this.$get=function(){return r}}function i(r,i){return function(e){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartDatasetOverride:"=?"},link:function(r,i){function s(t,n){if(t&&t.length&&(!Array.isArray(t[0])||t[0].length)){var s=e||r.chartType;if(s)return r.chart&&o(t,n)?_(t,r):void a(s,r,i)}else $(r)}function l(n,o){if(!k(n)&&!t.equals(n,o)){var s=e||r.chartType;s&&a(s,r,i)}}function u(e,n){k(e)||t.equals(e,n)||a(e,r,i)}n&&window.G_vmlCanvasManager.initElement(i[0]),r.$watch("chartData",s,!0),r.$watch("chartSeries",l,!0),r.$watch("chartLabels",l,!0),r.$watch("chartOptions",l,!0),r.$watch("chartColors",l,!0),r.$watch("chartDatasetOverride",l,!0),r.$watch("chartType",u,!1),r.$on("$destroy",(function(){$(r)})),r.$on("$resize",(function(){r.chart&&r.chart.resize()}))}}};function a(t,e,n){var i=T(t,e);if(v(e)&&E(t,e,n,i)){var a=n[0],o=a.getContext("2d");e.chartGetColor=y(e);var s=b(t,e);$(e),e.chart=new r.Chart(o,{type:t,data:s,options:i}),e.$emit("chart-create",e.chart),x(a,e)}}function o(t,e){return!!(t&&e&&t.length&&e.length)&&(Array.isArray(t[0])?t.length===e.length&&t.every((function(t,n){return t.length===e[n].length})):e.reduce(s,0)>0&&t.length===e.length)}function s(t,e){return t+e}function l(e,n,r){var i={point:void 0,points:void 0};return function(a){var o=e.chart.getElementAtEvent||e.chart.getPointAtEvent,s=e.chart.getElementsAtEvent||e.chart.getPointsAtEvent;if(s){var l=s.call(e.chart,a),u=o?o.call(e.chart,a)[0]:void 0;!1!==r&&(t.equals(i.points,l)||t.equals(i.point,u))||(i.point=u,i.points=l,e[n](l,a,u))}}}function u(n,i){for(var a=t.copy(i.chartColors||r.getOptions(n).chartColors||e.defaults.global.colors),o=a.length<i.chartData.length;a.length<i.chartData.length;)a.push(i.chartGetColor());return o&&(i.chartColors=a),a.map(c)}function c(t){return"string"==typeof t&&"r"===t[0]?h(m(t)):"string"==typeof t&&"#"===t[0]?h(g(t.substr(1))):"object"==typeof t&&null!==t?t:d()}function d(){return h([f(0,255),f(0,255),f(0,255)])}function h(t){var e=t[3]||1;return{backgroundColor:p(t=t.slice(0,3),.2),pointBackgroundColor:p(t,e),pointHoverBackgroundColor:p(t,.8),borderColor:p(t,e),pointBorderColor:"#fff",pointHoverBorderColor:p(t,e)}}function f(t,e){return Math.floor(Math.random()*(e-t+1))+t}function p(t,e){return n?"rgb("+t.join(",")+")":"rgba("+t.concat(e).join(",")+")"}function g(t){var e=parseInt(t,16);return[e>>16&255,e>>8&255,255&e]}function m(t){var e=t.match(/^rgba?\(([\d,.]+)\)$/);if(!e)throw new Error("Cannot parse rgb value");return(t=e[1].split(",")).map(Number)}function v(t){return t.chartData&&t.chartData.length}function y(t){return"function"==typeof t.chartGetColor?t.chartGetColor:d}function b(t,e){var n=u(t,e);return Array.isArray(e.chartData[0])?S(e.chartLabels,e.chartData,e.chartSeries||[],n,e.chartDatasetOverride):w(e.chartLabels,e.chartData,n,e.chartDatasetOverride)}function S(e,n,r,i,a){return{labels:e,datasets:n.map((function(e,n){var o=t.extend({},i[n],{label:r[n],data:e});return a&&a.length>=n&&t.merge(o,a[n]),o}))}}function w(e,n,r,i){var a={labels:e,datasets:[{data:n,backgroundColor:r.map((function(t){return t.pointBackgroundColor})),hoverBackgroundColor:r.map((function(t){return t.backgroundColor}))}]};return i&&t.merge(a.datasets[0],i),a}function T(e,n){return t.extend({},r.getOptions(e),n.chartOptions)}function x(e,n){e.onclick=n.chartClick?l(n,"chartClick",!1):t.noop,e.onmousemove=n.chartHover?l(n,"chartHover",!0):t.noop}function _(t,e){Array.isArray(e.chartData[0])?e.chart.data.datasets.forEach((function(e,n){e.data=t[n]})):e.chart.data.datasets[0].data=t,e.chart.update(),e.$emit("chart-update",e.chart)}function k(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}function E(t,e,n,r){return!r.responsive||0!==n[0].clientHeight||(i((function(){a(t,e,n)}),50,!1),!1)}function $(t){t.chart&&(t.chart.destroy(),t.$emit("chart-destroy",t.chart))}}}("undefined"!=typeof angular?angular:i,"undefined"!=typeof Chart?Chart:et)}));
/*!
   * @license angularjs-gauge - A Gauge directive for Angular 1.x apps and dashboards
   * 
   * version: 2.2.0
   *
   * Copyright (c) 2016-2017 Ashish Chopra
   * Released under the MIT license
   * https://github.com/ashish-chopra/angular-gauge/blob/master/LICENSE
   */
!function(t){function e(){var e={size:200,value:void 0,min:0,max:100,cap:"butt",thick:6,type:"full",foregroundColor:"rgba(0, 150, 136, 1)",backgroundColor:"rgba(0, 0, 0, 0.1)",duration:1500,fractionSize:null,labelOnly:!1};this.setOptions=function(n){if(!n||!t.isObject(n))throw new Error("Invalid option type specified in the ngGaugeProvider");e=t.merge(e,n)};var n={getOptions:function(){return t.extend({},e)}};this.$get=function(){return n}}function n(e){var n=function(t,e){this.element=t.find("canvas")[0],this.text=t.find("span"),this.legend=t.find("b"),this.unit=t.find("u"),this.context=this.element.getContext("2d"),this.options=e,this.init()};return n.prototype={init:function(){this.setupStyles(),this.create(null,null)},setupStyles:function(){this.context.canvas.width=this.options.size,this.context.canvas.height=this.options.size,this.context.lineCap=this.options.cap,this.context.lineWidth=this.options.thick;var t=.22*this.options.size,e=this.options.size;this.text.css({display:"inline-block",fontWeight:"normal",width:"100%",position:"absolute",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",fontSize:t+"px",lineHeight:e+"px"}),this.unit.css({textDecoration:"none",fontSize:"0.6em",fontWeight:200,opacity:.8});var n=this.options.labelOnly?.8*t:this.options.size/13,r=this.options.labelOnly?e:5*n+parseInt(this.options.size);this.legend.css({display:"inline-block",width:"100%",position:"absolute",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",fontWeight:"normal",fontSize:n+"px",lineHeight:r+"px"})},create:function(t,e){var n,r,i=this,a=this.getType(),o=this.getBounds(a),s=this.getDuration(),l=this.getMin(),u=this.getMax(),c=this.clamp(this.getValue(),l,u),d=o.head,h=(o.tail-o.head)/(u-l),f=h*(c-l),p=o.tail,g=this.getForegroundColorByRange(c);function m(t){var a=(t=t||(new Date).getTime())-r,o=Math.min(a/s,1),l=d+(e?e*h:0)+f*o;i.drawShell(d,l,p,g),a<s?n=window.requestAnimationFrame((function(t){m(t)})):cancelAnimationFrame(n)}t&&e&&(f=h*t-h*e),requestAnimationFrame((function(t){r=t||(new Date).getTime(),m(t)}))},getBounds:function(t){var e,n;return"semi"==t?(e=Math.PI,n=2*Math.PI):"full"==t?(e=1.5*Math.PI,n=3.5*Math.PI):"arch"===t&&(e=.8*Math.PI,n=2.2*Math.PI),{head:e,tail:n}},drawShell:function(t,e,n,r){var i=this.context,a=this.getCenter(),o=this.getRadius(),s=r,l=this.getBackgroundColor();this.clear(),e=Math.max(e,t),e=Math.min(e,n),i.beginPath(),i.strokeStyle=l,i.arc(a.x,a.y,o,e,n,!1),i.stroke(),i.beginPath(),i.strokeStyle=s,i.arc(a.x,a.y,o,t,e,!1),i.stroke()},clear:function(){this.context.clearRect(0,0,this.getWidth(),this.getHeight())},update:function(t,e){this.create(t,e)},destroy:function(){this.clear()},getRadius:function(){return this.getCenter().x-this.getThickness()},getCenter:function(){return{x:this.getWidth()/2,y:this.getHeight()/2}},getValue:function(){return this.options.value},getMin:function(){return this.options.min},getMax:function(){return this.options.max},getWidth:function(){return this.context.canvas.width},getHeight:function(){return this.context.canvas.height},getThickness:function(){return this.options.thick},getBackgroundColor:function(){return this.options.backgroundColor},getForegroundColor:function(){return this.options.foregroundColor},getForegroundColorByRange:function(t){var e=Object.keys(this.options.thresholds).filter((function(e){return function(t){return null!=t&&!isNaN(parseFloat(t))&&!isNaN(Number(t))}(e)&&Number(e)<=t})).sort((function(t,e){return Number(t)>Number(e)})).reverse()[0];return void 0!==e&&this.options.thresholds[e].color||this.getForegroundColor()},getLineCap:function(){return this.options.cap},getType:function(){return this.options.type},getDuration:function(){return this.options.duration},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))}},{restrict:"E",replace:!0,template:'<div style="display:inline-block;text-align:center;position:relative;"><span ng-show="{{!labelOnly}}"><u>{{prepend}}</u><span ng-if="fractionSize === null">{{value | number}}</span><span ng-if="fractionSize !== null">{{value | number: fractionSize}}</span><u>{{append}}</u></span><b>{{ label }}</b><canvas></canvas></div>',scope:{append:"@?",backgroundColor:"@?",cap:"@?",foregroundColor:"@?",label:"@?",labelOnly:"@?",prepend:"@?",size:"@?",thick:"@?",type:"@?",duration:"@?",value:"=?",min:"=?",max:"=?",thresholds:"=?",fractionSize:"=?"},link:function(r,i){var a=e.getOptions();r.min=t.isDefined(r.min)?r.min:a.min,r.max=t.isDefined(r.max)?r.max:a.max,r.value=t.isDefined(r.value)?r.value:a.value,r.size=t.isDefined(r.size)?r.size:a.size,r.cap=t.isDefined(r.cap)?r.cap:a.cap,r.thick=t.isDefined(r.thick)?r.thick:a.thick,r.type=t.isDefined(r.type)?r.type:a.type,r.duration=t.isDefined(r.duration)?r.duration:a.duration,r.labelOnly=t.isDefined(r.labelOnly)?r.labelOnly:a.labelOnly,r.foregroundColor=t.isDefined(r.foregroundColor)?r.foregroundColor:a.foregroundColor,r.backgroundColor=t.isDefined(r.backgroundColor)?r.backgroundColor:a.backgroundColor,r.thresholds=t.isDefined(r.thresholds)?r.thresholds:{},r.fractionSize=t.isDefined(r.fractionSize)?r.fractionSize:a.fractionSize;var o=new n(i,r);function s(e,n){o&&t.isDefined(e)&&!t.equals(e,n)&&o.update(e,n)}function l(e,n){t.isDefined(e)&&!t.equals(e,n)&&(o.destroy(),o.init())}r.$watch("value",s,!1),r.$watch("min",s,!1),r.$watch("max",s,!1),r.$watch("cap",l,!1),r.$watch("thick",l,!1),r.$watch("type",l,!1),r.$watch("size",l,!1),r.$watch("duration",l,!1),r.$watch("foregroundColor",l,!1),r.$watch("backgroundColor",l,!1),r.$watch("thresholds",l,!1),r.$watch("fractionSize",s,!1),r.$on("$destroy",(function(){})),r.$on("$resize",(function(){}))}}}t.module("angularjs-gauge",[]).directive("ngGauge",n).provider("ngGauge",e),e.$inject=[],n.$inject=["ngGauge"]}(angular);n((function(e){!function(){function n(t){return angular.isUndefined(t)||null===t}function r(){try{return Q}catch(t){throw new Error("Please install moment via npm. Please reference to: https://github.com/urish/angular-moment")}}function a(t,e){return void 0===e&&(e=r()),t.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:null,format:null,statefulFilters:!0}).constant("moment",e).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null,fullDateThreshold:null,fullDateFormat:null,fullDateThresholdUnit:"day"}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig",function(e,r,i,a){return function(o,s,l){var u,c,d=null,h=a.withoutSuffix,f=a.titleFormat,p=a.fullDateThreshold,g=a.fullDateFormat,m=a.fullDateThresholdUnit,v=(new Date).getTime(),y=l.amTimeAgo,b="TIME"===s[0].nodeName.toUpperCase(),S=!s.attr("title");function w(){var t;if(c)t=c;else if(a.serverTime){var e=(new Date).getTime()-v+a.serverTime;t=r(e)}else t=r();return t}function T(){d&&(e.clearTimeout(d),d=null)}function x(t){var n=w().diff(t,m),r=p&&n>=p;if(r?s.text(t.format(g)):s.text(t.from(w(),h)),f&&S&&s.attr("title",t.format(f)),!r){var i=Math.abs(w().diff(t,"minute")),a=3600;i<1?a=1:i<60?a=30:i<180&&(a=300),d=e.setTimeout((function(){x(t)}),1e3*a)}}function _(t){b&&s.attr("datetime",t)}function k(){if(T(),u){var t=i.preprocessDate(u);x(t),_(t.toISOString())}}o.$watch(y,(function(t){if(n(t)||""===t)return T(),void(u&&(s.text(""),_(""),u=null));u=t,k()})),t.isDefined(l.amFrom)&&o.$watch(l.amFrom,(function(t){c=n(t)||""===t?null:r(t),k()})),t.isDefined(l.amWithoutSuffix)&&o.$watch(l.amWithoutSuffix,(function(t){"boolean"==typeof t?(h=t,k()):h=a.withoutSuffix})),l.$observe("amFullDateThreshold",(function(t){p=t,k()})),l.$observe("amFullDateFormat",(function(t){g=t,k()})),l.$observe("amFullDateThresholdUnit",(function(t){m=t,k()})),o.$on("$destroy",(function(){T()})),o.$on("amMoment:localeChanged",(function(){k()}))}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(e,n,r,i){var a=null;this.changeLocale=function(r,i){var a=e.locale(r,i);return t.isDefined(r)&&n.$broadcast("amMoment:localeChanged"),a},this.changeTimezone=function(t){e.tz&&e.tz.setDefault?(e.tz.setDefault(t),n.$broadcast("amMoment:timezoneChanged")):r.warn("angular-moment: changeTimezone() works only with moment-timezone.js v0.3.0 or greater."),i.timezone=t,a=t},this.preprocessDate=function(t){return a!==i.timezone&&this.changeTimezone(i.timezone),i.preprocess?i.preprocess(t):!isNaN(parseFloat(t))&&isFinite(t)?e(parseInt(t,10)):e(t)}}]).filter("amParse",["moment",function(t){return function(e,n){return t(e,n)}}]).filter("amFromUnix",["moment",function(t){return function(e){return t.unix(e)}}]).filter("amUtc",["moment",function(t){return function(e){return t.utc(e)}}]).filter("amUtcOffset",["amMoment",function(t){return function(e,n){return t.preprocessDate(e).utcOffset(n)}}]).filter("amLocal",["moment",function(t){return function(e){return t.isMoment(e)?e.local():null}}]).filter("amTimezone",["amMoment","angularMomentConfig","$log",function(t,e,n){return function(e,r){var i=t.preprocessDate(e);return r?i.tz?i.tz(r):(n.warn("angular-moment: named timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js ?"),i):i}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(t,e,r){function i(t,r,i){if(n(t))return"";var a=e.preprocessDate(t);return a.isValid()?a.calendar(r,i):""}return i.$stateful=r.statefulFilters,i}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(t,e,r){function i(r,i,a,o){if(n(r))return"";var s=e.preprocessDate(r),l=n(i)?t():e.preprocessDate(i);return s.isValid()&&l.isValid()?s.diff(l,a,o):""}return i.$stateful=r.statefulFilters,i}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(t,e,r){function i(t,r){if(n(t))return"";var i=e.preprocessDate(t);return i.isValid()?i.format(r):""}return i.$stateful=r.statefulFilters,i}]).filter("amDurationFormat",["moment","angularMomentConfig",function(t,e){function r(e,r,i){return n(e)?"":t.duration(e,r).humanize(i)}return r.$stateful=e.statefulFilters,r}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(t,e,r){function i(r,i,a){var o,s;return n(r)?"":(r=e.preprocessDate(r),(o=t(r)).isValid()?(s=t(a),!n(a)&&s.isValid()?o.from(s,i):o.fromNow(i)):"")}return i.$stateful=r.statefulFilters,i}]).filter("amSubtract",["moment","angularMomentConfig",function(t,e){function r(e,r,i){return n(e)?"":t(e).subtract(parseInt(r,10),i)}return r.$stateful=e.statefulFilters,r}]).filter("amAdd",["moment","angularMomentConfig",function(t,e){function r(e,r,i){return n(e)?"":t(e).add(parseInt(r,10),i)}return r.$stateful=e.statefulFilters,r}]).filter("amStartOf",["moment","angularMomentConfig",function(t,e){function r(e,r){return n(e)?"":t(e).startOf(r)}return r.$stateful=e.statefulFilters,r}]).filter("amEndOf",["moment","angularMomentConfig",function(t,e){function r(e,r){return n(e)?"":t(e).endOf(r)}return r.$stateful=e.statefulFilters,r}]),"angularMoment"}var o=window&&window.process&&window.process.type;e&&e.exports&&!o?e.exports=a(i,Q):a(angular,(void 0!==t&&void 0!==t.moment?t:window).moment)}()}));
/*
   * Color Picker Angular directive
   * https://github.com/Alberplz/angular-colorpicker-directive
   *
   * Alberto Pujante
   * 
   * @licence: http://opensource.org/licenses/MIT
   */var nt=angular.module("colorpicker",[]).factory("ColorHelper",(function(){return{hsla2hsva:function(t){var e=Math.min(t.h,1),n=Math.min(t.s,1),r=Math.min(t.l,1),i=Math.min(t.a,1);if(0===r)return{h:e,s:0,v:0,a:i};var a=r+n*(1-Math.abs(2*r-1))/2;return{h:e,s:2*(a-r)/a,v:a,a:i}},hsva2hsla:function(t){var e=t.h,n=t.s,r=t.v,i=t.a;if(0===r)return{h:e,s:0,l:0,a:i};if(0===n&&1===r)return{h:e,s:1,l:1,a:i};var a=r*(2-n)/2;return{h:e,s:r*n/(1-Math.abs(2*a-1)),l:a,a:i}},rgbaToHsva:function(t){var e,n,r=Math.min(t.r,1),i=Math.min(t.g,1),a=Math.min(t.b,1),o=Math.min(t.a,1),s=Math.max(r,i,a),l=Math.min(r,i,a),u=s,c=s-l;if(n=0===s?0:c/s,s===l)e=0;else{switch(s){case r:e=(i-a)/c+(i<a?6:0);break;case i:e=(a-r)/c+2;break;case a:e=(r-i)/c+4}e/=6}return{h:e,s:n,v:u,a:o}},hsvaToRgba:function(t){var e,n,r,i=t.h,a=t.s,o=t.v,s=t.a,l=Math.floor(6*i),u=6*i-l,c=o*(1-a),d=o*(1-u*a),h=o*(1-(1-u)*a);switch(l%6){case 0:e=o,n=h,r=c;break;case 1:e=d,n=o,r=c;break;case 2:e=c,n=o,r=h;break;case 3:e=c,n=d,r=o;break;case 4:e=h,n=c,r=o;break;case 5:e=o,n=c,r=d}return{r:e,g:n,b:r,a:s}},stringToHsva:function(t){var e=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return["rgb",parseInt(t[2]),parseInt(t[3]),parseInt(t[4]),isNaN(parseFloat(t[5]))?1:parseFloat(t[5])]}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return["hsl",parseInt(t[2]),parseInt(t[3]),parseInt(t[4]),isNaN(parseFloat(t[5]))?1:parseFloat(t[5])]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(t){return["hex",parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(t){return["hex",parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1]}}];t="string"==typeof t?t.toLowerCase():t;var n=null;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=i.re.exec(t),o=a&&i.parse(a);if(o)return n="hex"===o[0]||"rgb"===o[0]?this.rgbaToHsva({r:o[1]/255,g:o[2]/255,b:o[3]/255,a:o[4]}):this.hsla2hsva({h:o[1]/360,s:o[2]/100,l:o[3]/100,a:o[4]})}return n}}}));function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}nt.directive("colorPicker",["$document","$compile","ColorHelper",function(t,e,n){return{restrict:"A",scope:{colorPickerModel:"=",colorPickerOutputFormat:"=",colorPickerItem:"="},controller:["$scope",function(t){function e(t){return{r:Math.round(255*t.r),g:Math.round(255*t.g),b:Math.round(255*t.b),a:t.a}}t.show=!1,t.sAndLMax={},t.hueMax={},t.alphaMax={},t.type=0,t.hsva={h:.5,s:1,v:1,a:1},t.hueSlider={left:0},t.sAndLSlider={left:0,top:0},t.alphaSlider={left:0},t.rbgaSteps={r:1,g:1,b:1,a:.1},t.hslaSteps={h:1,s:1,l:1,a:.1},t.cancelButtonClass="",t.showCancelButton=!1,t.extraLargeClass="","rgba"===t.colorPickerOutputFormat?t.type=1:"hsla"===t.colorPickerOutputFormat&&(t.type=2),t.setSaturation=function(e,r){var i=n.hsva2hsla(t.hsva);i.s=e/r,t.hsva=n.hsla2hsva(i)},t.setLightness=function(e,r){var i=n.hsva2hsla(t.hsva);i.l=e/r,t.hsva=n.hsla2hsva(i)},t.setHue=function(e,n){t.hsva.h=e/n},t.setAlpha=function(e,n){t.hsva.a=e/n},t.setR=function(e,r){var i=n.hsvaToRgba(t.hsva);i.r=e/r,t.hsva=n.rgbaToHsva(i)},t.setG=function(e,r){var i=n.hsvaToRgba(t.hsva);i.g=e/r,t.hsva=n.rgbaToHsva(i)},t.setB=function(e,r){var i=n.hsvaToRgba(t.hsva);i.b=e/r,t.hsva=n.rgbaToHsva(i)},t.setSaturationAndBrightness=function(e,n,r,i){t.hsva.s=e/r,t.hsva.v=n/i},t.update=function(){var r=n.hsva2hsla(t.hsva);t.hslaText={h:Math.round(360*r.h),s:Math.round(100*r.s),l:Math.round(100*r.l),a:Math.round(100*r.a)/100};var i=e(n.hsvaToRgba(t.hsva)),a=e(n.hsvaToRgba({h:t.hsva.h,s:1,v:1,a:1}));if(t.rgbaText={r:i.r,g:i.g,b:i.b,a:Math.round(100*i.a)/100},t.hexText="#"+(1<<24|parseInt(i.r,10)<<16|parseInt(i.g,10)<<8|parseInt(i.b,10)).toString(16).substr(1),t.hexText[1]===t.hexText[2]&&t.hexText[3]===t.hexText[4]&&t.hexText[5]===t.hexText[6]&&(t.hexText="#"+t.hexText[1]+t.hexText[3]+t.hexText[5]),t.alphaSliderColor="rgb("+i.r+","+i.g+","+i.b+")",t.hueSliderColor="rgb("+a.r+","+a.g+","+a.b+")",0===t.type&&t.hsva.a<1&&t.type++,t.hsva.a<1)switch(t.colorPickerOutputFormat){case"hsla":t.outputColor="hsla("+t.hslaText.h+","+t.hslaText.s+"%,"+t.hslaText.l+"%,"+t.hslaText.a+")";break;default:t.outputColor="rgba("+i.r+","+i.g+","+i.b+","+Math.round(100*i.a)/100+")"}else switch(t.colorPickerOutputFormat){case"hsla":t.outputColor="hsl("+t.hslaText.h+","+t.hslaText.s+"%,"+t.hslaText.l+"%)";break;case"rgba":t.outputColor=t.alphaSliderColor;break;default:t.outputColor=t.hexText}t.sAndLSlider={left:t.hsva.s*t.sAndLMax.x-8+"px",top:(1-t.hsva.v)*t.sAndLMax.y-8+"px"},t.hueSlider.left=t.hsva.h*t.hueMax.x-8+"px",t.alphaSlider.left=t.hsva.a*t.alphaMax.x-8+"px",t.alphaInvalidClass=""},t.setColorFromHex=function(e){var r=n.stringToHsva(e);return null!==r&&(t.hsva=r),r},t.typePolicy=function(){return t.type=(t.type+1)%3,0===t.type&&t.hsva.a<1&&t.type++,t.type}}],link:function(r,i,a){var o,s="";if(void 0===r.colorPickerModel&&(r.colorPickerModel="#008fff",i.val("")),void 0===a.colorPickerShowValue&&(a.colorPickerShowValue="true"),void 0===a.colorPickerPosition&&(a.colorPickerPosition="right"),void 0===a.colorPickerShowInputSpinner&&(a.colorPickerShowInputSpinner="false"),void 0===a.colorPickerShowCancelButton&&(a.colorPickerShowCancelButton="false"),"true"===a.colorPickerShowCancelButton&&(r.showCancelButton=!0,r.extraLargeClass="color-picker-extra-large"),void 0!==a.colorPickerCancelButtonClass&&(r.cancelButtonClass=a.colorPickerCancelButtonClass),void 0!==a.colorPickerSpinnerRgbaSteps&&null!==a.colorPickerSpinnerRgbaSteps.match(/^\d+;\d+;\d+;[0-9]+([\.][0-9]{1,2})?$/)){var l=a.colorPickerSpinnerRgbaSteps.split(";");r.rbgaSteps={r:l[0],g:l[1],b:l[2],a:l[3]}}if(void 0!==a.colorPickerSpinnerHslaSteps&&null!==a.colorPickerSpinnerHslaSteps.match(/^\d+;\d+;\d+;[0-9]+([\.][0-9]{1,2})?$/)){l=a.colorPickerSpinnerHslaSteps.split(";");r.hslaSteps={h:l[0],s:l[1],l:l[2],a:l[3]}}function u(t){var e=n.stringToHsva(t);null!==e&&(r.hsva=e,r.update())}function c(){setTimeout((function(){d()}),5)}function d(){r.$apply((function(){a.colorPickerShowValue="true",u(i.val()),r.colorPickerModel=i.val()}))}function h(e){s=r.colorPickerModel,r.$apply((function(){r.show=!0})),r.$apply((function(){r.sAndLMax={x:o[0].getElementsByClassName("saturation-lightness")[0].offsetWidth,y:o[0].getElementsByClassName("saturation-lightness")[0].offsetHeight},r.hueMax={x:o[0].getElementsByClassName("hue")[0].offsetWidth},r.update()})),p(),t.on("mousedown",g),angular.element(window).on("resize",f)}function f(){p()}function p(){var t;"true"===a.colorPickerFixedPosition?(t=m(i[0],!1),o[0].style.position="fixed"):t=m(i[0],!0),"left"===a.colorPickerPosition?(o[0].style.top=t.top+"px",o[0].style.left=t.left-252+"px"):"top"===a.colorPickerPosition?(o[0].style.top=t.top-t.height-284+"px",o[0].style.left=t.left+"px"):"bottom"===a.colorPickerPosition?(o[0].style.top=t.top+t.height+10+"px",o[0].style.left=t.left+"px"):(o[0].style.top=t.top+"px",o[0].style.left=t.left+t.width+"px")}function g(e){e.target===i[0]||o[0]===e.target||function(t,e){var n=e.parentNode;for(;null!==n;){if(n===t)return!0;n=n.parentNode}return!1}(o[0],e.target)||(r.$apply((function(){r.notifyColorChanged(),r.show=!1})),t.off("mousedown",g),angular.element(window).off("resize",f))}function m(t,e){return{top:t.getBoundingClientRect().top+(e?window.pageYOffset:0),left:t.getBoundingClientRect().left+(e?window.pageXOffset:0),width:t.offsetWidth,height:t.offsetHeight}}u(r.colorPickerModel),"true"===a.colorPickerShowValue&&i.val(r.outputColor),o=angular.element('<div ng-show="show" class="color-picker {{extraLargeClass}}">   <div class="arrow arrow-'+a.colorPickerPosition+'"></div>   <div slider rg-x=1 rg-y=1 action="setSaturationAndBrightness(s, v, rgX, rgY)" class="saturation-lightness" ng-style="{\'background-color\':hueSliderColor}">       <div class="cursor-sv" ng-style="{\'top\':sAndLSlider.top, \'left\':sAndLSlider.left}"></div>   </div>   <div slider rg-x=1 action="setHue(v, rg)" class="hue" style="top: 160px">       <div class="cursor" ng-style="{\'left\':hueSlider.left}"></div>   </div>   <div class="selected-color-background"></div>   <div class="selected-color" ng-style="{\'background-color\':outputColor}"></div>   <div ng-show="type==1" class="rgba-text" style="left: 40px; top: 210px">       <input text type="number" pattern="[0-9]*" min="0" max="255" step="'+r.rbgaSteps.r+'" rg=255 action="setR(v, rg)" ng-model="rgbaText.r" spinner="'+a.colorPickerShowInputSpinner+'" />       <input text type="number" pattern="[0-9]*" min="0" max="255" step="'+r.rbgaSteps.g+'" rg=255 action="setG(v, rg)" ng-model="rgbaText.g" spinner="'+a.colorPickerShowInputSpinner+'" />       <input text type="number" pattern="[0-9]*" min="0" max="255" step="'+r.rbgaSteps.b+'" rg=255 action="setB(v, rg)" ng-model="rgbaText.b" spinner="'+a.colorPickerShowInputSpinner+'" />       <br /><div>R</div><div>G</div><div>B</div>\x3c!--div>A</div--\x3e   </div>   <button type="button" class="{{cancelButtonClass}}" ng-show="showCancelButton" ng-click="cancelColor()">Cancel</button></div>'),document.getElementsByTagName("body")[0].appendChild(o[0]),e(o)(r),i.on("paste",c),i.on("keyup",d),r.$on("color-changed",(function(t){r.$apply((function(){r.update(),"true"===a.colorPickerShowValue&&i.val(r.outputColor)}))})),r.cancelColor=function(){r.colorPickerModel=s,r.show=!1,u(r.colorPickerModel),t.off("mousedown",g),angular.element(window).off("resize",f)},i.on("click",h),i.on("$destroy",(function(){i.off("click",h),i.off("keyup",d),i.off("paste",c)})),r.notifyColorChanged=function(){r.$emit("colorpicker-colorupdated",{item:r.colorPickerItem,color:r.outputColor})}}}}]),nt.directive("text",[function(){return{restrict:"A",scope:{action:"&"},link:function(t,e,n){function r(t){"true"===n.spinner&&e.removeClass("color-picker-input-spinner")}function i(t){e.addClass("color-picker-input-spinner")}function a(t){setTimeout((function(){o()}),5)}function o(r){if(void 0===n.rg)t.action({string:e.val()})&&t.$emit("color-changed");else{var i=parseFloat(e.val());isNaN(i)?t.$emit("alpha-invalid"):(i=Math.abs(Math.min(parseFloat(e.val()),n.rg)),t.action({v:i,rg:n.rg}),t.$emit("color-changed"),t.$emit("alpha-valid"))}}e.on("paste",a),e.on("keyup",o),e.on("change",o),e.on("focus",r),e.on("blur",i),e.on("mouseover",r),e.on("mouseout",i),e.addClass("color-picker-input-spinner"),e.on("$destroy",(function(){e.off("paste",a),e.off("keyup",o),e.off("change",o),e.off("focus",r),e.off("blur",i),e.off("mouseover",r),e.off("mouseout",i)}))}}}]),nt.directive("slider",["$document","$window",function(t,e){return{restrict:"A",scope:{action:"&"},link:function(n,r,i){function a(e){s(e),t.on("mousemove touchmove",o)}function o(t){t.preventDefault(),s(t)}function s(t){var a=r[0].offsetHeight,o=r[0].offsetWidth,s=Math.max(0,Math.min(function(t,n){return(void 0!==t.pageX?t.pageX:t.touches[0].pageX)-n.getBoundingClientRect().left-e.pageXOffset}(t,r[0]),o)),l=Math.max(0,Math.min(function(t,n){return(void 0!==t.pageY?t.pageY:t.touches[0].pageY)-n.getBoundingClientRect().top-e.pageYOffset}(t,r[0]),a));void 0!==i.rgX&&void 0!==i.rgY?n.action({s:s/o,v:1-l/a,rgX:i.rgX,rgY:i.rgY}):n.action({v:s/o,rg:i.rgX}),n.$emit("color-changed")}r.on("mousedown touchstart",a),t.on("mouseup touchend",(function(){t.off("mousemove touchmove",o)})),r.on("$destroy",(function(){r.off("mousedown touchend",a)}))}}}]),window.initApp=function(){i.element((function(){i.bootstrap(document,[A.name])})),A.config(["$sceProvider","$locationProvider","ApiProvider","ChartJsProvider",function(t,e,n,r){t.enabled(!1),e.html5Mode({enabled:!0,requireBase:!1}),n.setInitOptions({wsUrl:window.CONFIG.wsUrl,authToken:window.CONFIG.authToken});var i=24===window.CONFIG.timeFormat;r.setOptions("line",{maintainAspectRatio:!1,layout:{padding:{bottom:10,left:10,right:10}},scales:{xAxes:[{type:"time",time:{displayFormats:{datetime:i?"MMM D, YYYY, H:mm:ss":"MMM D, YYYY, h:mm:ss a",hour:i?"H:mm":"h:mm a",millisecond:i?"H:mm:ss.SSS":"h:mm:ss.SSS a",minute:i?"H:mm":"h:mm a",second:i?"H:mm:ss":"h:mm:ss a"}}}],yAxes:[{ticks:{maxTicksLimit:7}}]},elements:{point:{radius:0,hitRadius:5},line:{borderWidth:1,stepped:!0}},legend:{align:"start",display:!0},tooltips:{intersect:!1},hover:{intersect:!1}}),window.Chart.Legend.prototype.afterFit=function(){this.height+=20}}])},A.provider("Api",(function(){var t,e;this.setInitOptions=function(n){t=n.wsUrl,e=n.authToken},this.$get=["$http","$location","$q",function(n,r,a){var o=null;function s(t,e){this._id=1,this._url=t,this._listeners={error:[],message:[],ready:[],unready:[]},this._callbacks={},e&&(this._configToken=e),this._init()}function l(t){localStorage.setItem(w,JSON.stringify(t))}function c(){var t=localStorage.getItem(w);return t?JSON.parse(t):null}function d(){return encodeURIComponent(window.location.origin)}function h(){var t;localStorage.removeItem(w),window.location.href=u("/auth/authorize?client_id="+d()+"&redirect_uri="+(t=window.location.origin+window.location.pathname,window.location.search?t+=window.location.search+"&oauth=1":t+="?oauth=1",encodeURIComponent(t)))}return s.prototype._init=function(){var t=this;this._getToken().then((function(e){e?(t._token=e.access_token,t._connect.call(t),e.expires_in&&setTimeout(t._refreshToken.bind(t),900*e.expires_in)):k.addObject({type:k.ERROR,title:"ACCESS TOKEN",message:"Error while receiving access token"})}))},s.prototype.on=function(t,e){var n=this;return-1!==this._listeners[t].indexOf(e)?function(){}:(this._listeners[t].push(e),function(){n._listeners[t]=n._listeners[t].filter((function(t){return t!==e}))})},s.prototype.onError=function(t){return this.on("error",t)},s.prototype.onMessage=function(t){return this.on("message",t)},s.prototype.onReady=function(t){if(3===this.status)try{t({status:3})}catch(t){}return this.on("ready",t)},s.prototype.onUnready=function(t){return this.on("unready",t)},s.prototype.send=function(t,e,n){n=!1!==n,!t.id&&n&&(t.id=this._id++);var r=JSON.stringify(t);return e&&t.id&&(this._callbacks[t.id]=e),this.socket.send(r)},s.prototype.callService=function(t,e,n,r){var i={type:"call_service",domain:t,service:e,service_data:n};this.send(i,(function(t){r&&r(t)}))},s.prototype.rest=function(t){var e=i.copy(t);return e.url=u(e.url),e.headers=e.headers||{},e.headers.Authorization="Bearer "+this._token,n(e).then((function(t){return t.data})).catch((function(t){switch(t.status){case 401:return void h();default:return window.Noty.add(window.Noty.ERROR,"Error in REST api","Code "+t.status+" retrieved for "+e.url+"."),null}}))},s.prototype.getHistory=function(t,e,n){var r={type:"GET",url:"/api/history/period"};if(t&&(r.url+="/"+t),r.url+=n?"?end_time="+n:"?end_time="+new Date(Date.now()).toISOString(),e){var i=e instanceof Array?e.join(","):e;r.url+="&filter_entity_id="+i}return this.rest(r)},s.prototype.subscribeEvents=function(t,e){var n=this;t&&"object"===rt(t)?t.forEach((function(t){n.subscribeEvent(t,e)})):this.subscribeEvent(t,e)},s.prototype.subscribeEvent=function(t,e){var n={type:"subscribe_events"};t&&(n.event_type=t),this.send(n,e)},s.prototype.getStates=function(t){return this.send({type:"get_states"},t)},s.prototype.getPanels=function(t){return this.send({type:"get_panels"},t)},s.prototype.getConfig=function(t){return this.send({type:"get_config"},t)},s.prototype.getServices=function(t){return this.send({type:"get_services"},t)},s.prototype.getUser=function(t){return this.send({type:"auth/current_user"},t)},s.prototype.sendPing=function(t){return this.send({type:"ping"},t)},s.prototype._connect=function(){var t=this;this.socket&&this.socket.readyState<2||(this.status=1,this.socket=new WebSocket(this._url),this.socket.addEventListener("open",(function(e){t._setStatus(2)})),this.socket.addEventListener("close",(function(e){t._setStatus(5),t._reconnect.call(t)})),this.socket.addEventListener("error",(function(e){t._setStatus(4),t._sendError.call(t,"System error",e),t._reconnect.call(t,1e3)})),this.socket.addEventListener("message",(function(e){var n=JSON.parse(e.data);t._handleMessage.call(t,n)})))},s.prototype.forceReconnect=function(){this.socket&&this.socket.readyState<2?this.socket.close():this._reconnect()},s.prototype._reconnect=function(t){t=t||0,this._fire("unready",{status:this.status}),o&&clearTimeout(o),o=setTimeout(this._connect.bind(this),t)},s.prototype._fire=function(t,e){this._listeners[t].forEach((function(t){setTimeout((function(){t(e)}),0)}))},s.prototype._handleMessage=function(t){var e=this;return"auth_required"===t.type?this._authenticate():"auth_invalid"===t.type?this._authInvalid(t.message):"auth_ok"===t.type?this._ready():t.error?this._sendError(t.error.message,t):("result"===t.type&&t.id&&this._callbacks[t.id]&&setTimeout((function(){e._callbacks[t.id](t)}),0),"pong"===t.type&&t.id&&this._callbacks[t.id]&&setTimeout((function(){e._callbacks[t.id](t)}),0),void this._fire("message",t))},s.prototype._authInvalid=function(t){this._setStatus(4),this._sendError(t),this._refreshToken()},s.prototype._sendError=function(t,e){var n={message:t};e&&(n.data=e),this._fire("error",n)},s.prototype._authenticate=function(){var t={type:"auth",access_token:this._token};this.send(t,null,!1)},s.prototype._ready=function(){this._setStatus(3),this._fire("ready",{status:3})},s.prototype._setStatus=function(t){this.status=t},s.prototype._tokenRequest=function(t){var e={method:"POST",url:u("/auth/token"),headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t+"&client_id="+d()};return n(e).then((function(t){return t.data})).catch((function(t){if(!(t.status>=400&&t.status<=499))return null;h()}))},s.prototype._refreshToken=function(){var t=this;this._getFreshToken().then((function(e){e&&(t._token=e.access_token,e.expires_in&&setTimeout(t._refreshToken.bind(t),900*e.expires_in))}))},s.prototype._getFreshToken=function(){var t=c(),e="grant_type=refresh_token&refresh_token="+t.refresh_token;return this._tokenRequest(e).then((function(e){return e?(e.refresh_token=t.refresh_token,l(e),e):null}))},s.prototype._getTokenByCode=function(t){var e="grant_type=authorization_code&code="+t;return this._tokenRequest(e).then((function(t){return t?(l(t),t):null}))},s.prototype._getToken=function(){if(this._configToken)return a.resolve({access_token:this._configToken});if(c())return this._getFreshToken();var t=r.search();if(t.oauth&&t.code){var e=t.code;return r.search("oauth",null).search("code",null),this._getTokenByCode(e)}return h(),a.resolve(null)},new s(t,e)}]}));var it=e(n((function(t,e){var n;"undefined"!=typeof window&&(n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
    !*** ./node_modules/eventemitter3/index.js ***!
    \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,n){var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||t,a),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new a:delete t._events[e]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},u.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,r,a,o){var s=i?i+t:t;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,a),!0;case 6:return c.fn.call(c.context,e,n,r,a,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,n);break;case 4:c[u].fn.call(c[u].context,e,n,r);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,r){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||l(this,a);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==e||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:l(this,a)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&l(this,e)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,t.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
    !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
    \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,n){var r,i,a,o,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,i=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=s.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):e;var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(a,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
    !*** ./node_modules/webworkify-webpack/index.js ***!
    \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,n){function r(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var r=n(n.s=ENTRY_MODULE);return r.default||r}var i="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function o(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(t,e,r){var s={};s[r]=[];var l=e.toString(),u=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return s;for(var c,d=u[1],h=new RegExp("(\\\\n|\\W)"+o(d)+a,"g");c=h.exec(l);)"dll-reference"!==c[3]&&s[r].push(c[3]);for(h=new RegExp("\\("+o(d)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");c=h.exec(l);)t[c[2]]||(s[r].push(c[1]),t[c[2]]=n(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var f,p=Object.keys(s),g=0;g<p.length;g++)for(var m=0;m<s[p[g]].length;m++)f=s[p[g]][m],isNaN(1*f)||(s[p[g]][m]=1*s[p[g]][m]);return s}function l(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}t.exports=function(t,e){e=e||{};var i={main:n.m},a=e.all?{main:Object.keys(i.main)}:function(t,e){for(var n={main:[e]},r={main:[]},i={main:{}};l(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var u=a[o],c=n[u].pop();if(i[u]=i[u]||{},!i[u][c]&&t[u][c]){i[u][c]=!0,r[u]=r[u]||[],r[u].push(c);for(var d=s(t,t[u][c],u),h=Object.keys(d),f=0;f<h.length;f++)n[h[f]]=n[h[f]]||[],n[h[f]]=n[h[f]].concat(d[h[f]])}}return r}(i,t),o="";Object.keys(a).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;a[t][e];)e++;a[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a[t].map((function(e){return JSON.stringify(e)+": "+i[t][e].toString()})).join(",")+"});\n"})),o=o+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a.main.map((function(t){return JSON.stringify(t)+": "+i.main[t].toString()})).join(",")+"}))(self);";var u=new window.Blob([o],{type:"text/javascript"});if(e.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(c);return d.objectURL=c,d}},"./src/crypt/decrypter.js":
/*!********************************************!*\
    !*** ./src/crypt/decrypter.js + 3 modules ***!
    \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(t,e,n){n.r(e);var r=function(){function t(t,e){this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),i=function(){function t(t,e){this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),a=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),r=0;r<4;r++)n[r]=e.getUint32(4*r);return n},e.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,t[f]=m,e[m]=f;var v=h[f],y=h[v],b=h[y],S=257*h[m]^16843008*m;r[f]=S<<24|S>>>8,i[f]=S<<16|S>>>16,a[f]=S<<8|S>>>24,o[f]=S,S=16843009*b^65537*y^257*v^16843008*f,l[m]=S<<24|S>>>8,u[m]=S<<16|S>>>16,c[m]=S<<8|S>>>24,d[m]=S,f?(f=v^h[h[h[b^v]]],p^=h[h[p]]):f=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,r=0;r<e.length&&n;)n=e[r]===this.key[r],r++;if(!n){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],m=p[1],v=p[2],y=p[3];for(a=0;a<u;a++)a<i?s=c[a]=e[a]:(l=s,a%i==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[a/i|0]<<24):i>6&&a%i==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=s=(c[a-i]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?l:g[h[l>>>24]]^m[h[l>>>16&255]]^v[h[l>>>8&255]]^y[h[255&l]],d[o]=d[o]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,n,r){for(var i,a,o,s,l,u,c,d,h,f,p,g,m,v,y,b,S,w=this.keySize+6,T=this.invKeySchedule,x=this.invSBox,_=this.invSubMix,k=_[0],E=_[1],$=_[2],A=_[3],C=this.uint8ArrayToUint32Array_(n),D=C[0],M=C[1],R=C[2],O=C[3],I=new Int32Array(t),L=new Int32Array(I.length),P=this.networkToHostOrderSwap;e<I.length;){for(h=P(I[e]),f=P(I[e+1]),p=P(I[e+2]),g=P(I[e+3]),l=h^T[0],u=g^T[1],c=p^T[2],d=f^T[3],m=4,v=1;v<w;v++)i=k[l>>>24]^E[u>>16&255]^$[c>>8&255]^A[255&d]^T[m],a=k[u>>>24]^E[c>>16&255]^$[d>>8&255]^A[255&l]^T[m+1],o=k[c>>>24]^E[d>>16&255]^$[l>>8&255]^A[255&u]^T[m+2],s=k[d>>>24]^E[l>>16&255]^$[u>>8&255]^A[255&c]^T[m+3],l=i,u=a,c=o,d=s,m+=4;i=x[l>>>24]<<24^x[u>>16&255]<<16^x[c>>8&255]<<8^x[255&d]^T[m],a=x[u>>>24]<<24^x[c>>16&255]<<16^x[d>>8&255]<<8^x[255&l]^T[m+1],o=x[c>>>24]<<24^x[d>>16&255]<<16^x[l>>8&255]<<8^x[255&u]^T[m+2],s=x[d>>>24]<<24^x[l>>16&255]<<16^x[u>>8&255]<<8^x[255&c]^T[m+3],m+=3,L[e]=P(i^D),L[e+1]=P(s^M),L[e+2]=P(o^R),L[e+3]=P(a^O),D=h,M=f,R=p,O=g,e+=4}return r?(y=L.buffer,b=y.byteLength,(S=b&&new DataView(y).getUint8(b-1))?y.slice(0,b-S):y):L.buffer},e.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),o=n("./src/errors.ts"),s=n("./src/utils/logger.js"),l=n("./src/events.js"),u=n("./src/utils/get-self-scope.js"),c=Object(u.getSelfScope)(),d=function(){function t(t,e,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=i,i)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}var e=t.prototype;return e.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.decrypt=function(t,e,n,o){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new a),u.expandKey(e),o(u.decrypt(t,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new i(c,e)),this.fastAesKey.expandKey().then((function(i){new r(c,n).decrypt(t,i).catch((function(r){l.onWebCryptoError(r,t,e,n,o)})).then((function(t){o(t)}))})).catch((function(r){l.onWebCryptoError(r,t,e,n,o)}))}},e.onWebCryptoError=function(t,e,n,r,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,n,r,i)):(s.logger.error("decrypting error : "+t.message),this.observer.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},e.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.default=d},"./src/demux/demuxer-inline.js":
/*!**************************************************!*\
    !*** ./src/demux/demuxer-inline.js + 12 modules ***!
    \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(t,e,n){n.r(e);var r=n("./src/events.js"),i=n("./src/errors.ts"),a=n("./src/crypt/decrypter.js"),o=n("./src/polyfills/number.js"),s=n("./src/utils/logger.js"),l=n("./src/utils/get-self-scope.js");function u(t,e){return 255===t[e]&&240==(246&t[e+1])}function c(t,e){return 1&t[e+1]?7:9}function d(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function h(t,e){return!!(e+1<t.length&&u(t,e))}function f(t,e){if(h(t,e)){var n=c(t,e);if(e+n>=t.length)return!1;var r=d(t,e);if(r<=n)return!1;var i=e+r;if(i===t.length||i+1<t.length&&u(t,i))return!0}return!1}function p(t,e,n,a,o){if(!t.samplerate){var l=function(t,e,n,a){var o,l,u,c,d,h=navigator.userAgent.toLowerCase(),f=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&e[n+2])>>>6),!((l=(60&e[n+2])>>>2)>p.length-1))return c=(1&e[n+2])<<2,c|=(192&e[n+3])>>>6,s.logger.log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+l+"["+p[l]+"Hz],channelConfig:"+c),/firefox/i.test(h)?l>=6?(o=5,d=new Array(4),u=l-3):(o=2,d=new Array(2),u=l):-1!==h.indexOf("android")?(o=2,d=new Array(2),u=l):(o=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?u=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(h))||!a&&1===c)&&(o=2,d=new Array(2)),u=l)),d[0]=o<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=c<<3,5===o&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[l],channelCount:c,codec:"mp4a.40."+o,manifestCodec:f};t.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}(e,n,a,o);t.config=l.config,t.samplerate=l.samplerate,t.channelCount=l.channelCount,t.codec=l.codec,t.manifestCodec=l.manifestCodec,s.logger.log("parsed codec:"+t.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)}}function g(t){return 9216e4/t}function m(t,e,n,r,i){var a=function(t,e,n,r,i){var a,o,s=t.length;if(a=c(t,e),o=d(t,e),(o-=a)>0&&e+a+o<=s)return{headerLength:a,frameLength:o,stamp:n+r*i}}(e,n,r,i,g(t.samplerate));if(a){var o=a.stamp,s=a.headerLength,l=a.frameLength,u={unit:e.subarray(n+s,n+s+l),pts:o,dts:o};return t.samples.push(u),{sample:u,length:l+s}}}var v=n("./src/demux/id3.js"),y=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:r,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=(v.default.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(f(t,e))return s.logger.log("ADTS sync word found !"),!0;return!1},e.append=function(t,e,n,r){for(var i=this._audioTrack,a=v.default.getID3Data(t,0)||[],l=v.default.getTimeStamp(a),u=Object(o.isFiniteNumber)(l)?90*l:9e4*e,c=0,d=u,f=t.length,g=a.length,y=[{pts:d,dts:d,data:a}];g<f-1;)if(h(t,g)&&g+5<f){p(i,this.observer,t,g,i.manifestCodec);var b=m(i,t,g,u,c);if(!b){s.logger.log("Unable to parse AAC frame");break}g+=b.length,d=b.sample.pts,c++}else v.default.isHeader(t,g)?(a=v.default.getID3Data(t,g),y.push({pts:d,dts:d,data:a}),g+=a.length):g++;this.remuxer.remux(i,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},e,n,r)},e.destroy=function(){},t}(),b=n("./src/demux/mp4demuxer.js"),S={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,n,r,i){if(!(n+24>e.length)){var a=this.parseHeader(e,n);if(a&&n+a.frameLength<=e.length){var o=r+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:e.subarray(n,n+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(s),{sample:s,length:a.frameLength}}}},parseHeader:function(t,e){var n=t[e+1]>>3&3,r=t[e+1]>>1&3,i=t[e+2]>>4&15,a=t[e+2]>>2&3,o=t[e+2]>>1&1;if(1!==n&&0!==i&&15!==i&&3!==a){var s=3===n?3-r:3===r?3:4,l=1e3*S.BitratesMap[14*s+i-1],u=3===n?0:2===n?1:2,c=S.SamplingRateMap[3*u+a],d=t[e+3]>>6==3?1:2,h=S.SamplesCoefficients[n][r],f=S.BytesInSlot[r],p=8*h*f;return{sampleRate:c,channelCount:d,frameLength:parseInt(h*l/c+o,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var n=this.parseHeader(t,e),r=4;n&&n.frameLength&&(r=n.frameLength);var i=e+r;if(i===t.length||i+1<t.length&&this.isHeaderPattern(t,i))return!0}return!1}},w=S,T=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,r=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");r.set(t.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?n<<e|this.readBits(e):n},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){var e,n=8,r=8;for(e=0;e<t;e++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},e.readSPS=function(){var t,e,n,r,i,a,o,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),t=d(),h(5),g(3),d(),v(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var b=f();if(3===b&&g(1),v(),v(),g(1),p())for(a=3!==b?8:12,o=0;o<a;o++)p()&&y(o<6?16:64)}v();var S=f();if(0===S)f();else if(1===S)for(g(1),m(),m(),e=f(),o=0;o<e;o++)m();v(),g(1),n=f(),r=f(),0===(i=h(1))&&g(1),g(1),p()&&(s=f(),l=f(),u=f(),c=f());var w=[1,1];if(p()&&p())switch(d()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(n+1)-2*s-2*l),height:(2-i)*(r+1)*16-(i?2:4)*(u+c),pixelRatio:w}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),x=function(){function t(t,e,n,r){this.decryptdata=n,this.discardEPB=r,this.decrypter=new a.default(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},e.decryptAacSample=function(t,e,n,r){var i=t[e].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),i.set(a,16),r||s.decryptAacSamples(t,e+1,n)}))},e.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,r),!r)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),r=0,i=32;i<=t.length-16;i+=160,r+=16)n.set(t.subarray(i,i+16),r);return n},e.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var n=0,r=32;r<=t.length-16;r+=160,n+=16)t.set(e.subarray(n,n+16),r);return t},e.decryptAvcSample=function(t,e,n,r,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,(function(s){i.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(t,e,n+1,r)}))},e.decryptAvcSamples=function(t,e,n,r){for(;;e++,n=0){if(e>=t.length)return void r();for(var i=t[e].units;!(n>=i.length);n++){var a=i[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,r,a,o),!o)return}}}},t}(),_={video:1,audio:2,id3:3,text:4},k=function(){function t(t,e,n,r){this.observer=t,this.config=n,this.typeSupported=r,this.remuxer=e,this.sampleAes=null,this.pmtUnknownTypes={}}var e=t.prototype;return e.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new x(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var n=t._syncOffset(e);return!(n<0||(n&&s.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:_[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},e.resetInitSegment=function(e,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=t.createTrack("video",i),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3",i),this._txtTrack=t.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},e.resetTimeStamp=function(){},e.append=function(e,n,a,o){var l,u,c,d,h,f=e.length,p=!1;this.pmtUnknownTypes={},this.contiguous=a;var g=this.pmtParsed,m=this._avcTrack,v=this._audioTrack,y=this._id3Track,b=m.pid,S=v.pid,w=y.pid,T=this._pmtId,x=m.pesData,_=v.pesData,k=y.pesData,E=this._parsePAT,$=this._parsePMT.bind(this),A=this._parsePES,C=this._parseAVCPES.bind(this),D=this._parseAACPES.bind(this),M=this._parseMPEGPES.bind(this),R=this._parseID3PES.bind(this),O=t._syncOffset(e);for(f-=(f+O)%188,l=O;l<f;l+=188)if(71===e[l]){if(u=!!(64&e[l+1]),c=((31&e[l+1])<<8)+e[l+2],(48&e[l+3])>>4>1){if((d=l+5+e[l+4])===l+188)continue}else d=l+4;switch(c){case b:u&&(x&&(h=A(x))&&C(h,!1),x={data:[],size:0}),x&&(x.data.push(e.subarray(d,l+188)),x.size+=l+188-d);break;case S:u&&(_&&(h=A(_))&&(v.isAAC?D(h):M(h)),_={data:[],size:0}),_&&(_.data.push(e.subarray(d,l+188)),_.size+=l+188-d);break;case w:u&&(k&&(h=A(k))&&R(h),k={data:[],size:0}),k&&(k.data.push(e.subarray(d,l+188)),k.size+=l+188-d);break;case 0:u&&(d+=e[d]+1),T=this._pmtId=E(e,d);break;case T:u&&(d+=e[d]+1);var I=$(e,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=I.avc)>0&&(m.pid=b),(S=I.audio)>0&&(v.pid=S,v.isAAC=I.isAAC),(w=I.id3)>0&&(y.pid=w),p&&!g&&(s.logger.log("reparse from beginning"),p=!1,l=O-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});x&&(h=A(x))?(C(h,!0),m.pesData=null):m.pesData=x,_&&(h=A(_))?(v.isAAC?D(h):M(h),v.pesData=null):(_&&_.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=_),k&&(h=A(k))?(R(h),y.pesData=null):y.pesData=k,null==this.sampleAes?this.remuxer.remux(v,m,y,this._txtTrack,n,a,o):this.decryptAndRemux(v,m,y,this._txtTrack,n,a,o)},e.decryptAndRemux=function(t,e,n,r,i,a,o){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,(function(){s.decryptAndRemuxAvc(t,e,n,r,i,a,o)}))}else this.decryptAndRemuxAvc(t,e,n,r,i,a,o)},e.decryptAndRemuxAvc=function(t,e,n,r,i,a,o){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,(function(){s.remuxer.remux(t,e,n,r,i,a,o)}))}else this.remuxer.remux(t,e,n,r,i,a,o)},e.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},e._trackUnknownPmt=function(t,e,n){var r=this.pmtUnknownTypes[t]||0;return 0===r&&(this.pmtUnknownTypes[t]=0,e.call(s.logger,n)),this.pmtUnknownTypes[t]++,r},e._parsePMT=function(t,e,n,r){var i,a,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<i;){switch(a=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!r){this._trackUnknownPmt(t[e],s.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!r){this._trackUnknownPmt(t[e],s.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:n?-1===o.audio&&(o.audio=a,o.isAAC=!1):this._trackUnknownPmt(t[e],s.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(t[e],s.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(t[e],s.logger.log,"Unknown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return o},e._parsePES=function(t){var e,n,r,i,a,o,l,u,c=0,d=t.data;if(!t||0===t.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(1===((e=d[0])[0]<<16)+(e[1]<<8)+e[2]){if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;if(192&(n=e[7])&&(o=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&n?o-(l=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(s.logger.warn(Math.round((o-l)/9e4)+"s delta between PTS and DTS, align them"),o=l):l=o),u=(i=e[8])+9,t.size<=u)return null;t.size-=u,a=new Uint8Array(t.size);for(var f=0,p=d.length;f<p;f++){var g=(e=d[f]).byteLength;if(u){if(u>g){u-=g;continue}e=e.subarray(u),g-=u,u=0}a.set(e,c),c+=g}return r&&(r-=i+3),{data:a,pts:o,dts:l,len:r}}return null},e.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var n=e.samples,r=n.length;if(isNaN(t.pts)){if(!r)return void e.dropped++;var i=n[r-1];t.pts=i.pts,t.dts=i.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(r||this.contiguous)?(t.id=r,n.push(t)):e.dropped++}t.debug.length&&s.logger.log(t.pts+"/"+t.dts+":"+t.debug)},e._parseAVCPES=function(t,e){var n,r,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(t.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(t,e,n,r){return{key:t,pts:e,dts:n,units:[],debug:r}};t.data=null,l&&s.length&&!o.audFound&&(c(l,o),l=this.avcSample=d(!1,t.pts,t.dts,"")),s.forEach((function(e){switch(e.type){case 1:r=!0,l||(l=a.avcSample=d(!0,t.pts,t.dts,"")),l.frame=!0;var s=e.data;if(u&&s.length>4){var h=new T(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:r=!0,l||(l=a.avcSample=d(!0,t.pts,t.dts,"")),l.key=!0,l.frame=!0;break;case 6:r=!0,(n=new T(a.discardEPB(e.data))).readUByte();for(var f=0,p=0,g=!1,m=0;!g&&n.bytesAvailable>1;){f=0;do{f+=m=n.readUByte()}while(255===m);p=0;do{p+=m=n.readUByte()}while(255===m);if(4===f&&0!==n.bytesAvailable){if(g=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){var y=n.readUByte(),b=31&y,S=[y,n.readUByte()];for(i=0;i<b;i++)S.push(n.readUByte()),S.push(n.readUByte()),S.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:t.pts,bytes:S})}}else if(5===f&&0!==n.bytesAvailable){if(g=!0,p>16){var w=[];for(i=0;i<16;i++)w.push(n.readUByte().toString(16)),3!==i&&5!==i&&7!==i&&9!==i||w.push("-");var x=p-16,_=new Uint8Array(x);for(i=0;i<x;i++)_[i]=n.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:t.pts,payloadType:f,uuid:w.join(""),userDataBytes:_,userData:Object(v.utf8ArrayToStr)(_.buffer)})}}else if(p<n.bytesAvailable)for(i=0;i<p;i++)n.readUByte()}break;case 7:if(r=!0,u=!0,!o.sps){var k=(n=new T(e.data)).readSPS();o.width=k.width,o.height=k.height,o.pixelRatio=k.pixelRatio,o.sps=[e.data],o.duration=a._duration;var E=e.data.subarray(1,4),$="avc1.";for(i=0;i<3;i++){var A=E[i].toString(16);A.length<2&&(A="0"+A),$+=A}o.codec=$}break;case 8:r=!0,o.pps||(o.pps=[e.data]);break;case 9:r=!1,o.audFound=!0,l&&c(l,o),l=a.avcSample=d(!1,t.pts,t.dts,"");break;case 12:r=!1;break;default:r=!1,l&&(l.debug+="unknown NAL "+e.type+" ")}l&&r&&l.units.push(e)})),e&&l&&(c(l,o),this.avcSample=null)},e._insertSampleInOrder=function(t,e){var n=t.length;if(n>0){if(e.pts>=t[n-1].pts)t.push(e);else for(var r=n-1;r>=0;r--)if(e.pts<t[r].pts){t.splice(r,0,e);break}}else t.push(e)},e._getLastNalUnit=function(){var t,e=this.avcSample;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var r=e.units;t=r[r.length-1]}return t},e._parseAVCNALu=function(t){var e,n,r,i,a=0,o=t.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,i=31&t[0],l=0,a=1);a<o;)if(e=t[a++],l)if(1!==l)if(e)if(1===e){if(d>=0)r={data:t.subarray(d,a-l-1),type:i},c.push(r);else{var h=this._getLastNalUnit();if(h&&(u&&a<=4-u&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-u)),(n=a-l-1)>0)){var f=new Uint8Array(h.data.byteLength+n);f.set(h.data,0),f.set(t.subarray(0,n),h.data.byteLength),h.data=f}}a<o?(d=a,i=31&t[a],l=0):l=-1}else l=0;else l=3;else l=e?0:2;else l=e?0:1;if(d>=0&&l>=0&&(r={data:t.subarray(d,o),type:i,state:l},c.push(r)),0===c.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+t.byteLength);g.set(p.data,0),g.set(t,p.data.byteLength),p.data=g}}return s.naluState=l,c},e.discardEPB=function(t){for(var e,n,r=t.byteLength,i=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return t;e=r-i.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=t[o];return n},e._parseAACPES=function(t){var e,n,a,o,l,u,c,d=this._audioTrack,f=t.data,v=t.pts,y=this.aacOverFlow,b=this.aacLastPTS;if(y){var S=new Uint8Array(y.byteLength+f.byteLength);S.set(y,0),S.set(f,y.byteLength),f=S}for(a=0,l=f.length;a<l-1&&!h(f,a);a++);if(!a||(a<l-1?(u="AAC PES did not start with ADTS header,offset:"+a,c=!1):(u="no ADTS header found in AAC PES",c=!0),s.logger.warn("parsing error:"+u),this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:c,reason:u}),!c)){if(p(d,this.observer,f,a,this.audioCodec),n=0,e=g(d.samplerate),y&&b){var w=b+e;Math.abs(w-v)>1&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((w-v)/90)),v=w)}for(;a<l;){if(h(f,a)){if(a+5<l){var T=m(d,f,a,v,n);if(T){a+=T.length,o=T.sample.pts,n++;continue}}break}a++}y=a<l?f.subarray(a,l):null,this.aacOverFlow=y,this.aacLastPTS=o}},e._parseMPEGPES=function(t){for(var e=t.data,n=e.length,r=0,i=0,a=t.pts;i<n;)if(w.isHeader(e,i)){var o=w.appendFrame(this._audioTrack,e,i,a,r);if(!o)break;i+=o.length,r++}else i++},e._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),E=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:r,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){var e,n,r=v.default.getID3Data(t,0);if(r&&void 0!==v.default.getTimeStamp(r))for(e=r.length,n=Math.min(t.length-1,e+100);e<n;e++)if(w.probe(t,e))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},e.append=function(t,e,n,r){for(var i=v.default.getID3Data(t,0)||[],a=v.default.getTimeStamp(i),o=void 0!==a?90*a:9e4*e,s=i.length,l=t.length,u=0,c=0,d=this._audioTrack,h=[{pts:o,dts:o,data:i}];s<l;)if(w.isHeader(t,s)){var f=w.appendFrame(d,t,s,o,u);if(!f)break;s+=f.length,c=f.sample.pts,u++}else v.default.isHeader(t,s)?(i=v.default.getID3Data(t,s),h.push({pts:c,dts:c,data:i}),s+=i.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,n,r)},e.destroy=function(){},t}(),$=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),A=Math.pow(2,32)-1,C=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,l,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,a=i;i--;)r+=n[i].byteLength;for((e=new Uint8Array(r))[0]=r>>24&255,e[1]=r>>16&255,e[2]=r>>8&255,e[3]=255&r,e.set(t,4),i=0,r=8;i<a;i++)e.set(n[i],r),r+=n[i].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,n){n*=e;var r=Math.floor(n/(A+1)),i=Math.floor(n%(A+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,n,r){return t.box(t.types.moof,t.mfhd(e),t.traf(r,n))},t.moov=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(t.mvex(e)))},t.mvex=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(r))},t.mvhd=function(e,n){n*=e;var r=Math.floor(n/(A+1)),i=Math.floor(n%(A+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var n,r,i,a=[],o=[];for(n=0;n<e.sps.length;n++)i=(r=e.sps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<e.pps.length;n++)i=(r=e.pps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var n=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var n=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var n=e.id,r=e.duration*e.timescale,i=e.width,a=e.height,o=Math.floor(r/(A+1)),s=Math.floor(r%(A+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,n){var r=t.sdtp(e),i=e.id,a=Math.floor(n/(A+1)),o=Math.floor(n%(A+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,r.length+16+20+8+16+8+8),r)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,n){var r,i,a,o,s,l,u=e.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)a=(i=u[r]).duration,o=i.size,s=i.flags,l=i.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var n,r=t.moov(e);return(n=new Uint8Array(t.FTYP.byteLength+r.byteLength)).set(t.FTYP),n.set(r,t.FTYP.byteLength),n},t}();function D(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);var i=t*e*n;return r?Math.round(i):i}function M(t,e){return void 0===e&&(e=!1),D(t,1e3,1/9e4,e)}function R(t,e){return void 0===e&&(e=1),D(t,9e4,1/e)}var O=R(10),I=R(.2),L=null;function P(t,e){var n;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}var F,N=function(){function t(t,e,n,r){if(this.observer=t,this.config=e,this.typeSupported=n,this.ISGenerated=!1,null===L){var i=navigator.userAgent.match(/Chrome\/(\d+)/i);L=i?parseInt(i[1]):0}}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},e.resetInitSegment=function(){this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,n=t.reduce((function(t,n){var r=n.pts-t;return r<-4294967296?(e=!0,t):r>0?t:n.pts}),t[0].pts);return e&&s.logger.debug("PTS rollover detected"),n},e.remux=function(t,e,n,i,a,o,l){if(this.ISGenerated||this.generateIS(t,e,a),this.ISGenerated){var u=t.samples.length,c=e.samples.length,d=a,h=a;if(u&&c){var f=this.getVideoStartPts(e.samples),p=(t.samples[0].pts-f)/e.inputTimeScale;d+=Math.max(0,p),h+=Math.max(0,-p)}if(u){t.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,a));var g,m=this.remuxAudio(t,d,o,l);c&&(m&&(g=m.endPTS-m.startPTS),e.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,a)),this.remuxVideo(e,h,o,g))}else if(c){var v=this.remuxVideo(e,h,o,0,l);v&&t.codec&&this.remuxEmptyAudio(t,d,o,v)}}n.samples.length&&this.remuxID3(n,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(r.default.FRAG_PARSED)},e.generateIS=function(t,e,n){var a,o,l=this.observer,u=t.samples,c=e.samples,d=this.typeSupported,h="audio/mp4",f={},p={tracks:f},g=void 0===this._initPTS;if(g&&(a=o=1/0),t.config&&u.length&&(t.timescale=t.samplerate,s.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(d.mpeg?(h="audio/mpeg",t.codec=""):d.mp3&&(t.codec="mp3")),f.audio={container:h,codec:t.codec,initSegment:!t.isAAC&&d.mpeg?new Uint8Array:C.initSegment([t]),metadata:{channelCount:t.channelCount}},g&&(a=o=u[0].pts-Math.round(t.inputTimeScale*n))),e.sps&&e.pps&&c.length){var m=e.inputTimeScale;if(e.timescale=m,f.video={container:"video/mp4",codec:e.codec,initSegment:C.initSegment([e]),metadata:{width:e.width,height:e.height}},g){var v=this.getVideoStartPts(c),y=Math.round(m*n);o=Math.min(o,c[0].dts-y),a=Math.min(a,v-y),this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:a})}}else g&&f.audio&&this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:a});Object.keys(f).length?(l.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=a,this._initDTS=o)):l.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.remuxVideo=function(t,e,n,a){var o,l,u,c,d,h=t.timescale,f=t.samples,p=[],g=f.length,m=this._initPTS,v=8,y=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,S=0,w=!1,T=this.nextAvcDts;if(0!==g){n||(T=e*h-(f[0].pts-P(f[0].dts,f[0].pts)));for(var x=0;x<g;x++){var _=f[x];_.pts=P(_.pts-m,T),_.dts=P(_.dts-m,T),_.dts>_.pts&&(S=Math.max(Math.min(S,_.pts-_.dts),-1*I)),_.dts<f[x>0?x-1:x].dts&&(w=!0)}w&&f.sort((function(t,e){var n=t.dts-e.dts,r=t.pts-e.pts;return n||r||t.id-e.id})),c=f[0].dts,d=f[g-1].dts;var k=Math.round((d-c)/(g-1));if(S<0){if(S<-2*k){s.logger.warn("PTS < DTS detected in video samples, offsetting DTS to PTS "+M(-k,!0)+" ms");for(var E=0;E<g;E++)f[E].dts=f[E].pts-k}else{s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+M(S,!0)+" ms to overcome this issue");for(var $=0;$<g;$++)f[$].dts=f[$].dts+S}c=f[0].dts,d=f[g-1].dts}if(n){var A=c-T,D=A>k;if(D||A<-1){D?s.logger.warn("AVC: "+M(A,!0)+" ms ("+A+"dts) hole between fragments detected, filling it"):s.logger.warn("AVC: "+M(-A,!0)+" ms ("+A+"dts) overlapping between fragments detected"),c=T;var R=f[0].pts-A;f[0].dts=c,f[0].pts=R,s.logger.log("Video: First PTS/DTS adjusted: "+M(R,!0)+"/"+M(c,!0)+", delta: "+M(A,!0)+" ms")}}L&&L<75&&(c=Math.max(0,c));for(var O=0,F=0,N=0;N<g;N++){for(var U=f[N],B=U.units,V=B.length,j=0,H=0;H<V;H++)j+=B[H].data.length;F+=j,O+=V,U.length=j,U.dts=Math.max(U.dts,c),U.pts=Math.max(U.pts,U.dts,0),y=Math.min(U.pts,y),b=Math.max(U.pts,b)}d=f[g-1].dts;var W=F+4*O+8;try{l=new Uint8Array(W)}catch(t){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:W,reason:"fail allocating video mdat "+W})}var z=new DataView(l.buffer);z.setUint32(0,W),l.set(C.types.mdat,4);for(var G=0;G<g;G++){for(var Y,q=f[G],K=q.units,X=0,Z=0,J=K.length;Z<J;Z++){var Q=K[Z],tt=Q.data,et=Q.data.byteLength;z.setUint32(v,et),v+=4,l.set(tt,v),v+=et,X+=4+et}if(G<g-1)o=f[G+1].dts-q.dts;else{var nt=this.config,rt=q.dts-f[G>0?G-1:G].dts;if(nt.stretchShortVideoTrack){var it=nt.maxBufferHole,at=Math.floor(it*h),ot=(a?y+a*h:this.nextAudioPts)-q.pts;ot>at?((o=ot-rt)<0&&(o=rt),s.logger.log("It is approximately "+M(ot,!1)+" ms to the next segment; using duration "+M(o,!1)+" ms for the last video frame.")):o=rt}else o=rt}Y=Math.round(q.pts-q.dts),p.push({size:X,duration:o,cts:Y,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:q.key?2:1,isNonSync:q.key?0:1}})}this.nextAvcDts=d+o;var st=t.dropped;if(t.nbNalu=0,t.dropped=0,p.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var lt=p[0].flags;lt.dependsOn=2,lt.isNonSync=0}t.samples=p,u=C.moof(t.sequenceNumber++,c,t),t.samples=[];var ut={data1:u,data2:l,startPTS:y/h,endPTS:(b+o)/h,startDTS:c/h,endDTS:this.nextAvcDts/h,type:"video",hasAudio:!1,hasVideo:!0,nb:p.length,dropped:st};return this.observer.trigger(r.default.FRAG_PARSING_DATA,ut),ut}},e.remuxAudio=function(t,e,n,a){var o,l,u,c,d,h,f=t.inputTimeScale,p=t.timescale,g=f/p,m=(t.isAAC?1024:1152)*g,v=this._initPTS,y=!t.isAAC&&this.typeSupported.mpeg,b=y?0:8,S=t.samples,w=[],T=this.nextAudioPts;if(n|=S.length&&T&&(a&&Math.abs(e-T/f)<.1||Math.abs(S[0].pts-T-v)<20*m),S.forEach((function(t){t.pts=t.dts=P(t.pts-v,e*f)})),0!==(S=S.filter((function(t){return t.pts>=0}))).length){if(n||(T=a?Math.max(0,e*f):S[0].pts),t.isAAC)for(var x=this.config.maxAudioFramesDrift,_=0,k=T;_<S.length;){var E=S[_],A=E.pts,D=A-k;if(D<=-x*m)n||_>0?(s.logger.warn("Dropping 1 audio frame @ "+M(k,!0)/1e3+"s due to "+M(D,!0)+" ms overlap."),S.splice(_,1)):(s.logger.warn("Audio frame @ "+M(A,!0)/1e3+"s overlaps nextAudioPts by "+M(D,!0)+" ms."),k=A+m,_++);else if(D>=x*m&&D<O&&k){var R=Math.round(D/m);s.logger.warn("Injecting "+R+" audio frames @ "+M(k,!0)/1e3+"s due to "+M(D,!0)+" ms gap.");for(var I=0;I<R;I++){var L=Math.max(k,0);(l=$.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=E.unit.subarray()),S.splice(_,0,{unit:l,pts:L,dts:L}),k+=m,_++}E.pts=E.dts=k,k+=m,_++}else E.pts=E.dts=k,k+=m,_++}for(var F=S.length,N=0;F--;)N+=S[F].unit.byteLength;for(var U=0,B=S.length;U<B;U++){var V=S[U],j=V.unit,H=V.pts;if(void 0!==h&&o)o.duration=Math.round((H-h)/g);else{var W=H-T,z=0;if(n&&t.isAAC&&W){if(W>0&&W<O)z=Math.round((H-T)/m),s.logger.log(M(W,!0)+" ms hole between AAC samples detected,filling it"),z>0&&((l=$.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(l=j.subarray()),N+=z*l.length);else if(W<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+M(T,!0)+" ms / "+M(H,!0)+" ms / "+M(-W,!0)+" ms"),N-=j.byteLength;continue}H=T}if(d=H,!(N>0))return;N+=b;try{u=new Uint8Array(N)}catch(t){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating audio mdat "+N})}y||(new DataView(u.buffer).setUint32(0,N),u.set(C.types.mdat,4));for(var G=0;G<z;G++)(l=$.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=j.subarray()),u.set(l,b),b+=l.byteLength,o={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(o)}u.set(j,b);var Y=j.byteLength;b+=Y,o={size:Y,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(o),h=H}var q=0;if((F=w.length)>=2&&(q=w[F-2].duration,o.duration=q),F){this.nextAudioPts=T=h+g*q,t.samples=w,c=y?new Uint8Array:C.moof(t.sequenceNumber++,d/g,t),t.samples=[];var K=d/f,X=T/f,Z={data1:c,data2:u,startPTS:K,endPTS:X,startDTS:K,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:F};return this.observer.trigger(r.default.FRAG_PARSING_DATA,Z),Z}return null}},e.remuxEmptyAudio=function(t,e,n,r){var i=t.inputTimeScale,a=i/(t.samplerate?t.samplerate:i),o=this.nextAudioPts,l=(void 0!==o?o:r.startDTS*i)+this._initDTS,u=r.endDTS*i+this._initDTS,c=1024*a,d=Math.ceil((u-l)/c),h=$.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(s.logger.warn("remux empty Audio"),h){for(var f=[],p=0;p<d;p++){var g=l+p*c;f.push({unit:h,pts:g,dts:g})}t.samples=f,this.remuxAudio(t,e,n)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.remuxID3=function(t,e){var n=t.samples.length;if(n){for(var i=t.inputTimeScale,a=this._initPTS,o=this._initDTS,s=0;s<n;s++){var l=t.samples[s];l.pts=P(l.pts-a,e*i)/i,l.dts=P(l.dts-o,e*i)/i}this.observer.trigger(r.default.FRAG_PARSING_METADATA,{samples:t.samples}),t.samples=[]}},e.remuxText=function(t,e){var n=t.samples.length,i=t.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++){var s=t.samples[o];s.pts=P(s.pts-a,e*i)/i}t.samples.sort((function(t,e){return t.pts-e.pts})),this.observer.trigger(r.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},t}(),U=function(){function t(t){this.observer=t}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.remux=function(t,e,n,i,a,o,s,l){var u=this.observer,c="";t&&(c+="audio"),e&&(c+="video"),u.trigger(r.default.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),u.trigger(r.default.FRAG_PARSED)},t}(),B=Object(l.getSelfScope)();try{F=B.performance.now.bind(B.performance)}catch(t){s.logger.debug("Unable to use Performance API on this environment"),F=B.Date.now}var V=function(){function t(t,e,n,r){this.observer=t,this.typeSupported=e,this.config=n,this.vendor=r}var e=t.prototype;return e.destroy=function(){var t=this.demuxer;t&&t.destroy()},e.push=function(t,e,n,i,o,s,l,u,c,d,h,f){var p=this;if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var g=this.decrypter;null==g&&(g=this.decrypter=new a.default(this.observer,this.config));var m=F();g.decrypt(t,e.key.buffer,e.iv.buffer,(function(t){var a=F();p.observer.trigger(r.default.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),p.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,o,s,l,u,c,d,h,f)}))}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,o,s,l,u,c,d,h,f)},e.pushDecrypted=function(t,e,n,a,o,s,l,u,c,d,h,f){var p=this.demuxer,g=this.remuxer;if(!p||l||u){for(var m,v=this.observer,S=this.typeSupported,w=this.config,T=[{demux:k,remux:N},{demux:b.default,remux:U},{demux:y,remux:N},{demux:E,remux:N}],x=0,_=T.length;x<_&&!(m=T[x]).demux.probe(t);x++);if(!m)return void v.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});g&&g instanceof m.remux||(g=new m.remux(v,w,S,this.vendor)),p&&p instanceof m.demux||(p=new m.demux(v,g,w,S),this.probe=m.demux.probe),this.demuxer=p,this.remuxer=g}(l||u)&&(p.resetInitSegment(n,a,o,d),g.resetInitSegment()),l&&(p.resetTimeStamp(f),g.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(e),p.append(t,s,c,h)},t}();e.default=V},"./src/demux/demuxer-worker.js":
/*!*************************************!*\
    !*** ./src/demux/demuxer-worker.js ***!
    \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(t,e,n){n.r(e);var r=n(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),i=n(/*! ../events */"./src/events.js"),a=n(/*! ../utils/logger */"./src/utils/logger.js"),o=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js");e.default=function(t){var e=new o.EventEmitter;e.trigger=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t,t].concat(r))},e.off=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.removeListener.apply(e,[t].concat(r))};var n=function(e,n){t.postMessage({event:e,data:n})};t.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.demuxer=new r.default(e,o.typeSupported,s,o.vendor),Object(a.enableLogs)(s.debug),n("init",null);break;case"demux":t.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),e.on(i.default.FRAG_DECRYPTED,n),e.on(i.default.FRAG_PARSING_INIT_SEGMENT,n),e.on(i.default.FRAG_PARSED,n),e.on(i.default.ERROR,n),e.on(i.default.FRAG_PARSING_METADATA,n),e.on(i.default.FRAG_PARSING_USERDATA,n),e.on(i.default.INIT_PTS_FOUND,n),e.on(i.default.FRAG_PARSING_DATA,(function(e,n){var r=[],i={event:e,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),t.postMessage(i,r)}))}},"./src/demux/id3.js":
/*!**************************!*\
    !*** ./src/demux/id3.js ***!
    \**************************/
/*! exports provided: default, utf8ArrayToStr */function(t,e,n){n.r(e),n.d(e,"utf8ArrayToStr",(function(){return s}));var r,i=n(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),a=function(){function t(){}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,n){for(var r=n,i=0;t.isHeader(e,n);)i+=10,i+=t._readSize(e,n+6),t.isFooter(e,n+10)&&(i+=10),n+=i;if(i>0)return e.subarray(r,r+i)},t._readSize=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,n|=(127&t[e+2])<<7,n|=127&t[e+3]},t.getTimeStamp=function(e){for(var n=t.getID3Frames(e),r=0;r<n.length;r++){var i=n[r];if(t.isTimeStampFrame(i))return t._readTimeStamp(i)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var n=String.fromCharCode(e[0],e[1],e[2],e[3]),r=t._readSize(e,4);return{type:n,size:r,data:e.subarray(10,10+r)}},t.getID3Frames=function(e){for(var n=0,r=[];t.isHeader(e,n);){for(var i=t._readSize(e,n+6),a=(n+=10)+i;n+8<a;){var o=t._getFrameData(e.subarray(n)),s=t._decodeFrame(o);s&&r.push(s),n+=o.size+10}t.isFooter(e,n)&&(n+=10)}return r},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=1&e[3],r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var n=t._utf8ArrayToStr(e.data,!0),r=new Uint8Array(e.data.subarray(n.length+1));return{key:e.type,info:n,data:r.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var n=1,r=t._utf8ArrayToStr(e.data.subarray(n),!0);n+=r.length+1;var i=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:r,data:i}}var a=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:a}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var n=1,r=t._utf8ArrayToStr(e.data.subarray(n),!0);n+=r.length+1;var i=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:r,data:i}}var a=t._utf8ArrayToStr(e.data);return{key:e.type,data:a}},t._utf8ArrayToStr=function(t,e){void 0===e&&(e=!1);var n=o();if(n){var r=n.decode(t);if(e){var i=r.indexOf("\0");return-1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var a,s,l,u=t.length,c="",d=0;d<u;){if(0===(a=t[d++])&&e)return c;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(a);break;case 12:case 13:s=t[d++],c+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=t[d++],l=t[d++],c+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&l)<<0)}}return c},t}();function o(){var t=Object(i.getSelfScope)();return r||void 0===t.TextDecoder||(r=new t.TextDecoder("utf-8")),r}var s=a._utf8ArrayToStr;e.default=a},"./src/demux/mp4demuxer.js":
/*!*********************************!*\
    !*** ./src/demux/mp4demuxer.js ***!
    \*********************************/
/*! exports provided: default */function(t,e,n){n.r(e);var r=n(/*! ../utils/logger */"./src/utils/logger.js"),i=n(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,o=function(){function t(t,e){this.observer=t,this.remuxer=e}var e=t.prototype;return e.resetTimeStamp=function(t){this.initPTS=t},e.resetInitSegment=function(e,n,r,a){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==n&&(n="mp4a.40.5"),null==r&&(r="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:a?e:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:a?e:null}),o.video&&(s.video={container:"video/mp4",codec:r,initSegment:a?e:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<8|t[e+1];return n<0?65536+n:n},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n},t.writeUint32=function(t,e,n){t.data&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},t.findBox=function(e,n){var r,i,a,o,s,l,u=[];if(e.data?(s=e.start,a=e.end,e=e.data):(s=0,a=e.byteLength),!n.length)return null;for(r=s;r<a;)l=(i=t.readUint32(e,r))>1?r+i:a,t.bin2str(e.subarray(r+4,r+8))===n[0]&&(1===n.length?u.push({data:e,start:r+8,end:l}):(o=t.findBox({data:e,start:r+8,end:l},n.slice(1))).length&&(u=u.concat(o))),r=l;return u},t.parseSegmentIndex=function(e){var n,r=t.findBox(e,["moov"])[0],i=r?r.end:null,a=0,o=t.findBox(e,["sidx"]);if(!o||!o[0])return null;n=[];var s=(o=o[0]).data[0];a=0===s?8:16;var l=t.readUint32(o,a);a+=4,a+=0===s?8:16,a+=2;var u=o.end+0,c=t.readUint16(o,a);a+=2;for(var d=0;d<c;d++){var h=a,f=t.readUint32(o,h);h+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=t.readUint32(o,h);h+=4,n.push({referenceSize:p,subsegmentDuration:g,info:{duration:g/l,start:u,end:u+p-1}}),u+=p,a=h+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:c,references:n,moovEndOffset:i}},t.parseInitSegment=function(e){var n=[];return t.findBox(e,["moov","trak"]).forEach((function(e){var i=t.findBox(e,["tkhd"])[0];if(i){var a=i.data[i.start],o=0===a?12:20,s=t.readUint32(i,o),l=t.findBox(e,["mdia","mdhd"])[0];if(l){o=0===(a=l.data[l.start])?12:20;var u=t.readUint32(l,o),c=t.findBox(e,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[t.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var h=t.findBox(e,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var f=t.bin2str(h.data.subarray(h.start+12,h.start+16));r.logger.log("MP4Demuxer:"+d+":"+f+" found")}n[s]={timescale:u,type:d},n[d]={timescale:u,id:s}}}}}})),n},t.getStartDTS=function(e,n){var r,i,a;return r=t.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map((function(n){return t.findBox(n,["tfhd"]).map((function(r){var i,a;return i=t.readUint32(r,4),a=e[i].timescale||9e4,t.findBox(n,["tfdt"]).map((function(e){var n,r;return n=e.data[e.start],r=t.readUint32(e,4),1===n&&(r*=Math.pow(2,32),r+=t.readUint32(e,8)),r}))[0]/a}))}))),a=Math.min.apply(null,i),isFinite(a)?a:0},t.offsetStartDTS=function(e,n,r){t.findBox(n,["moof","traf"]).map((function(n){return t.findBox(n,["tfhd"]).map((function(i){var o=t.readUint32(i,4),s=e[o].timescale||9e4;t.findBox(n,["tfdt"]).map((function(e){var n=e.data[e.start],i=t.readUint32(e,4);if(0===n)t.writeUint32(e,4,i-r*s);else{i*=Math.pow(2,32),i+=t.readUint32(e,8),i-=r*s,i=Math.max(i,0);var o=Math.floor(i/(a+1)),l=Math.floor(i%(a+1));t.writeUint32(e,4,o),t.writeUint32(e,8,l)}}))}))}))},e.append=function(e,n,r,a){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=t.getStartDTS(o,e);this.initPTS=l=u-n,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}t.offsetStartDTS(o,e,l),s=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,s,r,a,e)},e.destroy=function(){},t}();e.default=o},"./src/errors.ts":
/*!***********************!*\
    !*** ./src/errors.ts ***!
    \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(t,e,n){var r,i;n.r(e),n.d(e,"ErrorTypes",(function(){return r})),n.d(e,"ErrorDetails",(function(){return i})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(r||(r={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"}(i||(i={}))},"./src/events.js":
/*!***********************!*\
    !*** ./src/events.js ***!
    \***********************/
/*! exports provided: default */function(t,e,n){n.r(e),e.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":
/*!*********************************!*\
    !*** ./src/hls.ts + 50 modules ***!
    \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(t,e,n){n.r(e),n.d(e,"default",(function(){return ln}));var r={};n.r(r),n.d(r,"newCue",(function(){return fe}));var i,a,o=n("./node_modules/url-toolkit/src/url-toolkit.js"),s=n("./src/errors.ts"),l=n("./src/polyfills/number.js"),u=n("./src/events.js"),c=n("./src/utils/logger.js"),d={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},h=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){},e.onHandlerDestroyed=function(){},e.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){if(d[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)}),this)},e.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){this.hls.off(t,this.onEvent)}),this)},e.onEvent=function(t,e){this.onEventGeneric(t,e)},e.onEventGeneric=function(t,e){try{(function(t,e){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)}).call(this,t,e).call()}catch(e){c.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}();!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(i||(i={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(a||(a={}));var f=n("./src/demux/mp4demuxer.js");function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g,m=function(){function t(t,e){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=e}var e,n,r;return e=t,(n=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&p(e.prototype,n),r&&p(e,r),t}();function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t){t.AUDIO="audio",t.VIDEO="video"}(g||(g={}));var y=function(){function t(){var t;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((t={})[g.AUDIO]=!1,t[g.VIDEO]=!1,t),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var e,n,r,i=t.prototype;return i.setByteRange=function(t,e){var n=t.split("@",2),r=[];1===n.length?r[0]=e?e.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},i.addElementaryStream=function(t){this._elementaryStreams[t]=!0},i.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},i.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},i.setDecryptDataFromLevelKey=function(t,e){var n=t;return(null==t?void 0:t.method)&&t.uri&&!t.iv&&((n=new m(t.baseuri,t.reluri)).method=t.method,n.iv=this.createInitializationVector(e)),n},e=t,(n=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l.isFiniteNumber)(this.programDateTime))return null;var t=Object(l.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&v(e.prototype,n),r&&v(e,r),t}();function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var S=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}var e,n,r;return e=t,(n=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&b(e.prototype,n),r&&b(e,r),t}(),w=/^(\d+)x(\d+)$/,T=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,x=function(){function t(e){for(var n in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(n)&&(this[n]=e[n])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),r=0;r<e.length/2;r++)n[r]=parseInt(e.slice(2*r,2*r+2),16);return n}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.enumeratedString=function(t){return this[t]},e.decimalResolution=function(t){var e=w.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,n={};for(T.lastIndex=0;null!==(e=T.exec(t));){var r=e[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[e[1]]=r}return n},t}(),_={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function k(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var E=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,$=/#EXT-X-MEDIA:(.*)/g,A=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),C=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,D=/\.(mp4|m4s|m4v|m4a)$/i,M=function(){function t(){}return t.findGroup=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.id===e)return r}},t.convertAVC1ToAVCOTI=function(t){var e,n=t.split(".");return n.length>2?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return o.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){var r,i=[],a={},o=!1;function s(t,e){["video","audio"].forEach((function(n){var r=t.filter((function(t){return function(t,e){var n=_[e];return!!n&&!0===n[t.slice(0,4)]}(t,n)}));if(r.length){var i=r.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[n+"Codec"]=i.length>0?i[0]:r[0],t=t.filter((function(t){return-1===r.indexOf(t)}))}})),e.unknownCodecs=t}for(E.lastIndex=0;null!=(r=E.exec(e));)if(r[1]){var l={},u=l.attrs=new x(r[1]);l.url=t.resolve(r[2],n);var c=u.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),l.bitrate=u.decimalInteger("AVERAGE-BANDWIDTH")||u.decimalInteger("BANDWIDTH"),l.name=u.NAME,s([].concat((u.CODECS||"").split(/[ ,]+/)),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=t.convertAVC1ToAVCOTI(l.videoCodec)),i.push(l)}else if(r[3]){var d=new x(r[3]);d["DATA-ID"]&&(o=!0,a[d["DATA-ID"]]=d)}return{levels:i,sessionData:o?a:null}},t.parseMasterPlaylistMedia=function(e,n,r,i){var a;void 0===i&&(i=[]);var o=[],s=0;for($.lastIndex=0;null!==(a=$.exec(e));){var l=new x(a[1]);if(l.TYPE===r){var u={attrs:l,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE,type:r,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=t.resolve(l.URI,n)),i.length){var c=t.findGroup(i,u.groupId);u.audioCodec=c?c.codec:i[0].codec}o.push(u)}}return o},t.parseLevelPlaylist=function(t,e,n,r,i){var a,o,s,u=0,d=0,h=new S(e),f=0,p=null,g=new y,v=null;for(A.lastIndex=0;null!==(a=A.exec(t));){var b=a[1];if(b){g.duration=parseFloat(b);var w=(" "+a[2]).slice(1);g.title=w||null,g.tagList.push(w?["INF",b,w]:["INF",b])}else if(a[3]){if(Object(l.isFiniteNumber)(g.duration)){var T=u++;g.type=r,g.start=d,s&&(g.levelkey=s),g.sn=T,g.level=n,g.cc=f,g.urlId=i,g.baseurl=e,g.relurl=(" "+a[3]).slice(1),R(g,p),h.fragments.push(g),p=g,d+=g.duration,g=new y}}else if(a[4]){var _=(" "+a[4]).slice(1);p?g.setByteRange(_,p):g.setByteRange(_)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===v&&(v=h.fragments.length);else{if(!(a=a[0].match(C))){c.logger.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length&&void 0===a[o];o++);var k=(" "+a[o+1]).slice(1),E=(" "+a[o+2]).slice(1);switch(a[o]){case"#":g.tagList.push(E?[k,E]:[k]);break;case"PLAYLIST-TYPE":h.type=k.toUpperCase();break;case"MEDIA-SEQUENCE":u=h.startSN=parseInt(k);break;case"TARGETDURATION":h.targetduration=parseFloat(k);break;case"VERSION":h.version=parseInt(k);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":f++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(k);break;case"KEY":var $=new x(k),M=$.enumeratedString("METHOD"),O=$.URI,I=$.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===($.KEYFORMAT||"identity")){c.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}M&&(s=new m(e,O),O&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(M)>=0&&(s.method=M,s.key=null,s.iv=I));break;case"START":var L=new x(k).decimalFloatingPoint("TIME-OFFSET");Object(l.isFiniteNumber)(L)&&(h.startTimeOffset=L);break;case"MAP":var P=new x(k);g.relurl=P.URI,P.BYTERANGE&&g.setByteRange(P.BYTERANGE),g.baseurl=e,g.level=n,g.type=r,g.sn="initSegment",h.initSegment=g,(g=new y).rawProgramDateTime=h.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+a)}}}return(g=p)&&!g.relurl&&(h.fragments.pop(),d-=g.duration),h.totalduration=d,h.averagetargetduration=d/h.fragments.length,h.endSN=u-1,h.startCC=h.fragments[0]?h.fragments[0].cc:0,h.endCC=f,!h.initSegment&&h.fragments.length&&h.fragments.every((function(t){return D.test(t.relurl)}))&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(g=new y).relurl=h.fragments[0].relurl,g.baseurl=e,g.level=n,g.type=r,g.sn="initSegment",h.initSegment=g,h.needSidxRanges=!0),v&&function(t,e){for(var n=t[e],r=e-1;r>=0;r--){var i=t[r];i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(h.fragments,v),h},t}();function R(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):(null==e?void 0:e.programDateTime)&&(t.programDateTime=e.endProgramDateTime),Object(l.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var O=window.performance,I=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.MANIFEST_LOADING,u.default.LEVEL_LOADING,u.default.AUDIO_TRACK_LOADING,u.default.SUBTITLE_TRACK_LOADING)||this).loaders={},n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.canHaveQualityLevels=function(t){return t!==i.AUDIO_TRACK&&t!==i.SUBTITLE_TRACK},r.mapContextToLevelType=function(t){switch(t.type){case i.AUDIO_TRACK:return a.AUDIO;case i.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},r.getResponseUrl=function(t,e){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=e.url),n};var o=r.prototype;return o.createInternalLoader=function(t){var e=this.hls.config,n=e.pLoader,r=e.loader,i=new(n||r)(e);return t.loader=i,this.loaders[t.type]=i,i},o.getInternalLoader=function(t){return this.loaders[t.type]},o.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},o.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},o.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},o.onManifestLoading=function(t){this.load({url:t.url,type:i.MANIFEST,level:0,id:null,responseType:"text"})},o.onLevelLoading=function(t){this.load({url:t.url,type:i.LEVEL,level:t.level,id:t.id,responseType:"text"})},o.onAudioTrackLoading=function(t){this.load({url:t.url,type:i.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},o.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:i.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},o.load=function(t){var e=this.hls.config;c.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n,r,a,o,s=this.getInternalLoader(t);if(s){var l=s.context;if(l&&l.url===t.url)return c.logger.trace("playlist request ongoing"),!1;c.logger.warn("aborting previous loader for type: "+t.type),s.abort()}switch(t.type){case i.MANIFEST:n=e.manifestLoadingMaxRetry,r=e.manifestLoadingTimeOut,a=e.manifestLoadingRetryDelay,o=e.manifestLoadingMaxRetryTimeout;break;case i.LEVEL:n=0,o=0,a=0,r=e.levelLoadingTimeOut;break;default:n=e.levelLoadingMaxRetry,r=e.levelLoadingTimeOut,a=e.levelLoadingRetryDelay,o=e.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(t);var u={timeout:r,maxRetry:n,retryDelay:a,maxRetryDelay:o},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.logger.debug("Calling internal loader delegate for URL: "+t.url),s.load(t,u,d),!0},o.loadsuccess=function(t,e,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this._handleSidxRequest(t,n),void this._handlePlaylistLoaded(t,e,n,r);if(this.resetInternalLoader(n.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=t.data;e.tload=O.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,e,n,r):this._handleMasterPlaylist(t,e,n,r):this._handleManifestParsingError(t,n,"no EXTM3U delimiter",r)},o.loaderror=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!1,t)},o.loadtimeout=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!0)},o._handleMasterPlaylist=function(t,e,n,i){var a=this.hls,o=t.data,s=r.getResponseUrl(t,n),l=M.parseMasterPlaylist(o,s),d=l.levels,h=l.sessionData;if(d.length){var f=d.map((function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}})),p=M.parseMasterPlaylistMedia(o,s,"AUDIO",f),g=M.parseMasterPlaylistMedia(o,s,"SUBTITLES"),m=M.parseMasterPlaylistMedia(o,s,"CLOSED-CAPTIONS");if(p.length){var v=!1;p.forEach((function(t){t.url||(v=!0)})),!1===v&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(c.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}a.trigger(u.default.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:g,captions:m,url:s,stats:e,networkDetails:i,sessionData:h})}else this._handleManifestParsingError(t,n,"no level found in manifest",i)},o._handleTrackOrLevelPlaylist=function(t,e,n,a){var o=this.hls,c=n.id,d=n.level,h=n.type,f=r.getResponseUrl(t,n),p=Object(l.isFiniteNumber)(c)?c:0,g=Object(l.isFiniteNumber)(d)?d:p,m=r.mapContextToLevelType(n),v=M.parseLevelPlaylist(t.data,f,g,m,p);if(v.tload=e.tload,v.fragments.length){if(h===i.MANIFEST){var y={url:f,details:v};o.trigger(u.default.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:f,stats:e,networkDetails:a,sessionData:null})}if(e.tparsed=O.now(),v.needSidxRanges){var b=v.initSegment.url;this.load({url:b,isSidxRequest:!0,type:h,level:d,levelDetails:v,id:c,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=v,this._handlePlaylistLoaded(t,e,n,a)}else o.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:f,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},o._handleSidxRequest=function(t,e){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var n=f.default.parseSegmentIndex(new Uint8Array(t.data));if(n){var r=n.references,i=e.levelDetails;r.forEach((function(t,e){var n=t.info;if(i){var r=i.fragments[e];0===r.byteRange.length&&r.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}})),i&&i.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},o._handleManifestParsingError=function(t,e,n,r){this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:n,networkDetails:r})},o._handleNetworkError=function(t,e,n,r){var a,o;void 0===n&&(n=!1),void 0===r&&(r=null),c.logger.info("A network error occured while loading a "+t.type+"-type playlist");var l=this.getInternalLoader(t);switch(t.type){case i.MANIFEST:a=n?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case i.LEVEL:a=n?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case i.AUDIO_TRACK:a=n?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}l&&(l.abort(),this.resetInternalLoader(t.type));var d={type:s.ErrorTypes.NETWORK_ERROR,details:a,fatal:o,url:t.url,loader:l,context:t,networkDetails:e};r&&(d.response=r),this.hls.trigger(u.default.ERROR,d)},o._handlePlaylistLoaded=function(t,e,n,a){var o=n.type,s=n.level,l=n.id,c=n.levelDetails;if(c&&c.targetduration)if(r.canHaveQualityLevels(n.type))this.hls.trigger(u.default.LEVEL_LOADED,{details:c,level:s||0,id:l||0,stats:e,networkDetails:a});else switch(o){case i.AUDIO_TRACK:this.hls.trigger(u.default.AUDIO_TRACK_LOADED,{details:c,id:l,stats:e,networkDetails:a});break;case i.SUBTITLE_TRACK:this.hls.trigger(u.default.SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:e,networkDetails:a})}else this._handleManifestParsingError(t,n,"invalid target duration",a)},r}(h),L=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.FRAG_LOADING)||this).loaders={},n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){var e=this.loaders;for(var n in e){var r=e[n];r&&r.destroy()}this.loaders={},t.prototype.destroy.call(this)},i.onFragLoading=function(t){var e=t.frag,n=e.type,r=this.loaders,i=this.hls.config,a=i.fLoader,o=i.loader;e.loaded=0;var s,u,d,h=r[n];h&&(c.logger.warn("abort previous fragment loader for type: "+n),h.abort()),h=r[n]=e.loader=i.fLoader?new a(i):new o(i),s={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var f=e.byteRangeStartOffset,p=e.byteRangeEndOffset;Object(l.isFiniteNumber)(f)&&Object(l.isFiniteNumber)(p)&&(s.rangeStart=f,s.rangeEnd=p),u={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(s,u,d)},i.loadsuccess=function(t,e,n,r){void 0===r&&(r=null);var i=t.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:i,frag:a,stats:e,networkDetails:r})},i.loaderror=function(t,e,n){void 0===n&&(n=null);var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:n})},i.loadtimeout=function(t,e,n){void 0===n&&(n=null);var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:n})},i.loadprogress=function(t,e,n,r){void 0===r&&(r=null);var i=e.frag;i.loaded=t.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:i,stats:t,networkDetails:r})},r}(h),P=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.KEY_LOADING)||this).loaders={},n.decryptkey=null,n.decrypturl=null,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){for(var e in this.loaders){var n=this.loaders[e];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},i.onKeyLoading=function(t){var e=t.frag,n=e.type,r=this.loaders[n];if(e.decryptdata){var i=e.decryptdata.uri;if(i!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(r&&(c.logger.warn("abort previous key loader for type:"+n),r.abort()),!i)return void c.logger.warn("key uri is falsy");e.loader=this.loaders[n]=new a.loader(a),this.decrypturl=i,this.decryptkey=null;var o={url:i,frag:e,responseType:"arraybuffer"},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};e.loader.load(o,s,l)}else this.decryptkey&&(e.decryptdata.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:e}))}else c.logger.warn("Missing decryption data on fragment in onKeyLoading")},i.loadsuccess=function(t,e,n){var r=n.frag;r.decryptdata?(this.decryptkey=r.decryptdata.key=new Uint8Array(t.data),r.loader=void 0,delete this.loaders[r.type],this.hls.trigger(u.default.KEY_LOADED,{frag:r})):c.logger.error("after key load, decryptdata unset")},i.loaderror=function(t,e){var n=e.frag,r=n.loader;r&&r.abort(),delete this.loaders[n.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},i.loadtimeout=function(t,e){var n=e.frag,r=n.loader;r&&r.abort(),delete this.loaders[n.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},r}(h),F="NOT_LOADED",N="APPENDING",U="PARTIAL",B="OK",V=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.BUFFER_APPENDED,u.default.FRAG_BUFFERED,u.default.FRAG_LOADED)||this).bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=e.config,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,h.prototype.destroy.call(this),t.prototype.destroy.call(this)},i.getBufferedFrag=function(t,e){var n=this.fragments,r=Object.keys(n).filter((function(r){var i=n[r];if(i.body.type!==e)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=t&&t<=a.endPTS}));if(0===r.length)return null;var i=r.pop();return n[i].body},i.detectEvictedFragments=function(t,e){var n=this;Object.keys(this.fragments).forEach((function(r){var i=n.fragments[r];if(i&&i.buffered){var a=i.range[t];if(a)for(var o=a.time,s=0;s<o.length;s++){var l=o[s];if(!n.isTimeBuffered(l.startPTS,l.endPTS,e)){n.removeFragment(i.body);break}}}}))},i.detectPartialFragments=function(t){var e=this,n=this.getFragmentKey(t),r=this.fragments[n];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach((function(n){if(t.hasElementaryStream(n)){var i=e.timeRanges[n];r.range[n]=e.getBufferedTimes(t.startPTS,t.endPTS,i)}})))},i.getBufferedTimes=function(t,e,n){for(var r,i,a=[],o=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,t>=r&&e<=i){a.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))});break}if(t<i&&e>r)a.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))}),o=!0;else if(e<=r)break}return{time:a,partial:o}},i.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},i.getPartialFragment=function(t){var e,n,r,i=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var l=i.fragments[s];i.isPartial(l)&&(n=l.body.startPTS-i.bufferPadding,r=l.body.endPTS+i.bufferPadding,t>=n&&t<=r&&(e=Math.min(t-n,r-t),o<=e&&(a=l.body,o=e)))})),a},i.getState=function(t){var e=this.getFragmentKey(t),n=this.fragments[e],r=F;return void 0!==n&&(r=n.buffered?!0===this.isPartial(n)?U:B:N),r},i.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},i.isTimeBuffered=function(t,e,n){for(var r,i,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,t>=r&&e<=i)return!0;if(e<=r)return!1}return!1},i.onFragLoaded=function(t){var e=t.frag;Object(l.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},i.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach((function(t){var n=e.timeRanges[t];e.detectEvictedFragments(t,n)}))},i.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},i.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},i.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},i.removeAllFragments=function(){this.fragments=Object.create(null)},r}(h),j={search:function(t,e){for(var n=0,r=t.length-1,i=null,a=null;n<=r;){var o=e(a=t[i=(n+r)/2|0]);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}},H=function(){function t(){}return t.isBuffered=function(t,e){try{if(t)for(var n=t.buffered,r=0;r<n.length;r++)if(e>=n.start(r)&&e<=n.end(r))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,n){try{if(t){var r,i=t.buffered,a=[];for(r=0;r<i.length;r++)a.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(a,e,n)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,n){t.sort((function(t,e){var n=t.start-e.start;return n||e.end-t.end}));var r=[];if(n)for(var i=0;i<t.length;i++){var a=r.length;if(a){var o=r[a-1].end;t[i].start-o<n?t[i].end>o&&(r[a-1].end=t[i].end):r.push(t[i])}else r.push(t[i])}else r=t;for(var s,l=0,u=e,c=e,d=0;d<r.length;d++){var h=r[d].start,f=r[d].end;if(e+n>=h&&e<f)u=h,l=(c=f)-e;else if(e+n<h){s=h;break}}return{len:l,start:u,end:c,nextStart:s}},t}(),W=n("./node_modules/eventemitter3/index.js"),z=n("./node_modules/webworkify-webpack/index.js"),G=n("./src/demux/demuxer-inline.js");function Y(){return window.MediaSource||window.WebKitMediaSource}var q=n("./src/utils/get-self-scope.js"),K=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.trigger=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.emit.apply(this,[t,t].concat(n))},r}(W.EventEmitter),X=Object(q.getSelfScope)(),Z=Y()||{isTypeSupported:function(){return!1}},J=function(){function t(t,e){var n=this;this.hls=t,this.id=e;var r=this.observer=new K,i=t.config,a=function(e,r){(r=r||{}).frag=n.frag,r.id=n.id,t.trigger(e,r)};r.on(u.default.FRAG_DECRYPTED,a),r.on(u.default.FRAG_PARSING_INIT_SEGMENT,a),r.on(u.default.FRAG_PARSING_DATA,a),r.on(u.default.FRAG_PARSED,a),r.on(u.default.ERROR,a),r.on(u.default.FRAG_PARSING_METADATA,a),r.on(u.default.FRAG_PARSING_USERDATA,a),r.on(u.default.INIT_PTS_FOUND,a);var o={mp4:Z.isTypeSupported("video/mp4"),mpeg:Z.isTypeSupported("audio/mpeg"),mp3:Z.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(i.enableWorker&&"undefined"!=typeof Worker){var d;c.logger.log("demuxing in webworker");try{d=this.w=z(/*! ../demux/demuxer-worker.js */"./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(e){t.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:o,vendor:l,id:e,config:JSON.stringify(i)})}catch(t){c.logger.warn("Error in worker:",t),c.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&X.URL.revokeObjectURL(d.objectURL),this.demuxer=new G.default(r,o,i,l),this.w=void 0}}else this.demuxer=new G.default(r,o,i,l)}var e=t.prototype;return e.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.push=function(t,e,n,r,i,a,o,s){var u=this.w,d=Object(l.isFiniteNumber)(i.startPTS)?i.startPTS:i.start,h=i.decryptdata,f=this.frag,p=!(f&&i.cc===f.cc),g=!(f&&i.level===f.level),m=f&&i.sn===f.sn+1,v=!g&&m;if(p&&c.logger.log(this.id+":discontinuity detected"),g&&c.logger.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:t,decryptdata:h,initSegment:e,audioCodec:n,videoCodec:r,timeOffset:d,discontinuity:p,trackSwitch:g,contiguous:v,duration:a,accurateTimeOffset:o,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,h,e,n,r,d,p,g,v,a,o,s)}},e.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":X.URL.revokeObjectURL(this.w.objectURL);break;case u.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},t}();function Q(t,e,n){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(n);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(n)}}function tt(t,e,n){var r=t[e],i=t[n],a=i.startPTS;if(Object(l.isFiniteNumber)(a))n>e?(r.duration=a-r.start,r.duration<0&&c.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-a,i.duration<0&&c.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"));else if(n>e){var o=r.cc===i.cc;i.start=r.start+(o&&r.minEndPTS?r.minEndPTS-r.start:r.duration)}else i.start=Math.max(r.start-i.duration,0)}function et(t,e,n,r,i,a){var o=n,s=r;if(Object(l.isFiniteNumber)(e.startPTS)){var u=Math.abs(e.startPTS-n);Object(l.isFiniteNumber)(e.deltaPTS)?e.deltaPTS=Math.max(u,e.deltaPTS):e.deltaPTS=u,o=Math.max(n,e.startPTS),n=Math.min(n,e.startPTS),s=Math.min(r,e.endPTS),r=Math.max(r,e.endPTS),i=Math.min(i,e.startDTS),a=Math.max(a,e.endDTS)}var c=n-e.start;e.start=e.startPTS=n,e.maxStartPTS=o,e.endPTS=r,e.minEndPTS=s,e.startDTS=i,e.endDTS=a,e.duration=r-n;var d,h,f,p=e.sn;if(!t||p<t.startSN||p>t.endSN)return 0;for(d=p-t.startSN,(h=t.fragments)[d]=e,f=d;f>0;f--)tt(h,f,f-1);for(f=d;f<h.length-1;f++)tt(h,f,f+1);return t.PTSKnown=!0,c}function nt(t,e){e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment);var n,r=0;if(rt(t,e,(function(t,i){r=t.cc-i.cc,Object(l.isFiniteNumber)(t.startPTS)&&(i.start=i.startPTS=t.startPTS,i.endPTS=t.endPTS,i.duration=t.duration,i.backtracked=t.backtracked,i.dropped=t.dropped,n=i),e.PTSKnown=!0})),e.PTSKnown){if(r){c.logger.log("discontinuity sliding from playlist, take drift into account");for(var i=e.fragments,a=0;a<i.length;a++)i[a].cc+=r}n?et(e,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function(t,e){var n=e.startSN-t.startSN,r=t.fragments,i=e.fragments;if(!(n<0||n>r.length))for(var a=0;a<i.length;a++)i[a].start+=r[n].start}(t,e),e.PTSKnown=t.PTSKnown}}function rt(t,e,n){if(t&&e)for(var r=Math.max(t.startSN,e.startSN)-e.startSN,i=Math.min(t.endSN,e.endSN)-e.startSN,a=e.startSN-t.startSN,o=r;o<=i;o++){var s=t.fragments[a+o],l=e.fragments[o];if(!s||!l)break;n(s,l,o)}}function it(t,e,n){var r=1e3*(e.averagetargetduration?e.averagetargetduration:e.targetduration),i=r/2;return t&&e.endSN===t.endSN&&(r=i),n&&(r=Math.max(i,r-(window.performance.now()-n))),Math.round(r)}var at={toString:function(t){for(var e="",n=t.length,r=0;r<n;r++)e+="["+t.start(r).toFixed(3)+","+t.end(r).toFixed(3)+"]";return e}};function ot(t,e){e.fragments.forEach((function(e){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}})),e.PTSKnown=!0}function st(t,e,n){!function(t,e,n){if(function(t,e,n){var r=!1;return e&&e.details&&n&&(n.endCC>n.startCC||t&&t.cc<n.startCC)&&(r=!0),r}(t,n,e)){var r=function(t,e){var n=t.fragments,r=e.fragments;if(r.length&&n.length){var i=function(t,e){for(var n=null,r=0;r<t.length;r+=1){var i=t[r];if(i&&i.cc===e){n=i;break}}return n}(n,r[0].cc);if(i&&(!i||i.startPTS))return i;c.logger.log("No frag in previous level to align on")}else c.logger.log("No fragments to align")}(n.details,e);r&&(c.logger.log("Adjusting PTS using last level due to CC increase within current level"),ot(r.start,e))}}(t,n,e),!n.PTSKnown&&e&&function(t,e){if(e&&e.fragments.length){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;var n=e.fragments[0].programDateTime,r=(t.fragments[0].programDateTime-n)/1e3+e.fragments[0].start;Object(l.isFiniteNumber)(r)&&(c.logger.log("adjusting PTS using programDateTime delta, sliding:"+r.toFixed(3)),ot(r,t))}}(n,e.details)}function lt(t,e,n){if(null===e||!Array.isArray(t)||!t.length||!Object(l.isFiniteNumber)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;n=n||0;for(var r=0;r<t.length;++r){var i=t[r];if(dt(e,n,i))return i}return null}function ut(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=null;if(t?i=e[t.sn-e[0].sn+1]:0===n&&0===e[0].start&&(i=e[0]),i&&0===ct(n,r,i))return i;var a=j.search(e,ct.bind(null,n,r));return a||i}function ct(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function dt(t,e,n){var r=1e3*Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>t}var ht=function(){function t(t,e,n,r){this.config=t,this.media=e,this.fragmentTracker=n,this.hls=r,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var e=t.prototype;return e.poll=function(t){var e=this.config,n=this.media,r=this.stalled,i=n.currentTime,a=n.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,i===t){if((s||o)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var l=H.bufferInfo(n,i,0),u=l.len>0,d=l.nextStart||0;if(u||d){if(a){var h=l.len>2,f=!d||d-i>2&&!this.fragmentTracker.getPartialFragment(i);if(h||f)return;this.moved=!1}if(!this.moved&&this.stalled){var p=Math.max(d,l.start||0)-i;if(p>0&&p<=2)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==r){var m=g-r;!a&&m>=250&&this._reportStall(l.len);var v=H.bufferInfo(n,i,e.maxBufferHole);this._tryFixBufferStall(v,m)}else this.stalled=g}}}else if(this.moved=!0,null!==r){if(this.stallReported){var y=self.performance.now()-r;c.logger.warn("playback not stuck anymore @"+i+", after "+Math.round(y)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,a=r.getPartialFragment(i);a&&this._trySkipBufferHole(a)||t.len>n.maxBufferHole&&e>1e3*n.highBufferWatchdogPeriod&&(c.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,c.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,n=this.hls,r=this.media,i=r.currentTime,a=0,o=0;o<r.buffered.length;o++){var l=r.buffered.start(o);if(i+e.maxBufferHole>=a&&i<l){var d=Math.max(l+.05,r.currentTime+.1);return c.logger.warn("skipping hole, adjusting currentTime from "+i+" to "+d),this.moved=!0,this.stalled=null,r.currentTime=d,t&&n.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+d,frag:t}),d}a=r.buffered.end(o)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,n=this.media,r=n.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<t.nudgeMaxRetry){var a=r+i*t.nudgeOffset;c.logger.warn("Nudging 'currentTime' from "+r+" to "+a),n.currentTime=a,e.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}();function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var pt=function(t){var e,n;function r(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=t.call.apply(t,[this,e].concat(i))||this)._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(ft(n)),n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},i.hasInterval=function(){return!!this._tickInterval},i.hasNextTick=function(){return!!this._tickTimer},i.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},i.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},i.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},i.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},i.doTick=function(){},r}(h),gt="STOPPED",mt="STARTING",vt="IDLE",yt="PAUSED",bt="KEY_LOADING",St="FRAG_LOADING",wt="FRAG_LOADING_WAITING_RETRY",Tt="WAITING_TRACK",xt="PARSING",_t="PARSED",kt="BUFFER_FLUSHING",Et="ENDED",$t="ERROR",At="WAITING_INIT_PTS",Ct="WAITING_LEVEL",Dt=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.doTick=function(){},i.startLoad=function(){},i.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=gt},i._streamEnded=function(t,e){var n=this.fragCurrent,r=this.fragmentTracker;if(!e.live&&n&&!n.backtracked&&n.sn===e.endSN&&!t.nextStart){var i=r.getState(n);return i===U||i===B}return!1},i.onMediaSeeking=function(){var t=this.config,e=this.media,n=this.mediaBuffer,r=this.state,i=e?e.currentTime:null,a=H.bufferInfo(n||e,i,this.config.maxBufferHole);if(c.logger.log("media seeking to "+(Object(l.isFiniteNumber)(i)?i.toFixed(3):i)),r===St){var o=this.fragCurrent;if(0===a.len&&o){var s=t.maxFragLookUpTolerance,u=o.start-s,d=o.start+o.duration+s;i<u||i>d?(o.loader&&(c.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=vt):c.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else r===Et&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=vt);e&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},i.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},i.onHandlerDestroyed=function(){this.state=gt,this.fragmentTracker=null},i.computeLivePosition=function(t,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-n)},r}(pt);function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rt,Ot=function(t){var e,n;function r(e,n){var r;return(r=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.LEVELS_UPDATED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED)||this).fragmentTracker=n,r.config=e.config,r.audioCodecSwap=!1,r._state=gt,r.stallReported=!1,r.gapController=null,r.altAudio=!1,r.audioOnly=!1,r.bitrateTest=!1,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,o,d,h=r.prototype;return h.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(n.config.testBandwidth?(r=0,this.bitrateTest=!0):r=n.nextAutoLevel),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}e>0&&-1===t&&(c.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=vt,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=gt},h.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},h.doTick=function(){switch(this.state){case kt:this.fragLoadError=0;break;case vt:this._doTickIdle();break;case Ct:var t=this.levels[this.level];t&&t.details&&(this.state=vt);break;case wt:var e=window.performance.now(),n=this.retryDate;(!n||e>=n||this.media&&this.media.seeking)&&(c.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=vt)}this._checkBuffer(),this._checkFragmentChanged()},h._doTickIdle=function(){var t=this.hls,e=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&e.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var r;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=t.nextLoadLevel,a=this.levels[i];if(a){var o,s=a.bitrate;o=s?Math.max(8*e.maxBufferSize/s,e.maxBufferLength):e.maxBufferLength,o=Math.min(o,e.maxMaxBufferLength);var l=r<e.maxBufferHole?Math.max(2,e.maxBufferHole):e.maxBufferHole,d=H.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,l),h=d.len;if(!(h>=o)){c.logger.trace("buffer length of "+h.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=i;var f=a.details;if(!f||f.live&&this.levelLastLoaded!==i)this.state=Ct;else{if(this._streamEnded(d,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(u.default.BUFFER_EOS,p),void(this.state=Et)}this._fetchPayloadOrEos(r,d,f)}}}}},h._fetchPayloadOrEos=function(t,e,n){var r=this.fragPrevious,i=(this.level,n.fragments),a=i.length;if(0!==a){var o,s=i[0].start,l=i[a-1].start+i[a-1].duration,u=e.end;if(n.initSegment&&!n.initSegment.data)o=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(a<d)return void c.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(o=this._ensureFragmentAtLivePoint(n,u,s,l,r,i)))return}else u<s&&(o=i[0]);o||(o=this._findFragment(s,r,a,i,u,l,n)),o&&(o.encrypted?this._loadKey(o,n):this._loadFragment(o,n,t,u))}},h._ensureFragmentAtLivePoint=function(t,e,n,r,i,a){var o,s=this.hls.config,u=this.media,d=1/0;if(void 0!==s.liveMaxLatencyDuration?d=s.liveMaxLatencyDuration:Object(l.isFiniteNumber)(s.liveMaxLatencyDurationCount)&&(d=s.liveMaxLatencyDurationCount*t.targetduration),e<Math.max(n-s.maxFragLookUpTolerance,r-d)){var h=this.liveSyncPosition=this.computeLivePosition(n,t);e=h,u&&!u.paused&&u.readyState&&u.duration>h&&h>u.currentTime&&(c.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),u.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&e>r&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown&&i)if(t.hasProgramDateTime)c.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),o=lt(a,i.endProgramDateTime,s.maxFragLookUpTolerance);else{var f=i.sn+1;if(f>=t.startSN&&f<=t.endSN){var p=a[f-t.startSN];i.cc===p.cc&&(o=p,c.logger.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=j.search(a,(function(t){return i.cc-t.cc})))&&c.logger.log("live playlist, switching playlist, load frag with same CC: "+o.sn)}return o},h._findFragment=function(t,e,n,r,i,a,o){var s,l=this.hls.config;if(s=i<a?ut(e,r,i,i>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):r[n-1]){var u=s.sn-o.startSN,d=e&&s.level===e.level,h=r[u-1],f=r[u+1];if(e&&s.sn===e.sn)if(d&&!s.backtracked)if(s.sn<o.endSN){var p=e.deltaPTS;p&&p>l.maxBufferHole&&e.dropped&&u?(s=h,c.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=f,this.fragmentTracker.getState(s)!==B&&c.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(f&&f.backtracked?(c.logger.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+f.sn),s=f):(c.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,h?(s=h).backtracked=!0:u&&(s=null)))}return s},h._loadKey=function(t,e){c.logger.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], level "+this.level),this.state=bt,this.hls.trigger(u.default.KEY_LOADING,{frag:t})},h._loadFragment=function(t,e,n,r){var i=this.fragmentTracker.getState(t);this.fragCurrent=t,"initSegment"!==t.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||i===F||i===U?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,c.logger.log("Loading "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(n.toFixed(3))+", bufferEnd: "+parseFloat(r.toFixed(3))),this.hls.trigger(u.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new J(this.hls,"main")),this.state=St):i===N&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},h.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,a.MAIN)},h.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},h._checkFragmentChanged=function(){var t,e,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((e=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),H.isBuffered(n,e)?t=this.getBufferedFrag(e):H.isBuffered(n,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var r=t;if(r!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(u.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},h.immediateLevelSwitch=function(){if(c.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,e=this.media;e?(t=e.paused)||e.pause():t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},h.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,t.currentTime>0&&H.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},h.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,n=this.getBufferedFrag(t.currentTime);if(n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)e=0;else{var r=this.hls.nextLoadLevel,i=this.levels[r],a=this.fragLastKbps;e=a&&this.fragCurrent?this.fragCurrent.duration*i.bitrate/(1e3*a)+1:0}var o=this.getBufferedFrag(t.currentTime+e);if(o){var s=this.followingBufferedFrag(o);if(s){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null;var u=Math.max(o.endPTS,s.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,s.duration));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},h.flushMainBuffer=function(t,e){this.state=kt;var n={startOffset:t,endOffset:e};this.altAudio&&(n.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,n)},h.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new ht(n,e,this.fragmentTracker,this.hls)},h.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach((function(t){t.details&&t.details.fragments.forEach((function(t){t.backtracked=void 0}))})),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},h.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;Object(l.isFiniteNumber)(e)&&c.logger.log("media seeked to "+e.toFixed(3)),this.tick()},h.onManifestLoading=function(){c.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},h.onManifestParsed=function(t){var e,n=!1,r=!1;t.levels.forEach((function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(n=!0),-1!==e.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&c.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},h.onLevelLoaded=function(t){var e=t.details,n=t.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],a=e.totalduration,o=0;if(c.logger.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+a),e.live){var s=i.details;s&&e.fragments.length>0?(nt(s,e),o=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),e.PTSKnown&&Object(l.isFiniteNumber)(o)?c.logger.log("live playlist sliding:"+o.toFixed(3)):(c.logger.log("live playlist - outdated PTS, unknown sliding"),st(this.fragPrevious,r,e))):(c.logger.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,st(this.fragPrevious,r,e))}else e.PTSKnown=!1;if(i.details=e,this.levelLastLoaded=n,this.hls.trigger(u.default.LEVEL_UPDATED,{details:e,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=e.startTimeOffset;Object(l.isFiniteNumber)(d)?(d<0&&(c.logger.log("negative start time offset "+d+", count from end of last fragment"),d=o+a+d),c.logger.log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):e.live?(this.startPosition=this.computeLivePosition(o,e),c.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Ct&&(this.state=vt),this.tick()},h.onKeyLoaded=function(){this.state===bt&&(this.state=vt,this.tick())},h.onFragLoaded=function(t){var e=this.fragCurrent,n=this.hls,r=this.levels,i=this.media,a=t.frag;if(this.state===St&&e&&"main"===a.type&&a.level===e.level&&a.sn===e.sn){var o=t.stats,s=r[e.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,c.logger.log("Loaded "+e.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+e.level),a.bitrateTest&&n.nextLoadLevel)this.state=vt,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),n.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=vt,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=t.payload,n.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else{c.logger.log("Parsing "+e.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+e.level+", cc "+e.cc),this.state=xt,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var d=!(i&&i.seeking)&&(l.PTSKnown||!l.live),h=l.initSegment?l.initSegment.data:[],f=this._getAudioCodec(s);(this.demuxer=this.demuxer||new J(this.hls,"main")).push(t.payload,h,f,s.videoCodec,e,l.totalduration,d)}}this.fragLoadError=0},h.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===xt){var r,i,a=t.tracks;if(this.audioOnly=a.audio&&!a.video,this.altAudio&&!this.audioOnly&&delete a.audio,i=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(o="mp4a.40.2",c.logger.log("Android: force audio codec to "+o)),i.levelCodec=o,i.id=t.id}for(r in(i=a.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=t.id),this.hls.trigger(u.default.BUFFER_CODECS,a),a){i=a[r],c.logger.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var l=i.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:r,data:l,parent:"main",content:"initSegment"}))}this.tick()}},h.onFragParsingData=function(t){var e=this,n=this.fragCurrent,r=t.frag;if(n&&"main"===t.id&&r.sn===n.sn&&r.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===xt){var i=this.levels[this.level],a=n;if(Object(l.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&a.addElementaryStream(g.AUDIO),!0===t.hasVideo&&a.addElementaryStream(g.VIDEO),c.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)c.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=i.details;if(!o||a.sn!==o.startSN)return c.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=vt,this.fragPrevious=a,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();c.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=et(i.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),d=this.hls;d.trigger(u.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach((function(n){n&&n.length&&e.state===xt&&(e.appended=!0,e.pendingBuffering=!0,d.trigger(u.default.BUFFER_APPENDING,{type:t.type,data:n,parent:"main",content:"data"}))})),this.tick()}},h.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===xt&&(this.stats.tparsed=window.performance.now(),this.state=_t,this._checkAppendedParsed())},h.onAudioTrackSwitching=function(t){var e=this.altAudio,n=!!t.url,r=t.id;if(!n){if(this.mediaBuffer!==this.media){c.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(c.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=vt}var a=this.hls;e&&a.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:r})}},h.onAudioTrackSwitched=function(t){var e=t.id,n=!!this.hls.audioTracks[e].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(c.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},h.onBufferCreated=function(t){var e,n,r=t.tracks,i=!1;for(var a in r){var o=r[a];"main"===o.id?(n=a,e=o,"video"===a&&(this.videoBuffer=r[a].buffer)):i=!0}i&&e?(c.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=e.buffer):this.mediaBuffer=this.media},h.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==xt&&e!==_t||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},h._checkAppendedParsed=function(){if(!(this.state!==_t||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;c.logger.log("main buffered : "+at.toString(e.buffered)),this.fragPrevious=t;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=vt}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},h.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var n=!!this.media&&H.isBuffered(this.media,this.media.currentTime)&&H.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.logger.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=wt}else c.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=$t;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==$t&&(t.fatal?(this.state=$t,c.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==Ct||(this.state=vt));break;case s.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==xt&&this.state!==_t||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=vt):(c.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},h._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,c.logger.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},h._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e)}},h.onFragLoadEmergencyAborted=function(){this.state=vt,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},h.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;if(t){var e=this.audioOnly?g.AUDIO:g.VIDEO;this.fragmentTracker.detectEvictedFragments(e,t.buffered)}this.state=vt,this.fragPrevious=null},h.onLevelsUpdated=function(t){this.levels=t.levels},h.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},h._seekToStartPos=function(){var t=this.media,e=t.currentTime,n=this.startPosition;if(e!==n&&n>=0){if(t.seeking)return void c.logger.log("could not seek to "+n+", already seeking at "+e);var r=(t.buffered.length?t.buffered.start(0):0)-n;r>0&&r<this.config.maxBufferHole&&(c.logger.log("adjusting start position by "+r+" to match buffer start"),n+=r,this.startPosition=n),c.logger.log("seek to target start position "+n+" from current time "+e+". ready state "+t.readyState),t.currentTime=n}},h._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},i=r,(o=[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,c.logger.log("main stream-controller: "+e+"->"+t),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}])&&Mt(i.prototype,o),d&&Mt(i,d),r}(Dt);function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Lt=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.FRAG_LOADED,u.default.ERROR)||this).canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,Rt=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,l=r.prototype;return l.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},l.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},l.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach((function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)})),null!==this.timer&&this.loadLevel()},l.stopLoad=function(){this.canload=!1},l.onManifestLoaded=function(t){var e,n=[],r=[],i={},a=null,o=!1,l=!1;if(t.levels.forEach((function(t){var e=t.attrs;t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,l=l||!!t.audioCodec,Rt&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(a=i[t.bitrate])?a.url.push(t.url):(t.url=[t.url],t.urlId=0,i[t.bitrate]=t,n.push(t)),e&&(e.AUDIO&&Q(a||t,"audio",e.AUDIO),e.SUBTITLES&&Q(a||t,"text",e.SUBTITLES))})),o&&l&&(n=n.filter((function(t){return!!t.videoCodec}))),n=n.filter((function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||k(e,"audio"))&&(!n||k(n,"video"))})),t.audioTracks&&(r=t.audioTracks.filter((function(t){return!t.audioCodec||k(t.audioCodec,"audio")}))).forEach((function(t,e){t.id=e})),n.length>0){e=n[0].bitrate,n.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=n;for(var d=0;d<n.length;d++)if(n[d].bitrate===e){this._firstLevel=d,c.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+e);break}var h=l&&!o;this.hls.trigger(u.default.MANIFEST_PARSED,{levels:n,audioTracks:r,firstLevel:this._firstLevel,stats:t.stats,audio:l,video:o,altAudio:!h&&r.some((function(t){return!!t.url}))})}else this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},l.setLevelInternal=function(t){var e=this._levels,n=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){c.logger.log("switching to level "+t),this.currentLevelIndex=t;var r=e[t];r.level=t,n.trigger(u.default.LEVEL_SWITCHING,r)}var i=e[t],a=i.details;if(!a||a.live){var o=i.urlId;n.trigger(u.default.LEVEL_LOADING,{url:i.url[o],level:t,id:o})}}else n.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},l.onError=function(t){if(t.fatal)t.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var e,n=!1,r=!1;switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:e=t.frag.level,r=!0;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:e=t.context.level,n=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:e=t.level,n=!0}void 0!==e&&this.recoverLevel(t,e,n,r)}},l.recoverLevel=function(t,e,n,r){var i,a,o,s=this,l=this.hls.config,u=t.details,d=this._levels[e];if(d.loadError++,d.fragmentError=r,n){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return c.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),t.levelRetry=!0,this.levelRetryCount++,c.logger.warn("level controller, "+u+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(n||r)&&((i=d.url.length)>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,c.logger.warn("level controller, "+u+" for level "+e+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(o=0===e?this._levels.length-1:e-1,c.logger.warn("level controller, "+u+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):r&&(c.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},l.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var n=this._levels[e.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},l.onLevelLoaded=function(t){var e=this,n=t.level,r=t.details;if(n===this.currentLevelIndex){var i=this._levels[n];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),r.live){var a=it(i.details,r,t.stats.trequest);c.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return e.loadLevel()}),a)}else this.clearTimer()}},l.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=0;i<n.audioGroupIds.length;i++)if(n.audioGroupIds[i]===e){r=i;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},l.loadLevel=function(){if(c.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var e=this.currentLevelIndex,n=t.urlId,r=t.url[n];c.logger.log("Attempt loading level index "+e+" with URL-id "+n),this.hls.trigger(u.default.LEVEL_LOADING,{url:r,level:e,id:n})}}},l.removeLevel=function(t,e){var n=this.levels.filter((function(n,r){return r!==t||n.url.length>1&&void 0!==e&&(n.url=n.url.filter((function(t,n){return n!==e})),n.urlId=0,!0)})).map((function(t,e){var n=t.details;return n&&n.fragments&&n.fragments.forEach((function(t){t.level=e})),t}));this._levels=n,this.hls.trigger(u.default.LEVELS_UPDATED,{levels:n})},i=r,(a=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&It(i.prototype,a),o&&It(i,o),r}(h),Pt=n("./src/demux/id3.js");function Ft(t,e){var n;try{n=new Event("addtrack")}catch(t){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function Nt(t){if(null==t?void 0:t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}var Ut=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_METADATA,u.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,n.media=void 0,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){h.prototype.destroy.call(this)},i.onMediaAttached=function(t){this.media=t.media,this.media},i.onMediaDetaching=function(){Nt(this.id3Track),this.id3Track=void 0,this.media=void 0},i.getID3Track=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("metadata"===n.kind&&"id3"===n.label)return Ft(n,this.media),n}return this.media.addTextTrack("metadata","id3")},i.onFragParsingMetadata=function(t){var e=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var a=Pt.default.getID3Frames(n[i].data);if(a){var o=Math.max(n[i].pts,0),s=i<n.length-1?n[i+1].pts:e.endPTS;s||(s=e.start+e.duration),s-o<=0&&(s=o+.25);for(var l=0;l<a.length;l++){var u=a[l];if(!Pt.default.isTimeStampFrame(u)){var c=new r(o,s,"");c.value=u,this.id3Track.addCue(c)}}}}},i.onLiveBackBufferReached=function(t){var e=t.bufferEnd,n=this.id3Track;if(n&&n.cues&&n.cues.length){var r=function(t,e){if(e<t[0].endTime)return t[0];if(e>t[t.length-1].endTime)return t[t.length-1];for(var n=0,r=t.length-1;n<=r;){var i=Math.floor((r+n)/2);if(e<t[i].endTime)r=i-1;else{if(!(e>t[i].endTime))return t[i];n=i+1}}return t[n].endTime-e<e-t[r].endTime?t[n]:t[r]}(n.cues,e);if(r)for(;n.cues[0]!==r;)n.removeCue(n.cues[0])}},r}(h),Bt=function(){function t(t){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var e=t.prototype;return e.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),Vt=function(){function t(t,e,n,r){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=t,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Bt(e),this.fast_=new Bt(n)}var e=t.prototype;return e.sample=function(t,e){var n=(t=Math.max(t,this.minDelayMs_))/1e3,r=8*e/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}();function jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ht=window.performance,Wt=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR)||this).lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,d=r.prototype;return d.destroy=function(){this.clearTimer(),h.prototype.destroy.call(this)},d.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,r,i=this.hls,a=i.config,o=e.level;i.levels[o].details.live?(n=a.abrEwmaFastLive,r=a.abrEwmaSlowLive):(n=a.abrEwmaFastVoD,r=a.abrEwmaSlowVoD),this._bwEstimator=new Vt(i,r,n,a.abrEwmaDefaultEstimate)}},d._abandonRulesCheck=function(){var t=this.hls,e=t.media,n=this.fragCurrent;if(n){var r=n.loader;if(!r||r.stats&&r.stats.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var i=r.stats;if(e&&i&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var a=Ht.now()-i.trequest,o=Math.abs(e.playbackRate);if(a>500*n.duration/o){var s=t.levels,l=Math.max(1,i.bw?i.bw/8:1e3*i.loaded/a),d=s[n.level];if(!d)return;var h=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,f=i.total?i.total:Math.max(i.loaded,Math.round(n.duration*h/8)),p=e.currentTime,g=(f-i.loaded)/l,m=(H.bufferInfo(e,p,t.config.maxBufferHole).end-p)/o;if(m<2*n.duration/o&&g>m){var v,y,b=t.minAutoLevel;for(y=n.level-1;y>b;y--){var S=s[y].realBitrate?Math.max(s[y].realBitrate,s[y].bitrate):s[y].bitrate;if(n.duration*S/(6.4*l)<m)break}v<g&&(c.logger.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+v.toFixed(1)+"<"+g.toFixed(1)+":"+m.toFixed(1)),t.nextLoadLevel=y,this._bwEstimator.sample(a,i.loaded),r.abort(),this.clearTimer(),t.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:i}))}}}}},d.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&Object(l.isFiniteNumber)(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[e.level],r=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,i=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},d.onFragBuffered=function(t){var e=t.stats,n=t.frag;if(!0!==e.aborted&&"main"===n.type&&Object(l.isFiniteNumber)(n.sn)&&(!n.bitrateTest||e.tload===e.tbuffered)){var r=e.tparsed-e.trequest;c.logger.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(r,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},d.onError=function(t){switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},d.clearTimer=function(){clearInterval(this.timer),this.timer=null},d._findBestLevel=function(t,e,n,r,i,a,o,s,l){for(var u=i;u>=r;u--){var d=l[u];if(d){var h=d.details,f=h?h.totalduration/h.fragments.length:e,p=!!h&&h.live,g=void 0;g=u<=t?o*n:s*n;var m=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=m*f/g;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(g)+"/"+m+"/"+f+"/"+a+"/"+v),g>m&&(!v||p&&!this.bitrateTestDelay||v<a))return u}}return-1},i=r,(a=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var n=this._nextABRAutoLevel;return-1!==t&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,n=t.levels,r=t.config,i=t.minAutoLevel,a=t.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,h=(H.bufferInfo(a,l,r.maxBufferHole).end-l)/u,f=this._findBestLevel(o,s,d,i,e,h,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(f>=0)return f;c.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,g=r.abrBandWidthFactor,m=r.abrBandWidthUpFactor;if(0===h){var v=this.bitrateTestDelay;v&&(p=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-v,c.logger.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=m=1)}return f=this._findBestLevel(o,s,d,i,e,h+p,g,m,n),Math.max(f,0)}}])&&jt(i.prototype,a),o&&jt(i,o),r}(h),zt=Y(),Gt=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED)||this)._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){c.logger.log("media source opened"),n.hls.trigger(u.default.MEDIA_ATTACHED,{media:n.media});var t=n.mediaSource;t&&t.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){c.logger.log("media source closed")},n._onMediaSourceEnded=function(){c.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var t=n.sourceBuffer.audio;c.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+n.audioTimestampOffset),t.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var e=n.parent,r=n.segments.reduce((function(t,n){return n.parent===e?t+1:t}),0),i={},a=n.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");i[o]=s.buffered}n.hls.trigger(u.default.BUFFER_APPENDED,{parent:e,pending:r,timeRanges:i}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===r&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(t){c.logger.error("sourceBuffer error:",t),n.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=e.config,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){h.prototype.destroy.call(this)},i.onLevelPtsUpdated=function(t){var e=t.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(!r)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(r.timestampOffset-t.start)>.1){var i=r.updating;try{r.abort()}catch(t){c.logger.warn("can not abort audio buffer: "+t)}i?this.audioTimestampOffset=t.start:(c.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+t.start),r.timestampOffset=t.start)}}},i.onManifestParsed=function(t){var e=2;(t.audio&&!t.video||!t.altAudio)&&(e=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e,c.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},i.onMediaAttaching=function(t){var e=this.media=t.media;if(e&&zt){var n=this.mediaSource=new zt;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),e.src=window.URL.createObjectURL(n),this._objectUrl=e.src}},i.onMediaDetaching=function(){c.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){c.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u.default.MEDIA_DETACHED)},i.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.pendingTracks,n=Object.keys(e).length;(n&&!t||2===n)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},i.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var n=t[e];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},i.onBufferCodecs=function(t){var e=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach((function(n){e.pendingTracks[n]=t[n]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},i.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var r in t)if(!e[r]){var i=t[r];if(!i)throw Error("source buffer exists for track "+r+", however track does not");var a=i.levelCodec||i.codec,o=i.container+";codecs="+a;c.logger.log("creating sourceBuffer("+o+")");try{var l=e[r]=n.addSourceBuffer(o);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[r]={buffer:l,codec:a,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(t){c.logger.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:o})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:this.tracks})},i.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},i.onBufferEos=function(t){for(var e in this.sourceBuffer)if(!t.type||t.type===e){var n=this.sourceBuffer[e];n&&!n.ended&&(n.ended=!0,c.logger.log(e+" sourceBuffer now EOS"))}this.checkEos()},i.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var n in t){var r=t[n];if(r){if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}}c.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){c.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},i.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},i.flushLiveBackBuffer=function(){if(this._live){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))if(this.media)for(var e=this.media.currentTime,n=this.sourceBuffer,r=Object.keys(n),i=e-Math.max(t,this._levelTargetDuration),a=r.length-1;a>=0;a--){var o=r[a],s=n[o];if(s){var l=s.buffered;l.length>0&&i>l.start(0)&&this.removeBufferRange(o,s,0,i)&&this.hls.trigger(u.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}}else c.logger.error("flushLiveBackBuffer called without attaching media")}},i.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},i.updateMediaElementDuration=function(){var t,e=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var r=this.sourceBuffer[n];if(r&&!0===r.updating)return}t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(c.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!Object(l.isFiniteNumber)(t))&&(c.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},i.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;try{for(var r in n){var i=n[r];i&&(e+=i.buffered.length)}}catch(t){c.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(u.default.BUFFER_FLUSHED)}},i.doAppending=function(){var t=this.config,e=this.hls,n=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(!this.media||this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var i=n.shift();if(i)try{var a=r[i.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void n.unshift(i);a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0}catch(r){c.logger.error("error while trying to append buffer:"+r.message),n.unshift(i);var o={type:s.ErrorTypes.MEDIA_ERROR,parent:i.parent,details:"",fatal:!1};22===r.code?(this.segments=[],o.details=s.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(c.logger.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),e.trigger(u.default.ERROR,o)}}}},i.flushBuffer=function(t,e,n){var r=this.sourceBuffer;if(!Object.keys(r).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),c.logger.log("flushBuffer,pos/start/end: "+i+"/"+t+"/"+e),this.flushBufferCounter>=this.appended)return c.logger.warn("abort flushing too many retries"),!0;var a=r[n];if(a){if(a.ended=!1,a.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,a,t,e))return this.flushBufferCounter++,!1}return c.logger.log("buffer flushed"),!0},i.removeBufferRange=function(t,e,n,r){try{for(var i=0;i<e.buffered.length;i++){var a=e.buffered.start(i),o=e.buffered.end(i),s=Math.max(a,n),l=Math.min(o,r);if(Math.min(l,o)-s>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),c.logger.log("sb remove "+t+" ["+s+","+l+"], of ["+a+","+o+"], pos:"+u),e.remove(s,l),!0}}}catch(t){c.logger.warn("removeBufferRange failed",t)}return!1},r}(h);function Yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var qt=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED,u.default.LEVELS_UPDATED,u.default.BUFFER_CODECS,u.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n.clientRect=null,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,s=r.prototype;return s.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},s.onFpsDropLevelCapping=function(t){r.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},s.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},s.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&t.video&&this.startCapping()},s.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},s.onLevelsUpdated=function(t){this.levels=t.levels},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},s.getMaxLevel=function(t){var e=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,i){return r.isLevelAllowed(i,e.restrictedLevels)&&i<=t}));return this.clientRect=null,r.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},s.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var n=t.getBoundingClientRect();e.width=n.width,e.height=n.height,e.width||e.height||(e.width=n.right-n.left||t.width||0,e.height=n.bottom-n.top||t.height||0)}return this.clientRect=e,e},r.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},r.getMaxLevelByMediaSize=function(t,e,n){if(!t||t&&!t.length)return-1;for(var r,i,a=t.length-1,o=0;o<t.length;o+=1){var s=t[o];if((s.width>=e||s.height>=n)&&(r=s,!(i=t[o+1])||r.width!==i.width||r.height!==i.height)){a=o;break}}return a},i=r,o=[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}],(a=[{key:"mediaWidth",get:function(){return this.getDimensions().width*r.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*r.contentScaleFactor}}])&&Yt(i.prototype,a),o&&Yt(i,o),r}(h),Kt=window.performance,Xt=function(t){var e,n;function r(e){return t.call(this,e,u.default.MEDIA_ATTACHING)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},i.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},i.checkFPS=function(t,e,n){var r=Kt.now();if(e){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,o=e-this.lastDecodedFrames,s=1e3*a/i,l=this.hls;if(l.trigger(u.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},i.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},r}(h),Zt=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var e=t.prototype;return e.destroy=function(){this.abort(),this.loader=null},e.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.load=function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t,e=this.context;t=this.loader=new window.XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(t,e.url)}catch(n){t.open("GET",e.url,!0),r(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(n){return void this.callbacks.onError({code:t.status,text:n.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},e.readystatechange=function(t){var e=t.currentTarget,n=e.readyState,r=this.stats,i=this.context,a=this.config;if(!r.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(window.performance.now(),r.trequest)),4===n){var o=e.status;if(o>=200&&o<300){var s,l;r.tload=Math.max(r.tfirst,window.performance.now()),l="arraybuffer"===i.responseType?(s=e.response).byteLength:(s=e.responseText).length,r.loaded=r.total=l;var u={url:e.responseURL,data:s};this.callbacks.onSuccess(u,r,i,e)}else r.retry>=a.maxRetry||o>=400&&o<499?(c.logger.error(o+" while loading "+i.url),this.callbacks.onError({code:o,text:e.statusText},i,e)):(c.logger.warn(o+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.loadtimeout=function(){c.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.loadprogress=function(t){var e=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,e)},t}();function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qt=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.AUDIO_TRACK_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.LEVEL_LOADED,u.default.ERROR)||this)._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,l=r.prototype;return l.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},l.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:e}),this._selectAudioGroup(this.hls.nextLoadLevel)},l.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length)c.logger.warn("Invalid audio track id:",t.id);else{if(c.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var e=1e3*t.details.targetduration;this.setInterval(e)}!t.details.live&&this.hasInterval()&&this.clearInterval()}},l.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},l.onLevelLoaded=function(t){this._selectAudioGroup(t.level)},l.onError=function(t){t.type===s.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(c.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},l._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)c.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(t<0||t>=this.tracks.length)c.logger.warn("Invalid id passed to audio-track controller");else{var e=this.tracks[t];c.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var n=e.url,r=e.type,i=e.id;this.hls.trigger(u.default.AUDIO_TRACK_SWITCHING,{id:i,type:r,url:n}),this._loadTrackDetailsIfNeeded(e)}},l.doTick=function(){this._updateTrack(this._trackId)},l._selectAudioGroup=function(t){var e=this.hls.levels[t];if(e&&e.audioGroupIds){var n=e.audioGroupIds[e.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},l._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var n=this.tracks[this._trackId],r=null;if(n&&(r=n.name),this._selectDefaultTrack){var i=e.filter((function(t){return t.default}));i.length?e=i:c.logger.warn("No default audio tracks defined")}var a=!1,o=function(){e.forEach((function(e){a||t.audioGroupId&&e.groupId!==t.audioGroupId||r&&r!==e.name||(t._setAudioTrack(e.id),a=!0)}))};o(),a||(r=null,o()),a||(c.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},l._needsTrackLoading=function(t){var e=t.details,n=t.url;return!(e&&!e.live||!n)},l._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,n=t.id;c.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:e,id:n})}},l._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,c.logger.log("trying to update audio-track "+t);var e=this.tracks[t];this._loadTrackDetailsIfNeeded(e)}},l._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],n=e.name,r=e.language,i=e.groupId;c.logger.warn("Loading failed on audio track id: "+t+", group-id: "+i+', name/language: "'+n+'" / "'+r+'"');for(var a=t,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===n){a=o;break}a!==t?(c.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):c.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+r+'"')},i=r,(a=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}])&&Jt(i.prototype,a),o&&Jt(i,o),r}(pt);function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ee=window.performance,ne=function(t){var e,n;function r(e,n){var r;return(r=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.AUDIO_TRACKS_UPDATED,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.BUFFER_RESET,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.INIT_PTS_FOUND)||this).fragmentTracker=n,r.config=e.config,r.audioCodecSwap=!1,r._state=gt,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r.waitingVideoCC=null,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,d=r.prototype;return d.onInitPtsFound=function(t){var e=t.id,n=t.frag.cc,r=t.initPTS;"main"===e&&(this.initPTS[n]=r,this.videoTrackCC=n,c.logger.log("InitPTS for cc: "+n+" found from main: "+r),this.state===At&&this.tick())},d.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(c.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=vt):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=mt),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=gt},d.doTick=function(){var t,e,n,r=this.hls,i=r.config;switch(this.state){case $t:case yt:case kt:break;case mt:this.state=Tt,this.loadedmetadata=!1;break;case vt:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,d=t<i.maxBufferHole?Math.max(2,i.maxBufferHole):i.maxBufferHole,h=H.bufferInfo(o,t,d),f=H.bufferInfo(s,t,d),p=h.len,g=h.end,m=this.fragPrevious,v=Math.min(i.maxBufferLength,i.maxMaxBufferLength),y=Math.max(v,f.len),b=this.audioSwitch,S=this.trackId;if((p<y||b)&&S<a.length){if(void 0===(n=a[S].details)){this.state=Tt;break}if(!b&&this._streamEnded(h,n))return this.hls.trigger(u.default.BUFFER_EOS,{type:"audio"}),void(this.state=Et);var w,T=n.fragments,x=T.length,_=T[0].start,k=T[x-1].start+T[x-1].duration;if(b)if(n.live&&!n.PTSKnown)c.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),g=0;else if(g=t,n.PTSKnown&&t<_){if(!(h.end>_||h.nextStart))return;c.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=_+.05}if(n.initSegment&&!n.initSegment.data)w=n.initSegment;else if(g<=_){if(w=T[0],null!==this.videoTrackCC&&w.cc!==this.videoTrackCC&&(w=function(t,e){return j.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(T,this.videoTrackCC)),n.live&&w.loadIdx&&w.loadIdx===this.fragLoadIdx){var E=h.nextStart?h.nextStart:_;return c.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(E+.05)),void(this.media.currentTime=E+.05)}}else{var $,A=i.maxFragLookUpTolerance,C=m?T[m.sn-T[0].sn+1]:void 0;g<k?(g>k-A&&(A=0),$=C&&!ct(g,A,C)?C:j.search(T,(function(t){return ct(g,A,t)}))):$=T[x-1],$&&(w=$,_=$.start,m&&w.level===m.level&&w.sn===m.sn&&(w.sn<n.endSN?(w=T[w.sn+1-n.startSN],this.fragmentTracker.getState(w)!==B&&c.logger.log("SN just loaded, load next one: "+w.sn)):w=null))}w&&(w.encrypted?(c.logger.log("Loading key for "+w.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+S),this.state=bt,r.trigger(u.default.KEY_LOADING,{frag:w})):(this.fragCurrent=w,(b||this.fragmentTracker.getState(w)===F)&&(c.logger.log("Loading "+w.sn+", cc: "+w.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+S+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+t+", bufferEnd: "+g.toFixed(3)),"initSegment"!==w.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(w.sn)&&(this.nextLoadPosition=w.start+w.duration),r.trigger(u.default.FRAG_LOADING,{frag:w}),this.state=St)))}break;case Tt:(e=this.tracks[this.trackId])&&e.details&&(this.state=vt);break;case wt:var D=ee.now(),M=this.retryDate,R=(o=this.media)&&o.seeking;(!M||D>=M||R)&&(c.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=vt);break;case At:var O=this.waitingFragment;if(O){var I=O.frag.cc;if(void 0!==this.initPTS[I])this.waitingFragment=null,this.state=St,this.onFragLoaded(O);else if(this.videoTrackCC!==this.waitingVideoCC)c.logger.log("Waiting fragment cc ("+I+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var L=H.bufferInfo(this.mediaBuffer,this.media.currentTime,i.maxBufferHole);ct(L.end,i.maxFragLookUpTolerance,O.frag)<0&&(c.logger.log("Waiting fragment cc ("+I+") @ "+O.frag.start+" cancelled because another fragment at "+L.end+" is needed"),this.clearWaitingFragment())}}else this.state=vt}},d.clearWaitingFragment=function(){var t=this.waitingFragment;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=vt)},d.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},d.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},d.onAudioTracksUpdated=function(t){c.logger.log("audio tracks updated"),this.tracks=t.audioTracks},d.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=yt,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=vt),this.tick()},d.onAudioTrackLoaded=function(t){var e=t.details,n=t.id,r=this.tracks[n],i=e.totalduration,a=0;if(c.logger.log("track "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),e.live){var o=r.details;o&&e.fragments.length>0?(nt(o,e),a=e.fragments[0].start,e.PTSKnown?c.logger.log("live audio playlist sliding:"+a.toFixed(3)):c.logger.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,c.logger.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(r.details=e,!this.startFragRequested){if(-1===this.startPosition){var s=e.startTimeOffset;Object(l.isFiniteNumber)(s)?(c.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):e.live?(this.startPosition=this.computeLivePosition(a,e),c.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===Tt&&(this.state=vt),this.tick()},d.onKeyLoaded=function(){this.state===bt&&(this.state=vt,this.tick())},d.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===St&&e&&"audio"===n.type&&n.level===e.level&&n.sn===e.sn){var r=this.tracks[this.trackId],i=r.details,a=i.totalduration,o=e.level,s=e.sn,l=e.cc,d=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",h=this.stats=t.stats;if("initSegment"===s)this.state=vt,h.tparsed=h.tbuffered=ee.now(),i.initSegment.data=t.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:h,frag:e,id:"audio"}),this.tick();else{this.state=xt,this.appended=!1,this.demuxer||(this.demuxer=new J(this.hls,"audio"));var f=this.initPTS[l],p=i.initSegment?i.initSegment.data:[];void 0!==f?(this.pendingBuffering=!0,c.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.demuxer.push(t.payload,p,d,null,e,a,!1,f)):(c.logger.log("Unknown video PTS for cc "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=t,this.waitingVideoCC=this.videoTrackCC,this.state=At)}}this.fragLoadError=0},d.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===xt){var r,i=t.tracks;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=t.id,this.hls.trigger(u.default.BUFFER_CODECS,i),c.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var a=r.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,o))}this.tick()}}},d.onFragParsingData=function(t){var e=this,n=this.fragCurrent,r=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&r.sn===n.sn&&r.level===n.level&&this.state===xt){var i=this.trackId,a=this.tracks[i],o=this.hls;Object(l.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(g.AUDIO),c.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),et(a.details,n,t.startPTS,t.endPTS);var d=this.media,h=!1;if(this.audioSwitch)if(d&&d.readyState){var f=d.currentTime;c.logger.log("switching audio track : currentTime:"+f),f>=t.startPTS&&(c.logger.log("switching audio track : flushing all audio"),this.state=kt,o.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),h=!0,this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:i});var p=this.pendingData;if(!p)return c.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach((function(e){e&&e.length&&p.push({type:t.type,data:e,parent:"audio",content:"data"})})),!h&&p.length&&(p.forEach((function(t){e.state===xt&&(e.pendingBuffering=!0,e.hls.trigger(u.default.BUFFER_APPENDING,t))})),this.pendingData=[],this.appended=!0)),this.tick()}},d.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===xt&&(this.stats.tparsed=ee.now(),this.state=_t,this._checkAppendedParsed())},d.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},d.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},d.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==xt&&e!==_t||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},d._checkAppendedParsed=function(){if(!(this.state!==_t||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,n=this.hls;if(t){this.fragPrevious=t,e.tbuffered=ee.now(),n.trigger(u.default.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;r&&c.logger.log("audio buffered : "+at.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=vt}this.tick()}},d.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r;var a=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);c.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=ee.now()+a,this.state=wt}else c.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=$t}break;case s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==$t&&(this.state=t.fatal?$t:vt,c.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===xt||this.state===_t)){var o=this.mediaBuffer,l=this.media.currentTime;if(o&&H.isBuffered(o,l)&&H.isBuffered(o,l+.5)){var d=this.config;d.maxMaxBufferLength>=d.maxBufferLength&&(d.maxMaxBufferLength/=2,c.logger.warn("AudioStreamController: reduce max buffer length to "+d.maxMaxBufferLength+"s")),this.state=vt}else c.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=kt,this.hls.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},d.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(c.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach((function(e){t.hls.trigger(u.default.BUFFER_APPENDING,e)})),this.appended=!0,this.pendingData=[],this.state=_t):(this.state=vt,this.fragPrevious=null,this.tick())},i=r,(a=[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,c.logger.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}])&&te(i.prototype,a),o&&te(i,o),r}(Dt),re=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var t={"":!0,lr:!0,rl:!0},e={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function i(e,i,a){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var l="",u=!1,c=e,d=i,h=a,f=null,p="",g=!0,m="auto",v="start",y=50,b="middle",S=50,w="middle";Object.defineProperty(o,"id",r({},s,{get:function(){return l},set:function(t){l=""+t}})),Object.defineProperty(o,"pauseOnExit",r({},s,{get:function(){return u},set:function(t){u=!!t}})),Object.defineProperty(o,"startTime",r({},s,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");c=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",r({},s,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",r({},s,{get:function(){return h},set:function(t){h=""+t,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",r({},s,{get:function(){return f},set:function(t){f=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",r({},s,{get:function(){return p},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");p=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",r({},s,{get:function(){return g},set:function(t){g=!!t,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",r({},s,{get:function(){return m},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",r({},s,{get:function(){return v},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",r({},s,{get:function(){return y},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",r({},s,{get:function(){return b},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",r({},s,{get:function(){return S},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",r({},s,{get:function(){return w},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");w=e,this.hasBeenReset=!0}})),o.displayState=void 0}return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}(),ie=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};function ae(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new ie,this.regionList=[]}function oe(){this.values=Object.create(null)}function se(t,e,n,r){var i=r?t.split(r):[t];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);2===o.length&&e(o[0],o[1])}}oe.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var r=0;r<n.length;++r)if(e===n[r]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var le=new re(0,0,0),ue="middle"===le.align?"middle":"center";function ce(t,e,n){var r=t;function i(){var e=function(t){function e(t,e,n,r){return 3600*(0|t)+60*(0|e)+(0|n)+(0|r)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),a(),e.endTime=i(),a(),function(t,e){var r=new oe;se(t,(function(t,e){switch(t){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===e){r.set(t,n[i].region);break}break;case"vertical":r.alt(t,e,["rl","lr"]);break;case"line":var a=e.split(","),o=a[0];r.integer(t,o),r.percent(t,o)&&r.set("snapToLines",!1),r.alt(t,o,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start",ue,"end"]);break;case"position":a=e.split(","),r.percent(t,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start",ue,"end","line-left","line-right","auto"]);break;case"size":r.percent(t,e);break;case"align":r.alt(t,e,["start",ue,"end","left","right"])}}),/:/,/\s/),e.region=r.get("region",null),e.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===le.line&&(i=-1),e.line=i,e.lineAlign=r.get("lineAlign","start"),e.snapToLines=r.get("snapToLines",!0),e.size=r.get("size",100),e.align=r.get("align",ue);var a=r.get("position","auto");"auto"===a&&50===le.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function de(t){return t.replace(/<br(?: \/)?>/gi,"\n")}ae.prototype={parse:function(t){var e=this;function n(){var t=e.buffer,n=0;for(t=de(t);n<t.length&&"\r"!==t[n]&&"\n"!==t[n];)++n;var r=t.substr(0,n);return"\r"===t[n]&&++n,"\n"===t[n]&&++n,e.buffer=t.substr(n),r}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var i=(r=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var a=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(a?a=!1:r=n(),e.state){case"HEADER":/:/.test(r)?se(r,(function(t,e){}),/:/):r||(e.state="ID");continue;case"NOTE":r||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){e.state="NOTE";break}if(!r)continue;if(e.cue=new re(0,0,""),e.state="CUE",-1===r.indexOf("--\x3e")){e.cue.id=r;continue}case"CUE":try{ce(r,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(a=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+="\n"),e.cue.text+=r;continue;case"BADCUE":r||(e.state="ID");continue}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}};var he=ae;function fe(t,e,n,r){for(var i,a,o,s,l,u=[],c=window.VTTCue||TextTrackCue,d=0;d<r.rows.length;d++)if(o=!0,s=0,l="",!(i=r.rows[d]).isEmpty()){for(var h=0;h<i.chars.length;h++)i.chars[h].uchar.match(/\s/)&&o?s++:(l+=i.chars[h].uchar,o=!1);i.cueStartTime=e,e===n&&(n+=1e-4),a=new c(e,n,de(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100)),u.push(a),t&&t.addCue(a)}return u}var pe,ge={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},me=function(t){var e=t;return ge.hasOwnProperty(t)&&(e=ge[t]),String.fromCharCode(e)},ve=15,ye=100,be={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Se={17:2,18:4,21:6,22:8,23:10,19:13,20:15},we={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Te={25:2,26:4,29:6,30:8,31:10,27:13,28:15},xe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(pe||(pe={}));var _e=function(){function t(){this.time=null,this.verboseLevel=pe.ERROR}return t.prototype.log=function(t,e){this.verboseLevel>=t&&c.logger.log(this.time+" ["+t+"] "+e)},t}(),ke=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},Ee=function(){function t(t,e,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var r=e[n];t.hasOwnProperty(r)&&(this[r]=t[r])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),$e=function(){function t(t,e,n,r,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Ee(e,n,r,i,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),Ae=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<ye;e++)this.chars.push(new $e);this.logger=t,this.pos=0,this.currPenState=new Ee}var e=t.prototype;return e.equals=function(t){for(var e=!0,n=0;n<ye;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<ye;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<ye;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(pe.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>ye&&(this.logger.log(pe.DEBUG,"Too large cursor position "+this.pos),this.pos=ye)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=me(t);this.pos>=ye?this.logger.log(pe.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<ye;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,n=0;n<ye;n++){var r=this.chars[n].uchar;" "!==r&&(e=!1),t.push(r)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),Ce=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<ve;e++)this.rows.push(new Ae(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<ve;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,n=0;n<ve;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<ve;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<ve;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(pe.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(pe.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<ve;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime,o=this.logger.time;if(a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[e-this.nrRollUpRows+s+1].copy(i.rows[r+s])}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,c=Math.max(u-1,0);l.setCursor(t.indent),t.color=l.chars[c].penState.foreground}var d={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(d)},e.setBkgData=function(t){this.logger.log(pe.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(pe.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(pe.INFO,"Rolling up")}else this.logger.log(pe.DEBUG,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],n="",r=-1,i=0;i<ve;i++){var a=this.rows[i].getTextString();a&&(r=i+1,t?e.push("Row "+r+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},e.getTextAndFormat=function(){return this.rows},t}(),De=function(){function t(t,e,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Ce(n),this.nonDisplayedMemory=new Ce(n),this.lastOutputScreen=new Ce(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(pe.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(pe.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(pe.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(pe.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(pe.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(pe.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(pe.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(pe.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(pe.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(pe.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(pe.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(pe.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(pe.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(pe.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(pe.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(pe.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(pe.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(pe.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}();function Me(t,e,n){n.a=t,n.b=e}function Re(t,e,n){return n.a===t&&n.b===e}var Oe=function(){function t(t,e,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var r=new _e;this.channels=[null,new De(t,e,r),new De(t+1,n,r)],this.cmdHistory={a:null,b:null},this.logger=r}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var n,r,i,a=!1;this.logger.time=t;for(var o=0;o<e.length;o+=2)if(r=127&e[o],i=127&e[o+1],0!==r||0!==i){if(this.logger.log(pe.DATA,"["+ke([e[o],e[o+1]])+"] -> ("+ke([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i))){var s=this.currentChannel;s&&s>0?this.channels[s].insertChars(a):this.logger.log(pe.WARNING,"No channel found yet. TEXT-MODE?")}n||a||this.logger.log(pe.WARNING,"Couldn't parse cleaned data "+ke([r,i])+" orig: "+ke([e[o],e[o+1]]))}},e.parseCmd=function(t,e){var n=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(Re(t,e,n))return Me(null,null,n),this.logger.log(pe.DEBUG,"Repeated command ("+ke([t,e])+") is dropped"),!0;var r=20===t||21===t||23===t?1:2,i=this.channels[r];return 20===t||21===t||28===t||29===t?32===e?i.ccRCL():33===e?i.ccBS():34===e?i.ccAOF():35===e?i.ccAON():36===e?i.ccDER():37===e?i.ccRU(2):38===e?i.ccRU(3):39===e?i.ccRU(4):40===e?i.ccFON():41===e?i.ccRDC():42===e?i.ccTR():43===e?i.ccRTD():44===e?i.ccEDM():45===e?i.ccCR():46===e?i.ccENM():47===e&&i.ccEOC():i.ccTO(e-32),Me(t,e,n),this.currentChannel=r,!0},e.parseMidrow=function(t,e){var n=0;if((17===t||25===t)&&e>=32&&e<=47){if((n=17===t?1:2)!==this.currentChannel)return this.logger.log(pe.ERROR,"Mismatch channel in midrow parsing"),!1;var r=this.channels[n];return!!r&&(r.ccMIDROW(e),this.logger.log(pe.DEBUG,"MIDROW ("+ke([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var n,r=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(Re(t,e,r))return Me(null,null,r),!0;var i=t<=23?1:2;n=e>=64&&e<=95?1===i?be[t]:we[t]:1===i?Se[t]:Te[t];var a=this.channels[i];return!!a&&(a.setPAC(this.interpretPAC(n,e)),Me(t,e,r),this.currentChannel=i,!0)},e.interpretPAC=function(t,e){var n=e,r={color:null,italics:!1,indent:null,underline:!1,row:t};return n=e>95?e-96:e-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},e.parseChars=function(t,e){var n,r=null,i=null;if(t>=25?(n=2,i=t-8):(n=1,i=t),i>=17&&i<=19){var a=e;a=17===i?e+80:18===i?e+112:e+144,this.logger.log(pe.INFO,"Special char '"+me(a)+"' in channel "+n),r=[a]}else t>=32&&t<=127&&(r=0===e?[t]:[t,e]);if(r){var o=ke(r);this.logger.log(pe.DEBUG,"Char codes =  "+o.join(",")),Me(t,e,this.cmdHistory)}return r},e.parseBackgroundAttributes=function(t,e){var n;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var r={};16===t||24===t?(n=Math.floor((e-32)/2),r.background=xe[n],e%2==1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0));var i=t<=23?1:2;return this.channels[i].setBkgData(r),Me(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var n=this.channels[e];n&&n.cueSplitAtTime(t)}},t}(),Ie=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[]},t}(),Le=function(t,e,n){return t.substr(n||0,e.length)===e},Pe=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()},Fe={parse:function(t,e,n,r,i,a){var o,s=Object(Pt.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",c=0,d=0,h=0,f=[],p=!0,g=!1,m=new he;m.oncue=function(t){var e=n[r],i=n.ccOffset;e&&e.new&&(void 0!==d?i=n.ccOffset=e.start:function(t,e,n){var r=t[e],i=t[r.prevCC];if(!i||!i.new&&r.new)return t.ccOffset=t.presentationOffset=r.start,void(r.new=!1);for(;i&&i.new;)t.ccOffset+=r.start-i.start,r.new=!1,i=t[(r=i).prevCC];t.presentationOffset=n}(n,r,h)),h&&(i=h-n.presentationOffset),g&&(t.startTime+=i-d,t.endTime+=i-d),t.id=Pe(t.startTime.toString())+Pe(t.endTime.toString())+Pe(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&f.push(t)},m.onparsingerror=function(t){o=t},m.onflush=function(){o&&a?a(o):i(f)},s.forEach((function(t){if(p){if(Le(t,"X-TIMESTAMP-MAP=")){p=!1,g=!0,t.substr(16).split(",").forEach((function(t){Le(t,"LOCAL:")?u=t.substr(6):Le(t,"MPEGTS:")&&(c=parseInt(t.substr(7)))}));try{e+(9e4*n[r].start||0)<0&&(e+=8589934592),c-=e,d=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),r=parseInt(t.substr(-9,2)),i=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(l.isFiniteNumber)(e)&&Object(l.isFiniteNumber)(n)&&Object(l.isFiniteNumber)(r)&&Object(l.isFiniteNumber)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*n,(e+=6e4*r)+36e5*i}(u)/1e3,h=c/9e4}catch(t){g=!1,o=t}return}""===t&&(p=!1)}m.parse(t+"\n")})),m.flush()}};function Ne(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ue(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}var Be=function(t){var e,n;function r(e){var n;if((n=t.call(this,e,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_USERDATA,u.default.FRAG_DECRYPTED,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.FRAG_LOADED,u.default.INIT_PTS_FOUND)||this).media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.captionsTracks={},n.nonNativeCaptionsTracks={},n.captionsProperties=void 0,n.cea608Parser1=void 0,n.cea608Parser2=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},n.hls=e,n.config=e.config,n.Cues=e.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode},textTrack3:{label:n.config.captionsTextTrack3Label,languageCode:n.config.captionsTextTrack3LanguageCode},textTrack4:{label:n.config.captionsTextTrack4Label,languageCode:n.config.captionsTextTrack4LanguageCode}},n.config.enableCEA708Captions){var r=new Ie(Ne(n),"textTrack1"),i=new Ie(Ne(n),"textTrack2"),a=new Ie(Ne(n),"textTrack3"),o=new Ie(Ne(n),"textTrack4");n.cea608Parser1=new Oe(1,r,i),n.cea608Parser2=new Oe(3,a,o)}return n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.addCues=function(t,e,n,r,i){for(var a,o,s,l,c=!1,d=i.length;d--;){var h=i[d],f=(a=h[0],o=h[1],s=e,l=n,Math.min(o,l)-Math.max(a,s));if(f>=0&&(h[0]=Math.min(h[0],e),h[1]=Math.max(h[1],n),c=!0,f/(n-e)>.5))return}if(c||i.push([e,n]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[t],e,n,r);else{var p=this.Cues.newCue(null,e,n,r);this.hls.trigger(u.default.CUES_PARSED,{type:"captions",cues:p,track:t})}},i.onInitPtsFound=function(t){var e=this,n=t.frag,r=t.id,i=t.initPTS,a=this.unparsedVttFrags;"main"===r&&(this.initPTS[n.cc]=i),a.length&&(this.unparsedVttFrags=[],a.forEach((function(t){e.onFragLoaded(t)})))},i.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var r=e.textTracks[n];if(r[t])return r}return null},i.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},i.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,n=this.captionsTracks,r=this.media,i=e[t],a=i.label,o=i.languageCode,s=this.getExistingTrack(t);if(s)n[t]=s,Nt(n[t]),Ft(n[t],r);else{var l=this.createTextTrack("captions",a,o);l&&(l[t]=!0,n[t]=l)}}},i.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var n={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=n,this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},i.createTextTrack=function(t,e,n){var r=this.media;if(r)return r.addTextTrack(t,e,n)},i.destroy=function(){t.prototype.destroy.call(this)},i.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},i.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){Nt(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},i.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},i._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)Nt(e[n])}},i.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var n=t.subtitles||[],r=this.tracks&&n&&this.tracks.length===n.length;if(this.tracks=t.subtitles||[],this.config.renderTextTracksNatively){var i=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,n){var r;if(n<i.length){for(var a=null,o=0;o<i.length;o++)if(Ue(i[o],t)){a=i[o];break}a&&(r=a)}r||(r=e.createTextTrack("subtitles",t.name,t.lang)),t.default?r.mode=e.hls.subtitleDisplay?"showing":"hidden":r.mode="disabled",e.textTracks.push(r)}))}else if(!r&&this.tracks&&this.tracks.length){var a=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(t){var n=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(n){var r="textTrack"+n[1],i=e.captionsProperties[r];i&&(i.label=t.name,t.lang&&(i.languageCode=t.lang),i.media=t)}}))},i.onFragLoaded=function(t){var e=t.frag,n=t.payload,r=this.cea608Parser1,i=this.cea608Parser2,a=this.initPTS,o=this.lastSn,s=this.unparsedVttFrags;if("main"===e.type){var c=e.sn;e.sn!==o+1&&r&&i&&(r.reset(),i.reset()),this.lastSn=c}else if("subtitle"===e.type)if(n.byteLength){if(!Object(l.isFiniteNumber)(a[e.cc]))return s.push(t),void(a.length&&this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e}));var d=e.decryptdata;null!=d&&null!=d.key&&"AES-128"===d.method||this._parseVTTs(e,n)}else this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},i._parseVTTs=function(t,e){var n=this,r=this.hls,i=this.prevCC,a=this.textTracks,o=this.vttCCs;o[t.cc]||(o[t.cc]={start:t.start,prevCC:i,new:!0},this.prevCC=t.cc),Fe.parse(e,this.initPTS[t.cc],o,t.cc,(function(e){if(n.config.renderTextTracksNatively){var i=a[t.level];if("disabled"===i.mode)return void r.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t});e.forEach((function(t){if(!i.cues.getCueById(t.id))try{if(i.addCue(t),!i.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){c.logger.debug("Failed occurred on adding cues: "+n);var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,i.addCue(e)}}))}else{var o=n.tracks[t.level].default?"default":"subtitles"+t.level;r.trigger(u.default.CUES_PARSED,{type:"subtitles",cues:e,track:o})}r.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){c.logger.log("Failed to parse VTT cue: "+e),r.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}))},i.onFragDecrypted=function(t){var e=t.frag,n=t.payload;if("subtitle"===e.type){if(!Object(l.isFiniteNumber)(this.initPTS[e.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(e,n)}},i.onFragParsingUserdata=function(t){var e=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&e&&n)for(var r=0;r<t.samples.length;r++){var i=t.samples[r].bytes;if(i){var a=this.extractCea608Data(i);e.addData(t.samples[r].pts,a[0]),n.addData(t.samples[r].pts,a[1])}}},i.extractCea608Data=function(t){for(var e=31&t[0],n=2,r=[[],[]],i=0;i<e;i++){var a=t[n++],o=127&t[n++],s=127&t[n++],l=3&a;0===o&&0===s||0!=(4&a)&&(0!==l&&1!==l||(r[l].push(o),r[l].push(s)))}return r},r}(h);function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function je(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];"subtitles"===r.kind&&r.label&&e.push(t[n])}return e}var He,We=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADED,u.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,s=r.prototype;return s.destroy=function(){h.prototype.destroy.call(this)},s.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(Object(l.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){e.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},s.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),je(this.media.textTracks).forEach((function(t){Nt(t)})),this.subtitleTrack=-1,this.media=null)},s.onManifestLoaded=function(t){var e=this,n=t.subtitles||[];this.tracks=n,this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)}))},s.onSubtitleTrackLoaded=function(t){var e=this,n=t.id,r=t.details,i=this.trackId,a=this.tracks,o=a[i];if(n>=a.length||n!==i||!o||this.stopped)this._clearReloadTimer();else if(c.logger.log("subtitle track "+n+" loaded"),r.live){var s=it(o.details,r,t.stats.trequest);c.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){e._loadCurrentTrack()}),s)}else this._clearReloadTimer()},s.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},s.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},s._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},s._loadCurrentTrack=function(){var t=this.trackId,e=this.tracks,n=this.hls,r=e[t];t<0||!r||r.details&&!r.details.live||(c.logger.log("Loading subtitle track "+t),n.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:t}))},s._toggleTrackModes=function(t){var e=this.media,n=this.subtitleDisplay,r=this.trackId;if(e){var i=je(e.textTracks);if(-1===t)[].slice.call(i).forEach((function(t){t.mode="disabled"}));else{var a=i[r];a&&(a.mode="disabled")}var o=i[t];o&&(o.mode=n?"showing":"hidden")}},s._setSubtitleTrackInternal=function(t){var e=this.hls,n=this.tracks;!Object(l.isFiniteNumber)(t)||t<-1||t>=n.length||(this.trackId=t,c.logger.log("Switching to subtitle track "+t),e.trigger(u.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},s._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=je(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)t=n;else if("showing"===e[n].mode){t=n;break}this.subtitleTrack=t}},i=r,(a=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))}}])&&Ve(i.prototype,a),o&&Ve(i,o),r}(h),ze=n("./src/crypt/decrypter.js"),Ge=window.performance,Ye=function(t){var e,n;function r(e,n){var r;return(r=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.ERROR,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED,u.default.LEVEL_UPDATED)||this).fragmentTracker=n,r.config=e.config,r.state=gt,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new ze.default(e,e.config),r.lastAVStart=0,r._onMediaSeeking=r.onMediaSeeking.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r)),r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.onSubtitleFragProcessed=function(t){var e=t.frag,n=t.success;if(this.fragPrevious=e,this.state=vt,n){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var i,a=e.start,o=0;o<r.length;o++)if(a>=r[o].start&&a<=r[o].end){i=r[o];break}var s=e.start+e.duration;i?i.end=s:(i={start:a,end:s},r.push(i))}}},i.onMediaAttached=function(t){var e=t.media;this.media=e,e.addEventListener("seeking",this._onMediaSeeking),this.state=vt},i.onMediaDetaching=function(){var t=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]})),this.media=null,this.state=gt)},i.onError=function(t){var e=t.frag;e&&"subtitle"===e.type&&(this.state=vt)},i.onSubtitleTracksUpdated=function(t){var e=this;c.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]}))},i.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var e=this.tracks[this.currentTrackId];e&&e.details&&this.setInterval(500)}else this.clearInterval()},i.onSubtitleTrackLoaded=function(t){var e=t.id,n=t.details,r=this.currentTrackId,i=this.tracks,a=i[r];e>=i.length||e!==r||!a||(n.live&&function(t,e,n){void 0===n&&(n=0);var r=-1;rt(t,e,(function(t,e,n){e.start=t.start,r=n}));var i=e.fragments;if(r<0)i.forEach((function(t){t.start+=n}));else for(var a=r+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}(a.details,n,this.lastAVStart),a.details=n,this.setInterval(500))},i.onKeyLoaded=function(){this.state===bt&&(this.state=vt)},i.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag.decryptdata,r=t.frag,i=this.hls;if(this.state===St&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var a=Ge.now();this.decrypter.decrypt(t.payload,n.key.buffer,n.iv.buffer,(function(t){var e=Ge.now();i.trigger(u.default.FRAG_DECRYPTED,{frag:r,payload:t,stats:{tstart:a,tdecrypt:e}})}))}},i.onLevelUpdated=function(t){var e=t.details.fragments;this.lastAVStart=e.length?e[0].start:0},i.doTick=function(){if(this.media)switch(this.state){case vt:var t=this.config,e=this.currentTrackId,n=this.fragmentTracker,r=this.media,i=this.tracks;if(!i||!i[e]||!i[e].details)break;var a,o=t.maxBufferHole,s=t.maxFragLookUpTolerance,l=Math.min(t.maxBufferLength,t.maxMaxBufferLength),d=H.bufferedInfo(this._getBuffered(),r.currentTime,o),h=d.end,f=d.len,p=i[e].details,g=p.fragments,m=g.length,v=g[m-1].start+g[m-1].duration;if(f>l)return;var y=this.fragPrevious;h<v?(y&&p.hasProgramDateTime&&(a=lt(g,y.endProgramDateTime,s)),a||(a=ut(y,g,h,s))):a=g[m-1],a&&a.encrypted?(c.logger.log("Loading key for "+a.sn),this.state=bt,this.hls.trigger(u.default.KEY_LOADING,{frag:a})):a&&n.getState(a)===F&&(this.fragCurrent=a,this.state=St,this.hls.trigger(u.default.FRAG_LOADING,{frag:a}))}else this.state=vt},i.stopLoad=function(){this.lastAVStart=0,t.prototype.stopLoad.call(this)},i._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},i.onMediaSeeking=function(){this.fragPrevious=null},r}(Dt);!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(He||(He={}));var qe="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function Ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xe=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHED,u.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._drmSystemOptions=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n.mediaKeysPromise=null,n._onMediaEncrypted=function(t){if(c.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!n.mediaKeysPromise)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void n.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var e=function(e){n._media&&(n._attemptSetMediaKeys(e),n._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};n.mediaKeysPromise.then(e).catch(e)},n._config=e.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n._drmSystemOptions=e.config.drmSystemOptions,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,l=r.prototype;return l.getLicenseServerUrl=function(t){switch(t){case He.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},l._attemptKeySystemAccess=function(t,e,n){var r=this,i=function(t,e,n,r){switch(t){case He.WIDEVINE:return function(t,e,n){var r={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(t){r.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:n.audioRobustness||""})})),e.forEach((function(t){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:n.videoRobustness||""})})),[r]}(e,n,r);default:throw new Error("Unknown key-system: "+t)}}(t,e,n,this._drmSystemOptions);c.logger.log("Requesting encrypted media key-system access");var a=this.requestMediaKeySystemAccess(t,i);this.mediaKeysPromise=a.then((function(e){return r._onMediaKeySystemAccessObtained(t,e)})),a.catch((function(e){c.logger.error('Failed to obtain key-system "'+t+'" access:',e)}))},l._onMediaKeySystemAccessObtained=function(t,e){var n=this;c.logger.log('Access for key-system "'+t+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(r);var i=Promise.resolve().then((function(){return e.createMediaKeys()})).then((function(e){return r.mediaKeys=e,c.logger.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated(),e}));return i.catch((function(t){c.logger.error("Failed to create media-keys:",t)})),i},l._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},l._onNewMediaKeySession=function(t){var e=this;c.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(n){e._onKeySessionMessage(t,n.message)}),!1)},l._onKeySessionMessage=function(t,e){c.logger.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){c.logger.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)}))},l._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});c.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},l._generateRequestWithPreferredKeySession=function(t,e){var n=this,r=this._mediaKeysList[0];if(!r)return c.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(r.mediaKeysSessionInitialized)c.logger.warn("Key-Session already initialized but requested again");else{var i=r.mediaKeysSession;if(!i)return c.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!e)return c.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});c.logger.log('Generating key-session request for "'+t+'" init data type'),r.mediaKeysSessionInitialized=!0,i.generateRequest(t,e).then((function(){c.logger.debug("Key-session generation succeeded")})).catch((function(t){c.logger.error("Error generating key-session request:",t),n.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},l._createLicenseXhr=function(t,e,n){var r=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(r,t)}catch(e){r.open("POST",t,!0),i(r,t)}r.readyState||r.open("POST",t,!0)}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,t,e,n),r},l._onLicenseRequestReadyStageChange=function(t,e,n,r){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,c.logger.log("License request succeeded"),"arraybuffer"!==t.responseType&&c.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),r(t.response);else{if(c.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=3-this._requestLicenseFailureCount+1;c.logger.warn("Retrying license request, "+i+" attempts left"),this._requestLicense(n,r)}}},l._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case He.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},l._requestLicense=function(t,e){c.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return c.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,t,e);c.logger.log("Sending license request to URL: "+r);var a=this._generateLicenseRequestChallenge(n,t);i.send(a)}catch(t){c.logger.error("Failure requesting DRM license: "+t),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},l.onMediaAttached=function(t){if(this._emeEnabled){var e=t.media;this._media=e,e.addEventListener("encrypted",this._onMediaEncrypted)}},l.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map((function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})))},l.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map((function(t){return t.audioCodec})),n=t.levels.map((function(t){return t.videoCodec}));this._attemptKeySystemAccess(He.WIDEVINE,e,n)}},i=r,(a=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&Ke(i.prototype,a),o&&Ke(i,o),r}(h);function Ze(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Je(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ze(Object(n),!0).forEach((function(e){Qe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tn=Je(Je({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Zt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Wt,bufferController:Gt,capLevelController:qt,fpsController:Xt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:qe,testBandwidth:!0},{cueHandler:r,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Ye,subtitleTrackController:We,timelineController:Be,audioStreamController:ne,audioTrackController:Qt,emeController:Xe});function en(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?en(Object(n),!0).forEach((function(e){rn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function an(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function on(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sn(t,e,n){return e&&on(t.prototype,e),n&&on(t,n),t}var ln=function(t){var e,n;function r(e){var n;void 0===e&&(e={}),(n=t.call(this)||this).config=void 0,n._autoLevelCapping=void 0,n.abrController=void 0,n.capLevelController=void 0,n.levelController=void 0,n.streamController=void 0,n.networkControllers=void 0,n.audioTrackController=void 0,n.subtitleTrackController=void 0,n.emeController=void 0,n.coreComponents=void 0,n.media=null,n.url=null;var i=r.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");n.config=nn(nn({},i),e);var a=an(n).config;if(void 0!==a.liveMaxLatencyDurationCount&&a.liveMaxLatencyDurationCount<=a.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==a.liveMaxLatencyDuration&&(void 0===a.liveSyncDuration||a.liveMaxLatencyDuration<=a.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.enableLogs)(a.debug),n._autoLevelCapping=-1;var o=n.abrController=new a.abrController(an(n)),s=new a.bufferController(an(n)),l=n.capLevelController=new a.capLevelController(an(n)),u=new a.fpsController(an(n)),d=new I(an(n)),h=new L(an(n)),f=new P(an(n)),p=new Ut(an(n)),g=n.levelController=new Lt(an(n)),m=new V(an(n)),v=[g,n.streamController=new Ot(an(n),m)],y=a.audioStreamController;y&&v.push(new y(an(n),m)),n.networkControllers=v;var b=[d,h,f,o,s,l,u,p,m];if(y=a.audioTrackController){var S=new y(an(n));n.audioTrackController=S,b.push(S)}if(y=a.subtitleTrackController){var w=new y(an(n));n.subtitleTrackController=w,v.push(w)}if(y=a.emeController){var T=new y(an(n));n.emeController=T,b.push(T)}return(y=a.subtitleStreamController)&&v.push(new y(an(n),m)),(y=a.timelineController)&&b.push(new y(an(n))),n.coreComponents=b,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.isSupported=function(){return function(){var t=Y();if(!t)return!1;var e=self.SourceBuffer||self.WebKitSourceBuffer,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!n&&!!r}()},sn(r,null,[{key:"version",get:function(){return"0.14.12"}},{key:"Events",get:function(){return u.default}},{key:"ErrorTypes",get:function(){return s.ErrorTypes}},{key:"ErrorDetails",get:function(){return s.ErrorDetails}},{key:"DefaultConfig",get:function(){return r.defaultConfig?r.defaultConfig:tn},set:function(t){r.defaultConfig=t}}]);var i=r.prototype;return i.destroy=function(){c.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(t){t.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},i.attachMedia=function(t){c.logger.log("attachMedia"),this.media=t,this.trigger(u.default.MEDIA_ATTACHING,{media:t})},i.detachMedia=function(){c.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null},i.loadSource=function(t){t=o.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),c.logger.log("loadSource:"+t),this.url=t,this.trigger(u.default.MANIFEST_LOADING,{url:t})},i.startLoad=function(t){void 0===t&&(t=-1),c.logger.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},i.stopLoad=function(){c.logger.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},i.swapAudioCodec=function(){c.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},i.recoverMediaError=function(){c.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},i.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},sn(r,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){c.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){c.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){c.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){c.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){c.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){c.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController._bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,n=t?t.length:0,r=0;r<n;r++)if((t[r].realBitrate?Math.max(t[r].realBitrate,t[r].bitrate):t[r].bitrate)>e)return r;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),r}(K);ln.defaultConfig=void 0},"./src/polyfills/number.js":
/*!*********************************!*\
    !*** ./src/polyfills/number.js ***!
    \*********************************/
/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */function(t,e,n){n.r(e),n.d(e,"isFiniteNumber",(function(){return r})),n.d(e,"MAX_SAFE_INTEGER",(function(){return i}));var r=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":
/*!*************************************!*\
    !*** ./src/utils/get-self-scope.js ***!
    \*************************************/
/*! exports provided: getSelfScope */function(t,e,n){function r(){return"undefined"==typeof window?self:window}n.r(e),n.d(e,"getSelfScope",(function(){return r}))},"./src/utils/logger.js":
/*!*****************************!*\
    !*** ./src/utils/logger.js ***!
    \*****************************/
/*! exports provided: enableLogs, logger */function(t,e,n){n.r(e),n.d(e,"enableLogs",(function(){return c})),n.d(e,"logger",(function(){return d}));var r=n(/*! ./get-self-scope */"./src/utils/get-self-scope.js");function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},o=a;function s(t,e){return e="["+t+"] > "+e}var l=Object(r.getSelfScope)();function u(t){var e=l.console[t];return e?function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r[0]&&(r[0]=s(t,r[0])),e.apply(l.console,r)}:i}var c=function(t){if(l.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach((function(e){o[e]=t[e]?t[e].bind(t):u(e)}))}(t,"debug","log","info","warn","error");try{o.log()}catch(t){o=a}}else o=a},d=o}}).default},t.exports=n())})));function at(t){!t||window.CONFIG?t?window.window.initApp():alert('Please make sure that you have "config.js" file and it is a valid javascript!\nIf you are running TileBoard for the first time, please copy "config.example.js" into "dist/config.js"'):alert('The "config.js" configuration file has loaded but window.CONFIG is not defined!\nPlease make sure that it defines a CONFIG variable with proper configuration.')}A.directive("tile",(function(){return{restrict:"AE",replace:!1,scope:!0,templateUrl:"tile.html",link:function(t,e,n){}}})),A.directive("camera",(function(){return{restrict:"AE",replace:!0,scope:{item:"=item",entity:"=entity",freezed:"=freezed"},link:function(t,e,n){var r=0,i=null,a=t.item.refresh||!1,o=null,s=null;"function"==typeof a&&(a=a());var l=function(){if(i&&!(r>1&&t.freezed)){var n=i;(function(n){var r=document.createElement("div");n&&(r.style.backgroundImage='url("'+u(n)+'")'),r.style.backgroundSize=t.item.bgSize||"cover",e[0].appendChild(r),s&&e[0].removeChild(s),setTimeout((function(){r.style.opacity=1}),100),s=o,o=r})(n+=(-1===n.indexOf("?")?"?":"&")+"_i="+r++)}};if(t.$watchGroup(["item","entity","entity.attributes.entity_picture"],(function(){var e=t.item.filter?t.item.filter(t.item,t.entity):t.entity&&t.entity.attributes.entity_picture?t.entity.attributes.entity_picture:null;i!==e&&((i=e)&&l())})),a){var c=setInterval(l,a);t.$on("$destroy",(function(){clearInterval(c)}))}}}})),A.directive("cameraThumbnail",["Api",function(t){return{restrict:"AE",replace:!0,scope:{item:"=item",entity:"=entity",freezed:"=freezed"},link:function(e,n,r){var i="refresh"in e.item?e.item.refresh:2e3;"function"==typeof i&&(i=i());var a=i?.9*i:100,o=0,s=null,l=null,u=function(){Date.now()-o<a||o&&e.freezed||(o=Date.now(),"off"!==e.entity.state&&t.send({type:"camera_thumbnail",entity_id:e.entity.entity_id},(function(t){t.result&&function(t){var r=document.createElement("div");t&&(r.style.backgroundImage="url("+t+")"),r.style.backgroundSize=e.item.bgSize||"cover",n[0].appendChild(r),l&&n[0].removeChild(l),setTimeout((function(){r.style.opacity=1}),100),l=s,s=r}("data:"+t.result.content_type+";base64,"+t.result.content)})))};if(e.$watchGroup(["item","entity"],u),i){var c=setInterval(u,i);e.$on("$destroy",(function(){clearInterval(c)}))}}}}]),A.directive("cameraStream",["Api",function(t){return{restrict:"AE",replace:!0,scope:{item:"=item",entity:"=entity",freezed:"=freezed"},link:function(e,n,r){var i=null,a=null;e.$watch("entity",(function(){"off"!==e.entity.state&&t.send({type:"camera/stream",entity_id:e.entity.entity_id},(function(t){t.result&&function(t){var r=document.createElement("video");r.style.objectFit=e.item.objFit||"fill",r.style.width="100%",r.style.height="100%",r.muted="muted";var o=e.item.bufferLength||5,s={maxBufferLength:o,maxMaxBufferLength:o};a&&a.destroy(),(a=new it(s)).loadSource(t),a.attachMedia(r),a.on(it.Events.MANIFEST_PARSED,(function(){r.play()})),i&&n[0].removeChild(i),n[0].appendChild(r),i=r}(u(t.result.url))}))})),e.$on("$destroy",(function(){a&&a.destroy()}))}}}]),A.directive("clock",["$interval",function(t){return{restrict:"AE",replace:!0,link:function(t,e,n){var r=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),s=document.createElement("div");r.classList.add("clock--m"),i.classList.add("clock--h"),s.classList.add("clock--postfix"),a.classList.add("clock--colon"),a.textContent=":";var l=function(){var t=new Date,e=t.getHours(),n=t.getMinutes(),a="";12===window.CONFIG.timeFormat?(a=e>=12?"PM":"AM",e=e%12||12):e=o(e),i.textContent=e,r.textContent=o(n),s.textContent=a};e[0].appendChild(i),e[0].appendChild(a),e[0].appendChild(r),e[0].appendChild(s),l();var u=setInterval(l,1e3);t.$on("$destroy",(function(){clearInterval(u)}))}}}]),A.directive("iframeTile",["$interval",function(t){return{restrict:"A",replace:!1,scope:{item:"=iframeTile"},link:function(t,e,n){var r=e[0];if(t.item.refresh){var i=t.item.refresh;"function"==typeof i&&(i=i()),i=Math.max(1e3,i);var a=setInterval((function(){r.src=r.src}),i);t.$on("$destroy",(function(){clearInterval(a)}))}}}}]),A.directive("headerItem",["$interval",function(t){return{restrict:"AE",replace:!1,scope:"=",templateUrl:"header-items.html",link:function(t,e,n){}}}]),A.directive("date",["$interval",function(t){return{restrict:"AE",replace:!0,scope:{format:"="},template:'<div class="date" ng-bind="date|date:format"></div>',link:function(e,n,r){e.format=e.format||"EEEE, LLLL dd",e.date=new Date,t((function(){e.date=new Date}),6e4)}}}]),A.directive("onScroll",[function(){return{restrict:"A",scope:{onScrollModel:"="},link:function(t,e,n){var r=!1,i=!1,a=function(){var n=0!==e[0].scrollLeft,a=0!==e[0].scrollTop;return(i!==a||r!==n)&&(t.onScrollModel.scrolledHorizontally=r=n,t.onScrollModel.scrolledVertically=i=a,!0)};a(),e.on("scroll",(function(){a()&&t.$apply()}))}}}]),A.directive("ngMin",(function(){return{restrict:"A",require:"ngModel",link:function(t,e,n){e.attr("min",n.ngMin)}}})),A.directive("ngMax",(function(){return{restrict:"A",require:"ngModel",link:function(t,e,n){e.attr("max",n.ngMax)}}})),A.controller("Main",["$scope","$timeout","$location","Api",function(t,e,n,r){if(window.CONFIG){var a=window.CONFIG;t.pages=a.pages,t.pagesContainerStyles={},t.TYPES=p,t.FEATURES=v,t.HEADER_ITEMS=g,t.activeSelect=null,t.screensaverShown=!1,t.ready=!1,t.errors=[],t.states={},t.activeDatetime=null,t.datetimeString=null,t.activeCamera=null,t.activeDoorEntry=null,t.activeIframe=null,t.activePopup=null,t.alarmCode=null,t.activeAlarm=null;var s=[],c={},m=null,S=null,w={},T=null,x=null,_={};t.entityClick=function(e,n,r){if("function"==typeof n.action)return I(n.action,[n,r]);switch(n.type){case p.SWITCH:case p.LIGHT:case p.FAN:case p.INPUT_BOOLEAN:return t.toggleSwitch(n,r);case p.LOCK:return t.toggleLock(n,r);case p.COVER_TOGGLE:return t.toggleCover(n,r);case p.VACUUM:return t.toggleVacuum(n,r);case p.AUTOMATION:return t.triggerAutomation(n,r);case p.SCRIPT:return t.callScript(n,r);case p.INPUT_SELECT:return t.toggleSelect(n,r);case p.CAMERA:case p.CAMERA_STREAM:case p.CAMERA_THUMBNAIL:return t.openCamera(n,r);case p.SCENE:return t.callScene(n,r);case p.DOOR_ENTRY:return t.openDoorEntry(n,r);case p.ALARM:return t.openAlarm(n,r);case p.DIMMER_SWITCH:return t.dimmerToggle(n,r);case p.POPUP_IFRAME:return t.openPopupIframe(n,r);case p.POPUP:return t.openPopup(n,r,n.popup);case p.INPUT_DATETIME:return t.openDatetime(n,r)}},t.entityLongPress=function(e,n,r,i){if("function"==typeof r.secondaryAction)return I(r.secondaryAction,[r,i]);if(r.history)return t.openPopupHistory(r,i);switch(r.type){case p.LIGHT:return t.openLightSliders(r,i);default:if(i&&i.entity_id)return t.openPopupHistory(r,i)}},t.getBodyClass=function(){if(!S){if(S=[],a.customTheme){var t=a.customTheme;"string"==typeof t&&(t=[t]),t.map((function(t){S.push("-theme-"+t)}))}a.entitySize&&S.push("-"+a.entitySize+"-entity");var e=a.menuPosition||y.LEFT,n=a.groupsAlign||b.HORIZONTALLY;S.push("-menu-"+e),S.push("-groups-align-"+n),a.hideScrollbar&&S.push("-hide-scrollbar")}var r=[];return T&&(T.scrolledHorizontally&&r.push("-scrolled-horizontally"),T.scrolledVertically&&r.push("-scrolled-vertically")),S.concat(r)},t.getItemEntity=function(e){return"object"===rt(e.id)?e.id:e.id in t.states?t.states[e.id]:(function(t){var e=t.id+"_not_found";a.ignoreErrors||k.hasSeenNoteId(e)||k.addObject({type:k.WARNING,title:"Entity not found",message:'Entity "'+t.id+'" not found',id:e})}(e),null)},t.getCameraEntityFullscreen=function(e){var n=e.fullscreen.id;return void 0===n&&(n=e.id),"object"===rt(n)?n:t.states[n]},t.getEntryCameraEntity=function(e){var n=e.layout.camera;return"object"===rt(n.id)?n.id:t.states[n.id]},t.showPage=function(t){return-1!==s.indexOf(t)},t.hasTrackerCoords=function(t){return!!t.attributes&&(t.attributes.longitude||t.attributes.latitude)},t.slideMapStyles=function(t,e,n,r,i){var o="mapStyles"+r+(t.width||"1")+(t.height||"1");if(!n[o]){var s=t.width||1,l=t.height||1,u=e.tileSize||a.tileSize,c=n.friendly_name||" ";if(!n.longitude&&!n.latitude)return null;var f,p,g,m=n.longitude+","+n.latitude,v=Math.ceil(u*s)+","+Math.ceil(u*l+80);if(t.map===d){var y="round";"home"===i.toLowerCase()?y="home":"office"===i.toLowerCase()&&(y="work"),f="https://static-maps.yandex.ru/1.x/?lang=en-US&ll="+m+"&z="+r+"&l=map&size="+v+"&pt="+(m+","+y)}else if(t.map===h){m=n.longitude+","+n.latitude,v=v.replace(",","x"),g="pin-s-"+(p=c[0].toLowerCase())+"("+n.longitude+","+n.latitude+")";var b="mapbox/streets-v11";if(a.mapboxStyle){var S=/^mapbox:\/\/styles\/(.+)$/.exec(a.mapboxStyle);S.length>1&&(b=S[1])}f="https://api.mapbox.com/styles/v1/"+b+"/static/"+g+"/"+m+","+r+",0/"+v,a.mapboxToken&&(f+="?access_token="+a.mapboxToken)}else m=n.latitude+","+n.longitude,v=v.replace(",","x"),p=c[0].toUpperCase(),f="https://maps.googleapis.com/maps/api/staticmap?center="+m+"&zoom="+r+"&size="+v+"&scale=2&maptype=roadmap&markers="+(g=encodeURIComponent("color:gray|label:"+p+"|"+m)),a.googleApiKey&&(f+="&key="+a.googleApiKey);n[o]={backgroundImage:"url('"+f+"')"}}return n[o]},t.clockStyles=function(){return a.clockStyles},t.pageStyles=function(e,n){if(!e.styles){var r={};if(e.bg){var i=N(e.bg,e,{});i&&(r.backgroundImage='url("'+i+'")')}else if(e.bgSuffix){var o=N(e.bgSuffix,e,{});o&&(r.backgroundImage='url("'+u(o)+'")')}(a.transition===f.ANIMATED||a.transition===f.ANIMATED_GPU)&&n>0&&!t.isMenuOnTheLeft&&(r.position="absolute",r.left=100*n+"%",r.top="0"),e.styles=r}return e.styles},t.showPagesMenu=function(){return a.pages.length>1},t.pagesMenuClasses=function(){var t=a.menuPosition;return t||(t=y.LEFT),"-"+t},t.trackerZoomLevels=function(t,e){return e.zoomLevels||(e.zoomLevels=[9,13],t.zoomLevels&&(e.zoomLevels=t.zoomLevels)),e.zoomLevels},t.trackerSlidesClass=function(e,n){var r=t.trackerZoomLevels(e,n).length;return t.showTrackerBg(e,n)&&r++,"-c"+r},t.trackerBg=function(t){if(!t.trackerBg){var e={};t.attributes.entity_picture&&(e.backgroundImage='url("'+u(t.attributes.entity_picture)+'")'),t.trackerBg=e}return t.trackerBg},t.showTrackerBg=function(t,e){return!!e.attributes.entity_picture&&!t.hideEntityPicture},t.groupStyles=function(t,e){if(!t.styles){var n=e.tileSize||a.tileSize,r=e.tileMargin||a.tileMargin;if(!("width"in t)||!("height"in t)){var i=function(t){for(var e=0,n=0,r=0;r<(t.items||[]).length;r++){var i=t.items[r];n=Math.max(n,i.position[1]+(i.height||1)),e=Math.max(e,i.position[0]+(i.width||1))}return{width:e,height:n}}(t);t.width||(t.width=i.width),t.height||(t.height=i.height)}var o={width:n*t.width+r*(t.width-1)+"px",height:n*t.height+r*(t.height-1)+"px"};e.groupMarginCss?o.margin=e.groupMarginCss:t.groupMarginCss?o.margin=t.groupMarginCss:a.groupMarginCss&&(o.margin=a.groupMarginCss),t.styles=o}return t.styles},t.itemStyles=function(t,e,n){var r,i=(e._prevTileSize||t.tileSize||a.tileSize)!==(t.tileSize||a.tileSize);if(!e.styles||i){var o=e.width||1,s=e.height||1,l=e.position,u=t.tileSize||a.tileSize,c=t.tileMargin||a.tileMargin;e._prevTileSize=u;var d={width:u*o+c*(o-1)+"px",height:u*s+c*(s-1)+"px",left:l[0]*u+c*l[0]+"px",top:l[1]*u+c*l[1]+"px"};e.styles=d}if(e.customStyles&&("function"==typeof e.customStyles?r=I(e.customStyles,[e,n]):"object"===rt(e.customStyles)&&(r=e.customStyles),r))for(var h in r)e.styles[h]=r[h];return e.styles},t.itemBgStyles=function(t,e){var n=e.attributes||e;if(!n.bgStyles){var r,i={};"bgOpacity"in t&&(i.opacity=N(t.bgOpacity,t,e)),t.bg?(r=N(t.bg,t,e))&&(i.backgroundImage="url("+r+")"):t.bgSuffix&&(r=N(t.bgSuffix,t,e))&&(i.backgroundImage='url("'+u(r)+'")'),n.bgStyles=i}return n.bgStyles},t.itemClasses=function(e){var n,r=t.getItemEntity(e);return e._classes||(e._classes=[]),e._classes.length=0,e._classes.push("-"+e.type),e._classes.push("-"+((n=r.state)&&"string"==typeof n?n.replace(/[^a-z0-9]/gi,"_").toLowerCase():"non")),e.theme?e._classes.push("-th-"+e.theme):e._classes.push("-th-"+e.type),e.classes&&e.classes.forEach((function(t){e._classes.push(t)})),e.loading&&e._classes.push("-loading"),t.selectOpened(e)&&e._classes.push("-top-entity"),e._classes},t.entityState=function(t,e){if(!1===t.state)return null;if(void 0!==t.state)return"string"==typeof t.state?B(t.state,e):"function"==typeof t.state?I(t.state,[t,e]):t.state;if("function"==typeof t.states)return I(t.states,[t,e]);if("object"===rt(t.states))return t.states[e.state]||e.state;var n=e.attributes?e.attributes.unit_of_measurement:"";return e.state+(n?" "+n:"")},t.entityIcon=function(t,e){var n=N(e.state,t,e);return!n&&t.state&&(n=N(t.state,t,e)),t.icon&&(n=N(t.icon,t,e)),t.icons?"function"==typeof t.icons?I(t.icons,[t,e]):t.icons[n]||null:n},t.entityTitle=function(t,e){return"title"in t?F("title",t,e):e.attributes?e.attributes.friendly_name:null},t.itemField=function(t,e,n){return F(t,e,n)},t.entityUnit=function(t,e){return"unit"in t?F("unit",t,e):e.attributes?e.attributes.unit_of_measurement:null},t.entitySubtitle=function(t,e){return F("subtitle",t,e)},t.entityValue=function(t,e){var n=e.state;return t.value&&(n=F("value",t,e)),"function"==typeof t.filter?I(t.filter,[n,t,e]):n},t.climateTarget=function(t,e){var n=e.attributes.temperature||[e.attributes.target_temp_low,e.attributes.target_temp_high].join(" - ");return t.filter?t.filter(n):n},t.listField=function(t,e,n){var r=N(n[t],e,n);return"function"==typeof e.filter?I(e.filter,[r,t,e]):r},t.getWeatherField=function(t,e,n){var r=e.fields;return r&&r[t]?N(r[t],e,n):null},t.getWeatherLine=function(t,e,n){return t?N(t,e,n):null},t.getWeatherIcon=function(e,n){var r;if((e.icon||e.icons)&&(r=t.entityIcon(e,n)),r||(r=t.getWeatherField("icon",e,n))&&console.warn("`icon` field inside fields is deprecated for WEATHER tile, please move it to the tile object"),!r)return null;var i=e.icons;return!i&&e.fields.iconMap&&(i=e.fields.iconMap,r&&console.warn("`iconMap` field inside fields is deprecated for WEATHER tile, please move it to the tile object as `icons`")),"function"==typeof i?I(i,[r,e,n]):i&&i[r]||r},t.getWeatherImageStyles=function(t,e){if(!t.iconImage)return null;var n=N(t.iconImage,t,e);return"function"==typeof t.icons&&(n=I(t.icons,[n,t,e])),t.icons&&n in t.icons&&(n=t.icons[n]),n?(t._imgStyles||(t._imgStyles={}),t._imgStyles.backgroundImage='url("'+n+'")',t._imgStyles):null},t.weatherListField=function(t,e,n,r){return e&&e[t]?N(e[t],n,r):null},t.weatherListIcon=function(e,n,r){var i=t.weatherListField("icon",e,n,r);return i?"function"==typeof n.icons?I(n.icons,[i,n,r]):n.icons&&n.icons[i]||i:null},t.weatherListImageStyles=function(e,n,r){var i=t.weatherListField("iconImage",e,n,r);return i?("function"==typeof n.icons&&(i=I(n.icons,[i,n,r])),n.icons&&i in n.icons&&(i=n.icons[i]),i?(e._imgStyles||(e._imgStyles={}),e._imgStyles.backgroundImage='url("'+i+'")',e._imgStyles):null):null},t.slidesStyles=function(t,e){return t.slidesStyles||(t.slidesStyles={"animation-delay":(t.slidesDelay||.8*e)+"s"},"bgOpacity"in t&&(t.slidesStyles.opacity=t.bgOpacity)),t.slidesStyles},t.slideStyles=function(t,e,n){if(!t.slideStyles){var r={};if(t.bg){var i=N(t.bg,e,n);i&&(r.backgroundImage="url("+i+")")}t.slideStyles=r}return t.slideStyles},t.itemSelectStyles=function(t,e){if(!t.itemSelectStyles){var n={};e&&(n.marginTop=-Math.min(17*e.length,180)+"px"),t.itemSelectStyles=n}return t.itemSelectStyles},t.getMainStyles=function(){return w},t.getHeader=function(t){return t?t.header:a.header},t.getSliderConf=function(t,n){if(n.attributes||(n.attributes={}),n.attributes._c)return n.attributes._c;var r=t.slider||{},i=n.attributes||{},a=+i[r.field]||0;return n.attributes._c={max:i.max||r.max||100,min:i.min||r.min||0,step:i.step||r.step||1,value:a||+n.state||r.value||0,request:r.request||{domain:"input_number",service:"set_value",field:"value"}},e((function(){t._sliderInited=!0}),50),n.attributes._c},t.getLightSliderConf=function(t,n){var r="_c_"+t.field;if(n.attributes||(n.attributes={}),n.attributes[r])return n.attributes[r];var i=t||{},a=n.attributes,o=+a[i.field]||0;return n.attributes[r]={max:i.max||a.max||100,min:i.min||a.min||0,step:i.step||a.step||1,value:o||i.min||a.min||0,request:i.request||{domain:"input_number",service:"set_value",field:"value"}},e((function(){n.attributes._sliderInited=!0,t._sliderInited=!0}),100),e((function(){n.attributes._sliderInited=!0}),0),n.attributes[r]},t.getVolumeConf=function(t,n){if(n.attributes||(n.attributes={}),n.attributes._c)return n.attributes._c;var r=100,i=0,a=2,o=n.attributes,s=100*o.volume_level||0;return"volume_level"in o&&(n.attributes._c={max:o.max||r||100,min:o.min||i||0,step:o.step||a||1,value:s||0},e((function(){n.attributes._sliderInited=!0}),50),n.attributes._c)},t.getLightSliderValue=function(t,e){return t.formatValue?t.formatValue(e):e.value},t.openLightSliders=function(n,r){if(n.sliders&&n.sliders.length||n.colorpicker)return"on"!==r.state?t.toggleSwitch(n,r,(function(){e((function(){"on"===r.state&&t.openLightSliders(n,r)}),0)})):void(n.controlsEnabled||(n.controlsEnabled=!0,e((function(){n._controlsInited=!0}),50)))},t.closeLightSliders=function(t,e,n){return t.preventDefault(),t.stopPropagation(),e.controlsEnabled=!1,e._controlsInited=!1,!1},t.preventClick=function(t){return t.preventDefault(),t.stopPropagation(),!1},t.supportsFeature=function(t,e){if(!("supported_features"in e.attributes))return!1;var n=e.attributes.supported_features;return(n|t)===n},t.isDisarmed=function(t){return-1===["disarmed"].indexOf(t.state)},t.shouldShowVolumeSlider=function(e){return t.supportsFeature(v.MEDIA_PLAYER.VOLUME_SET,e)&&"volume_level"in e.attributes&&"off"!==e.state},t.shouldShowVolumeButtons=function(e){return(!t.supportsFeature(v.MEDIA_PLAYER.VOLUME_SET,e)||!("volume_level"in e.attributes))&&t.supportsFeature(v.MEDIA_PLAYER.VOLUME_STEP,e)&&"off"!==e.state};var E={backgroundColor:"rgba(0, 0, 0, 0.1)",foregroundColor:"rgba(0, 150, 136, 1)",size:function(t){return a.tileSize*(t.height<t.width?t.height:t.width)*.8},duration:1500,thick:6,type:"full",min:0,max:100,cap:"butt",thresholds:{}};t.getGaugeField=function(t,e,n){return e?e.settings&&t in e.settings?N(e.settings[t],e,n):t in E?N(E[t],e,n):null:null},t.itemURL=function(t,e){return"function"==typeof t.url?I(t.url,[t,e]):t.url};var $=l((function(t,e,n){if(!n.request)return;var r=n.request,i={};i[r.field]=n.value,P(t,r.domain,r.service,i)}),250);t.sliderChanged=function(t,e,n){t._sliderInited&&$(t,e,n)},t.volumeChanged=function(t,e,n){if(e.attributes._sliderInited){var r={value:n.value/100,request:{domain:"media_player",service:"volume_set",field:"volume_level"}};$(t,e,r)}},t.lightSliderChanged=function(t,e,n,r){e._controlsInited&&t._sliderInited&&n.attributes._sliderInited&&$(e,n,r)},t.toggleSwitch=function(t,e,n){if(t.type!==p.LIGHT||!t.controlsEnabled){var r="homeassistant",i=t.id.split(".")[0];-1!==["switch","light","fan"].indexOf(i)&&(r=i);var a="toggle";"off"===e.state?a="turn_on":"on"===e.state&&(a="turn_off"),P(t,r,a,{},n)}},t.dimmerToggle=function(e,n,r){e.action?I(e.action,[e,n,r]):i.isString(e.id)&&n&&t.toggleSwitch(e,n,r)},t.dimmerAction=function(t,e,n,r){e.preventDefault(),e.stopPropagation();var i="action"+("plus"===t?"Plus":"Minus");return n[i]&&I(n[i],[n,r,e]),!1},t.toggleLock=function(t,e){var n;"locked"===e.state?n="unlock":"unlocked"===e.state&&(n="lock"),P(t,"lock",n,{})},t.toggleVacuum=function(t,e){var n;"off"===e.state?n="turn_on":"on"===e.state?n="turn_off":-1!==["idle","docked","paused"].indexOf(e.state)?n="start":"cleaning"===e.state&&(n="return_to_base"),P(t,"vacuum",n,{})},t.triggerAutomation=function(t,e){P(t,"automation","trigger",{})},t.sendPlayer=function(t,e,n){P(e,"media_player",t,{})},t.mutePlayer=function(t,e,n){P(e,"media_player","volume_mute",{is_volume_muted:t})},t.callScript=function(t,e){P(t,"script","turn_on",{variables:"function"==typeof t.variables?I(t.variables,[t,e]):t.variables||{}})},t.callScene=function(t,e){P(t,"scene","turn_on",{})},t.increaseBrightness=function(e,n,r){if(e.preventDefault(),e.stopPropagation(),"off"===r.state)return!1;if(!("brightness"in r.attributes))return j("No brightness field in object");var i=+r.attributes.brightness+25.5;return i=Math.min(i,255),t.setLightBrightness(n,i),!1},t.decreaseBrightness=function(e,n,r){if(e.preventDefault(),e.stopPropagation(),"off"===r.state)return!1;if(!("brightness"in r.attributes))return j("No brightness field in object");var i=+r.attributes.brightness-25.5;return i=Math.max(i,1),t.setLightBrightness(n,i),!1},t.increaseNumber=function(e,n,r){e.preventDefault(),e.stopPropagation();var i=parseFloat(r.state);return i+=r.attributes.step||1,r.attributes.max&&(i=Math.min(i,r.attributes.max)),t.setInputNumber(n,i),!1},t.decreaseNumber=function(e,n,r){e.preventDefault(),e.stopPropagation();var i=parseFloat(r.state);return i-=r.attributes.step||1,r.attributes.min&&(i=Math.max(i,r.attributes.min)),t.setInputNumber(n,i),!1},t.setLightBrightness=function(t,e){P(t,"light","turn_on",{brightness_pct:10*Math.round(e/255*100/10)})},t.getRGBStringFromArray=function(t){return t?"rgb("+t[0]+","+t[1]+","+t[2]+")":null},t.getRGBArrayFromString=function(t){return t&&0===t.indexOf("rgb")?(e=0===t.indexOf("rgba")?t.substring(t.indexOf("(")+1,t.lastIndexOf(",")).split(","):t.substring(t.indexOf("(")+1,t.indexOf(")")).split(","),[parseInt(e[0]),parseInt(e[1]),parseInt(e[2])]):null;var e},t.setLightColor=function(e,n){var r=t.getRGBArrayFromString(n);r&&P(e,"light","turn_on",{rgb_color:r})},t.$on("colorpicker-colorupdated",(function(e,n){t.setLightColor(n.item,n.color)})),t.setInputNumber=function(t,e){P(t,"input_number","set_value",{value:e})},t.setSelectOption=function(e,n,r,i){return e.preventDefault(),e.stopPropagation(),P(n,"input_select","select_option",{option:i}),t.closeActiveSelect(),!1},t.setSourcePlayer=function(e,n,r,i){return e.preventDefault(),e.stopPropagation(),P(n,"media_player","select_source",{source:i}),t.closeActiveSelect(),!1},t.getClimateOptions=function(t,e){return t.useHvacMode?e.attributes.hvac_modes:e.attributes.preset_modes},t.getClimateCurrentOption=function(t,e){return t.useHvacMode?e.attributes.hvac_mode:e.attributes.preset_mode},t.setClimateOption=function(e,n,r,i){var a;e.preventDefault(),e.stopPropagation();var o={};return n.useHvacMode?(a="set_hvac_mode",o.hvac_mode=i):(a="set_preset_mode",o.preset_mode=i),P(n,"climate",a,o),t.closeActiveSelect(),!1},t.increaseClimateTemp=function(e,n,r){e.preventDefault(),e.stopPropagation();var i=parseFloat(r.attributes.temperature);return i+=r.attributes.target_temp_step||1,r.attributes.max_temp&&(i=Math.min(i,r.attributes.max_temp)),t.setClimateTemp(n,i),!1},t.decreaseClimateTemp=function(e,n,r){e.preventDefault(),e.stopPropagation();var i=parseFloat(r.attributes.temperature);return i-=r.attributes.target_temp_step||1,r.attributes.min_temp&&(i=Math.max(i,r.attributes.min_temp)),t.setClimateTemp(n,i),!1},t.setClimateTemp=function(t,e){P(t,"climate","set_temperature",{temperature:e})},t.sendCover=function(t,e,n){P(e,"cover",t,{})},t.toggleCover=function(e,n){var r;"open"===n.state?r="close_cover":"closed"===n.state&&(r="open_cover"),r&&t.sendCover(r,e,n)},t.openFanSpeedSelect=function(e,n){e.preventDefault(),e.stopPropagation(),t.openSelect(n)},t.setFanSpeed=function(e,n,r,i){return e.preventDefault(),e.stopPropagation(),P(n,"fan","set_speed",{speed:i}),t.closeActiveSelect(),!1},t.actionAlarm=function(e,n,r){var i=t.alarmCode,a={};i&&(a.code=i),c[n.id]=Date.now(),P(n,"alarm_control_panel",e,a),t.alarmCode=null},t.openPage=function(r,i){i=i||!1,s=[],T&&(s=[T]),s.push(r),T=r,a.transition===f.SIMPLE||e((function(){M(i)}),20),a.rememberLastPage&&n.hash(t.pages.indexOf(r))},t.openCamera=function(e){t.activeCamera=e},t.closeCamera=function(){t.activeCamera=null},t.openDatetime=function(e,n){if(t.activeDatetime=e,n.attributes&&n.attributes.has_date){var r=new Date;t.datetimeString=r.getFullYear()+"",t.datetimeString+=o(r.getMonth()+1),t.datetimeString+=o(r.getDate())}},t.closeDatetime=function(){t.activeDatetime=null,t.datetimeString=null},t.getPopupIframeStyles=function(){if(!t.activeIframe||!t.activeIframe.iframeStyles)return null;var e=t.getItemEntity(t.activeIframe),n=t.itemField("iframeStyles",t.activeIframe,e);if(!n)return null;for(var r in _)delete _[r];for(r in n)_[r]=n[r];return _},t.openPopupIframe=function(e,n){t.activeIframe=e},t.closePopupIframe=function(){t.activeIframe=null},t.openPopup=function(e,n,r){t.activePopup={item:e,entity:n,layout:r||e.popup}},t.closePopup=function(){t.activePopup=null},t.initTileHistory=function(e,n){var a="_historyObject";return e[a]||(e[a]=function(e,n,a){var o={item:i.copy(e),config:i.copy(a),isLoading:!0,errorText:null,watchers:[],deregister:function(){o.watchers.forEach((function(t){t()}))}},s=t.itemField("entity",a,n)||n.entity_id;if(!s)return o.errorText="No entity was specified",o;var l=new Date(Date.now()-(t.itemField("offset",a,n)||864e5)).toISOString();return r.getHistory(l,s).then((function(e){if(o.isLoading=!1,e)if(0!==e.length){var r=[],l=[],u=[],c={};e.forEach((function(e){var n=e[0],i=e.map((function(t){return{x:new Date(t.last_changed),y:t.state}}));i.push({x:Date.now(),y:t.states[n.entity_id].state}),r.push(i);var a=n.attributes.friendly_name,o=n.attributes.unit_of_measurement,s=Number.isNaN(parseFloat(i[i.length-1].y))?"category":"linear",d=s+(o?"-"+o:""),h=!1;if(o&&!(o in c)?(c[o]=!0,h=!0):o||(h=!0),h){var f=null;"category"===s&&(f=[],i.forEach((function(t){-1===f.indexOf(t.y)&&f.push(t.y)})),f.sort().reverse(),1===f.length&&(-1!==["on","off"].indexOf(f[0])?f=["on","off"]:(f.push(""),f.unshift("")))),u.push({type:s,labels:f,id:d})}l.push({label:o?a+" / "+o:a,yAxisID:d})}));var d=r.length>1?"nearest":"index";o.data=r,o.datasetOverride=l,o.options=i.merge({scales:{yAxes:u},tooltips:{mode:d},hover:{mode:d},animation:{duration:0},legend:{display:"string"!=typeof s}},t.itemField("options",a,n)),"string"==typeof s?o.watchers.push(t.$watch((function(){return t.states[s].state}),(function(t){o.data[0].push({x:Date.now(),y:t})}))):s.forEach((function(e,n){o.watchers.push(t.$watch((function(){return t.states[e].state}),(function(t){o.data[n].push({x:Date.now(),y:t})})))}))}else o.errorText="No history data found";else o.errorText="Failed"})),o}(e,n,e)),e[a]},t.openPopupHistory=function(e,n){var r="_popupHistory";return e[r]||(e[r]={styles:{width:"100vw",height:"56vw",margin:0,maxWidth:"100%"},items:[i.merge({type:p.HISTORY,id:e.id,title:!1,position:[0,0],customStyles:{width:"100%",height:"100%"}},e.history)]}),t.openPopup(e,n,e[r])},t.openDoorEntry=function(n,r){t.activeDoorEntry=n,m&&clearTimeout(m),a.doorEntryTimeout&&(m=e((function(){t.closeDoorEntry()}),1e3*a.doorEntryTimeout))},t.closeDoorEntry=function(){t.activeDoorEntry=null,m&&clearTimeout(m)},t.openAlarm=function(e){t.activeAlarm=e,t.alarmCode=null},t.closeAlarm=function(){t.activeAlarm=null,t.alarmCode=null},t.getCameraList=function(){if(x)return x;var e=[];return t.pages.forEach((function(t){(t.groups||[]).forEach((function(t){(t.items||[]).forEach((function(t){-1===[p.CAMERA,p.CAMERA_THUMBNAIL,p.CAMERA_STREAM].indexOf(t.type)||t.hideFromList||e.push(t)}))}))})),x=e,e},t.isPageActive=function(t){return T===t},t.shouldDrawPage=function(e){return a.transition!==f.SIMPLE||t.isPageActive(e)},t.isHidden=function(t,e){return"hidden"in t&&("function"==typeof t.hidden?I(t.hidden,[t,e]):t.hidden)},t.isMenuOnTheLeft=a.menuPosition===y.LEFT;var A=!1;t.onPageScroll=function(){return A=!0,!0},t.isPanEnabled=function(e,n){if(!(t.activeCamera||t.activeDoorEntry||t.activeIframe||t.activePopup))return!n||"touch"!==n.pointerType||(n.isFirst&&(A=!1),!A)},t.onPagePan=function(e){if(e.eventType&(C.INPUT_END|C.INPUT_CANCEL)){if(t.pagesContainerStyles.transition=null,e.eventType===C.INPUT_CANCEL)return void M()}else t.pagesContainerStyles.transition="none";var n=t.pages.length,r=t.pages.indexOf(T),i=100*-r,a=t.isMenuOnTheLeft?window.innerHeight:window.innerWidth,o=t.isMenuOnTheLeft?e.deltaY:e.deltaX,s=o/a*100,l=i+s;if(e.isFinal){var u=r,c=t.isMenuOnTheLeft?e.velocityY:e.velocityX;if(Math.abs(s)>=50||Math.abs(c)>.5&&c<0==o<0){var d=u+(l<i?1:-1);d>=0&&d<n&&(u=d)}t.openPage(t.pages[u])}else l<=0&&l>=-100*(n-1)&&(t.pagesContainerStyles.transform=R(l+"%"))},t.toggleSelect=function(e){t.selectOpened(e)?t.closeActiveSelect():t.openSelect(e)},t.openSelect=function(e){t.activeSelect=e},t.closeActiveSelect=function(){t.activeSelect=null},t.selectOpened=function(e){return t.activeSelect===e},t.inputAlarm=function(e){t.alarmCode=t.alarmCode||"",t.alarmCode+=e},t.clearAlarm=function(){t.alarmCode=""},t.sendDatetime=function(){if(t.activeDatetimeValid()){var e=t.activeDatetime,n=t.getItemEntity(e),r=t.getActiveDatetimeInput().split(" "),i={};n.attributes.has_date&&(i.date=r[0]),n.attributes.has_time&&(i.time=r[1]||r[0]),P(e,"input_datetime","set_datetime",i)}},t.inputDatetime=function(e){var n=t.getItemEntity(t.activeDatetime);if(n){var r=O(n);r=r.replace(/\W/gi,""),t.datetimeString=t.datetimeString||"",t.datetimeString.length>=r.length||(t.datetimeString+=e)}},t.clearCharDatetime=function(){t.datetimeString&&(t.datetimeString=t.datetimeString.slice(0,t.datetimeString.length-1))},t.getActiveDatetimeInput=function(){var e=O(t.getItemEntity(t.activeDatetime)),n=t.datetimeString||"",r=0;return e.replace(/\w|\W/gi,(function(t,e){return r>=n.length?"":/\W/.test(t)?t:n[r++]}))},t.getActiveDatetimePlaceholder=function(){var e=O(t.getItemEntity(t.activeDatetime)),n=t.getActiveDatetimeInput()||"";return e.slice(n.length)},t.activeDatetimeValid=function(){var e=t.getItemEntity(t.activeDatetime);if(!e)return!1;var n=O(e);return n=n.replace(/\W/gi,""),t.datetimeString=t.datetimeString||"",t.datetimeString.length===n.length};var D=!1;r.onError((function(t){console.error(t),j(t.message)})),r.onReady((function(){r.subscribeEvents("state_changed",(function(t){H("subscribed to state_changed",t)})),r.subscribeEvents("tileboard",(function(t){H("subscribed to tileboard",t)})),r.getStates((function(e){e.success&&(H(e.result),e.result.forEach((function(e){t.states[e.entity_id]=e}))),t.ready=!0,D=!0,I(a.onReady);var r=n.hash();a.rememberLastPage&&t.pages[r]||(r=0),t.openPage(t.pages[r],!0),W()}))})),r.onUnready((function(){D=!1,e((function(){!1===D&&(t.ready=!1)}),1e3)})),r.onMessage((function(e){!function(e){"event"===e.type&&function(e){try{"state_changed"===e.event_type?(H("state change",e.data.entity_id,e.data.new_state),function(e,n){t.states[e]||(t.states[e]=n);for(var r in n)t.states[e][r]=n[r]}(e.data.entity_id,e.data.new_state),function(e,n){!function(e,n){if(e in c){var r=c[e];Date.now()-r<3e3&&(t.closeAlarm(),W())}}(e)}(e.data.entity_id,e.data.new_state)):"tileboard"===e.event_type&&(H("tileboard",e.data),function(t){if(!a.events)return;a.events.forEach((function(e){t.command===e.command&&"function"==typeof e.action&&I(e.action,[t])}))}(e.data))}catch(t){console.error(t)}W()}(e.event)}(e)})),i.element(window).on("view:updated",(function(){W()})),t.$watchGroup(["activePage.scrolledVertically","activePage.scrolledHorizontally"],W),window.openPage=function(e){t.openPage(e),W()},window.setScreensaverShown=function(e){t.screensaverShown=e,W()},!1!==a.pingConnection&&(setInterval(z,5e3),window.addEventListener("focus",(function(){z()})))}function M(n){var r="-"+100*t.pages.indexOf(T)+"%";t.pagesContainerStyles.transform=R(r),n&&(t.pagesContainerStyles.transition="none",e((function(){t.pagesContainerStyles.transition=null}),50))}function R(e){return a.transition===f.ANIMATED_GPU?"translate3d("+(t.isMenuOnTheLeft?[0,e,0]:[e,0,0]).join(",")+")":a.transition===f.ANIMATED?"translate("+(t.isMenuOnTheLeft?[0,e]:[e,0]).join(",")+")":void 0}function O(t){var e=[];return t&&t.attributes?(t.attributes.has_date&&e.push("YYYY-MM-DD"),t.attributes.has_time&&e.push("hh:mm"),e.join(" ")):null}function I(e,n){return"function"!=typeof e?e:e.apply(function(){return{states:t.states,$scope:t,parseFieldValue:N.bind(this),api:r,apiRequest:L.bind(this)}}(),n||[])}function L(t,e){r.send(t,(function(t){W(),e&&e(t)}))}function P(t,e,n,a,o){if(!t.loading){t.loading=!0;var s=i.extend({entity_id:t.id},a);r.callService(e,n,s,(function(e){t.loading=!1,W(),o&&o(e)}))}}function F(t,e,n){var r=e;return t.split(".").forEach((function(t){r="object"===rt(r)?r[t]:void 0})),N(r,e,n)}function N(t,e,n){return t?"function"==typeof t?I(t,[e,n]):"string"==typeof t?B(t,n):t:null}function U(e,n){return"@"===e[0]?V(n,e.slice(1)):"&"===e[0]?function(e){var n=e.split(".");if(n.length<3)return;return V(t.states[n.slice(0,2).join(".")]||null,n.slice(2).join("."))}(e.slice(1)):e}function B(t,e){return t.replace(/([&@][\w\d._]+)/gi,(function(n,r,i){if("&"===n[0]&&n.split(".").length<3)return n;var a=U(n,e);return void 0===a?n===t?"":n:null===a?"":a}))}function V(t,e){var n=t;return e.split(".").forEach((function(t){n="object"===rt(n)&&n?n[t]:void 0})),n}function j(t){a.ignoreErrors||k.addObject({type:k.ERROR,title:"Error",message:t,lifetime:10})}function H(){a.debug&&console.log.apply(console,[].slice.call(arguments))}function W(){t.$$phase||t.$apply()}function z(){if(t.ready&&!1!==D){var n=!1;r.sendPing((function(t){"id"in t&&(n=!0)})),e((function(){if(!n){D=!1;var t=k.addObject({type:k.WARNING,title:"Ping unsuccessful",message:"Trying to reconnect"});r.forceReconnect();var e=r.onReady((function(){e(),t&&t.remove(),k.addObject({type:k.SUCCESS,title:"Reconnection",message:"Reconnection successful",lifetime:1})}))}}),3e3)}}}]),A.controller("Noty",["$scope",function(t){var e=null;t.getNoties=function(){return k.noties},t.clearAll=function(){k.removeAll()},t.getNotiesClasses=function(){if(!e){e=[];var t=S.RIGHT;window.CONFIG&&window.CONFIG.notiesPosition&&(t=window.CONFIG.notiesPosition),e.push("-"+t)}return e},k.onUpdate((function(){t.$$phase||t.$digest()}))}]),A.controller("Screensaver",["$scope",function(t){if(!window.CONFIG)return;var e=i.element(window),n=Date.now(),r=window.CONFIG.screensaver||null;if(!r||!r.timeout)return;var o=0,s=r.slidesTimeout||1;function l(e){t.isShown=e,window.setScreensaverShown&&window.setScreensaverShown(e),t.$$phase||t.$digest()}t.now=new Date,t.isShown=!1,t.conf=r,t.slides=r.slides,t.getSlideClasses=function(e,n){n._classes||(n._classes=[]);var r=o===e+1||t.slides.length===e+1&&!o;return n._classes.length=0,o===e&&n._classes.push("-active"),r&&n._classes.push("-prev"),n._classes},t.hideScreensaver=function(){l(!1)},t.getSlideStyle=function(t){return t._styles||(t._styles={backgroundImage:"url("+t.bg+")"},t.styles&&(t._styles=a(t._styles,t.styles))),t._styles},setInterval((function(){var e=Date.now()-n,i=r.timeout<e/1e3;i===t.isShown||t.activeCamera||l(i)}),1e3),setInterval((function(){(o+=1)>=t.slides.length&&(o=0),t.isShown&&(t.now=new Date,t.$$phase||t.$digest())}),1e3*s),window.showScreensaver=function(){setTimeout((function(){n=0,l(!0)}),100)},window.hideScreensaver=function(){setTimeout((function(){n=Date.now(),l(!1)}),100)},e.bind("click keypress touchstart focus",(function(){n=Date.now()}))}]);var ot=document.createElement("script");ot.src="./config.js?r="+Date.now(),ot.onload=function(){return at(!0)},ot.onerror=function(){return at(!1)},document.head.appendChild(ot)}();
//# sourceMappingURL=app-e6cdca43.js.map
